import{r as m,j as e,$ as j,S as g,U as f,K as h}from"./index-BUHhnb4M.js";import{T as y,D as N}from"./trending-up-3VlZnV71.js";const C=({clients:i,users:b,startDate:x,endDate:d,onRangeChange:p})=>{const r=m.useMemo(()=>{const s=[];return i.forEach(t=>{t.purchasedProducts&&t.purchasedProducts.forEach(l=>{const a=l.purchaseDate;x&&a<x||d&&a>d||s.push({...l,clientName:t.companyName,clientId:t.id})})}),s.sort((t,l)=>(l.purchaseDate||"").localeCompare(t.purchaseDate||""))},[i,x,d]),n=m.useMemo(()=>{const s=r.reduce((a,c)=>a+(c.totalValue||c.price*(c.quantity||1)),0),t=new Set(r.map(a=>a.clientId)).size,l=r.reduce((a,c)=>a+(c.quantity||1),0);return{totalValue:s,uniqueClients:t,totalItems:l}},[r]),o=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),u=s=>{try{return s.split("-").reverse().join("/")}catch{return s}};return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50 p-4 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(y,{className:"text-primary w-6 h-6"}),"Histórico Mágico de Vendas"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Analise compras por anos, meses, semanas e dias"})]}),e.jsxs("div",{className:"bg-white p-2 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase ml-2",children:"Filtrar Período:"}),e.jsx(j,{startDate:x,endDate:d,onRangeChange:p})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-full flex items-center justify-center text-green-600",children:e.jsx(N,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Volume Total"}),e.jsx("p",{className:"text-xl font-bold text-gray-800",children:o(n.totalValue)})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center text-blue-600",children:e.jsx(g,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Total de Itens"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[n.totalItems," un."]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-full flex items-center justify-center text-purple-600",children:e.jsx(f,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Clientes Atendidos"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[n.uniqueClients," empresas"]})]})]})]}),e.jsx("div",{className:"flex-1 bg-white rounded-2xl shadow-sm border border-gray-100 flex flex-col overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-400 uppercase",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-400 uppercase",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-400 uppercase",children:"SKU / Produto"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-400 uppercase",children:"Qtd"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-400 uppercase text-right",children:"Valor Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:r.length>0?r.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-gray-300"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:u(s.purchaseDate)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm font-bold text-gray-800 truncate max-w-[200px]",title:s.clientName,children:s.clientName})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-primary",children:s.sku}),e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[250px]",title:s.name,children:s.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.quantity||1})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:"text-sm font-bold text-gray-900",children:o(s.totalValue||s.price*(s.quantity||1))})})]},t)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(h,{className:"w-12 h-12 text-gray-200 mb-2"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"Nenhuma venda encontrada para o período"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tente expandir o filtro de datas"})]})})})})]})})})]})};export{C as default};
