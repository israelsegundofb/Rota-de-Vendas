(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Hp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cx={exports:{}},yf={};var gw;function jD(){if(gw)return yf;gw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var o=null;if(a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:o,ref:s!==void 0?s:null,props:a}}return yf.Fragment=e,yf.jsx=n,yf.jsxs=n,yf}var xw;function HD(){return xw||(xw=1,cx.exports=jD()),cx.exports}var m=HD(),ux={exports:{}},bt={};var vw;function GD(){if(vw)return bt;vw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),v=Symbol.iterator;function T(Y){return Y===null||typeof Y!="object"?null:(Y=v&&Y[v]||Y["@@iterator"],typeof Y=="function"?Y:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,b={};function R(Y,H,Q){this.props=Y,this.context=H,this.refs=b,this.updater=Q||S}R.prototype.isReactComponent={},R.prototype.setState=function(Y,H){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,H,"setState")},R.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function B(){}B.prototype=R.prototype;function D(Y,H,Q){this.props=Y,this.context=H,this.refs=b,this.updater=Q||S}var L=D.prototype=new B;L.constructor=D,A(L,R.prototype),L.isPureReactComponent=!0;var z=Array.isArray;function O(){}var I={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(Y,H,Q){var te=Q.ref;return{$$typeof:t,type:Y,key:H,ref:te!==void 0?te:null,props:Q}}function F(Y,H){return N(Y.type,H,Y.props)}function U(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function M(Y){var H={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Q){return H[Q]})}var j=/\/+/g;function he(Y,H){return typeof Y=="object"&&Y!==null&&Y.key!=null?M(""+Y.key):H.toString(36)}function Se(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(O,O):(Y.status="pending",Y.then(function(H){Y.status==="pending"&&(Y.status="fulfilled",Y.value=H)},function(H){Y.status==="pending"&&(Y.status="rejected",Y.reason=H)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function ie(Y,H,Q,te,W){var le=typeof Y;(le==="undefined"||le==="boolean")&&(Y=null);var ge=!1;if(Y===null)ge=!0;else switch(le){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(Y.$$typeof){case t:case e:ge=!0;break;case h:return ge=Y._init,ie(ge(Y._payload),H,Q,te,W)}}if(ge)return W=W(Y),ge=te===""?"."+he(Y,0):te,z(W)?(Q="",ge!=null&&(Q=ge.replace(j,"$&/")+"/"),ie(W,H,Q,"",function(ke){return ke})):W!=null&&(U(W)&&(W=F(W,Q+(W.key==null||Y&&Y.key===W.key?"":(""+W.key).replace(j,"$&/")+"/")+ge)),H.push(W)),1;ge=0;var Ne=te===""?".":te+":";if(z(Y))for(var be=0;be<Y.length;be++)te=Y[be],le=Ne+he(te,be),ge+=ie(te,H,Q,le,W);else if(be=T(Y),typeof be=="function")for(Y=be.call(Y),be=0;!(te=Y.next()).done;)te=te.value,le=Ne+he(te,be++),ge+=ie(te,H,Q,le,W);else if(le==="object"){if(typeof Y.then=="function")return ie(Se(Y),H,Q,te,W);throw H=String(Y),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ge}function fe(Y,H,Q){if(Y==null)return Y;var te=[],W=0;return ie(Y,te,"","",function(le){return H.call(Q,le,W++)}),te}function ce(Y){if(Y._status===-1){var H=Y._result;H=H(),H.then(function(Q){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Q)},function(Q){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Q)}),Y._status===-1&&(Y._status=0,Y._result=H)}if(Y._status===1)return Y._result.default;throw Y._result}var K=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},Ie={map:fe,forEach:function(Y,H,Q){fe(Y,function(){H.apply(this,arguments)},Q)},count:function(Y){var H=0;return fe(Y,function(){H++}),H},toArray:function(Y){return fe(Y,function(H){return H})||[]},only:function(Y){if(!U(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return bt.Activity=x,bt.Children=Ie,bt.Component=R,bt.Fragment=n,bt.Profiler=s,bt.PureComponent=D,bt.StrictMode=r,bt.Suspense=u,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,bt.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return I.H.useMemoCache(Y)}},bt.cache=function(Y){return function(){return Y.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(Y,H,Q){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var te=A({},Y.props),W=Y.key;if(H!=null)for(le in H.key!==void 0&&(W=""+H.key),H)!C.call(H,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&H.ref===void 0||(te[le]=H[le]);var le=arguments.length-2;if(le===1)te.children=Q;else if(1<le){for(var ge=Array(le),Ne=0;Ne<le;Ne++)ge[Ne]=arguments[Ne+2];te.children=ge}return N(Y.type,W,te)},bt.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},bt.createElement=function(Y,H,Q){var te,W={},le=null;if(H!=null)for(te in H.key!==void 0&&(le=""+H.key),H)C.call(H,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(W[te]=H[te]);var ge=arguments.length-2;if(ge===1)W.children=Q;else if(1<ge){for(var Ne=Array(ge),be=0;be<ge;be++)Ne[be]=arguments[be+2];W.children=Ne}if(Y&&Y.defaultProps)for(te in ge=Y.defaultProps,ge)W[te]===void 0&&(W[te]=ge[te]);return N(Y,le,W)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(Y){return{$$typeof:c,render:Y}},bt.isValidElement=U,bt.lazy=function(Y){return{$$typeof:h,_payload:{_status:-1,_result:Y},_init:ce}},bt.memo=function(Y,H){return{$$typeof:d,type:Y,compare:H===void 0?null:H}},bt.startTransition=function(Y){var H=I.T,Q={};I.T=Q;try{var te=Y(),W=I.S;W!==null&&W(Q,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(O,K)}catch(le){K(le)}finally{H!==null&&Q.types!==null&&(H.types=Q.types),I.T=H}},bt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},bt.use=function(Y){return I.H.use(Y)},bt.useActionState=function(Y,H,Q){return I.H.useActionState(Y,H,Q)},bt.useCallback=function(Y,H){return I.H.useCallback(Y,H)},bt.useContext=function(Y){return I.H.useContext(Y)},bt.useDebugValue=function(){},bt.useDeferredValue=function(Y,H){return I.H.useDeferredValue(Y,H)},bt.useEffect=function(Y,H){return I.H.useEffect(Y,H)},bt.useEffectEvent=function(Y){return I.H.useEffectEvent(Y)},bt.useId=function(){return I.H.useId()},bt.useImperativeHandle=function(Y,H,Q){return I.H.useImperativeHandle(Y,H,Q)},bt.useInsertionEffect=function(Y,H){return I.H.useInsertionEffect(Y,H)},bt.useLayoutEffect=function(Y,H){return I.H.useLayoutEffect(Y,H)},bt.useMemo=function(Y,H){return I.H.useMemo(Y,H)},bt.useOptimistic=function(Y,H){return I.H.useOptimistic(Y,H)},bt.useReducer=function(Y,H,Q){return I.H.useReducer(Y,H,Q)},bt.useRef=function(Y){return I.H.useRef(Y)},bt.useState=function(Y){return I.H.useState(Y)},bt.useSyncExternalStore=function(Y,H,Q){return I.H.useSyncExternalStore(Y,H,Q)},bt.useTransition=function(){return I.H.useTransition()},bt.version="19.2.4",bt}var yw;function p1(){return yw||(yw=1,ux.exports=GD()),ux.exports}var ue=p1();const bn=Hp(ue);var fx={exports:{}},_f={},dx={exports:{}},hx={};var _w;function $D(){return _w||(_w=1,(function(t){function e(ie,fe){var ce=ie.length;ie.push(fe);e:for(;0<ce;){var K=ce-1>>>1,Ie=ie[K];if(0<s(Ie,fe))ie[K]=fe,ie[ce]=Ie,ce=K;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var fe=ie[0],ce=ie.pop();if(ce!==fe){ie[0]=ce;e:for(var K=0,Ie=ie.length,Y=Ie>>>1;K<Y;){var H=2*(K+1)-1,Q=ie[H],te=H+1,W=ie[te];if(0>s(Q,ce))te<Ie&&0>s(W,Q)?(ie[K]=W,ie[te]=ce,K=te):(ie[K]=Q,ie[H]=ce,K=H);else if(te<Ie&&0>s(W,ce))ie[K]=W,ie[te]=ce,K=te;else break e}}return fe}function s(ie,fe){var ce=ie.sortIndex-fe.sortIndex;return ce!==0?ce:ie.id-fe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,x=null,v=3,T=!1,S=!1,A=!1,b=!1,R=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function L(ie){for(var fe=n(d);fe!==null;){if(fe.callback===null)r(d);else if(fe.startTime<=ie)r(d),fe.sortIndex=fe.expirationTime,e(u,fe);else break;fe=n(d)}}function z(ie){if(A=!1,L(ie),!S)if(n(u)!==null)S=!0,O||(O=!0,M());else{var fe=n(d);fe!==null&&Se(z,fe.startTime-ie)}}var O=!1,I=-1,C=5,N=-1;function F(){return b?!0:!(t.unstable_now()-N<C)}function U(){if(b=!1,O){var ie=t.unstable_now();N=ie;var fe=!0;try{e:{S=!1,A&&(A=!1,B(I),I=-1),T=!0;var ce=v;try{t:{for(L(ie),x=n(u);x!==null&&!(x.expirationTime>ie&&F());){var K=x.callback;if(typeof K=="function"){x.callback=null,v=x.priorityLevel;var Ie=K(x.expirationTime<=ie);if(ie=t.unstable_now(),typeof Ie=="function"){x.callback=Ie,L(ie),fe=!0;break t}x===n(u)&&r(u),L(ie)}else r(u);x=n(u)}if(x!==null)fe=!0;else{var Y=n(d);Y!==null&&Se(z,Y.startTime-ie),fe=!1}}break e}finally{x=null,v=ce,T=!1}fe=void 0}}finally{fe?M():O=!1}}}var M;if(typeof D=="function")M=function(){D(U)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,he=j.port2;j.port1.onmessage=U,M=function(){he.postMessage(null)}}else M=function(){R(U,0)};function Se(ie,fe){I=R(function(){ie(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(ie){switch(v){case 1:case 2:case 3:var fe=3;break;default:fe=v}var ce=v;v=fe;try{return ie()}finally{v=ce}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(ie,fe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ce=v;v=ie;try{return fe()}finally{v=ce}},t.unstable_scheduleCallback=function(ie,fe,ce){var K=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?K+ce:K):ce=K,ie){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=ce+Ie,ie={id:h++,callback:fe,priorityLevel:ie,startTime:ce,expirationTime:Ie,sortIndex:-1},ce>K?(ie.sortIndex=ce,e(d,ie),n(u)===null&&ie===n(d)&&(A?(B(I),I=-1):A=!0,Se(z,ce-K))):(ie.sortIndex=Ie,e(u,ie),S||T||(S=!0,O||(O=!0,M()))),ie},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ie){var fe=v;return function(){var ce=v;v=fe;try{return ie.apply(this,arguments)}finally{v=ce}}}})(hx)),hx}var Ew;function qD(){return Ew||(Ew=1,dx.exports=$D()),dx.exports}var px={exports:{}},Kr={};var Tw;function KD(){if(Tw)return Kr;Tw=1;var t=p1();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(u,d,h){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:u,containerInfo:d,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Kr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},Kr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Kr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Kr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Kr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,x=c(h,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,T=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:T}):h==="script"&&r.d.X(u,{crossOrigin:x,integrity:v,fetchPriority:T,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Kr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Kr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,x=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:x,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Kr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Kr.requestFormReset=function(u){r.d.r(u)},Kr.unstable_batchedUpdates=function(u,d){return u(d)},Kr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Kr.useFormStatus=function(){return o.H.useHostTransitionStatus()},Kr.version="19.2.4",Kr}var ww;function gC(){if(ww)return px.exports;ww=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),px.exports=KD(),px.exports}var Sw;function JD(){if(Sw)return _f;Sw=1;var t=qD(),e=p1(),n=gC();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var l=i,f=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(f=l.return),i=l.return;while(i)}return l.tag===3?f:null}function o(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function c(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(r(188))}function d(i){var l=i.alternate;if(!l){if(l=a(i),l===null)throw Error(r(188));return l!==i?null:i}for(var f=i,p=l;;){var E=f.return;if(E===null)break;var w=E.alternate;if(w===null){if(p=E.return,p!==null){f=p;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===f)return u(E),i;if(w===p)return u(E),l;w=w.sibling}throw Error(r(188))}if(f.return!==p.return)f=E,p=w;else{for(var P=!1,q=E.child;q;){if(q===f){P=!0,f=E,p=w;break}if(q===p){P=!0,p=E,f=w;break}q=q.sibling}if(!P){for(q=w.child;q;){if(q===f){P=!0,f=w,p=E;break}if(q===p){P=!0,p=w,f=E;break}q=q.sibling}if(!P)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:l}function h(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=h(i),l!==null)return l;i=i.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function M(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var j=Symbol.for("react.client.reference");function he(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===j?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case R:return"Profiler";case b:return"StrictMode";case z:return"Suspense";case O:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case D:return i.displayName||"Context";case B:return(i._context.displayName||"Context")+".Consumer";case L:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case I:return l=i.displayName||null,l!==null?l:he(i.type)||"Memo";case C:l=i._payload,i=i._init;try{return he(i(l))}catch{}}return null}var Se=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},K=[],Ie=-1;function Y(i){return{current:i}}function H(i){0>Ie||(i.current=K[Ie],K[Ie]=null,Ie--)}function Q(i,l){Ie++,K[Ie]=i.current,i.current=l}var te=Y(null),W=Y(null),le=Y(null),ge=Y(null);function Ne(i,l){switch(Q(le,l),Q(W,i),Q(te,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?VT(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=VT(l),i=BT(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(te),Q(te,i)}function be(){H(te),H(W),H(le)}function ke(i){i.memoizedState!==null&&Q(ge,i);var l=te.current,f=BT(l,i.type);l!==f&&(Q(W,i),Q(te,f))}function $e(i){W.current===i&&(H(te),H(W)),ge.current===i&&(H(ge),mf._currentValue=ce)}var re,ft;function Je(i){if(re===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);re=l&&l[1]||"",ft=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+re+i+ft}var Qe=!1;function Ge(i,l){if(!i||Qe)return"";Qe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Ce){var we=Ce}Reflect.construct(i,[],Fe)}else{try{Fe.call()}catch(Ce){we=Ce}i.call(Fe.prototype)}}else{try{throw Error()}catch(Ce){we=Ce}(Fe=i())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Ce){if(Ce&&we&&typeof Ce.stack=="string")return[Ce.stack,we.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),P=w[0],q=w[1];if(P&&q){var oe=P.split(`
`),Ee=q.split(`
`);for(E=p=0;p<oe.length&&!oe[p].includes("DetermineComponentFrameRoot");)p++;for(;E<Ee.length&&!Ee[E].includes("DetermineComponentFrameRoot");)E++;if(p===oe.length||E===Ee.length)for(p=oe.length-1,E=Ee.length-1;1<=p&&0<=E&&oe[p]!==Ee[E];)E--;for(;1<=p&&0<=E;p--,E--)if(oe[p]!==Ee[E]){if(p!==1||E!==1)do if(p--,E--,0>E||oe[p]!==Ee[E]){var Me=`
`+oe[p].replace(" at new "," at ");return i.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",i.displayName)),Me}while(1<=p&&0<=E);break}}}finally{Qe=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?Je(f):""}function Ve(i,l){switch(i.tag){case 26:case 27:case 5:return Je(i.type);case 16:return Je("Lazy");case 13:return i.child!==l&&l!==null?Je("Suspense Fallback"):Je("Suspense");case 19:return Je("SuspenseList");case 0:case 15:return Ge(i.type,!1);case 11:return Ge(i.type.render,!1);case 1:return Ge(i.type,!0);case 31:return Je("Activity");default:return""}}function st(i){try{var l="",f=null;do l+=Ve(i,f),f=i,i=i.return;while(i);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var it=Object.prototype.hasOwnProperty,dt=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,_t=t.unstable_shouldYield,kn=t.unstable_requestPaint,vt=t.unstable_now,Lt=t.unstable_getCurrentPriorityLevel,Kt=t.unstable_ImmediatePriority,yn=t.unstable_UserBlockingPriority,jt=t.unstable_NormalPriority,Mt=t.unstable_LowPriority,gt=t.unstable_IdlePriority,Zt=t.log,fn=t.unstable_setDisableYieldValue,Ot=null,hn=null;function kr(i){if(typeof Zt=="function"&&fn(i),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Ot,i)}catch{}}var Rn=Math.clz32?Math.clz32:li,Wo=Math.log,Ua=Math.LN2;function li(i){return i>>>=0,i===0?32:31-(Wo(i)/Ua|0)|0}var Rr=256,ga=262144,Cn=4194304;function Dr(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function rr(i,l,f){var p=i.pendingLanes;if(p===0)return 0;var E=0,w=i.suspendedLanes,P=i.pingedLanes;i=i.warmLanes;var q=p&134217727;return q!==0?(p=q&~w,p!==0?E=Dr(p):(P&=q,P!==0?E=Dr(P):f||(f=q&~i,f!==0&&(E=Dr(f))))):(q=p&~w,q!==0?E=Dr(q):P!==0?E=Dr(P):f||(f=p&~i,f!==0&&(E=Dr(f)))),E===0?0:l!==0&&l!==E&&(l&w)===0&&(w=E&-E,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:E}function Mr(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function vs(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(){var i=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),i}function Yn(i){for(var l=[],f=0;31>f;f++)l.push(i);return l}function qr(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function tc(i,l,f,p,E,w){var P=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var q=i.entanglements,oe=i.expirationTimes,Ee=i.hiddenUpdates;for(f=P&~f;0<f;){var Me=31-Rn(f),Fe=1<<Me;q[Me]=0,oe[Me]=-1;var we=Ee[Me];if(we!==null)for(Ee[Me]=null,Me=0;Me<we.length;Me++){var Ce=we[Me];Ce!==null&&(Ce.lane&=-536870913)}f&=~Fe}p!==0&&xa(i,p,0),w!==0&&E===0&&i.tag!==0&&(i.suspendedLanes|=w&~(P&~l))}function xa(i,l,f){i.pendingLanes|=l,i.suspendedLanes&=~l;var p=31-Rn(l);i.entangledLanes|=l,i.entanglements[p]=i.entanglements[p]|1073741824|f&261930}function Ks(i,l){var f=i.entangledLanes|=l;for(i=i.entanglements;f;){var p=31-Rn(f),E=1<<p;E&l|i[p]&l&&(i[p]|=l),f&=~E}}function sr(i,l){var f=l&-l;return f=(f&42)!==0?1:va(f),(f&(i.suspendedLanes|l))!==0?0:f}function va(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ys(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function G(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:cw(i.type))}function ne(i,l){var f=fe.p;try{return fe.p=i,l()}finally{fe.p=f}}var J=Math.random().toString(36).slice(2),X="__reactFiber$"+J,ee="__reactProps$"+J,ae="__reactContainer$"+J,xe="__reactEvents$"+J,Re="__reactListeners$"+J,ve="__reactHandles$"+J,Te="__reactResources$"+J,_e="__reactMarker$"+J;function je(i){delete i[X],delete i[ee],delete i[xe],delete i[Re],delete i[ve]}function He(i){var l=i[X];if(l)return l;for(var f=i.parentNode;f;){if(l=f[ae]||f[X]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(i=KT(i);i!==null;){if(f=i[X])return f;i=KT(i)}return l}i=f,f=i.parentNode}return null}function Ye(i){if(i=i[X]||i[ae]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function Be(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function qe(i){var l=i[Te];return l||(l=i[Te]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function nt(i){i[_e]=!0}var on=new Set,ln={};function pn(i,l){Tr(i,l),Tr(i+"Capture",l)}function Tr(i,l){for(ln[i]=l,i=0;i<l.length;i++)on.add(l[i])}var as=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_n={},Pt={};function Rs(i){return it.call(Pt,i)?!0:it.call(_n,i)?!1:as.test(i)?Pt[i]=!0:(_n[i]=!0,!1)}function se(i,l,f){if(Rs(l))if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+f)}}function De(i,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+f)}}function Ue(i,l,f,p){if(p===null)i.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(l,f,""+p)}}function We(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ct(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function It(i,l,f){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,w=p.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return E.call(this)},set:function(P){f=""+P,w.call(this,P)}}),Object.defineProperty(i,l,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(P){f=""+P},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Xe(i){if(!i._valueTracker){var l=ct(i)?"checked":"value";i._valueTracker=It(i,l,""+i[l])}}function ut(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return i&&(p=ct(i)?i.checked?"true":"false":i.value),i=p,i!==f?(l.setValue(i),!0):!1}function Tt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ut=/[\n"\\]/g;function wt(i){return i.replace(Ut,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Vt(i,l,f,p,E,w,P,q){i.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.type=P:i.removeAttribute("type"),l!=null?P==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+We(l)):i.value!==""+We(l)&&(i.value=""+We(l)):P!=="submit"&&P!=="reset"||i.removeAttribute("value"),l!=null?Jt(i,P,We(l)):f!=null?Jt(i,P,We(f)):p!=null&&i.removeAttribute("value"),E==null&&w!=null&&(i.defaultChecked=!!w),E!=null&&(i.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?i.name=""+We(q):i.removeAttribute("name")}function pr(i,l,f,p,E,w,P,q){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Xe(i);return}f=f!=null?""+We(f):"",l=l!=null?""+We(l):f,q||l===i.value||(i.value=l),i.defaultValue=l}p=p??E,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=q?i.checked:!!p,i.defaultChecked=!!p,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(i.name=P),Xe(i)}function Jt(i,l,f){l==="number"&&Tt(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function mr(i,l,f,p){if(i=i.options,l){l={};for(var E=0;E<f.length;E++)l["$"+f[E]]=!0;for(f=0;f<i.length;f++)E=l.hasOwnProperty("$"+i[f].value),i[f].selected!==E&&(i[f].selected=E),E&&p&&(i[f].defaultSelected=!0)}else{for(f=""+We(f),l=null,E=0;E<i.length;E++){if(i[E].value===f){i[E].selected=!0,p&&(i[E].defaultSelected=!0);return}l!==null||i[E].disabled||(l=i[E])}l!==null&&(l.selected=!0)}}function is(i,l,f){if(l!=null&&(l=""+We(l),l!==i.value&&(i.value=l),f==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=f!=null?""+We(f):""}function mn(i,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if(Se(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=We(l),i.defaultValue=f,p=i.textContent,p===f&&p!==""&&p!==null&&(i.value=p),Xe(i)}function Nn(i,l){if(l){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=l;return}}i.textContent=l}var Zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ci(i,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":p?i.setProperty(l,f):typeof f!="number"||f===0||Zo.has(l)?l==="float"?i.cssFloat=f:i[l]=(""+f).trim():i[l]=f+"px"}function Iu(i,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var E in l)p=l[E],l.hasOwnProperty(E)&&f[E]!==p&&ci(i,E,p)}else for(var w in l)l.hasOwnProperty(w)&&ci(i,w,l[w])}function nc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$i=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(i){return $i.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ya(){}var ku=null;function Js(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qi=null,Va=null;function Xo(i){var l=Ye(i);if(l&&(i=l.stateNode)){var f=i[ee]||null;e:switch(i=l.stateNode,l.type){case"input":if(Vt(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+wt(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==i&&p.form===i.form){var E=p[ee]||null;if(!E)throw Error(r(90));Vt(p,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===i.form&&ut(p)}break e;case"textarea":is(i,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&mr(i,!!f.multiple,l,!1)}}}var sc=!1;function Ki(i,l,f){if(sc)return i(l,f);sc=!0;try{var p=i(l);return p}finally{if(sc=!1,(qi!==null||Va!==null)&&(Bh(),qi&&(l=qi,i=Va,Va=qi=null,Xo(l),i)))for(l=0;l<i.length;l++)Xo(i[l])}}function _a(i,l){var f=i.stateNode;if(f===null)return null;var p=f[ee]||null;if(p===null)return null;f=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qo=!1;if(Ys)try{var En={};Object.defineProperty(En,"passive",{get:function(){Qo=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{Qo=!1}var Ba=null,Ru=null,el=null;function Du(){if(el)return el;var i,l=Ru,f=l.length,p,E="value"in Ba?Ba.value:Ba.textContent,w=E.length;for(i=0;i<f&&l[i]===E[i];i++);var P=f-i;for(p=1;p<=P&&l[f-p]===E[w-p];p++);return el=E.slice(i,1<p?1-p:void 0)}function tl(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function ui(){return!0}function Ea(){return!1}function Pr(i){function l(f,p,E,w,P){this._reactName=f,this._targetInst=E,this.type=p,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(f=i[q],this[q]=f?f(w):w[q]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ui:Ea,this.isPropagationStopped=Ea,this}return x(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),l}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=Pr(fi),Ji=x({},fi,{view:0,detail:0}),Mu=Pr(Ji),Yi,ac,ja,ic=x({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ja&&(ja&&i.type==="mousemove"?(Yi=i.screenX-ja.screenX,ac=i.screenY-ja.screenY):ac=Yi=0,ja=i),Yi)},movementY:function(i){return"movementY"in i?i.movementY:ac}}),Pu=Pr(ic),nl=x({},ic,{dataTransfer:0}),Jd=Pr(nl),Yd=x({},Ji,{relatedTarget:0}),rl=Pr(Yd),Fu=x({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Wd=Pr(Fu),oc=x({},fi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Zd=Pr(oc),Xd=x({},fi,{data:0}),Ha=Pr(Xd),Qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=th[i])?!!l[i]:!1}function Wi(){return nh}var os=x({},Ji,{key:function(i){if(i.key){var l=Qd[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=tl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?eh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(i){return i.type==="keypress"?tl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?tl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),rh=Pr(os),sh=x({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),di=Pr(sh),_=x({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),k=Pr(_),V=x({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z=Pr(V),me=x({},ic,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ae=Pr(me),Ke=x({},fi,{newState:0,oldState:0}),kt=Pr(Ke),Wn=[9,13,27,32],cn=Ys&&"CompositionEvent"in window,On=null;Ys&&"documentMode"in document&&(On=document.documentMode);var Ws=Ys&&"TextEvent"in window&&!On,Ga=Ys&&(!cn||On&&8<On&&11>=On),Ta=" ",wa=!1;function sl(i,l){switch(i){case"keyup":return Wn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lc(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cc=!1;function d3(i,l){switch(i){case"compositionend":return lc(l);case"keypress":return l.which!==32?null:(wa=!0,Ta);case"textInput":return i=l.data,i===Ta&&wa?null:i;default:return null}}function h3(i,l){if(cc)return i==="compositionend"||!cn&&sl(i,l)?(i=Du(),el=Ru=Ba=null,cc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ga&&l.locale!=="ko"?null:l.data;default:return null}}var p3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wy(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!p3[i.type]:l==="textarea"}function Zy(i,l,f,p){qi?Va?Va.push(p):Va=[p]:qi=p,l=Kh(l,"onChange"),0<l.length&&(f=new za("onChange","change",null,f,p),i.push({event:f,listeners:l}))}var Ou=null,Lu=null;function m3(i){MT(i,0)}function ah(i){var l=Be(i);if(ut(l))return i}function Xy(i,l){if(i==="change")return l}var Qy=!1;if(Ys){var gm;if(Ys){var xm="oninput"in document;if(!xm){var e_=document.createElement("div");e_.setAttribute("oninput","return;"),xm=typeof e_.oninput=="function"}gm=xm}else gm=!1;Qy=gm&&(!document.documentMode||9<document.documentMode)}function t_(){Ou&&(Ou.detachEvent("onpropertychange",n_),Lu=Ou=null)}function n_(i){if(i.propertyName==="value"&&ah(Lu)){var l=[];Zy(l,Lu,i,Js(i)),Ki(m3,l)}}function g3(i,l,f){i==="focusin"?(t_(),Ou=l,Lu=f,Ou.attachEvent("onpropertychange",n_)):i==="focusout"&&t_()}function x3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ah(Lu)}function v3(i,l){if(i==="click")return ah(l)}function y3(i,l){if(i==="input"||i==="change")return ah(l)}function _3(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Ds=typeof Object.is=="function"?Object.is:_3;function Uu(i,l){if(Ds(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var f=Object.keys(i),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var E=f[p];if(!it.call(l,E)||!Ds(i[E],l[E]))return!1}return!0}function r_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function s_(i,l){var f=r_(i);i=0;for(var p;f;){if(f.nodeType===3){if(p=i+f.textContent.length,i<=l&&p>=l)return{node:f,offset:l-i};i=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=r_(f)}}function a_(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?a_(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function i_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Tt(i.document);l instanceof i.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)i=l.contentWindow;else break;l=Tt(i.document)}return l}function vm(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var E3=Ys&&"documentMode"in document&&11>=document.documentMode,uc=null,ym=null,Vu=null,_m=!1;function o_(i,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;_m||uc==null||uc!==Tt(p)||(p=uc,"selectionStart"in p&&vm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Vu&&Uu(Vu,p)||(Vu=p,p=Kh(ym,"onSelect"),0<p.length&&(l=new za("onSelect","select",null,l,f),i.push({event:l,listeners:p}),l.target=uc)))}function al(i,l){var f={};return f[i.toLowerCase()]=l.toLowerCase(),f["Webkit"+i]="webkit"+l,f["Moz"+i]="moz"+l,f}var fc={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionrun:al("Transition","TransitionRun"),transitionstart:al("Transition","TransitionStart"),transitioncancel:al("Transition","TransitionCancel"),transitionend:al("Transition","TransitionEnd")},Em={},l_={};Ys&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete fc.animationend.animation,delete fc.animationiteration.animation,delete fc.animationstart.animation),"TransitionEvent"in window||delete fc.transitionend.transition);function il(i){if(Em[i])return Em[i];if(!fc[i])return i;var l=fc[i],f;for(f in l)if(l.hasOwnProperty(f)&&f in l_)return Em[i]=l[f];return i}var c_=il("animationend"),u_=il("animationiteration"),f_=il("animationstart"),T3=il("transitionrun"),w3=il("transitionstart"),S3=il("transitioncancel"),d_=il("transitionend"),h_=new Map,Tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tm.push("scrollEnd");function Sa(i,l){h_.set(i,l),pn(l,[i])}var ih=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Zs=[],dc=0,wm=0;function oh(){for(var i=dc,l=wm=dc=0;l<i;){var f=Zs[l];Zs[l++]=null;var p=Zs[l];Zs[l++]=null;var E=Zs[l];Zs[l++]=null;var w=Zs[l];if(Zs[l++]=null,p!==null&&E!==null){var P=p.pending;P===null?E.next=E:(E.next=P.next,P.next=E),p.pending=E}w!==0&&p_(f,E,w)}}function lh(i,l,f,p){Zs[dc++]=i,Zs[dc++]=l,Zs[dc++]=f,Zs[dc++]=p,wm|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function Sm(i,l,f,p){return lh(i,l,f,p),ch(i)}function ol(i,l){return lh(i,null,null,l),ch(i)}function p_(i,l,f){i.lanes|=f;var p=i.alternate;p!==null&&(p.lanes|=f);for(var E=!1,w=i.return;w!==null;)w.childLanes|=f,p=w.alternate,p!==null&&(p.childLanes|=f),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(E=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,E&&l!==null&&(E=31-Rn(f),i=w.hiddenUpdates,p=i[E],p===null?i[E]=[l]:p.push(l),l.lane=f|536870912),w):null}function ch(i){if(50<lf)throw lf=0,Mg=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var hc={};function A3(i,l,f,p){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(i,l,f,p){return new A3(i,l,f,p)}function Am(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hi(i,l){var f=i.alternate;return f===null?(f=Ms(i.tag,l,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=l,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,l=i.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function m_(i,l){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,l=f.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function uh(i,l,f,p,E,w){var P=0;if(p=i,typeof i=="function")Am(i)&&(P=1);else if(typeof i=="string")P=kD(i,f,te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Ms(31,f,l,E),i.elementType=N,i.lanes=w,i;case A:return ll(f.children,E,w,l);case b:P=8,E|=24;break;case R:return i=Ms(12,f,l,E|2),i.elementType=R,i.lanes=w,i;case z:return i=Ms(13,f,l,E),i.elementType=z,i.lanes=w,i;case O:return i=Ms(19,f,l,E),i.elementType=O,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:P=10;break e;case B:P=9;break e;case L:P=11;break e;case I:P=14;break e;case C:P=16,p=null;break e}P=29,f=Error(r(130,i===null?"null":typeof i,"")),p=null}return l=Ms(P,f,l,E),l.elementType=i,l.type=p,l.lanes=w,l}function ll(i,l,f,p){return i=Ms(7,i,p,l),i.lanes=f,i}function bm(i,l,f){return i=Ms(6,i,null,l),i.lanes=f,i}function g_(i){var l=Ms(18,null,null,0);return l.stateNode=i,l}function Cm(i,l,f){return l=Ms(4,i.children!==null?i.children:[],i.key,l),l.lanes=f,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var x_=new WeakMap;function Xs(i,l){if(typeof i=="object"&&i!==null){var f=x_.get(i);return f!==void 0?f:(l={value:i,source:l,stack:st(l)},x_.set(i,l),l)}return{value:i,source:l,stack:st(l)}}var pc=[],mc=0,fh=null,Bu=0,Qs=[],ea=0,Zi=null,$a=1,qa="";function pi(i,l){pc[mc++]=Bu,pc[mc++]=fh,fh=i,Bu=l}function v_(i,l,f){Qs[ea++]=$a,Qs[ea++]=qa,Qs[ea++]=Zi,Zi=i;var p=$a;i=qa;var E=32-Rn(p)-1;p&=~(1<<E),f+=1;var w=32-Rn(l)+E;if(30<w){var P=E-E%5;w=(p&(1<<P)-1).toString(32),p>>=P,E-=P,$a=1<<32-Rn(l)+E|f<<E|p,qa=w+i}else $a=1<<w|f<<E|p,qa=i}function Nm(i){i.return!==null&&(pi(i,1),v_(i,1,0))}function Im(i){for(;i===fh;)fh=pc[--mc],pc[mc]=null,Bu=pc[--mc],pc[mc]=null;for(;i===Zi;)Zi=Qs[--ea],Qs[ea]=null,qa=Qs[--ea],Qs[ea]=null,$a=Qs[--ea],Qs[ea]=null}function y_(i,l){Qs[ea++]=$a,Qs[ea++]=qa,Qs[ea++]=Zi,$a=l.id,qa=l.overflow,Zi=i}var Fr=null,Mn=null,Yt=!1,Xi=null,ta=!1,km=Error(r(519));function Qi(i){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zu(Xs(l,i)),km}function __(i){var l=i.stateNode,f=i.type,p=i.memoizedProps;switch(l[X]=i,l[ee]=p,f){case"dialog":zt("cancel",l),zt("close",l);break;case"iframe":case"object":case"embed":zt("load",l);break;case"video":case"audio":for(f=0;f<uf.length;f++)zt(uf[f],l);break;case"source":zt("error",l);break;case"img":case"image":case"link":zt("error",l),zt("load",l);break;case"details":zt("toggle",l);break;case"input":zt("invalid",l),pr(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":zt("invalid",l);break;case"textarea":zt("invalid",l),mn(l,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||LT(l.textContent,f)?(p.popover!=null&&(zt("beforetoggle",l),zt("toggle",l)),p.onScroll!=null&&zt("scroll",l),p.onScrollEnd!=null&&zt("scrollend",l),p.onClick!=null&&(l.onclick=ya),l=!0):l=!1,l||Qi(i,!0)}function E_(i){for(Fr=i.return;Fr;)switch(Fr.tag){case 5:case 31:case 13:ta=!1;return;case 27:case 3:ta=!0;return;default:Fr=Fr.return}}function gc(i){if(i!==Fr)return!1;if(!Yt)return E_(i),Yt=!0,!1;var l=i.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||Jg(i.type,i.memoizedProps)),f=!f),f&&Mn&&Qi(i),E_(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Mn=qT(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Mn=qT(i)}else l===27?(l=Mn,po(i.type)?(i=Qg,Qg=null,Mn=i):Mn=l):Mn=Fr?ra(i.stateNode.nextSibling):null;return!0}function cl(){Mn=Fr=null,Yt=!1}function Rm(){var i=Xi;return i!==null&&(ws===null?ws=i:ws.push.apply(ws,i),Xi=null),i}function zu(i){Xi===null?Xi=[i]:Xi.push(i)}var Dm=Y(null),ul=null,mi=null;function eo(i,l,f){Q(Dm,l._currentValue),l._currentValue=f}function gi(i){i._currentValue=Dm.current,H(Dm)}function Mm(i,l,f){for(;i!==null;){var p=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),i===f)break;i=i.return}}function Pm(i,l,f,p){var E=i.child;for(E!==null&&(E.return=i);E!==null;){var w=E.dependencies;if(w!==null){var P=E.child;w=w.firstContext;e:for(;w!==null;){var q=w;w=E;for(var oe=0;oe<l.length;oe++)if(q.context===l[oe]){w.lanes|=f,q=w.alternate,q!==null&&(q.lanes|=f),Mm(w.return,f,i),p||(P=null);break e}w=q.next}}else if(E.tag===18){if(P=E.return,P===null)throw Error(r(341));P.lanes|=f,w=P.alternate,w!==null&&(w.lanes|=f),Mm(P,f,i),P=null}else P=E.child;if(P!==null)P.return=E;else for(P=E;P!==null;){if(P===i){P=null;break}if(E=P.sibling,E!==null){E.return=P.return,P=E;break}P=P.return}E=P}}function xc(i,l,f,p){i=null;for(var E=l,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var P=E.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var q=E.type;Ds(E.pendingProps.value,P.value)||(i!==null?i.push(q):i=[q])}}else if(E===ge.current){if(P=E.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(i!==null?i.push(mf):i=[mf])}E=E.return}i!==null&&Pm(l,i,f,p),l.flags|=262144}function dh(i){for(i=i.firstContext;i!==null;){if(!Ds(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function fl(i){ul=i,mi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Or(i){return T_(ul,i)}function hh(i,l){return ul===null&&fl(i),T_(i,l)}function T_(i,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},mi===null){if(i===null)throw Error(r(308));mi=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else mi=mi.next=l;return f}var b3=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(f,p){i.push(p)}};this.abort=function(){l.aborted=!0,i.forEach(function(f){return f()})}},C3=t.unstable_scheduleCallback,N3=t.unstable_NormalPriority,ar={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fm(){return{controller:new b3,data:new Map,refCount:0}}function ju(i){i.refCount--,i.refCount===0&&C3(N3,function(){i.controller.abort()})}var Hu=null,Om=0,vc=0,yc=null;function I3(i,l){if(Hu===null){var f=Hu=[];Om=0,vc=Vg(),yc={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Om++,l.then(w_,w_),l}function w_(){if(--Om===0&&Hu!==null){yc!==null&&(yc.status="fulfilled");var i=Hu;Hu=null,vc=0,yc=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function k3(i,l){var f=[],p={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return i.then(function(){p.status="fulfilled",p.value=l;for(var E=0;E<f.length;E++)(0,f[E])(l)},function(E){for(p.status="rejected",p.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),p}var S_=ie.S;ie.S=function(i,l){oT=vt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&I3(i,l),S_!==null&&S_(i,l)};var dl=Y(null);function Lm(){var i=dl.current;return i!==null?i:In.pooledCache}function ph(i,l){l===null?Q(dl,dl.current):Q(dl,l.pool)}function A_(){var i=Lm();return i===null?null:{parent:ar._currentValue,pool:i}}var _c=Error(r(460)),Um=Error(r(474)),mh=Error(r(542)),gh={then:function(){}};function b_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function C_(i,l,f){switch(f=i[f],f===void 0?i.push(l):f!==l&&(l.then(ya,ya),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,I_(i),i;default:if(typeof l.status=="string")l.then(ya,ya);else{if(i=In,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(p){if(l.status==="pending"){var E=l;E.status="fulfilled",E.value=p}},function(p){if(l.status==="pending"){var E=l;E.status="rejected",E.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,I_(i),i}throw pl=l,_c}}function hl(i){try{var l=i._init;return l(i._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(pl=f,_c):f}}var pl=null;function N_(){if(pl===null)throw Error(r(459));var i=pl;return pl=null,i}function I_(i){if(i===_c||i===mh)throw Error(r(483))}var Ec=null,Gu=0;function xh(i){var l=Gu;return Gu+=1,Ec===null&&(Ec=[]),C_(Ec,i,l)}function $u(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function vh(i,l){throw l.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function k_(i){function l(pe,de){if(i){var ye=pe.deletions;ye===null?(pe.deletions=[de],pe.flags|=16):ye.push(de)}}function f(pe,de){if(!i)return null;for(;de!==null;)l(pe,de),de=de.sibling;return null}function p(pe){for(var de=new Map;pe!==null;)pe.key!==null?de.set(pe.key,pe):de.set(pe.index,pe),pe=pe.sibling;return de}function E(pe,de){return pe=hi(pe,de),pe.index=0,pe.sibling=null,pe}function w(pe,de,ye){return pe.index=ye,i?(ye=pe.alternate,ye!==null?(ye=ye.index,ye<de?(pe.flags|=67108866,de):ye):(pe.flags|=67108866,de)):(pe.flags|=1048576,de)}function P(pe){return i&&pe.alternate===null&&(pe.flags|=67108866),pe}function q(pe,de,ye,Pe){return de===null||de.tag!==6?(de=bm(ye,pe.mode,Pe),de.return=pe,de):(de=E(de,ye),de.return=pe,de)}function oe(pe,de,ye,Pe){var ht=ye.type;return ht===A?Me(pe,de,ye.props.children,Pe,ye.key):de!==null&&(de.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===C&&hl(ht)===de.type)?(de=E(de,ye.props),$u(de,ye),de.return=pe,de):(de=uh(ye.type,ye.key,ye.props,null,pe.mode,Pe),$u(de,ye),de.return=pe,de)}function Ee(pe,de,ye,Pe){return de===null||de.tag!==4||de.stateNode.containerInfo!==ye.containerInfo||de.stateNode.implementation!==ye.implementation?(de=Cm(ye,pe.mode,Pe),de.return=pe,de):(de=E(de,ye.children||[]),de.return=pe,de)}function Me(pe,de,ye,Pe,ht){return de===null||de.tag!==7?(de=ll(ye,pe.mode,Pe,ht),de.return=pe,de):(de=E(de,ye),de.return=pe,de)}function Fe(pe,de,ye){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=bm(""+de,pe.mode,ye),de.return=pe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case T:return ye=uh(de.type,de.key,de.props,null,pe.mode,ye),$u(ye,de),ye.return=pe,ye;case S:return de=Cm(de,pe.mode,ye),de.return=pe,de;case C:return de=hl(de),Fe(pe,de,ye)}if(Se(de)||M(de))return de=ll(de,pe.mode,ye,null),de.return=pe,de;if(typeof de.then=="function")return Fe(pe,xh(de),ye);if(de.$$typeof===D)return Fe(pe,hh(pe,de),ye);vh(pe,de)}return null}function we(pe,de,ye,Pe){var ht=de!==null?de.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ht!==null?null:q(pe,de,""+ye,Pe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:return ye.key===ht?oe(pe,de,ye,Pe):null;case S:return ye.key===ht?Ee(pe,de,ye,Pe):null;case C:return ye=hl(ye),we(pe,de,ye,Pe)}if(Se(ye)||M(ye))return ht!==null?null:Me(pe,de,ye,Pe,null);if(typeof ye.then=="function")return we(pe,de,xh(ye),Pe);if(ye.$$typeof===D)return we(pe,de,hh(pe,ye),Pe);vh(pe,ye)}return null}function Ce(pe,de,ye,Pe,ht){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return pe=pe.get(ye)||null,q(de,pe,""+Pe,ht);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case T:return pe=pe.get(Pe.key===null?ye:Pe.key)||null,oe(de,pe,Pe,ht);case S:return pe=pe.get(Pe.key===null?ye:Pe.key)||null,Ee(de,pe,Pe,ht);case C:return Pe=hl(Pe),Ce(pe,de,ye,Pe,ht)}if(Se(Pe)||M(Pe))return pe=pe.get(ye)||null,Me(de,pe,Pe,ht,null);if(typeof Pe.then=="function")return Ce(pe,de,ye,xh(Pe),ht);if(Pe.$$typeof===D)return Ce(pe,de,ye,hh(de,Pe),ht);vh(de,Pe)}return null}function rt(pe,de,ye,Pe){for(var ht=null,rn=null,ot=de,Ft=de=0,Gt=null;ot!==null&&Ft<ye.length;Ft++){ot.index>Ft?(Gt=ot,ot=null):Gt=ot.sibling;var sn=we(pe,ot,ye[Ft],Pe);if(sn===null){ot===null&&(ot=Gt);break}i&&ot&&sn.alternate===null&&l(pe,ot),de=w(sn,de,Ft),rn===null?ht=sn:rn.sibling=sn,rn=sn,ot=Gt}if(Ft===ye.length)return f(pe,ot),Yt&&pi(pe,Ft),ht;if(ot===null){for(;Ft<ye.length;Ft++)ot=Fe(pe,ye[Ft],Pe),ot!==null&&(de=w(ot,de,Ft),rn===null?ht=ot:rn.sibling=ot,rn=ot);return Yt&&pi(pe,Ft),ht}for(ot=p(ot);Ft<ye.length;Ft++)Gt=Ce(ot,pe,Ft,ye[Ft],Pe),Gt!==null&&(i&&Gt.alternate!==null&&ot.delete(Gt.key===null?Ft:Gt.key),de=w(Gt,de,Ft),rn===null?ht=Gt:rn.sibling=Gt,rn=Gt);return i&&ot.forEach(function(yo){return l(pe,yo)}),Yt&&pi(pe,Ft),ht}function xt(pe,de,ye,Pe){if(ye==null)throw Error(r(151));for(var ht=null,rn=null,ot=de,Ft=de=0,Gt=null,sn=ye.next();ot!==null&&!sn.done;Ft++,sn=ye.next()){ot.index>Ft?(Gt=ot,ot=null):Gt=ot.sibling;var yo=we(pe,ot,sn.value,Pe);if(yo===null){ot===null&&(ot=Gt);break}i&&ot&&yo.alternate===null&&l(pe,ot),de=w(yo,de,Ft),rn===null?ht=yo:rn.sibling=yo,rn=yo,ot=Gt}if(sn.done)return f(pe,ot),Yt&&pi(pe,Ft),ht;if(ot===null){for(;!sn.done;Ft++,sn=ye.next())sn=Fe(pe,sn.value,Pe),sn!==null&&(de=w(sn,de,Ft),rn===null?ht=sn:rn.sibling=sn,rn=sn);return Yt&&pi(pe,Ft),ht}for(ot=p(ot);!sn.done;Ft++,sn=ye.next())sn=Ce(ot,pe,Ft,sn.value,Pe),sn!==null&&(i&&sn.alternate!==null&&ot.delete(sn.key===null?Ft:sn.key),de=w(sn,de,Ft),rn===null?ht=sn:rn.sibling=sn,rn=sn);return i&&ot.forEach(function(zD){return l(pe,zD)}),Yt&&pi(pe,Ft),ht}function Sn(pe,de,ye,Pe){if(typeof ye=="object"&&ye!==null&&ye.type===A&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:e:{for(var ht=ye.key;de!==null;){if(de.key===ht){if(ht=ye.type,ht===A){if(de.tag===7){f(pe,de.sibling),Pe=E(de,ye.props.children),Pe.return=pe,pe=Pe;break e}}else if(de.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===C&&hl(ht)===de.type){f(pe,de.sibling),Pe=E(de,ye.props),$u(Pe,ye),Pe.return=pe,pe=Pe;break e}f(pe,de);break}else l(pe,de);de=de.sibling}ye.type===A?(Pe=ll(ye.props.children,pe.mode,Pe,ye.key),Pe.return=pe,pe=Pe):(Pe=uh(ye.type,ye.key,ye.props,null,pe.mode,Pe),$u(Pe,ye),Pe.return=pe,pe=Pe)}return P(pe);case S:e:{for(ht=ye.key;de!==null;){if(de.key===ht)if(de.tag===4&&de.stateNode.containerInfo===ye.containerInfo&&de.stateNode.implementation===ye.implementation){f(pe,de.sibling),Pe=E(de,ye.children||[]),Pe.return=pe,pe=Pe;break e}else{f(pe,de);break}else l(pe,de);de=de.sibling}Pe=Cm(ye,pe.mode,Pe),Pe.return=pe,pe=Pe}return P(pe);case C:return ye=hl(ye),Sn(pe,de,ye,Pe)}if(Se(ye))return rt(pe,de,ye,Pe);if(M(ye)){if(ht=M(ye),typeof ht!="function")throw Error(r(150));return ye=ht.call(ye),xt(pe,de,ye,Pe)}if(typeof ye.then=="function")return Sn(pe,de,xh(ye),Pe);if(ye.$$typeof===D)return Sn(pe,de,hh(pe,ye),Pe);vh(pe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,de!==null&&de.tag===6?(f(pe,de.sibling),Pe=E(de,ye),Pe.return=pe,pe=Pe):(f(pe,de),Pe=bm(ye,pe.mode,Pe),Pe.return=pe,pe=Pe),P(pe)):f(pe,de)}return function(pe,de,ye,Pe){try{Gu=0;var ht=Sn(pe,de,ye,Pe);return Ec=null,ht}catch(ot){if(ot===_c||ot===mh)throw ot;var rn=Ms(29,ot,null,pe.mode);return rn.lanes=Pe,rn.return=pe,rn}}}var ml=k_(!0),R_=k_(!1),to=!1;function Vm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bm(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function no(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ro(i,l,f){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(un&2)!==0){var E=p.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),p.pending=l,l=ch(i),p_(i,null,f),l}return lh(i,p,l,f),ch(i)}function qu(i,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=i.pendingLanes,f|=p,l.lanes=f,Ks(i,f)}}function zm(i,l){var f=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var E=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var P={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?E=w=P:w=w.next=P,f=f.next}while(f!==null);w===null?E=w=l:w=w.next=l}else E=w=l;f={baseState:p.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=l:i.next=l,f.lastBaseUpdate=l}var jm=!1;function Ku(){if(jm){var i=yc;if(i!==null)throw i}}function Ju(i,l,f,p){jm=!1;var E=i.updateQueue;to=!1;var w=E.firstBaseUpdate,P=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var oe=q,Ee=oe.next;oe.next=null,P===null?w=Ee:P.next=Ee,P=oe;var Me=i.alternate;Me!==null&&(Me=Me.updateQueue,q=Me.lastBaseUpdate,q!==P&&(q===null?Me.firstBaseUpdate=Ee:q.next=Ee,Me.lastBaseUpdate=oe))}if(w!==null){var Fe=E.baseState;P=0,Me=Ee=oe=null,q=w;do{var we=q.lane&-536870913,Ce=we!==q.lane;if(Ce?(Ht&we)===we:(p&we)===we){we!==0&&we===vc&&(jm=!0),Me!==null&&(Me=Me.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var rt=i,xt=q;we=l;var Sn=f;switch(xt.tag){case 1:if(rt=xt.payload,typeof rt=="function"){Fe=rt.call(Sn,Fe,we);break e}Fe=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=xt.payload,we=typeof rt=="function"?rt.call(Sn,Fe,we):rt,we==null)break e;Fe=x({},Fe,we);break e;case 2:to=!0}}we=q.callback,we!==null&&(i.flags|=64,Ce&&(i.flags|=8192),Ce=E.callbacks,Ce===null?E.callbacks=[we]:Ce.push(we))}else Ce={lane:we,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Me===null?(Ee=Me=Ce,oe=Fe):Me=Me.next=Ce,P|=we;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;Ce=q,q=Ce.next,Ce.next=null,E.lastBaseUpdate=Ce,E.shared.pending=null}}while(!0);Me===null&&(oe=Fe),E.baseState=oe,E.firstBaseUpdate=Ee,E.lastBaseUpdate=Me,w===null&&(E.shared.lanes=0),lo|=P,i.lanes=P,i.memoizedState=Fe}}function D_(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function M_(i,l){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)D_(f[i],l)}var Tc=Y(null),yh=Y(0);function P_(i,l){i=Ai,Q(yh,i),Q(Tc,l),Ai=i|l.baseLanes}function Hm(){Q(yh,Ai),Q(Tc,Tc.current)}function Gm(){Ai=yh.current,H(Tc),H(yh)}var Ps=Y(null),na=null;function so(i){var l=i.alternate;Q(Zn,Zn.current&1),Q(Ps,i),na===null&&(l===null||Tc.current!==null||l.memoizedState!==null)&&(na=i)}function $m(i){Q(Zn,Zn.current),Q(Ps,i),na===null&&(na=i)}function F_(i){i.tag===22?(Q(Zn,Zn.current),Q(Ps,i),na===null&&(na=i)):ao()}function ao(){Q(Zn,Zn.current),Q(Ps,Ps.current)}function Fs(i){H(Ps),na===i&&(na=null),H(Zn)}var Zn=Y(0);function _h(i){for(var l=i;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Zg(f)||Xg(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var xi=0,Rt=null,Tn=null,ir=null,Eh=!1,wc=!1,gl=!1,Th=0,Yu=0,Sc=null,R3=0;function Hn(){throw Error(r(321))}function qm(i,l){if(l===null)return!1;for(var f=0;f<l.length&&f<i.length;f++)if(!Ds(i[f],l[f]))return!1;return!0}function Km(i,l,f,p,E,w){return xi=w,Rt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ie.H=i===null||i.memoizedState===null?vE:lg,gl=!1,w=f(p,E),gl=!1,wc&&(w=L_(l,f,p,E)),O_(i),w}function O_(i){ie.H=Xu;var l=Tn!==null&&Tn.next!==null;if(xi=0,ir=Tn=Rt=null,Eh=!1,Yu=0,Sc=null,l)throw Error(r(300));i===null||or||(i=i.dependencies,i!==null&&dh(i)&&(or=!0))}function L_(i,l,f,p){Rt=i;var E=0;do{if(wc&&(Sc=null),Yu=0,wc=!1,25<=E)throw Error(r(301));if(E+=1,ir=Tn=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ie.H=yE,w=l(f,p)}while(wc);return w}function D3(){var i=ie.H,l=i.useState()[0];return l=typeof l.then=="function"?Wu(l):l,i=i.useState()[0],(Tn!==null?Tn.memoizedState:null)!==i&&(Rt.flags|=1024),l}function Jm(){var i=Th!==0;return Th=0,i}function Ym(i,l,f){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~f}function Wm(i){if(Eh){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Eh=!1}xi=0,ir=Tn=Rt=null,wc=!1,Yu=Th=0,Sc=null}function ls(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?Rt.memoizedState=ir=i:ir=ir.next=i,ir}function Xn(){if(Tn===null){var i=Rt.alternate;i=i!==null?i.memoizedState:null}else i=Tn.next;var l=ir===null?Rt.memoizedState:ir.next;if(l!==null)ir=l,Tn=i;else{if(i===null)throw Rt.alternate===null?Error(r(467)):Error(r(310));Tn=i,i={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},ir===null?Rt.memoizedState=ir=i:ir=ir.next=i}return ir}function wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wu(i){var l=Yu;return Yu+=1,Sc===null&&(Sc=[]),i=C_(Sc,i,l),l=Rt,(ir===null?l.memoizedState:ir.next)===null&&(l=l.alternate,ie.H=l===null||l.memoizedState===null?vE:lg),i}function Sh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Wu(i);if(i.$$typeof===D)return Or(i)}throw Error(r(438,String(i)))}function Zm(i){var l=null,f=Rt.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=Rt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(E){return E.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=wh(),Rt.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(i),p=0;p<i;p++)f[p]=F;return l.index++,f}function vi(i,l){return typeof l=="function"?l(i):l}function Ah(i){var l=Xn();return Xm(l,Tn,i)}function Xm(i,l,f){var p=i.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var E=i.baseQueue,w=p.pending;if(w!==null){if(E!==null){var P=E.next;E.next=w.next,w.next=P}l.baseQueue=E=w,p.pending=null}if(w=i.baseState,E===null)i.memoizedState=w;else{l=E.next;var q=P=null,oe=null,Ee=l,Me=!1;do{var Fe=Ee.lane&-536870913;if(Fe!==Ee.lane?(Ht&Fe)===Fe:(xi&Fe)===Fe){var we=Ee.revertLane;if(we===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Fe===vc&&(Me=!0);else if((xi&we)===we){Ee=Ee.next,we===vc&&(Me=!0);continue}else Fe={lane:0,revertLane:Ee.revertLane,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(q=oe=Fe,P=w):oe=oe.next=Fe,Rt.lanes|=we,lo|=we;Fe=Ee.action,gl&&f(w,Fe),w=Ee.hasEagerState?Ee.eagerState:f(w,Fe)}else we={lane:Fe,revertLane:Ee.revertLane,gesture:Ee.gesture,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(q=oe=we,P=w):oe=oe.next=we,Rt.lanes|=Fe,lo|=Fe;Ee=Ee.next}while(Ee!==null&&Ee!==l);if(oe===null?P=w:oe.next=q,!Ds(w,i.memoizedState)&&(or=!0,Me&&(f=yc,f!==null)))throw f;i.memoizedState=w,i.baseState=P,i.baseQueue=oe,p.lastRenderedState=w}return E===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function Qm(i){var l=Xn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var p=f.dispatch,E=f.pending,w=l.memoizedState;if(E!==null){f.pending=null;var P=E=E.next;do w=i(w,P.action),P=P.next;while(P!==E);Ds(w,l.memoizedState)||(or=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,p]}function U_(i,l,f){var p=Rt,E=Xn(),w=Yt;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var P=!Ds((Tn||E).memoizedState,f);if(P&&(E.memoizedState=f,or=!0),E=E.queue,ng(z_.bind(null,p,E,i),[i]),E.getSnapshot!==l||P||ir!==null&&ir.memoizedState.tag&1){if(p.flags|=2048,Ac(9,{destroy:void 0},B_.bind(null,p,E,f,l),null),In===null)throw Error(r(349));w||(xi&127)!==0||V_(p,l,f)}return f}function V_(i,l,f){i.flags|=16384,i={getSnapshot:l,value:f},l=Rt.updateQueue,l===null?(l=wh(),Rt.updateQueue=l,l.stores=[i]):(f=l.stores,f===null?l.stores=[i]:f.push(i))}function B_(i,l,f,p){l.value=f,l.getSnapshot=p,j_(l)&&H_(i)}function z_(i,l,f){return f(function(){j_(l)&&H_(i)})}function j_(i){var l=i.getSnapshot;i=i.value;try{var f=l();return!Ds(i,f)}catch{return!0}}function H_(i){var l=ol(i,2);l!==null&&Ss(l,i,2)}function eg(i){var l=ls();if(typeof i=="function"){var f=i;if(i=f(),gl){kr(!0);try{f()}finally{kr(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:i},l}function G_(i,l,f,p){return i.baseState=f,Xm(i,Tn,typeof p=="function"?p:vi)}function M3(i,l,f,p,E){if(Nh(i))throw Error(r(485));if(i=l.action,i!==null){var w={payload:E,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){w.listeners.push(P)}};ie.T!==null?f(!0):w.isTransition=!1,p(w),f=l.pending,f===null?(w.next=l.pending=w,$_(l,w)):(w.next=f.next,l.pending=f.next=w)}}function $_(i,l){var f=l.action,p=l.payload,E=i.state;if(l.isTransition){var w=ie.T,P={};ie.T=P;try{var q=f(E,p),oe=ie.S;oe!==null&&oe(P,q),q_(i,l,q)}catch(Ee){tg(i,l,Ee)}finally{w!==null&&P.types!==null&&(w.types=P.types),ie.T=w}}else try{w=f(E,p),q_(i,l,w)}catch(Ee){tg(i,l,Ee)}}function q_(i,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){K_(i,l,p)},function(p){return tg(i,l,p)}):K_(i,l,f)}function K_(i,l,f){l.status="fulfilled",l.value=f,J_(l),i.state=f,l=i.pending,l!==null&&(f=l.next,f===l?i.pending=null:(f=f.next,l.next=f,$_(i,f)))}function tg(i,l,f){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,J_(l),l=l.next;while(l!==p)}i.action=null}function J_(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function Y_(i,l){return l}function W_(i,l){if(Yt){var f=In.formState;if(f!==null){e:{var p=Rt;if(Yt){if(Mn){t:{for(var E=Mn,w=ta;E.nodeType!==8;){if(!w){E=null;break t}if(E=ra(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Mn=ra(E.nextSibling),p=E.data==="F!";break e}}Qi(p)}p=!1}p&&(l=f[0])}}return f=ls(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y_,lastRenderedState:l},f.queue=p,f=mE.bind(null,Rt,p),p.dispatch=f,p=eg(!1),w=og.bind(null,Rt,!1,p.queue),p=ls(),E={state:l,dispatch:null,action:i,pending:null},p.queue=E,f=M3.bind(null,Rt,E,w,f),E.dispatch=f,p.memoizedState=i,[l,f,!1]}function Z_(i){var l=Xn();return X_(l,Tn,i)}function X_(i,l,f){if(l=Xm(i,l,Y_)[0],i=Ah(vi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Wu(l)}catch(P){throw P===_c?mh:P}else p=l;l=Xn();var E=l.queue,w=E.dispatch;return f!==l.memoizedState&&(Rt.flags|=2048,Ac(9,{destroy:void 0},P3.bind(null,E,f),null)),[p,w,i]}function P3(i,l){i.action=l}function Q_(i){var l=Xn(),f=Tn;if(f!==null)return X_(l,f,i);Xn(),l=l.memoizedState,f=Xn();var p=f.queue.dispatch;return f.memoizedState=i,[l,p,!1]}function Ac(i,l,f,p){return i={tag:i,create:f,deps:p,inst:l,next:null},l=Rt.updateQueue,l===null&&(l=wh(),Rt.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=i.next=i:(p=f.next,f.next=i,i.next=p,l.lastEffect=i),i}function eE(){return Xn().memoizedState}function bh(i,l,f,p){var E=ls();Rt.flags|=i,E.memoizedState=Ac(1|l,{destroy:void 0},f,p===void 0?null:p)}function Ch(i,l,f,p){var E=Xn();p=p===void 0?null:p;var w=E.memoizedState.inst;Tn!==null&&p!==null&&qm(p,Tn.memoizedState.deps)?E.memoizedState=Ac(l,w,f,p):(Rt.flags|=i,E.memoizedState=Ac(1|l,w,f,p))}function tE(i,l){bh(8390656,8,i,l)}function ng(i,l){Ch(2048,8,i,l)}function F3(i){Rt.flags|=4;var l=Rt.updateQueue;if(l===null)l=wh(),Rt.updateQueue=l,l.events=[i];else{var f=l.events;f===null?l.events=[i]:f.push(i)}}function nE(i){var l=Xn().memoizedState;return F3({ref:l,nextImpl:i}),function(){if((un&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function rE(i,l){return Ch(4,2,i,l)}function sE(i,l){return Ch(4,4,i,l)}function aE(i,l){if(typeof l=="function"){i=i();var f=l(i);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function iE(i,l,f){f=f!=null?f.concat([i]):null,Ch(4,4,aE.bind(null,l,i),f)}function rg(){}function oE(i,l){var f=Xn();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&qm(l,p[1])?p[0]:(f.memoizedState=[i,l],i)}function lE(i,l){var f=Xn();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&qm(l,p[1]))return p[0];if(p=i(),gl){kr(!0);try{i()}finally{kr(!1)}}return f.memoizedState=[p,l],p}function sg(i,l,f){return f===void 0||(xi&1073741824)!==0&&(Ht&261930)===0?i.memoizedState=l:(i.memoizedState=f,i=cT(),Rt.lanes|=i,lo|=i,f)}function cE(i,l,f,p){return Ds(f,l)?f:Tc.current!==null?(i=sg(i,f,p),Ds(i,l)||(or=!0),i):(xi&42)===0||(xi&1073741824)!==0&&(Ht&261930)===0?(or=!0,i.memoizedState=f):(i=cT(),Rt.lanes|=i,lo|=i,l)}function uE(i,l,f,p,E){var w=fe.p;fe.p=w!==0&&8>w?w:8;var P=ie.T,q={};ie.T=q,og(i,!1,l,f);try{var oe=E(),Ee=ie.S;if(Ee!==null&&Ee(q,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Me=k3(oe,p);Zu(i,l,Me,Us(i))}else Zu(i,l,p,Us(i))}catch(Fe){Zu(i,l,{then:function(){},status:"rejected",reason:Fe},Us())}finally{fe.p=w,P!==null&&q.types!==null&&(P.types=q.types),ie.T=P}}function O3(){}function ag(i,l,f,p){if(i.tag!==5)throw Error(r(476));var E=fE(i).queue;uE(i,E,l,ce,f===null?O3:function(){return dE(i),f(p)})}function fE(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:ce},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:f},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function dE(i){var l=fE(i);l.next===null&&(l=i.alternate.memoizedState),Zu(i,l.next.queue,{},Us())}function ig(){return Or(mf)}function hE(){return Xn().memoizedState}function pE(){return Xn().memoizedState}function L3(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var f=Us();i=no(f);var p=ro(l,i,f);p!==null&&(Ss(p,l,f),qu(p,l,f)),l={cache:Fm()},i.payload=l;return}l=l.return}}function U3(i,l,f){var p=Us();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Nh(i)?gE(l,f):(f=Sm(i,l,f,p),f!==null&&(Ss(f,i,p),xE(f,l,p)))}function mE(i,l,f){var p=Us();Zu(i,l,f,p)}function Zu(i,l,f,p){var E={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Nh(i))gE(l,E);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var P=l.lastRenderedState,q=w(P,f);if(E.hasEagerState=!0,E.eagerState=q,Ds(q,P))return lh(i,l,E,0),In===null&&oh(),!1}catch{}if(f=Sm(i,l,E,p),f!==null)return Ss(f,i,p),xE(f,l,p),!0}return!1}function og(i,l,f,p){if(p={lane:2,revertLane:Vg(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Nh(i)){if(l)throw Error(r(479))}else l=Sm(i,f,p,2),l!==null&&Ss(l,i,2)}function Nh(i){var l=i.alternate;return i===Rt||l!==null&&l===Rt}function gE(i,l){wc=Eh=!0;var f=i.pending;f===null?l.next=l:(l.next=f.next,f.next=l),i.pending=l}function xE(i,l,f){if((f&4194048)!==0){var p=l.lanes;p&=i.pendingLanes,f|=p,l.lanes=f,Ks(i,f)}}var Xu={readContext:Or,use:Sh,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn,useHostTransitionStatus:Hn,useFormState:Hn,useActionState:Hn,useOptimistic:Hn,useMemoCache:Hn,useCacheRefresh:Hn};Xu.useEffectEvent=Hn;var vE={readContext:Or,use:Sh,useCallback:function(i,l){return ls().memoizedState=[i,l===void 0?null:l],i},useContext:Or,useEffect:tE,useImperativeHandle:function(i,l,f){f=f!=null?f.concat([i]):null,bh(4194308,4,aE.bind(null,l,i),f)},useLayoutEffect:function(i,l){return bh(4194308,4,i,l)},useInsertionEffect:function(i,l){bh(4,2,i,l)},useMemo:function(i,l){var f=ls();l=l===void 0?null:l;var p=i();if(gl){kr(!0);try{i()}finally{kr(!1)}}return f.memoizedState=[p,l],p},useReducer:function(i,l,f){var p=ls();if(f!==void 0){var E=f(l);if(gl){kr(!0);try{f(l)}finally{kr(!1)}}}else E=l;return p.memoizedState=p.baseState=E,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:E},p.queue=i,i=i.dispatch=U3.bind(null,Rt,i),[p.memoizedState,i]},useRef:function(i){var l=ls();return i={current:i},l.memoizedState=i},useState:function(i){i=eg(i);var l=i.queue,f=mE.bind(null,Rt,l);return l.dispatch=f,[i.memoizedState,f]},useDebugValue:rg,useDeferredValue:function(i,l){var f=ls();return sg(f,i,l)},useTransition:function(){var i=eg(!1);return i=uE.bind(null,Rt,i.queue,!0,!1),ls().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,f){var p=Rt,E=ls();if(Yt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),In===null)throw Error(r(349));(Ht&127)!==0||V_(p,l,f)}E.memoizedState=f;var w={value:f,getSnapshot:l};return E.queue=w,tE(z_.bind(null,p,w,i),[i]),p.flags|=2048,Ac(9,{destroy:void 0},B_.bind(null,p,w,f,l),null),f},useId:function(){var i=ls(),l=In.identifierPrefix;if(Yt){var f=qa,p=$a;f=(p&~(1<<32-Rn(p)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Th++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=R3++,l="_"+l+"r_"+f.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:ig,useFormState:W_,useActionState:W_,useOptimistic:function(i){var l=ls();l.memoizedState=l.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=og.bind(null,Rt,!0,f),f.dispatch=l,[i,l]},useMemoCache:Zm,useCacheRefresh:function(){return ls().memoizedState=L3.bind(null,Rt)},useEffectEvent:function(i){var l=ls(),f={impl:i};return l.memoizedState=f,function(){if((un&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},lg={readContext:Or,use:Sh,useCallback:oE,useContext:Or,useEffect:ng,useImperativeHandle:iE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:Ah,useRef:eE,useState:function(){return Ah(vi)},useDebugValue:rg,useDeferredValue:function(i,l){var f=Xn();return cE(f,Tn.memoizedState,i,l)},useTransition:function(){var i=Ah(vi)[0],l=Xn().memoizedState;return[typeof i=="boolean"?i:Wu(i),l]},useSyncExternalStore:U_,useId:hE,useHostTransitionStatus:ig,useFormState:Z_,useActionState:Z_,useOptimistic:function(i,l){var f=Xn();return G_(f,Tn,i,l)},useMemoCache:Zm,useCacheRefresh:pE};lg.useEffectEvent=nE;var yE={readContext:Or,use:Sh,useCallback:oE,useContext:Or,useEffect:ng,useImperativeHandle:iE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:Qm,useRef:eE,useState:function(){return Qm(vi)},useDebugValue:rg,useDeferredValue:function(i,l){var f=Xn();return Tn===null?sg(f,i,l):cE(f,Tn.memoizedState,i,l)},useTransition:function(){var i=Qm(vi)[0],l=Xn().memoizedState;return[typeof i=="boolean"?i:Wu(i),l]},useSyncExternalStore:U_,useId:hE,useHostTransitionStatus:ig,useFormState:Q_,useActionState:Q_,useOptimistic:function(i,l){var f=Xn();return Tn!==null?G_(f,Tn,i,l):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:Zm,useCacheRefresh:pE};yE.useEffectEvent=nE;function cg(i,l,f,p){l=i.memoizedState,f=f(p,l),f=f==null?l:x({},l,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var ug={enqueueSetState:function(i,l,f){i=i._reactInternals;var p=Us(),E=no(p);E.payload=l,f!=null&&(E.callback=f),l=ro(i,E,p),l!==null&&(Ss(l,i,p),qu(l,i,p))},enqueueReplaceState:function(i,l,f){i=i._reactInternals;var p=Us(),E=no(p);E.tag=1,E.payload=l,f!=null&&(E.callback=f),l=ro(i,E,p),l!==null&&(Ss(l,i,p),qu(l,i,p))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var f=Us(),p=no(f);p.tag=2,l!=null&&(p.callback=l),l=ro(i,p,f),l!==null&&(Ss(l,i,f),qu(l,i,f))}};function _E(i,l,f,p,E,w,P){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,P):l.prototype&&l.prototype.isPureReactComponent?!Uu(f,p)||!Uu(E,w):!0}function EE(i,l,f,p){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==i&&ug.enqueueReplaceState(l,l.state,null)}function xl(i,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(i=i.defaultProps){f===l&&(f=x({},f));for(var E in i)f[E]===void 0&&(f[E]=i[E])}return f}function TE(i){ih(i)}function wE(i){console.error(i)}function SE(i){ih(i)}function Ih(i,l){try{var f=i.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function AE(i,l,f){try{var p=i.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function fg(i,l,f){return f=no(f),f.tag=3,f.payload={element:null},f.callback=function(){Ih(i,l)},f}function bE(i){return i=no(i),i.tag=3,i}function CE(i,l,f,p){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var w=p.value;i.payload=function(){return E(w)},i.callback=function(){AE(l,f,p)}}var P=f.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(i.callback=function(){AE(l,f,p),typeof E!="function"&&(co===null?co=new Set([this]):co.add(this));var q=p.stack;this.componentDidCatch(p.value,{componentStack:q!==null?q:""})})}function V3(i,l,f,p,E){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&xc(l,f,E,!0),f=Ps.current,f!==null){switch(f.tag){case 31:case 13:return na===null?zh():f.alternate===null&&Gn===0&&(Gn=3),f.flags&=-257,f.flags|=65536,f.lanes=E,p===gh?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),Og(i,p,E)),!1;case 22:return f.flags|=65536,p===gh?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),Og(i,p,E)),!1}throw Error(r(435,f.tag))}return Og(i,p,E),zh(),!1}if(Yt)return l=Ps.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=E,p!==km&&(i=Error(r(422),{cause:p}),zu(Xs(i,f)))):(p!==km&&(l=Error(r(423),{cause:p}),zu(Xs(l,f))),i=i.current.alternate,i.flags|=65536,E&=-E,i.lanes|=E,p=Xs(p,f),E=fg(i.stateNode,p,E),zm(i,E),Gn!==4&&(Gn=2)),!1;var w=Error(r(520),{cause:p});if(w=Xs(w,f),of===null?of=[w]:of.push(w),Gn!==4&&(Gn=2),l===null)return!0;p=Xs(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,i=E&-E,f.lanes|=i,i=fg(f.stateNode,p,i),zm(f,i),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(co===null||!co.has(w))))return f.flags|=65536,E&=-E,f.lanes|=E,E=bE(E),CE(E,i,f,p),zm(f,E),!1}f=f.return}while(f!==null);return!1}var dg=Error(r(461)),or=!1;function Lr(i,l,f,p){l.child=i===null?R_(l,null,f,p):ml(l,i.child,f,p)}function NE(i,l,f,p,E){f=f.render;var w=l.ref;if("ref"in p){var P={};for(var q in p)q!=="ref"&&(P[q]=p[q])}else P=p;return fl(l),p=Km(i,l,f,P,w,E),q=Jm(),i!==null&&!or?(Ym(i,l,E),yi(i,l,E)):(Yt&&q&&Nm(l),l.flags|=1,Lr(i,l,p,E),l.child)}function IE(i,l,f,p,E){if(i===null){var w=f.type;return typeof w=="function"&&!Am(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,kE(i,l,w,p,E)):(i=uh(f.type,null,p,l,l.mode,E),i.ref=l.ref,i.return=l,l.child=i)}if(w=i.child,!_g(i,E)){var P=w.memoizedProps;if(f=f.compare,f=f!==null?f:Uu,f(P,p)&&i.ref===l.ref)return yi(i,l,E)}return l.flags|=1,i=hi(w,p),i.ref=l.ref,i.return=l,l.child=i}function kE(i,l,f,p,E){if(i!==null){var w=i.memoizedProps;if(Uu(w,p)&&i.ref===l.ref)if(or=!1,l.pendingProps=p=w,_g(i,E))(i.flags&131072)!==0&&(or=!0);else return l.lanes=i.lanes,yi(i,l,E)}return hg(i,l,f,p,E)}function RE(i,l,f,p){var E=p.children,w=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,i!==null){for(p=l.child=i.child,E=0;p!==null;)E=E|p.lanes|p.childLanes,p=p.sibling;p=E&~w}else p=0,l.child=null;return DE(i,l,w,f,p)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&ph(l,w!==null?w.cachePool:null),w!==null?P_(l,w):Hm(),F_(l);else return p=l.lanes=536870912,DE(i,l,w!==null?w.baseLanes|f:f,f,p)}else w!==null?(ph(l,w.cachePool),P_(l,w),ao(),l.memoizedState=null):(i!==null&&ph(l,null),Hm(),ao());return Lr(i,l,E,f),l.child}function Qu(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function DE(i,l,f,p,E){var w=Lm();return w=w===null?null:{parent:ar._currentValue,pool:w},l.memoizedState={baseLanes:f,cachePool:w},i!==null&&ph(l,null),Hm(),F_(l),i!==null&&xc(i,l,p,!0),l.childLanes=E,null}function kh(i,l){return l=Dh({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function ME(i,l,f){return ml(l,i.child,null,f),i=kh(l,l.pendingProps),i.flags|=2,Fs(l),l.memoizedState=null,i}function B3(i,l,f){var p=l.pendingProps,E=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(Yt){if(p.mode==="hidden")return i=kh(l,p),l.lanes=536870912,Qu(null,i);if($m(l),(i=Mn)?(i=$T(i,ta),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Zi!==null?{id:$a,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},f=g_(i),f.return=l,l.child=f,Fr=l,Mn=null)):i=null,i===null)throw Qi(l);return l.lanes=536870912,null}return kh(l,p)}var w=i.memoizedState;if(w!==null){var P=w.dehydrated;if($m(l),E)if(l.flags&256)l.flags&=-257,l=ME(i,l,f);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(r(558));else if(or||xc(i,l,f,!1),E=(f&i.childLanes)!==0,or||E){if(p=In,p!==null&&(P=sr(p,f),P!==0&&P!==w.retryLane))throw w.retryLane=P,ol(i,P),Ss(p,i,P),dg;zh(),l=ME(i,l,f)}else i=w.treeContext,Mn=ra(P.nextSibling),Fr=l,Yt=!0,Xi=null,ta=!1,i!==null&&y_(l,i),l=kh(l,p),l.flags|=4096;return l}return i=hi(i.child,{mode:p.mode,children:p.children}),i.ref=l.ref,l.child=i,i.return=l,i}function Rh(i,l){var f=l.ref;if(f===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(i===null||i.ref!==f)&&(l.flags|=4194816)}}function hg(i,l,f,p,E){return fl(l),f=Km(i,l,f,p,void 0,E),p=Jm(),i!==null&&!or?(Ym(i,l,E),yi(i,l,E)):(Yt&&p&&Nm(l),l.flags|=1,Lr(i,l,f,E),l.child)}function PE(i,l,f,p,E,w){return fl(l),l.updateQueue=null,f=L_(l,p,f,E),O_(i),p=Jm(),i!==null&&!or?(Ym(i,l,w),yi(i,l,w)):(Yt&&p&&Nm(l),l.flags|=1,Lr(i,l,f,w),l.child)}function FE(i,l,f,p,E){if(fl(l),l.stateNode===null){var w=hc,P=f.contextType;typeof P=="object"&&P!==null&&(w=Or(P)),w=new f(p,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=ug,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=p,w.state=l.memoizedState,w.refs={},Vm(l),P=f.contextType,w.context=typeof P=="object"&&P!==null?Or(P):hc,w.state=l.memoizedState,P=f.getDerivedStateFromProps,typeof P=="function"&&(cg(l,f,P,p),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(P=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),P!==w.state&&ug.enqueueReplaceState(w,w.state,null),Ju(l,p,w,E),Ku(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(i===null){w=l.stateNode;var q=l.memoizedProps,oe=xl(f,q);w.props=oe;var Ee=w.context,Me=f.contextType;P=hc,typeof Me=="object"&&Me!==null&&(P=Or(Me));var Fe=f.getDerivedStateFromProps;Me=typeof Fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",q=l.pendingProps!==q,Me||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(q||Ee!==P)&&EE(l,w,p,P),to=!1;var we=l.memoizedState;w.state=we,Ju(l,p,w,E),Ku(),Ee=l.memoizedState,q||we!==Ee||to?(typeof Fe=="function"&&(cg(l,f,Fe,p),Ee=l.memoizedState),(oe=to||_E(l,f,oe,p,we,Ee,P))?(Me||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=Ee),w.props=p,w.state=Ee,w.context=P,p=oe):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{w=l.stateNode,Bm(i,l),P=l.memoizedProps,Me=xl(f,P),w.props=Me,Fe=l.pendingProps,we=w.context,Ee=f.contextType,oe=hc,typeof Ee=="object"&&Ee!==null&&(oe=Or(Ee)),q=f.getDerivedStateFromProps,(Ee=typeof q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==Fe||we!==oe)&&EE(l,w,p,oe),to=!1,we=l.memoizedState,w.state=we,Ju(l,p,w,E),Ku();var Ce=l.memoizedState;P!==Fe||we!==Ce||to||i!==null&&i.dependencies!==null&&dh(i.dependencies)?(typeof q=="function"&&(cg(l,f,q,p),Ce=l.memoizedState),(Me=to||_E(l,f,Me,p,we,Ce,oe)||i!==null&&i.dependencies!==null&&dh(i.dependencies))?(Ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,Ce,oe),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,Ce,oe)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===i.memoizedProps&&we===i.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&we===i.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Ce),w.props=p,w.state=Ce,w.context=oe,p=Me):(typeof w.componentDidUpdate!="function"||P===i.memoizedProps&&we===i.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&we===i.memoizedState||(l.flags|=1024),p=!1)}return w=p,Rh(i,l),p=(l.flags&128)!==0,w||p?(w=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,i!==null&&p?(l.child=ml(l,i.child,null,E),l.child=ml(l,null,f,E)):Lr(i,l,f,E),l.memoizedState=w.state,i=l.child):i=yi(i,l,E),i}function OE(i,l,f,p){return cl(),l.flags|=256,Lr(i,l,f,p),l.child}var pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mg(i){return{baseLanes:i,cachePool:A_()}}function gg(i,l,f){return i=i!==null?i.childLanes&~f:0,l&&(i|=Ls),i}function LE(i,l,f){var p=l.pendingProps,E=!1,w=(l.flags&128)!==0,P;if((P=w)||(P=i!==null&&i.memoizedState===null?!1:(Zn.current&2)!==0),P&&(E=!0,l.flags&=-129),P=(l.flags&32)!==0,l.flags&=-33,i===null){if(Yt){if(E?so(l):ao(),(i=Mn)?(i=$T(i,ta),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Zi!==null?{id:$a,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},f=g_(i),f.return=l,l.child=f,Fr=l,Mn=null)):i=null,i===null)throw Qi(l);return Xg(i)?l.lanes=32:l.lanes=536870912,null}var q=p.children;return p=p.fallback,E?(ao(),E=l.mode,q=Dh({mode:"hidden",children:q},E),p=ll(p,E,f,null),q.return=l,p.return=l,q.sibling=p,l.child=q,p=l.child,p.memoizedState=mg(f),p.childLanes=gg(i,P,f),l.memoizedState=pg,Qu(null,p)):(so(l),xg(l,q))}var oe=i.memoizedState;if(oe!==null&&(q=oe.dehydrated,q!==null)){if(w)l.flags&256?(so(l),l.flags&=-257,l=vg(i,l,f)):l.memoizedState!==null?(ao(),l.child=i.child,l.flags|=128,l=null):(ao(),q=p.fallback,E=l.mode,p=Dh({mode:"visible",children:p.children},E),q=ll(q,E,f,null),q.flags|=2,p.return=l,q.return=l,p.sibling=q,l.child=p,ml(l,i.child,null,f),p=l.child,p.memoizedState=mg(f),p.childLanes=gg(i,P,f),l.memoizedState=pg,l=Qu(null,p));else if(so(l),Xg(q)){if(P=q.nextSibling&&q.nextSibling.dataset,P)var Ee=P.dgst;P=Ee,p=Error(r(419)),p.stack="",p.digest=P,zu({value:p,source:null,stack:null}),l=vg(i,l,f)}else if(or||xc(i,l,f,!1),P=(f&i.childLanes)!==0,or||P){if(P=In,P!==null&&(p=sr(P,f),p!==0&&p!==oe.retryLane))throw oe.retryLane=p,ol(i,p),Ss(P,i,p),dg;Zg(q)||zh(),l=vg(i,l,f)}else Zg(q)?(l.flags|=192,l.child=i.child,l=null):(i=oe.treeContext,Mn=ra(q.nextSibling),Fr=l,Yt=!0,Xi=null,ta=!1,i!==null&&y_(l,i),l=xg(l,p.children),l.flags|=4096);return l}return E?(ao(),q=p.fallback,E=l.mode,oe=i.child,Ee=oe.sibling,p=hi(oe,{mode:"hidden",children:p.children}),p.subtreeFlags=oe.subtreeFlags&65011712,Ee!==null?q=hi(Ee,q):(q=ll(q,E,f,null),q.flags|=2),q.return=l,p.return=l,p.sibling=q,l.child=p,Qu(null,p),p=l.child,q=i.child.memoizedState,q===null?q=mg(f):(E=q.cachePool,E!==null?(oe=ar._currentValue,E=E.parent!==oe?{parent:oe,pool:oe}:E):E=A_(),q={baseLanes:q.baseLanes|f,cachePool:E}),p.memoizedState=q,p.childLanes=gg(i,P,f),l.memoizedState=pg,Qu(i.child,p)):(so(l),f=i.child,i=f.sibling,f=hi(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,i!==null&&(P=l.deletions,P===null?(l.deletions=[i],l.flags|=16):P.push(i)),l.child=f,l.memoizedState=null,f)}function xg(i,l){return l=Dh({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Dh(i,l){return i=Ms(22,i,null,l),i.lanes=0,i}function vg(i,l,f){return ml(l,i.child,null,f),i=xg(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function UE(i,l,f){i.lanes|=l;var p=i.alternate;p!==null&&(p.lanes|=l),Mm(i.return,l,f)}function yg(i,l,f,p,E,w){var P=i.memoizedState;P===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:E,treeForkCount:w}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=p,P.tail=f,P.tailMode=E,P.treeForkCount=w)}function VE(i,l,f){var p=l.pendingProps,E=p.revealOrder,w=p.tail;p=p.children;var P=Zn.current,q=(P&2)!==0;if(q?(P=P&1|2,l.flags|=128):P&=1,Q(Zn,P),Lr(i,l,p,f),p=Yt?Bu:0,!q&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&UE(i,f,l);else if(i.tag===19)UE(i,f,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(E){case"forwards":for(f=l.child,E=null;f!==null;)i=f.alternate,i!==null&&_h(i)===null&&(E=f),f=f.sibling;f=E,f===null?(E=l.child,l.child=null):(E=f.sibling,f.sibling=null),yg(l,!1,E,f,w,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,E=l.child,l.child=null;E!==null;){if(i=E.alternate,i!==null&&_h(i)===null){l.child=E;break}i=E.sibling,E.sibling=f,f=E,E=i}yg(l,!0,f,null,w,p);break;case"together":yg(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function yi(i,l,f){if(i!==null&&(l.dependencies=i.dependencies),lo|=l.lanes,(f&l.childLanes)===0)if(i!==null){if(xc(i,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,f=hi(i,i.pendingProps),l.child=f,f.return=l;i.sibling!==null;)i=i.sibling,f=f.sibling=hi(i,i.pendingProps),f.return=l;f.sibling=null}return l.child}function _g(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&dh(i)))}function z3(i,l,f){switch(l.tag){case 3:Ne(l,l.stateNode.containerInfo),eo(l,ar,i.memoizedState.cache),cl();break;case 27:case 5:ke(l);break;case 4:Ne(l,l.stateNode.containerInfo);break;case 10:eo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,$m(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(so(l),l.flags|=128,null):(f&l.child.childLanes)!==0?LE(i,l,f):(so(l),i=yi(i,l,f),i!==null?i.sibling:null);so(l);break;case 19:var E=(i.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(xc(i,l,f,!1),p=(f&l.childLanes)!==0),E){if(p)return VE(i,l,f);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Q(Zn,Zn.current),p)break;return null;case 22:return l.lanes=0,RE(i,l,f,l.pendingProps);case 24:eo(l,ar,i.memoizedState.cache)}return yi(i,l,f)}function BE(i,l,f){if(i!==null)if(i.memoizedProps!==l.pendingProps)or=!0;else{if(!_g(i,f)&&(l.flags&128)===0)return or=!1,z3(i,l,f);or=(i.flags&131072)!==0}else or=!1,Yt&&(l.flags&1048576)!==0&&v_(l,Bu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(i=hl(l.elementType),l.type=i,typeof i=="function")Am(i)?(p=xl(i,p),l.tag=1,l=FE(null,l,i,p,f)):(l.tag=0,l=hg(null,l,i,p,f));else{if(i!=null){var E=i.$$typeof;if(E===L){l.tag=11,l=NE(null,l,i,p,f);break e}else if(E===I){l.tag=14,l=IE(null,l,i,p,f);break e}}throw l=he(i)||i,Error(r(306,l,""))}}return l;case 0:return hg(i,l,l.type,l.pendingProps,f);case 1:return p=l.type,E=xl(p,l.pendingProps),FE(i,l,p,E,f);case 3:e:{if(Ne(l,l.stateNode.containerInfo),i===null)throw Error(r(387));p=l.pendingProps;var w=l.memoizedState;E=w.element,Bm(i,l),Ju(l,p,null,f);var P=l.memoizedState;if(p=P.cache,eo(l,ar,p),p!==w.cache&&Pm(l,[ar],f,!0),Ku(),p=P.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:P.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=OE(i,l,p,f);break e}else if(p!==E){E=Xs(Error(r(424)),l),zu(E),l=OE(i,l,p,f);break e}else for(i=l.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Mn=ra(i.firstChild),Fr=l,Yt=!0,Xi=null,ta=!0,f=R_(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(cl(),p===E){l=yi(i,l,f);break e}Lr(i,l,p,f)}l=l.child}return l;case 26:return Rh(i,l),i===null?(f=ZT(l.type,null,l.pendingProps,null))?l.memoizedState=f:Yt||(f=l.type,i=l.pendingProps,p=Jh(le.current).createElement(f),p[X]=l,p[ee]=i,Ur(p,f,i),nt(p),l.stateNode=p):l.memoizedState=ZT(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return ke(l),i===null&&Yt&&(p=l.stateNode=JT(l.type,l.pendingProps,le.current),Fr=l,ta=!0,E=Mn,po(l.type)?(Qg=E,Mn=ra(p.firstChild)):Mn=E),Lr(i,l,l.pendingProps.children,f),Rh(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Yt&&((E=p=Mn)&&(p=xD(p,l.type,l.pendingProps,ta),p!==null?(l.stateNode=p,Fr=l,Mn=ra(p.firstChild),ta=!1,E=!0):E=!1),E||Qi(l)),ke(l),E=l.type,w=l.pendingProps,P=i!==null?i.memoizedProps:null,p=w.children,Jg(E,w)?p=null:P!==null&&Jg(E,P)&&(l.flags|=32),l.memoizedState!==null&&(E=Km(i,l,D3,null,null,f),mf._currentValue=E),Rh(i,l),Lr(i,l,p,f),l.child;case 6:return i===null&&Yt&&((i=f=Mn)&&(f=vD(f,l.pendingProps,ta),f!==null?(l.stateNode=f,Fr=l,Mn=null,i=!0):i=!1),i||Qi(l)),null;case 13:return LE(i,l,f);case 4:return Ne(l,l.stateNode.containerInfo),p=l.pendingProps,i===null?l.child=ml(l,null,p,f):Lr(i,l,p,f),l.child;case 11:return NE(i,l,l.type,l.pendingProps,f);case 7:return Lr(i,l,l.pendingProps,f),l.child;case 8:return Lr(i,l,l.pendingProps.children,f),l.child;case 12:return Lr(i,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,eo(l,l.type,p.value),Lr(i,l,p.children,f),l.child;case 9:return E=l.type._context,p=l.pendingProps.children,fl(l),E=Or(E),p=p(E),l.flags|=1,Lr(i,l,p,f),l.child;case 14:return IE(i,l,l.type,l.pendingProps,f);case 15:return kE(i,l,l.type,l.pendingProps,f);case 19:return VE(i,l,f);case 31:return B3(i,l,f);case 22:return RE(i,l,f,l.pendingProps);case 24:return fl(l),p=Or(ar),i===null?(E=Lm(),E===null&&(E=In,w=Fm(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=f),E=w),l.memoizedState={parent:p,cache:E},Vm(l),eo(l,ar,E)):((i.lanes&f)!==0&&(Bm(i,l),Ju(l,null,null,f),Ku()),E=i.memoizedState,w=l.memoizedState,E.parent!==p?(E={parent:p,cache:p},l.memoizedState=E,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=E),eo(l,ar,p)):(p=w.cache,eo(l,ar,p),p!==E.cache&&Pm(l,[ar],f,!0))),Lr(i,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function _i(i){i.flags|=4}function Eg(i,l,f,p,E){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(E&335544128)===E)if(i.stateNode.complete)i.flags|=8192;else if(hT())i.flags|=8192;else throw pl=gh,Um}else i.flags&=-16777217}function zE(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!nw(l))if(hT())i.flags|=8192;else throw pl=gh,Um}function Mh(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?qs():536870912,i.lanes|=l,Ic|=l)}function ef(i,l){if(!Yt)switch(i.tailMode){case"hidden":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Pn(i){var l=i.alternate!==null&&i.alternate.child===i.child,f=0,p=0;if(l)for(var E=i.child;E!==null;)f|=E.lanes|E.childLanes,p|=E.subtreeFlags&65011712,p|=E.flags&65011712,E.return=i,E=E.sibling;else for(E=i.child;E!==null;)f|=E.lanes|E.childLanes,p|=E.subtreeFlags,p|=E.flags,E.return=i,E=E.sibling;return i.subtreeFlags|=p,i.childLanes=f,l}function j3(i,l,f){var p=l.pendingProps;switch(Im(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(l),null;case 1:return Pn(l),null;case 3:return f=l.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),gi(ar),be(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(gc(l)?_i(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Rm())),Pn(l),null;case 26:var E=l.type,w=l.memoizedState;return i===null?(_i(l),w!==null?(Pn(l),zE(l,w)):(Pn(l),Eg(l,E,null,p,f))):w?w!==i.memoizedState?(_i(l),Pn(l),zE(l,w)):(Pn(l),l.flags&=-16777217):(i=i.memoizedProps,i!==p&&_i(l),Pn(l),Eg(l,E,i,p,f)),null;case 27:if($e(l),f=le.current,E=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==p&&_i(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Pn(l),null}i=te.current,gc(l)?__(l):(i=JT(E,p,f),l.stateNode=i,_i(l))}return Pn(l),null;case 5:if($e(l),E=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==p&&_i(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Pn(l),null}if(w=te.current,gc(l))__(l);else{var P=Jh(le.current);switch(w){case 1:w=P.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:w=P.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":w=P.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":w=P.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":w=P.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof p.is=="string"?P.createElement("select",{is:p.is}):P.createElement("select"),p.multiple?w.multiple=!0:p.size&&(w.size=p.size);break;default:w=typeof p.is=="string"?P.createElement(E,{is:p.is}):P.createElement(E)}}w[X]=l,w[ee]=p;e:for(P=l.child;P!==null;){if(P.tag===5||P.tag===6)w.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===l)break e;for(;P.sibling===null;){if(P.return===null||P.return===l)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}l.stateNode=w;e:switch(Ur(w,E,p),E){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&_i(l)}}return Pn(l),Eg(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,f),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==p&&_i(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(i=le.current,gc(l)){if(i=l.stateNode,f=l.memoizedProps,p=null,E=Fr,E!==null)switch(E.tag){case 27:case 5:p=E.memoizedProps}i[X]=l,i=!!(i.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||LT(i.nodeValue,f)),i||Qi(l,!0)}else i=Jh(i).createTextNode(p),i[X]=l,l.stateNode=i}return Pn(l),null;case 31:if(f=l.memoizedState,i===null||i.memoizedState!==null){if(p=gc(l),f!==null){if(i===null){if(!p)throw Error(r(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[X]=l}else cl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Pn(l),i=!1}else f=Rm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),i=!0;if(!i)return l.flags&256?(Fs(l),l):(Fs(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Pn(l),null;case 13:if(p=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(E=gc(l),p!==null&&p.dehydrated!==null){if(i===null){if(!E)throw Error(r(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[X]=l}else cl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Pn(l),E=!1}else E=Rm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=E),E=!0;if(!E)return l.flags&256?(Fs(l),l):(Fs(l),null)}return Fs(l),(l.flags&128)!==0?(l.lanes=f,l):(f=p!==null,i=i!==null&&i.memoizedState!==null,f&&(p=l.child,E=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(E=p.alternate.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==E&&(p.flags|=2048)),f!==i&&f&&(l.child.flags|=8192),Mh(l,l.updateQueue),Pn(l),null);case 4:return be(),i===null&&Hg(l.stateNode.containerInfo),Pn(l),null;case 10:return gi(l.type),Pn(l),null;case 19:if(H(Zn),p=l.memoizedState,p===null)return Pn(l),null;if(E=(l.flags&128)!==0,w=p.rendering,w===null)if(E)ef(p,!1);else{if(Gn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(w=_h(i),w!==null){for(l.flags|=128,ef(p,!1),i=w.updateQueue,l.updateQueue=i,Mh(l,i),l.subtreeFlags=0,i=f,f=l.child;f!==null;)m_(f,i),f=f.sibling;return Q(Zn,Zn.current&1|2),Yt&&pi(l,p.treeForkCount),l.child}i=i.sibling}p.tail!==null&&vt()>Uh&&(l.flags|=128,E=!0,ef(p,!1),l.lanes=4194304)}else{if(!E)if(i=_h(w),i!==null){if(l.flags|=128,E=!0,i=i.updateQueue,l.updateQueue=i,Mh(l,i),ef(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!Yt)return Pn(l),null}else 2*vt()-p.renderingStartTime>Uh&&f!==536870912&&(l.flags|=128,E=!0,ef(p,!1),l.lanes=4194304);p.isBackwards?(w.sibling=l.child,l.child=w):(i=p.last,i!==null?i.sibling=w:l.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=vt(),i.sibling=null,f=Zn.current,Q(Zn,E?f&1|2:f&1),Yt&&pi(l,p.treeForkCount),i):(Pn(l),null);case 22:case 23:return Fs(l),Gm(),p=l.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(Pn(l),l.subtreeFlags&6&&(l.flags|=8192)):Pn(l),f=l.updateQueue,f!==null&&Mh(l,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),i!==null&&H(dl),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),gi(ar),Pn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function H3(i,l){switch(Im(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return gi(ar),be(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return $e(l),null;case 31:if(l.memoizedState!==null){if(Fs(l),l.alternate===null)throw Error(r(340));cl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(Fs(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));cl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return H(Zn),null;case 4:return be(),null;case 10:return gi(l.type),null;case 22:case 23:return Fs(l),Gm(),i!==null&&H(dl),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return gi(ar),null;case 25:return null;default:return null}}function jE(i,l){switch(Im(l),l.tag){case 3:gi(ar),be();break;case 26:case 27:case 5:$e(l);break;case 4:be();break;case 31:l.memoizedState!==null&&Fs(l);break;case 13:Fs(l);break;case 19:H(Zn);break;case 10:gi(l.type);break;case 22:case 23:Fs(l),Gm(),i!==null&&H(dl);break;case 24:gi(ar)}}function tf(i,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var E=p.next;f=E;do{if((f.tag&i)===i){p=void 0;var w=f.create,P=f.inst;p=w(),P.destroy=p}f=f.next}while(f!==E)}}catch(q){xn(l,l.return,q)}}function io(i,l,f){try{var p=l.updateQueue,E=p!==null?p.lastEffect:null;if(E!==null){var w=E.next;p=w;do{if((p.tag&i)===i){var P=p.inst,q=P.destroy;if(q!==void 0){P.destroy=void 0,E=l;var oe=f,Ee=q;try{Ee()}catch(Me){xn(E,oe,Me)}}}p=p.next}while(p!==w)}}catch(Me){xn(l,l.return,Me)}}function HE(i){var l=i.updateQueue;if(l!==null){var f=i.stateNode;try{M_(l,f)}catch(p){xn(i,i.return,p)}}}function GE(i,l,f){f.props=xl(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(p){xn(i,l,p)}}function nf(i,l){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof f=="function"?i.refCleanup=f(p):f.current=p}}catch(E){xn(i,l,E)}}function Ka(i,l){var f=i.ref,p=i.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(E){xn(i,l,E)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){xn(i,l,E)}else f.current=null}function $E(i){var l=i.type,f=i.memoizedProps,p=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(E){xn(i,i.return,E)}}function Tg(i,l,f){try{var p=i.stateNode;fD(p,i.type,f,l),p[ee]=l}catch(E){xn(i,i.return,E)}}function qE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&po(i.type)||i.tag===4}function wg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||qE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&po(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Sg(i,l,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(i),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=ya));else if(p!==4&&(p===27&&po(i.type)&&(f=i.stateNode,l=null),i=i.child,i!==null))for(Sg(i,l,f),i=i.sibling;i!==null;)Sg(i,l,f),i=i.sibling}function Ph(i,l,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?f.insertBefore(i,l):f.appendChild(i);else if(p!==4&&(p===27&&po(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(Ph(i,l,f),i=i.sibling;i!==null;)Ph(i,l,f),i=i.sibling}function KE(i){var l=i.stateNode,f=i.memoizedProps;try{for(var p=i.type,E=l.attributes;E.length;)l.removeAttributeNode(E[0]);Ur(l,p,f),l[X]=i,l[ee]=f}catch(w){xn(i,i.return,w)}}var Ei=!1,lr=!1,Ag=!1,JE=typeof WeakSet=="function"?WeakSet:Set,wr=null;function G3(i,l){if(i=i.containerInfo,qg=t0,i=i_(i),vm(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var E=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var P=0,q=-1,oe=-1,Ee=0,Me=0,Fe=i,we=null;t:for(;;){for(var Ce;Fe!==f||E!==0&&Fe.nodeType!==3||(q=P+E),Fe!==w||p!==0&&Fe.nodeType!==3||(oe=P+p),Fe.nodeType===3&&(P+=Fe.nodeValue.length),(Ce=Fe.firstChild)!==null;)we=Fe,Fe=Ce;for(;;){if(Fe===i)break t;if(we===f&&++Ee===E&&(q=P),we===w&&++Me===p&&(oe=P),(Ce=Fe.nextSibling)!==null)break;Fe=we,we=Fe.parentNode}Fe=Ce}f=q===-1||oe===-1?null:{start:q,end:oe}}else f=null}f=f||{start:0,end:0}}else f=null;for(Kg={focusedElem:i,selectionRange:f},t0=!1,wr=l;wr!==null;)if(l=wr,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,wr=i;else for(;wr!==null;){switch(l=wr,w=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(f=0;f<i.length;f++)E=i[f],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,f=l,E=w.memoizedProps,w=w.memoizedState,p=f.stateNode;try{var rt=xl(f.type,E);i=p.getSnapshotBeforeUpdate(rt,w),p.__reactInternalSnapshotBeforeUpdate=i}catch(xt){xn(f,f.return,xt)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,f=i.nodeType,f===9)Wg(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Wg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,wr=i;break}wr=l.return}}function YE(i,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:wi(i,f),p&4&&tf(5,f);break;case 1:if(wi(i,f),p&4)if(i=f.stateNode,l===null)try{i.componentDidMount()}catch(P){xn(f,f.return,P)}else{var E=xl(f.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(E,l,i.__reactInternalSnapshotBeforeUpdate)}catch(P){xn(f,f.return,P)}}p&64&&HE(f),p&512&&nf(f,f.return);break;case 3:if(wi(i,f),p&64&&(i=f.updateQueue,i!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{M_(i,l)}catch(P){xn(f,f.return,P)}}break;case 27:l===null&&p&4&&KE(f);case 26:case 5:wi(i,f),l===null&&p&4&&$E(f),p&512&&nf(f,f.return);break;case 12:wi(i,f);break;case 31:wi(i,f),p&4&&XE(i,f);break;case 13:wi(i,f),p&4&&QE(i,f),p&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=Q3.bind(null,f),yD(i,f))));break;case 22:if(p=f.memoizedState!==null||Ei,!p){l=l!==null&&l.memoizedState!==null||lr,E=Ei;var w=lr;Ei=p,(lr=l)&&!w?Si(i,f,(f.subtreeFlags&8772)!==0):wi(i,f),Ei=E,lr=w}break;case 30:break;default:wi(i,f)}}function WE(i){var l=i.alternate;l!==null&&(i.alternate=null,WE(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&je(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ln=null,_s=!1;function Ti(i,l,f){for(f=f.child;f!==null;)ZE(i,l,f),f=f.sibling}function ZE(i,l,f){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Ot,f)}catch{}switch(f.tag){case 26:lr||Ka(f,l),Ti(i,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:lr||Ka(f,l);var p=Ln,E=_s;po(f.type)&&(Ln=f.stateNode,_s=!1),Ti(i,l,f),df(f.stateNode),Ln=p,_s=E;break;case 5:lr||Ka(f,l);case 6:if(p=Ln,E=_s,Ln=null,Ti(i,l,f),Ln=p,_s=E,Ln!==null)if(_s)try{(Ln.nodeType===9?Ln.body:Ln.nodeName==="HTML"?Ln.ownerDocument.body:Ln).removeChild(f.stateNode)}catch(w){xn(f,l,w)}else try{Ln.removeChild(f.stateNode)}catch(w){xn(f,l,w)}break;case 18:Ln!==null&&(_s?(i=Ln,HT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),Lc(i)):HT(Ln,f.stateNode));break;case 4:p=Ln,E=_s,Ln=f.stateNode.containerInfo,_s=!0,Ti(i,l,f),Ln=p,_s=E;break;case 0:case 11:case 14:case 15:io(2,f,l),lr||io(4,f,l),Ti(i,l,f);break;case 1:lr||(Ka(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&GE(f,l,p)),Ti(i,l,f);break;case 21:Ti(i,l,f);break;case 22:lr=(p=lr)||f.memoizedState!==null,Ti(i,l,f),lr=p;break;default:Ti(i,l,f)}}function XE(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Lc(i)}catch(f){xn(l,l.return,f)}}}function QE(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Lc(i)}catch(f){xn(l,l.return,f)}}function $3(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new JE),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new JE),l;default:throw Error(r(435,i.tag))}}function Fh(i,l){var f=$3(i);l.forEach(function(p){if(!f.has(p)){f.add(p);var E=eD.bind(null,i,p);p.then(E,E)}})}function Es(i,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var E=f[p],w=i,P=l,q=P;e:for(;q!==null;){switch(q.tag){case 27:if(po(q.type)){Ln=q.stateNode,_s=!1;break e}break;case 5:Ln=q.stateNode,_s=!1;break e;case 3:case 4:Ln=q.stateNode.containerInfo,_s=!0;break e}q=q.return}if(Ln===null)throw Error(r(160));ZE(w,P,E),Ln=null,_s=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)eT(l,i),l=l.sibling}var Aa=null;function eT(i,l){var f=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Es(l,i),Ts(i),p&4&&(io(3,i,i.return),tf(3,i),io(5,i,i.return));break;case 1:Es(l,i),Ts(i),p&512&&(lr||f===null||Ka(f,f.return)),p&64&&Ei&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var E=Aa;if(Es(l,i),Ts(i),p&512&&(lr||f===null||Ka(f,f.return)),p&4){var w=f!==null?f.memoizedState:null;if(p=i.memoizedState,f===null)if(p===null)if(i.stateNode===null){e:{p=i.type,f=i.memoizedProps,E=E.ownerDocument||E;t:switch(p){case"title":w=E.getElementsByTagName("title")[0],(!w||w[_e]||w[X]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(p),E.head.insertBefore(w,E.querySelector("head > title"))),Ur(w,p,f),w[X]=i,nt(w),p=w;break e;case"link":var P=ew("link","href",E).get(p+(f.href||""));if(P){for(var q=0;q<P.length;q++)if(w=P[q],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){P.splice(q,1);break t}}w=E.createElement(p),Ur(w,p,f),E.head.appendChild(w);break;case"meta":if(P=ew("meta","content",E).get(p+(f.content||""))){for(q=0;q<P.length;q++)if(w=P[q],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){P.splice(q,1);break t}}w=E.createElement(p),Ur(w,p,f),E.head.appendChild(w);break;default:throw Error(r(468,p))}w[X]=i,nt(w),p=w}i.stateNode=p}else tw(E,i.type,i.stateNode);else i.stateNode=QT(E,p,i.memoizedProps);else w!==p?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,p===null?tw(E,i.type,i.stateNode):QT(E,p,i.memoizedProps)):p===null&&i.stateNode!==null&&Tg(i,i.memoizedProps,f.memoizedProps)}break;case 27:Es(l,i),Ts(i),p&512&&(lr||f===null||Ka(f,f.return)),f!==null&&p&4&&Tg(i,i.memoizedProps,f.memoizedProps);break;case 5:if(Es(l,i),Ts(i),p&512&&(lr||f===null||Ka(f,f.return)),i.flags&32){E=i.stateNode;try{Nn(E,"")}catch(rt){xn(i,i.return,rt)}}p&4&&i.stateNode!=null&&(E=i.memoizedProps,Tg(i,E,f!==null?f.memoizedProps:E)),p&1024&&(Ag=!0);break;case 6:if(Es(l,i),Ts(i),p&4){if(i.stateNode===null)throw Error(r(162));p=i.memoizedProps,f=i.stateNode;try{f.nodeValue=p}catch(rt){xn(i,i.return,rt)}}break;case 3:if(Zh=null,E=Aa,Aa=Yh(l.containerInfo),Es(l,i),Aa=E,Ts(i),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Lc(l.containerInfo)}catch(rt){xn(i,i.return,rt)}Ag&&(Ag=!1,tT(i));break;case 4:p=Aa,Aa=Yh(i.stateNode.containerInfo),Es(l,i),Ts(i),Aa=p;break;case 12:Es(l,i),Ts(i);break;case 31:Es(l,i),Ts(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Fh(i,p)));break;case 13:Es(l,i),Ts(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Lh=vt()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Fh(i,p)));break;case 22:E=i.memoizedState!==null;var oe=f!==null&&f.memoizedState!==null,Ee=Ei,Me=lr;if(Ei=Ee||E,lr=Me||oe,Es(l,i),lr=Me,Ei=Ee,Ts(i),p&8192)e:for(l=i.stateNode,l._visibility=E?l._visibility&-2:l._visibility|1,E&&(f===null||oe||Ei||lr||vl(i)),f=null,l=i;;){if(l.tag===5||l.tag===26){if(f===null){oe=f=l;try{if(w=oe.stateNode,E)P=w.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{q=oe.stateNode;var Fe=oe.memoizedProps.style,we=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;q.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(rt){xn(oe,oe.return,rt)}}}else if(l.tag===6){if(f===null){oe=l;try{oe.stateNode.nodeValue=E?"":oe.memoizedProps}catch(rt){xn(oe,oe.return,rt)}}}else if(l.tag===18){if(f===null){oe=l;try{var Ce=oe.stateNode;E?GT(Ce,!0):GT(oe.stateNode,!1)}catch(rt){xn(oe,oe.return,rt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=i.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Fh(i,f))));break;case 19:Es(l,i),Ts(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Fh(i,p)));break;case 30:break;case 21:break;default:Es(l,i),Ts(i)}}function Ts(i){var l=i.flags;if(l&2){try{for(var f,p=i.return;p!==null;){if(qE(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var E=f.stateNode,w=wg(i);Ph(i,w,E);break;case 5:var P=f.stateNode;f.flags&32&&(Nn(P,""),f.flags&=-33);var q=wg(i);Ph(i,q,P);break;case 3:case 4:var oe=f.stateNode.containerInfo,Ee=wg(i);Sg(i,Ee,oe);break;default:throw Error(r(161))}}catch(Me){xn(i,i.return,Me)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function tT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;tT(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function wi(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)YE(i,l.alternate,l),l=l.sibling}function vl(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:io(4,l,l.return),vl(l);break;case 1:Ka(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&GE(l,l.return,f),vl(l);break;case 27:df(l.stateNode);case 26:case 5:Ka(l,l.return),vl(l);break;case 22:l.memoizedState===null&&vl(l);break;case 30:vl(l);break;default:vl(l)}i=i.sibling}}function Si(i,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,E=i,w=l,P=w.flags;switch(w.tag){case 0:case 11:case 15:Si(E,w,f),tf(4,w);break;case 1:if(Si(E,w,f),p=w,E=p.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ee){xn(p,p.return,Ee)}if(p=w,E=p.updateQueue,E!==null){var q=p.stateNode;try{var oe=E.shared.hiddenCallbacks;if(oe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<oe.length;E++)D_(oe[E],q)}catch(Ee){xn(p,p.return,Ee)}}f&&P&64&&HE(w),nf(w,w.return);break;case 27:KE(w);case 26:case 5:Si(E,w,f),f&&p===null&&P&4&&$E(w),nf(w,w.return);break;case 12:Si(E,w,f);break;case 31:Si(E,w,f),f&&P&4&&XE(E,w);break;case 13:Si(E,w,f),f&&P&4&&QE(E,w);break;case 22:w.memoizedState===null&&Si(E,w,f),nf(w,w.return);break;case 30:break;default:Si(E,w,f)}l=l.sibling}}function bg(i,l){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&ju(f))}function Cg(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&ju(i))}function ba(i,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)nT(i,l,f,p),l=l.sibling}function nT(i,l,f,p){var E=l.flags;switch(l.tag){case 0:case 11:case 15:ba(i,l,f,p),E&2048&&tf(9,l);break;case 1:ba(i,l,f,p);break;case 3:ba(i,l,f,p),E&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&ju(i)));break;case 12:if(E&2048){ba(i,l,f,p),i=l.stateNode;try{var w=l.memoizedProps,P=w.id,q=w.onPostCommit;typeof q=="function"&&q(P,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(oe){xn(l,l.return,oe)}}else ba(i,l,f,p);break;case 31:ba(i,l,f,p);break;case 13:ba(i,l,f,p);break;case 23:break;case 22:w=l.stateNode,P=l.alternate,l.memoizedState!==null?w._visibility&2?ba(i,l,f,p):rf(i,l):w._visibility&2?ba(i,l,f,p):(w._visibility|=2,bc(i,l,f,p,(l.subtreeFlags&10256)!==0||!1)),E&2048&&bg(P,l);break;case 24:ba(i,l,f,p),E&2048&&Cg(l.alternate,l);break;default:ba(i,l,f,p)}}function bc(i,l,f,p,E){for(E=E&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=i,P=l,q=f,oe=p,Ee=P.flags;switch(P.tag){case 0:case 11:case 15:bc(w,P,q,oe,E),tf(8,P);break;case 23:break;case 22:var Me=P.stateNode;P.memoizedState!==null?Me._visibility&2?bc(w,P,q,oe,E):rf(w,P):(Me._visibility|=2,bc(w,P,q,oe,E)),E&&Ee&2048&&bg(P.alternate,P);break;case 24:bc(w,P,q,oe,E),E&&Ee&2048&&Cg(P.alternate,P);break;default:bc(w,P,q,oe,E)}l=l.sibling}}function rf(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=i,p=l,E=p.flags;switch(p.tag){case 22:rf(f,p),E&2048&&bg(p.alternate,p);break;case 24:rf(f,p),E&2048&&Cg(p.alternate,p);break;default:rf(f,p)}l=l.sibling}}var sf=8192;function Cc(i,l,f){if(i.subtreeFlags&sf)for(i=i.child;i!==null;)rT(i,l,f),i=i.sibling}function rT(i,l,f){switch(i.tag){case 26:Cc(i,l,f),i.flags&sf&&i.memoizedState!==null&&RD(f,Aa,i.memoizedState,i.memoizedProps);break;case 5:Cc(i,l,f);break;case 3:case 4:var p=Aa;Aa=Yh(i.stateNode.containerInfo),Cc(i,l,f),Aa=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=sf,sf=16777216,Cc(i,l,f),sf=p):Cc(i,l,f));break;default:Cc(i,l,f)}}function sT(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function af(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];wr=p,iT(p,i)}sT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)aT(i),i=i.sibling}function aT(i){switch(i.tag){case 0:case 11:case 15:af(i),i.flags&2048&&io(9,i,i.return);break;case 3:af(i);break;case 12:af(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Oh(i)):af(i);break;default:af(i)}}function Oh(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];wr=p,iT(p,i)}sT(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:io(8,l,l.return),Oh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Oh(l));break;default:Oh(l)}i=i.sibling}}function iT(i,l){for(;wr!==null;){var f=wr;switch(f.tag){case 0:case 11:case 15:io(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:ju(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,wr=p;else e:for(f=i;wr!==null;){p=wr;var E=p.sibling,w=p.return;if(WE(p),p===f){wr=null;break e}if(E!==null){E.return=w,wr=E;break e}wr=w}}}var q3={getCacheForType:function(i){var l=Or(ar),f=l.data.get(i);return f===void 0&&(f=i(),l.data.set(i,f)),f},cacheSignal:function(){return Or(ar).controller.signal}},K3=typeof WeakMap=="function"?WeakMap:Map,un=0,In=null,Bt=null,Ht=0,gn=0,Os=null,oo=!1,Nc=!1,Ng=!1,Ai=0,Gn=0,lo=0,yl=0,Ig=0,Ls=0,Ic=0,of=null,ws=null,kg=!1,Lh=0,oT=0,Uh=1/0,Vh=null,co=null,gr=0,uo=null,kc=null,bi=0,Rg=0,Dg=null,lT=null,lf=0,Mg=null;function Us(){return(un&2)!==0&&Ht!==0?Ht&-Ht:ie.T!==null?Vg():G()}function cT(){if(Ls===0)if((Ht&536870912)===0||Yt){var i=ga;ga<<=1,(ga&3932160)===0&&(ga=262144),Ls=i}else Ls=536870912;return i=Ps.current,i!==null&&(i.flags|=32),Ls}function Ss(i,l,f){(i===In&&(gn===2||gn===9)||i.cancelPendingCommit!==null)&&(Rc(i,0),fo(i,Ht,Ls,!1)),qr(i,f),((un&2)===0||i!==In)&&(i===In&&((un&2)===0&&(yl|=f),Gn===4&&fo(i,Ht,Ls,!1)),Ja(i))}function uT(i,l,f){if((un&6)!==0)throw Error(r(327));var p=!f&&(l&127)===0&&(l&i.expiredLanes)===0||Mr(i,l),E=p?W3(i,l):Fg(i,l,!0),w=p;do{if(E===0){Nc&&!p&&fo(i,l,0,!1);break}else{if(f=i.current.alternate,w&&!J3(f)){E=Fg(i,l,!1),w=!1;continue}if(E===2){if(w=l,i.errorRecoveryDisabledLanes&w)var P=0;else P=i.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){l=P;e:{var q=i;E=of;var oe=q.current.memoizedState.isDehydrated;if(oe&&(Rc(q,P).flags|=256),P=Fg(q,P,!1),P!==2){if(Ng&&!oe){q.errorRecoveryDisabledLanes|=w,yl|=w,E=4;break e}w=ws,ws=E,w!==null&&(ws===null?ws=w:ws.push.apply(ws,w))}E=P}if(w=!1,E!==2)continue}}if(E===1){Rc(i,0),fo(i,l,0,!0);break}e:{switch(p=i,w=E,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:fo(p,l,Ls,!oo);break e;case 2:ws=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(E=Lh+300-vt(),10<E)){if(fo(p,l,Ls,!oo),rr(p,0,!0)!==0)break e;bi=l,p.timeoutHandle=zT(fT.bind(null,p,f,ws,Vh,kg,l,Ls,yl,Ic,oo,w,"Throttled",-0,0),E);break e}fT(p,f,ws,Vh,kg,l,Ls,yl,Ic,oo,w,null,-0,0)}}break}while(!0);Ja(i)}function fT(i,l,f,p,E,w,P,q,oe,Ee,Me,Fe,we,Ce){if(i.timeoutHandle=-1,Fe=l.subtreeFlags,Fe&8192||(Fe&16785408)===16785408){Fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ya},rT(l,w,Fe);var rt=(w&62914560)===w?Lh-vt():(w&4194048)===w?oT-vt():0;if(rt=DD(Fe,rt),rt!==null){bi=w,i.cancelPendingCommit=rt(yT.bind(null,i,l,w,f,p,E,P,q,oe,Me,Fe,null,we,Ce)),fo(i,w,P,!Ee);return}}yT(i,l,w,f,p,E,P,q,oe)}function J3(i){for(var l=i;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var E=f[p],w=E.getSnapshot;E=E.value;try{if(!Ds(w(),E))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fo(i,l,f,p){l&=~Ig,l&=~yl,i.suspendedLanes|=l,i.pingedLanes&=~l,p&&(i.warmLanes|=l),p=i.expirationTimes;for(var E=l;0<E;){var w=31-Rn(E),P=1<<w;p[w]=-1,E&=~P}f!==0&&xa(i,f,l)}function Bh(){return(un&6)===0?(cf(0),!1):!0}function Pg(){if(Bt!==null){if(gn===0)var i=Bt.return;else i=Bt,mi=ul=null,Wm(i),Ec=null,Gu=0,i=Bt;for(;i!==null;)jE(i.alternate,i),i=i.return;Bt=null}}function Rc(i,l){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,pD(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),bi=0,Pg(),In=i,Bt=f=hi(i.current,null),Ht=l,gn=0,Os=null,oo=!1,Nc=Mr(i,l),Ng=!1,Ic=Ls=Ig=yl=lo=Gn=0,ws=of=null,kg=!1,(l&8)!==0&&(l|=l&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=l;0<p;){var E=31-Rn(p),w=1<<E;l|=i[E],p&=~w}return Ai=l,oh(),f}function dT(i,l){Rt=null,ie.H=Xu,l===_c||l===mh?(l=N_(),gn=3):l===Um?(l=N_(),gn=4):gn=l===dg?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Os=l,Bt===null&&(Gn=1,Ih(i,Xs(l,i.current)))}function hT(){var i=Ps.current;return i===null?!0:(Ht&4194048)===Ht?na===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?i===na:!1}function pT(){var i=ie.H;return ie.H=Xu,i===null?Xu:i}function mT(){var i=ie.A;return ie.A=q3,i}function zh(){Gn=4,oo||(Ht&4194048)!==Ht&&Ps.current!==null||(Nc=!0),(lo&134217727)===0&&(yl&134217727)===0||In===null||fo(In,Ht,Ls,!1)}function Fg(i,l,f){var p=un;un|=2;var E=pT(),w=mT();(In!==i||Ht!==l)&&(Vh=null,Rc(i,l)),l=!1;var P=Gn;e:do try{if(gn!==0&&Bt!==null){var q=Bt,oe=Os;switch(gn){case 8:Pg(),P=6;break e;case 3:case 2:case 9:case 6:Ps.current===null&&(l=!0);var Ee=gn;if(gn=0,Os=null,Dc(i,q,oe,Ee),f&&Nc){P=0;break e}break;default:Ee=gn,gn=0,Os=null,Dc(i,q,oe,Ee)}}Y3(),P=Gn;break}catch(Me){dT(i,Me)}while(!0);return l&&i.shellSuspendCounter++,mi=ul=null,un=p,ie.H=E,ie.A=w,Bt===null&&(In=null,Ht=0,oh()),P}function Y3(){for(;Bt!==null;)gT(Bt)}function W3(i,l){var f=un;un|=2;var p=pT(),E=mT();In!==i||Ht!==l?(Vh=null,Uh=vt()+500,Rc(i,l)):Nc=Mr(i,l);e:do try{if(gn!==0&&Bt!==null){l=Bt;var w=Os;t:switch(gn){case 1:gn=0,Os=null,Dc(i,l,w,1);break;case 2:case 9:if(b_(w)){gn=0,Os=null,xT(l);break}l=function(){gn!==2&&gn!==9||In!==i||(gn=7),Ja(i)},w.then(l,l);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:b_(w)?(gn=0,Os=null,xT(l)):(gn=0,Os=null,Dc(i,l,w,7));break;case 5:var P=null;switch(Bt.tag){case 26:P=Bt.memoizedState;case 5:case 27:var q=Bt;if(P?nw(P):q.stateNode.complete){gn=0,Os=null;var oe=q.sibling;if(oe!==null)Bt=oe;else{var Ee=q.return;Ee!==null?(Bt=Ee,jh(Ee)):Bt=null}break t}}gn=0,Os=null,Dc(i,l,w,5);break;case 6:gn=0,Os=null,Dc(i,l,w,6);break;case 8:Pg(),Gn=6;break e;default:throw Error(r(462))}}Z3();break}catch(Me){dT(i,Me)}while(!0);return mi=ul=null,ie.H=p,ie.A=E,un=f,Bt!==null?0:(In=null,Ht=0,oh(),Gn)}function Z3(){for(;Bt!==null&&!_t();)gT(Bt)}function gT(i){var l=BE(i.alternate,i,Ai);i.memoizedProps=i.pendingProps,l===null?jh(i):Bt=l}function xT(i){var l=i,f=l.alternate;switch(l.tag){case 15:case 0:l=PE(f,l,l.pendingProps,l.type,void 0,Ht);break;case 11:l=PE(f,l,l.pendingProps,l.type.render,l.ref,Ht);break;case 5:Wm(l);default:jE(f,l),l=Bt=m_(l,Ai),l=BE(f,l,Ai)}i.memoizedProps=i.pendingProps,l===null?jh(i):Bt=l}function Dc(i,l,f,p){mi=ul=null,Wm(l),Ec=null,Gu=0;var E=l.return;try{if(V3(i,E,l,f,Ht)){Gn=1,Ih(i,Xs(f,i.current)),Bt=null;return}}catch(w){if(E!==null)throw Bt=E,w;Gn=1,Ih(i,Xs(f,i.current)),Bt=null;return}l.flags&32768?(Yt||p===1?i=!0:Nc||(Ht&536870912)!==0?i=!1:(oo=i=!0,(p===2||p===9||p===3||p===6)&&(p=Ps.current,p!==null&&p.tag===13&&(p.flags|=16384))),vT(l,i)):jh(l)}function jh(i){var l=i;do{if((l.flags&32768)!==0){vT(l,oo);return}i=l.return;var f=j3(l.alternate,l,Ai);if(f!==null){Bt=f;return}if(l=l.sibling,l!==null){Bt=l;return}Bt=l=i}while(l!==null);Gn===0&&(Gn=5)}function vT(i,l){do{var f=H3(i.alternate,i);if(f!==null){f.flags&=32767,Bt=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(i=i.sibling,i!==null)){Bt=i;return}Bt=i=f}while(i!==null);Gn=6,Bt=null}function yT(i,l,f,p,E,w,P,q,oe){i.cancelPendingCommit=null;do Hh();while(gr!==0);if((un&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=wm,tc(i,f,w,P,q,oe),i===In&&(Bt=In=null,Ht=0),kc=l,uo=i,bi=f,Rg=w,Dg=E,lT=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,tD(jt,function(){return ST(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=ie.T,ie.T=null,E=fe.p,fe.p=2,P=un,un|=4;try{G3(i,l,f)}finally{un=P,fe.p=E,ie.T=p}}gr=1,_T(),ET(),TT()}}function _T(){if(gr===1){gr=0;var i=uo,l=kc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=ie.T,ie.T=null;var p=fe.p;fe.p=2;var E=un;un|=4;try{eT(l,i);var w=Kg,P=i_(i.containerInfo),q=w.focusedElem,oe=w.selectionRange;if(P!==q&&q&&q.ownerDocument&&a_(q.ownerDocument.documentElement,q)){if(oe!==null&&vm(q)){var Ee=oe.start,Me=oe.end;if(Me===void 0&&(Me=Ee),"selectionStart"in q)q.selectionStart=Ee,q.selectionEnd=Math.min(Me,q.value.length);else{var Fe=q.ownerDocument||document,we=Fe&&Fe.defaultView||window;if(we.getSelection){var Ce=we.getSelection(),rt=q.textContent.length,xt=Math.min(oe.start,rt),Sn=oe.end===void 0?xt:Math.min(oe.end,rt);!Ce.extend&&xt>Sn&&(P=Sn,Sn=xt,xt=P);var pe=s_(q,xt),de=s_(q,Sn);if(pe&&de&&(Ce.rangeCount!==1||Ce.anchorNode!==pe.node||Ce.anchorOffset!==pe.offset||Ce.focusNode!==de.node||Ce.focusOffset!==de.offset)){var ye=Fe.createRange();ye.setStart(pe.node,pe.offset),Ce.removeAllRanges(),xt>Sn?(Ce.addRange(ye),Ce.extend(de.node,de.offset)):(ye.setEnd(de.node,de.offset),Ce.addRange(ye))}}}}for(Fe=[],Ce=q;Ce=Ce.parentNode;)Ce.nodeType===1&&Fe.push({element:Ce,left:Ce.scrollLeft,top:Ce.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Fe.length;q++){var Pe=Fe[q];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}t0=!!qg,Kg=qg=null}finally{un=E,fe.p=p,ie.T=f}}i.current=l,gr=2}}function ET(){if(gr===2){gr=0;var i=uo,l=kc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=ie.T,ie.T=null;var p=fe.p;fe.p=2;var E=un;un|=4;try{YE(i,l.alternate,l)}finally{un=E,fe.p=p,ie.T=f}}gr=3}}function TT(){if(gr===4||gr===3){gr=0,kn();var i=uo,l=kc,f=bi,p=lT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?gr=5:(gr=0,kc=uo=null,wT(i,i.pendingLanes));var E=i.pendingLanes;if(E===0&&(co=null),ys(f),l=l.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Ot,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=ie.T,E=fe.p,fe.p=2,ie.T=null;try{for(var w=i.onRecoverableError,P=0;P<p.length;P++){var q=p[P];w(q.value,{componentStack:q.stack})}}finally{ie.T=l,fe.p=E}}(bi&3)!==0&&Hh(),Ja(i),E=i.pendingLanes,(f&261930)!==0&&(E&42)!==0?i===Mg?lf++:(lf=0,Mg=i):lf=0,cf(0)}}function wT(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,ju(l)))}function Hh(){return _T(),ET(),TT(),ST()}function ST(){if(gr!==5)return!1;var i=uo,l=Rg;Rg=0;var f=ys(bi),p=ie.T,E=fe.p;try{fe.p=32>f?32:f,ie.T=null,f=Dg,Dg=null;var w=uo,P=bi;if(gr=0,kc=uo=null,bi=0,(un&6)!==0)throw Error(r(331));var q=un;if(un|=4,aT(w.current),nT(w,w.current,P,f),un=q,cf(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Ot,w)}catch{}return!0}finally{fe.p=E,ie.T=p,wT(i,l)}}function AT(i,l,f){l=Xs(f,l),l=fg(i.stateNode,l,2),i=ro(i,l,2),i!==null&&(qr(i,2),Ja(i))}function xn(i,l,f){if(i.tag===3)AT(i,i,f);else for(;l!==null;){if(l.tag===3){AT(l,i,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(co===null||!co.has(p))){i=Xs(f,i),f=bE(2),p=ro(l,f,2),p!==null&&(CE(f,p,l,i),qr(p,2),Ja(p));break}}l=l.return}}function Og(i,l,f){var p=i.pingCache;if(p===null){p=i.pingCache=new K3;var E=new Set;p.set(l,E)}else E=p.get(l),E===void 0&&(E=new Set,p.set(l,E));E.has(f)||(Ng=!0,E.add(f),i=X3.bind(null,i,l,f),l.then(i,i))}function X3(i,l,f){var p=i.pingCache;p!==null&&p.delete(l),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,In===i&&(Ht&f)===f&&(Gn===4||Gn===3&&(Ht&62914560)===Ht&&300>vt()-Lh?(un&2)===0&&Rc(i,0):Ig|=f,Ic===Ht&&(Ic=0)),Ja(i)}function bT(i,l){l===0&&(l=qs()),i=ol(i,l),i!==null&&(qr(i,l),Ja(i))}function Q3(i){var l=i.memoizedState,f=0;l!==null&&(f=l.retryLane),bT(i,f)}function eD(i,l){var f=0;switch(i.tag){case 31:case 13:var p=i.stateNode,E=i.memoizedState;E!==null&&(f=E.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),bT(i,f)}function tD(i,l){return dt(i,l)}var Gh=null,Mc=null,Lg=!1,$h=!1,Ug=!1,ho=0;function Ja(i){i!==Mc&&i.next===null&&(Mc===null?Gh=Mc=i:Mc=Mc.next=i),$h=!0,Lg||(Lg=!0,rD())}function cf(i,l){if(!Ug&&$h){Ug=!0;do for(var f=!1,p=Gh;p!==null;){if(i!==0){var E=p.pendingLanes;if(E===0)var w=0;else{var P=p.suspendedLanes,q=p.pingedLanes;w=(1<<31-Rn(42|i)+1)-1,w&=E&~(P&~q),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,kT(p,w))}else w=Ht,w=rr(p,p===In?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||Mr(p,w)||(f=!0,kT(p,w));p=p.next}while(f);Ug=!1}}function nD(){CT()}function CT(){$h=Lg=!1;var i=0;ho!==0&&hD()&&(i=ho);for(var l=vt(),f=null,p=Gh;p!==null;){var E=p.next,w=NT(p,l);w===0?(p.next=null,f===null?Gh=E:f.next=E,E===null&&(Mc=f)):(f=p,(i!==0||(w&3)!==0)&&($h=!0)),p=E}gr!==0&&gr!==5||cf(i),ho!==0&&(ho=0)}function NT(i,l){for(var f=i.suspendedLanes,p=i.pingedLanes,E=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var P=31-Rn(w),q=1<<P,oe=E[P];oe===-1?((q&f)===0||(q&p)!==0)&&(E[P]=vs(q,l)):oe<=l&&(i.expiredLanes|=q),w&=~q}if(l=In,f=Ht,f=rr(i,i===l?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,f===0||i===l&&(gn===2||gn===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&et(p),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||Mr(i,f)){if(l=f&-f,l===i.callbackPriority)return l;switch(p!==null&&et(p),ys(f)){case 2:case 8:f=yn;break;case 32:f=jt;break;case 268435456:f=gt;break;default:f=jt}return p=IT.bind(null,i),f=dt(f,p),i.callbackPriority=l,i.callbackNode=f,l}return p!==null&&p!==null&&et(p),i.callbackPriority=2,i.callbackNode=null,2}function IT(i,l){if(gr!==0&&gr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(Hh()&&i.callbackNode!==f)return null;var p=Ht;return p=rr(i,i===In?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(uT(i,p,l),NT(i,vt()),i.callbackNode!=null&&i.callbackNode===f?IT.bind(null,i):null)}function kT(i,l){if(Hh())return null;uT(i,l,!0)}function rD(){mD(function(){(un&6)!==0?dt(Kt,nD):CT()})}function Vg(){if(ho===0){var i=vc;i===0&&(i=Rr,Rr<<=1,(Rr&261888)===0&&(Rr=256)),ho=i}return ho}function RT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:rc(""+i)}function DT(i,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,i.id&&f.setAttribute("form",i.id),l.parentNode.insertBefore(f,l),i=new FormData(i),f.parentNode.removeChild(f),i}function sD(i,l,f,p,E){if(l==="submit"&&f&&f.stateNode===E){var w=RT((E[ee]||null).action),P=p.submitter;P&&(l=(l=P[ee]||null)?RT(l.formAction):P.getAttribute("formAction"),l!==null&&(w=l,P=null));var q=new za("action","action",null,p,E);i.push({event:q,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ho!==0){var oe=P?DT(E,P):new FormData(E);ag(f,{pending:!0,data:oe,method:E.method,action:w},null,oe)}}else typeof w=="function"&&(q.preventDefault(),oe=P?DT(E,P):new FormData(E),ag(f,{pending:!0,data:oe,method:E.method,action:w},w,oe))},currentTarget:E}]})}}for(var Bg=0;Bg<Tm.length;Bg++){var zg=Tm[Bg],aD=zg.toLowerCase(),iD=zg[0].toUpperCase()+zg.slice(1);Sa(aD,"on"+iD)}Sa(c_,"onAnimationEnd"),Sa(u_,"onAnimationIteration"),Sa(f_,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(T3,"onTransitionRun"),Sa(w3,"onTransitionStart"),Sa(S3,"onTransitionCancel"),Sa(d_,"onTransitionEnd"),Tr("onMouseEnter",["mouseout","mouseover"]),Tr("onMouseLeave",["mouseout","mouseover"]),Tr("onPointerEnter",["pointerout","pointerover"]),Tr("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uf));function MT(i,l){l=(l&4)!==0;for(var f=0;f<i.length;f++){var p=i[f],E=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var P=p.length-1;0<=P;P--){var q=p[P],oe=q.instance,Ee=q.currentTarget;if(q=q.listener,oe!==w&&E.isPropagationStopped())break e;w=q,E.currentTarget=Ee;try{w(E)}catch(Me){ih(Me)}E.currentTarget=null,w=oe}else for(P=0;P<p.length;P++){if(q=p[P],oe=q.instance,Ee=q.currentTarget,q=q.listener,oe!==w&&E.isPropagationStopped())break e;w=q,E.currentTarget=Ee;try{w(E)}catch(Me){ih(Me)}E.currentTarget=null,w=oe}}}}function zt(i,l){var f=l[xe];f===void 0&&(f=l[xe]=new Set);var p=i+"__bubble";f.has(p)||(PT(l,i,2,!1),f.add(p))}function jg(i,l,f){var p=0;l&&(p|=4),PT(f,i,p,l)}var qh="_reactListening"+Math.random().toString(36).slice(2);function Hg(i){if(!i[qh]){i[qh]=!0,on.forEach(function(f){f!=="selectionchange"&&(oD.has(f)||jg(f,!1,i),jg(f,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[qh]||(l[qh]=!0,jg("selectionchange",!1,l))}}function PT(i,l,f,p){switch(cw(l)){case 2:var E=FD;break;case 8:E=OD;break;default:E=sx}f=E.bind(null,l,f,i),E=void 0,!Qo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),p?E!==void 0?i.addEventListener(l,f,{capture:!0,passive:E}):i.addEventListener(l,f,!0):E!==void 0?i.addEventListener(l,f,{passive:E}):i.addEventListener(l,f,!1)}function Gg(i,l,f,p,E){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var P=p.tag;if(P===3||P===4){var q=p.stateNode.containerInfo;if(q===E)break;if(P===4)for(P=p.return;P!==null;){var oe=P.tag;if((oe===3||oe===4)&&P.stateNode.containerInfo===E)return;P=P.return}for(;q!==null;){if(P=He(q),P===null)return;if(oe=P.tag,oe===5||oe===6||oe===26||oe===27){p=w=P;continue e}q=q.parentNode}}p=p.return}Ki(function(){var Ee=w,Me=Js(f),Fe=[];e:{var we=h_.get(i);if(we!==void 0){var Ce=za,rt=i;switch(i){case"keypress":if(tl(f)===0)break e;case"keydown":case"keyup":Ce=rh;break;case"focusin":rt="focus",Ce=rl;break;case"focusout":rt="blur",Ce=rl;break;case"beforeblur":case"afterblur":Ce=rl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=Jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=k;break;case c_:case u_:case f_:Ce=Wd;break;case d_:Ce=Z;break;case"scroll":case"scrollend":Ce=Mu;break;case"wheel":Ce=Ae;break;case"copy":case"cut":case"paste":Ce=Zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=di;break;case"toggle":case"beforetoggle":Ce=kt}var xt=(l&4)!==0,Sn=!xt&&(i==="scroll"||i==="scrollend"),pe=xt?we!==null?we+"Capture":null:we;xt=[];for(var de=Ee,ye;de!==null;){var Pe=de;if(ye=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||ye===null||pe===null||(Pe=_a(de,pe),Pe!=null&&xt.push(ff(de,Pe,ye))),Sn)break;de=de.return}0<xt.length&&(we=new Ce(we,rt,null,f,Me),Fe.push({event:we,listeners:xt}))}}if((l&7)===0){e:{if(we=i==="mouseover"||i==="pointerover",Ce=i==="mouseout"||i==="pointerout",we&&f!==ku&&(rt=f.relatedTarget||f.fromElement)&&(He(rt)||rt[ae]))break e;if((Ce||we)&&(we=Me.window===Me?Me:(we=Me.ownerDocument)?we.defaultView||we.parentWindow:window,Ce?(rt=f.relatedTarget||f.toElement,Ce=Ee,rt=rt?He(rt):null,rt!==null&&(Sn=a(rt),xt=rt.tag,rt!==Sn||xt!==5&&xt!==27&&xt!==6)&&(rt=null)):(Ce=null,rt=Ee),Ce!==rt)){if(xt=Pu,Pe="onMouseLeave",pe="onMouseEnter",de="mouse",(i==="pointerout"||i==="pointerover")&&(xt=di,Pe="onPointerLeave",pe="onPointerEnter",de="pointer"),Sn=Ce==null?we:Be(Ce),ye=rt==null?we:Be(rt),we=new xt(Pe,de+"leave",Ce,f,Me),we.target=Sn,we.relatedTarget=ye,Pe=null,He(Me)===Ee&&(xt=new xt(pe,de+"enter",rt,f,Me),xt.target=ye,xt.relatedTarget=Sn,Pe=xt),Sn=Pe,Ce&&rt)t:{for(xt=lD,pe=Ce,de=rt,ye=0,Pe=pe;Pe;Pe=xt(Pe))ye++;Pe=0;for(var ht=de;ht;ht=xt(ht))Pe++;for(;0<ye-Pe;)pe=xt(pe),ye--;for(;0<Pe-ye;)de=xt(de),Pe--;for(;ye--;){if(pe===de||de!==null&&pe===de.alternate){xt=pe;break t}pe=xt(pe),de=xt(de)}xt=null}else xt=null;Ce!==null&&FT(Fe,we,Ce,xt,!1),rt!==null&&Sn!==null&&FT(Fe,Sn,rt,xt,!0)}}e:{if(we=Ee?Be(Ee):window,Ce=we.nodeName&&we.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&we.type==="file")var rn=Xy;else if(Wy(we))if(Qy)rn=y3;else{rn=x3;var ot=g3}else Ce=we.nodeName,!Ce||Ce.toLowerCase()!=="input"||we.type!=="checkbox"&&we.type!=="radio"?Ee&&nc(Ee.elementType)&&(rn=Xy):rn=v3;if(rn&&(rn=rn(i,Ee))){Zy(Fe,rn,f,Me);break e}ot&&ot(i,we,Ee),i==="focusout"&&Ee&&we.type==="number"&&Ee.memoizedProps.value!=null&&Jt(we,"number",we.value)}switch(ot=Ee?Be(Ee):window,i){case"focusin":(Wy(ot)||ot.contentEditable==="true")&&(uc=ot,ym=Ee,Vu=null);break;case"focusout":Vu=ym=uc=null;break;case"mousedown":_m=!0;break;case"contextmenu":case"mouseup":case"dragend":_m=!1,o_(Fe,f,Me);break;case"selectionchange":if(E3)break;case"keydown":case"keyup":o_(Fe,f,Me)}var Ft;if(cn)e:{switch(i){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else cc?sl(i,f)&&(Gt="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(Gt="onCompositionStart");Gt&&(Ga&&f.locale!=="ko"&&(cc||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&cc&&(Ft=Du()):(Ba=Me,Ru="value"in Ba?Ba.value:Ba.textContent,cc=!0)),ot=Kh(Ee,Gt),0<ot.length&&(Gt=new Ha(Gt,i,null,f,Me),Fe.push({event:Gt,listeners:ot}),Ft?Gt.data=Ft:(Ft=lc(f),Ft!==null&&(Gt.data=Ft)))),(Ft=Ws?d3(i,f):h3(i,f))&&(Gt=Kh(Ee,"onBeforeInput"),0<Gt.length&&(ot=new Ha("onBeforeInput","beforeinput",null,f,Me),Fe.push({event:ot,listeners:Gt}),ot.data=Ft)),sD(Fe,i,Ee,f,Me)}MT(Fe,l)})}function ff(i,l,f){return{instance:i,listener:l,currentTarget:f}}function Kh(i,l){for(var f=l+"Capture",p=[];i!==null;){var E=i,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=_a(i,f),E!=null&&p.unshift(ff(i,E,w)),E=_a(i,l),E!=null&&p.push(ff(i,E,w))),i.tag===3)return p;i=i.return}return[]}function lD(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function FT(i,l,f,p,E){for(var w=l._reactName,P=[];f!==null&&f!==p;){var q=f,oe=q.alternate,Ee=q.stateNode;if(q=q.tag,oe!==null&&oe===p)break;q!==5&&q!==26&&q!==27||Ee===null||(oe=Ee,E?(Ee=_a(f,w),Ee!=null&&P.unshift(ff(f,Ee,oe))):E||(Ee=_a(f,w),Ee!=null&&P.push(ff(f,Ee,oe)))),f=f.return}P.length!==0&&i.push({event:l,listeners:P})}var cD=/\r\n?/g,uD=/\u0000|\uFFFD/g;function OT(i){return(typeof i=="string"?i:""+i).replace(cD,`
`).replace(uD,"")}function LT(i,l){return l=OT(l),OT(i)===l}function wn(i,l,f,p,E,w){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Nn(i,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Nn(i,""+p);break;case"className":De(i,"class",p);break;case"tabIndex":De(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":De(i,f,p);break;case"style":Iu(i,p,w);break;case"data":if(l!=="object"){De(i,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){i.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=rc(""+p),i.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&wn(i,l,"name",E.name,E,null),wn(i,l,"formEncType",E.formEncType,E,null),wn(i,l,"formMethod",E.formMethod,E,null),wn(i,l,"formTarget",E.formTarget,E,null)):(wn(i,l,"encType",E.encType,E,null),wn(i,l,"method",E.method,E,null),wn(i,l,"target",E.target,E,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=rc(""+p),i.setAttribute(f,p);break;case"onClick":p!=null&&(i.onclick=ya);break;case"onScroll":p!=null&&zt("scroll",i);break;case"onScrollEnd":p!=null&&zt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(E.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}f=rc(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""+p):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":p===!0?i.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,p):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(f,p):i.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(f):i.setAttribute(f,p);break;case"popover":zt("beforetoggle",i),zt("toggle",i),se(i,"popover",p);break;case"xlinkActuate":Ue(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ue(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ue(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ue(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ue(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ue(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ue(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ue(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ue(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":se(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Kd.get(f)||f,se(i,f,p))}}function $g(i,l,f,p,E,w){switch(f){case"style":Iu(i,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(E.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"children":typeof p=="string"?Nn(i,p):(typeof p=="number"||typeof p=="bigint")&&Nn(i,""+p);break;case"onScroll":p!=null&&zt("scroll",i);break;case"onScrollEnd":p!=null&&zt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=ya);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ln.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(E=f.endsWith("Capture"),l=f.slice(2,E?f.length-7:void 0),w=i[ee]||null,w=w!=null?w[f]:null,typeof w=="function"&&i.removeEventListener(l,w,E),typeof p=="function")){typeof w!="function"&&w!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(l,p,E);break e}f in i?i[f]=p:p===!0?i.setAttribute(f,""):se(i,f,p)}}}function Ur(i,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",i),zt("load",i);var p=!1,E=!1,w;for(w in f)if(f.hasOwnProperty(w)){var P=f[w];if(P!=null)switch(w){case"src":p=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:wn(i,l,w,P,f,null)}}E&&wn(i,l,"srcSet",f.srcSet,f,null),p&&wn(i,l,"src",f.src,f,null);return;case"input":zt("invalid",i);var q=w=P=E=null,oe=null,Ee=null;for(p in f)if(f.hasOwnProperty(p)){var Me=f[p];if(Me!=null)switch(p){case"name":E=Me;break;case"type":P=Me;break;case"checked":oe=Me;break;case"defaultChecked":Ee=Me;break;case"value":w=Me;break;case"defaultValue":q=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,l));break;default:wn(i,l,p,Me,f,null)}}pr(i,w,q,oe,Ee,P,E,!1);return;case"select":zt("invalid",i),p=P=w=null;for(E in f)if(f.hasOwnProperty(E)&&(q=f[E],q!=null))switch(E){case"value":w=q;break;case"defaultValue":P=q;break;case"multiple":p=q;default:wn(i,l,E,q,f,null)}l=w,f=P,i.multiple=!!p,l!=null?mr(i,!!p,l,!1):f!=null&&mr(i,!!p,f,!0);return;case"textarea":zt("invalid",i),w=E=p=null;for(P in f)if(f.hasOwnProperty(P)&&(q=f[P],q!=null))switch(P){case"value":p=q;break;case"defaultValue":E=q;break;case"children":w=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:wn(i,l,P,q,f,null)}mn(i,p,E,w);return;case"option":for(oe in f)f.hasOwnProperty(oe)&&(p=f[oe],p!=null)&&(oe==="selected"?i.selected=p&&typeof p!="function"&&typeof p!="symbol":wn(i,l,oe,p,f,null));return;case"dialog":zt("beforetoggle",i),zt("toggle",i),zt("cancel",i),zt("close",i);break;case"iframe":case"object":zt("load",i);break;case"video":case"audio":for(p=0;p<uf.length;p++)zt(uf[p],i);break;case"image":zt("error",i),zt("load",i);break;case"details":zt("toggle",i);break;case"embed":case"source":case"link":zt("error",i),zt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in f)if(f.hasOwnProperty(Ee)&&(p=f[Ee],p!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:wn(i,l,Ee,p,f,null)}return;default:if(nc(l)){for(Me in f)f.hasOwnProperty(Me)&&(p=f[Me],p!==void 0&&$g(i,l,Me,p,f,void 0));return}}for(q in f)f.hasOwnProperty(q)&&(p=f[q],p!=null&&wn(i,l,q,p,f,null))}function fD(i,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,P=null,q=null,oe=null,Ee=null,Me=null;for(Ce in f){var Fe=f[Ce];if(f.hasOwnProperty(Ce)&&Fe!=null)switch(Ce){case"checked":break;case"value":break;case"defaultValue":oe=Fe;default:p.hasOwnProperty(Ce)||wn(i,l,Ce,null,p,Fe)}}for(var we in p){var Ce=p[we];if(Fe=f[we],p.hasOwnProperty(we)&&(Ce!=null||Fe!=null))switch(we){case"type":w=Ce;break;case"name":E=Ce;break;case"checked":Ee=Ce;break;case"defaultChecked":Me=Ce;break;case"value":P=Ce;break;case"defaultValue":q=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,l));break;default:Ce!==Fe&&wn(i,l,we,Ce,p,Fe)}}Vt(i,P,q,oe,Ee,Me,w,E);return;case"select":Ce=P=q=we=null;for(w in f)if(oe=f[w],f.hasOwnProperty(w)&&oe!=null)switch(w){case"value":break;case"multiple":Ce=oe;default:p.hasOwnProperty(w)||wn(i,l,w,null,p,oe)}for(E in p)if(w=p[E],oe=f[E],p.hasOwnProperty(E)&&(w!=null||oe!=null))switch(E){case"value":we=w;break;case"defaultValue":q=w;break;case"multiple":P=w;default:w!==oe&&wn(i,l,E,w,p,oe)}l=q,f=P,p=Ce,we!=null?mr(i,!!f,we,!1):!!p!=!!f&&(l!=null?mr(i,!!f,l,!0):mr(i,!!f,f?[]:"",!1));return;case"textarea":Ce=we=null;for(q in f)if(E=f[q],f.hasOwnProperty(q)&&E!=null&&!p.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:wn(i,l,q,null,p,E)}for(P in p)if(E=p[P],w=f[P],p.hasOwnProperty(P)&&(E!=null||w!=null))switch(P){case"value":we=E;break;case"defaultValue":Ce=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==w&&wn(i,l,P,E,p,w)}is(i,we,Ce);return;case"option":for(var rt in f)we=f[rt],f.hasOwnProperty(rt)&&we!=null&&!p.hasOwnProperty(rt)&&(rt==="selected"?i.selected=!1:wn(i,l,rt,null,p,we));for(oe in p)we=p[oe],Ce=f[oe],p.hasOwnProperty(oe)&&we!==Ce&&(we!=null||Ce!=null)&&(oe==="selected"?i.selected=we&&typeof we!="function"&&typeof we!="symbol":wn(i,l,oe,we,p,Ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in f)we=f[xt],f.hasOwnProperty(xt)&&we!=null&&!p.hasOwnProperty(xt)&&wn(i,l,xt,null,p,we);for(Ee in p)if(we=p[Ee],Ce=f[Ee],p.hasOwnProperty(Ee)&&we!==Ce&&(we!=null||Ce!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,l));break;default:wn(i,l,Ee,we,p,Ce)}return;default:if(nc(l)){for(var Sn in f)we=f[Sn],f.hasOwnProperty(Sn)&&we!==void 0&&!p.hasOwnProperty(Sn)&&$g(i,l,Sn,void 0,p,we);for(Me in p)we=p[Me],Ce=f[Me],!p.hasOwnProperty(Me)||we===Ce||we===void 0&&Ce===void 0||$g(i,l,Me,we,p,Ce);return}}for(var pe in f)we=f[pe],f.hasOwnProperty(pe)&&we!=null&&!p.hasOwnProperty(pe)&&wn(i,l,pe,null,p,we);for(Fe in p)we=p[Fe],Ce=f[Fe],!p.hasOwnProperty(Fe)||we===Ce||we==null&&Ce==null||wn(i,l,Fe,we,p,Ce)}function UT(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dD(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var E=f[p],w=E.transferSize,P=E.initiatorType,q=E.duration;if(w&&q&&UT(P)){for(P=0,q=E.responseEnd,p+=1;p<f.length;p++){var oe=f[p],Ee=oe.startTime;if(Ee>q)break;var Me=oe.transferSize,Fe=oe.initiatorType;Me&&UT(Fe)&&(oe=oe.responseEnd,P+=Me*(oe<q?1:(q-Ee)/(oe-Ee)))}if(--p,l+=8*(w+P)/(E.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var qg=null,Kg=null;function Jh(i){return i.nodeType===9?i:i.ownerDocument}function VT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BT(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Jg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Yg=null;function hD(){var i=window.event;return i&&i.type==="popstate"?i===Yg?!1:(Yg=i,!0):(Yg=null,!1)}var zT=typeof setTimeout=="function"?setTimeout:void 0,pD=typeof clearTimeout=="function"?clearTimeout:void 0,jT=typeof Promise=="function"?Promise:void 0,mD=typeof queueMicrotask=="function"?queueMicrotask:typeof jT<"u"?function(i){return jT.resolve(null).then(i).catch(gD)}:zT;function gD(i){setTimeout(function(){throw i})}function po(i){return i==="head"}function HT(i,l){var f=l,p=0;do{var E=f.nextSibling;if(i.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"||f==="/&"){if(p===0){i.removeChild(E),Lc(l);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")df(i.ownerDocument.documentElement);else if(f==="head"){f=i.ownerDocument.head,df(f);for(var w=f.firstChild;w;){var P=w.nextSibling,q=w.nodeName;w[_e]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=P}}else f==="body"&&df(i.ownerDocument.body);f=E}while(f);Lc(l)}function GT(i,l){var f=i;i=0;do{var p=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(i===0)break;i--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||i++;f=p}while(f)}function Wg(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Wg(f),je(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function xD(i,l,f,p){for(;i.nodeType===1;){var E=f;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[_e])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==E.rel||i.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||i.getAttribute("title")!==(E.title==null?null:E.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(E.src==null?null:E.src)||i.getAttribute("type")!==(E.type==null?null:E.type)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=ra(i.nextSibling),i===null)break}return null}function vD(i,l,f){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=ra(i.nextSibling),i===null))return null;return i}function $T(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ra(i.nextSibling),i===null))return null;return i}function Zg(i){return i.data==="$?"||i.data==="$~"}function Xg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yD(i,l){var f=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||f.readyState!=="loading")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function ra(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var Qg=null;function qT(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"||f==="/&"){if(l===0)return ra(i.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}i=i.nextSibling}return null}function KT(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return i;l--}else f!=="/$"&&f!=="/&"||l++}i=i.previousSibling}return null}function JT(i,l,f){switch(l=Jh(f),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function df(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);je(i)}var sa=new Map,YT=new Set;function Yh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ci=fe.d;fe.d={f:_D,r:ED,D:TD,C:wD,L:SD,m:AD,X:CD,S:bD,M:ND};function _D(){var i=Ci.f(),l=Bh();return i||l}function ED(i){var l=Ye(i);l!==null&&l.tag===5&&l.type==="form"?dE(l):Ci.r(i)}var Pc=typeof document>"u"?null:document;function WT(i,l,f){var p=Pc;if(p&&typeof l=="string"&&l){var E=wt(l);E='link[rel="'+i+'"][href="'+E+'"]',typeof f=="string"&&(E+='[crossorigin="'+f+'"]'),YT.has(E)||(YT.add(E),i={rel:i,crossOrigin:f,href:l},p.querySelector(E)===null&&(l=p.createElement("link"),Ur(l,"link",i),nt(l),p.head.appendChild(l)))}}function TD(i){Ci.D(i),WT("dns-prefetch",i,null)}function wD(i,l){Ci.C(i,l),WT("preconnect",i,l)}function SD(i,l,f){Ci.L(i,l,f);var p=Pc;if(p&&i&&l){var E='link[rel="preload"][as="'+wt(l)+'"]';l==="image"&&f&&f.imageSrcSet?(E+='[imagesrcset="'+wt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(E+='[imagesizes="'+wt(f.imageSizes)+'"]')):E+='[href="'+wt(i)+'"]';var w=E;switch(l){case"style":w=Fc(i);break;case"script":w=Oc(i)}sa.has(w)||(i=x({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:i,as:l},f),sa.set(w,i),p.querySelector(E)!==null||l==="style"&&p.querySelector(hf(w))||l==="script"&&p.querySelector(pf(w))||(l=p.createElement("link"),Ur(l,"link",i),nt(l),p.head.appendChild(l)))}}function AD(i,l){Ci.m(i,l);var f=Pc;if(f&&i){var p=l&&typeof l.as=="string"?l.as:"script",E='link[rel="modulepreload"][as="'+wt(p)+'"][href="'+wt(i)+'"]',w=E;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Oc(i)}if(!sa.has(w)&&(i=x({rel:"modulepreload",href:i},l),sa.set(w,i),f.querySelector(E)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(pf(w)))return}p=f.createElement("link"),Ur(p,"link",i),nt(p),f.head.appendChild(p)}}}function bD(i,l,f){Ci.S(i,l,f);var p=Pc;if(p&&i){var E=qe(p).hoistableStyles,w=Fc(i);l=l||"default";var P=E.get(w);if(!P){var q={loading:0,preload:null};if(P=p.querySelector(hf(w)))q.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":l},f),(f=sa.get(w))&&ex(i,f);var oe=P=p.createElement("link");nt(oe),Ur(oe,"link",i),oe._p=new Promise(function(Ee,Me){oe.onload=Ee,oe.onerror=Me}),oe.addEventListener("load",function(){q.loading|=1}),oe.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Wh(P,l,p)}P={type:"stylesheet",instance:P,count:1,state:q},E.set(w,P)}}}function CD(i,l){Ci.X(i,l);var f=Pc;if(f&&i){var p=qe(f).hoistableScripts,E=Oc(i),w=p.get(E);w||(w=f.querySelector(pf(E)),w||(i=x({src:i,async:!0},l),(l=sa.get(E))&&tx(i,l),w=f.createElement("script"),nt(w),Ur(w,"link",i),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(E,w))}}function ND(i,l){Ci.M(i,l);var f=Pc;if(f&&i){var p=qe(f).hoistableScripts,E=Oc(i),w=p.get(E);w||(w=f.querySelector(pf(E)),w||(i=x({src:i,async:!0,type:"module"},l),(l=sa.get(E))&&tx(i,l),w=f.createElement("script"),nt(w),Ur(w,"link",i),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(E,w))}}function ZT(i,l,f,p){var E=(E=le.current)?Yh(E):null;if(!E)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Fc(f.href),f=qe(E).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=Fc(f.href);var w=qe(E).hoistableStyles,P=w.get(i);if(P||(E=E.ownerDocument||E,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,P),(w=E.querySelector(hf(i)))&&!w._p&&(P.instance=w,P.state.loading=5),sa.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},sa.set(i,f),w||ID(E,i,f,P.state))),l&&p===null)throw Error(r(528,""));return P}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Oc(f),f=qe(E).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Fc(i){return'href="'+wt(i)+'"'}function hf(i){return'link[rel="stylesheet"]['+i+"]"}function XT(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function ID(i,l,f,p){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=i.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Ur(l,"link",f),nt(l),i.head.appendChild(l))}function Oc(i){return'[src="'+wt(i)+'"]'}function pf(i){return"script[async]"+i}function QT(i,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=i.querySelector('style[data-href~="'+wt(f.href)+'"]');if(p)return l.instance=p,nt(p),p;var E=x({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),nt(p),Ur(p,"style",E),Wh(p,f.precedence,i),l.instance=p;case"stylesheet":E=Fc(f.href);var w=i.querySelector(hf(E));if(w)return l.state.loading|=4,l.instance=w,nt(w),w;p=XT(f),(E=sa.get(E))&&ex(p,E),w=(i.ownerDocument||i).createElement("link"),nt(w);var P=w;return P._p=new Promise(function(q,oe){P.onload=q,P.onerror=oe}),Ur(w,"link",p),l.state.loading|=4,Wh(w,f.precedence,i),l.instance=w;case"script":return w=Oc(f.src),(E=i.querySelector(pf(w)))?(l.instance=E,nt(E),E):(p=f,(E=sa.get(w))&&(p=x({},f),tx(p,E)),i=i.ownerDocument||i,E=i.createElement("script"),nt(E),Ur(E,"link",p),i.head.appendChild(E),l.instance=E);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Wh(p,f.precedence,i));return l.instance}function Wh(i,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=p.length?p[p.length-1]:null,w=E,P=0;P<p.length;P++){var q=p[P];if(q.dataset.precedence===l)w=q;else if(w!==E)break}w?w.parentNode.insertBefore(i,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(i,l.firstChild))}function ex(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function tx(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Zh=null;function ew(i,l,f){if(Zh===null){var p=new Map,E=Zh=new Map;E.set(f,p)}else E=Zh,p=E.get(f),p||(p=new Map,E.set(f,p));if(p.has(i))return p;for(p.set(i,null),f=f.getElementsByTagName(i),E=0;E<f.length;E++){var w=f[E];if(!(w[_e]||w[X]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var P=w.getAttribute(l)||"";P=i+P;var q=p.get(P);q?q.push(w):p.set(P,[w])}}return p}function tw(i,l,f){i=i.ownerDocument||i,i.head.insertBefore(f,l==="title"?i.querySelector("head > title"):null)}function kD(i,l,f){if(f===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(i=l.disabled,typeof l.precedence=="string"&&i==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function nw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function RD(i,l,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=Fc(p.href),w=l.querySelector(hf(E));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=Xh.bind(i),l.then(i,i)),f.state.loading|=4,f.instance=w,nt(w);return}w=l.ownerDocument||l,p=XT(p),(E=sa.get(E))&&ex(p,E),w=w.createElement("link"),nt(w);var P=w;P._p=new Promise(function(q,oe){P.onload=q,P.onerror=oe}),Ur(w,"link",p),f.instance=w}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(i.count++,f=Xh.bind(i),l.addEventListener("load",f),l.addEventListener("error",f))}}var nx=0;function DD(i,l){return i.stylesheets&&i.count===0&&e0(i,i.stylesheets),0<i.count||0<i.imgCount?function(f){var p=setTimeout(function(){if(i.stylesheets&&e0(i,i.stylesheets),i.unsuspend){var w=i.unsuspend;i.unsuspend=null,w()}},6e4+l);0<i.imgBytes&&nx===0&&(nx=62500*dD());var E=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&e0(i,i.stylesheets),i.unsuspend)){var w=i.unsuspend;i.unsuspend=null,w()}},(i.imgBytes>nx?50:800)+l);return i.unsuspend=f,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(E)}}:null}function Xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)e0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Qh=null;function e0(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Qh=new Map,l.forEach(MD,i),Qh=null,Xh.call(i))}function MD(i,l){if(!(l.state.loading&4)){var f=Qh.get(i);if(f)var p=f.get(null);else{f=new Map,Qh.set(i,f);for(var E=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var P=E[w];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(f.set(P.dataset.precedence,P),p=P)}p&&f.set(null,p)}E=l.instance,P=E.getAttribute("data-precedence"),w=f.get(P)||p,w===p&&f.set(null,E),f.set(P,E),this.count++,p=Xh.bind(this),E.addEventListener("load",p),E.addEventListener("error",p),w?w.parentNode.insertBefore(E,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(E,i.firstChild)),l.state.loading|=4}}var mf={$$typeof:D,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function PD(i,l,f,p,E,w,P,q,oe){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.hiddenUpdates=Yn(null),this.identifierPrefix=p,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function rw(i,l,f,p,E,w,P,q,oe,Ee,Me,Fe){return i=new PD(i,l,f,P,oe,Ee,Me,Fe,q),l=1,w===!0&&(l|=24),w=Ms(3,null,null,l),i.current=w,w.stateNode=i,l=Fm(),l.refCount++,i.pooledCache=l,l.refCount++,w.memoizedState={element:p,isDehydrated:f,cache:l},Vm(w),i}function sw(i){return i?(i=hc,i):hc}function aw(i,l,f,p,E,w){E=sw(E),p.context===null?p.context=E:p.pendingContext=E,p=no(l),p.payload={element:f},w=w===void 0?null:w,w!==null&&(p.callback=w),f=ro(i,p,l),f!==null&&(Ss(f,i,l),qu(f,i,l))}function iw(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<l?f:l}}function rx(i,l){iw(i,l),(i=i.alternate)&&iw(i,l)}function ow(i){if(i.tag===13||i.tag===31){var l=ol(i,67108864);l!==null&&Ss(l,i,67108864),rx(i,67108864)}}function lw(i){if(i.tag===13||i.tag===31){var l=Us();l=va(l);var f=ol(i,l);f!==null&&Ss(f,i,l),rx(i,l)}}var t0=!0;function FD(i,l,f,p){var E=ie.T;ie.T=null;var w=fe.p;try{fe.p=2,sx(i,l,f,p)}finally{fe.p=w,ie.T=E}}function OD(i,l,f,p){var E=ie.T;ie.T=null;var w=fe.p;try{fe.p=8,sx(i,l,f,p)}finally{fe.p=w,ie.T=E}}function sx(i,l,f,p){if(t0){var E=ax(p);if(E===null)Gg(i,l,p,n0,f),uw(i,p);else if(UD(E,i,l,f,p))p.stopPropagation();else if(uw(i,p),l&4&&-1<LD.indexOf(i)){for(;E!==null;){var w=Ye(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var P=Dr(w.pendingLanes);if(P!==0){var q=w;for(q.pendingLanes|=2,q.entangledLanes|=2;P;){var oe=1<<31-Rn(P);q.entanglements[1]|=oe,P&=~oe}Ja(w),(un&6)===0&&(Uh=vt()+500,cf(0))}}break;case 31:case 13:q=ol(w,2),q!==null&&Ss(q,w,2),Bh(),rx(w,2)}if(w=ax(p),w===null&&Gg(i,l,p,n0,f),w===E)break;E=w}E!==null&&p.stopPropagation()}else Gg(i,l,p,null,f)}}function ax(i){return i=Js(i),ix(i)}var n0=null;function ix(i){if(n0=null,i=He(i),i!==null){var l=a(i);if(l===null)i=null;else{var f=l.tag;if(f===13){if(i=o(l),i!==null)return i;i=null}else if(f===31){if(i=c(l),i!==null)return i;i=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return n0=i,null}function cw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case Kt:return 2;case yn:return 8;case jt:case Mt:return 32;case gt:return 268435456;default:return 32}default:return 32}}var ox=!1,mo=null,go=null,xo=null,gf=new Map,xf=new Map,vo=[],LD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uw(i,l){switch(i){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":gf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xf.delete(l.pointerId)}}function vf(i,l,f,p,E,w){return i===null||i.nativeEvent!==w?(i={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:w,targetContainers:[E]},l!==null&&(l=Ye(l),l!==null&&ow(l)),i):(i.eventSystemFlags|=p,l=i.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),i)}function UD(i,l,f,p,E){switch(l){case"focusin":return mo=vf(mo,i,l,f,p,E),!0;case"dragenter":return go=vf(go,i,l,f,p,E),!0;case"mouseover":return xo=vf(xo,i,l,f,p,E),!0;case"pointerover":var w=E.pointerId;return gf.set(w,vf(gf.get(w)||null,i,l,f,p,E)),!0;case"gotpointercapture":return w=E.pointerId,xf.set(w,vf(xf.get(w)||null,i,l,f,p,E)),!0}return!1}function fw(i){var l=He(i.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){i.blockedOn=l,ne(i.priority,function(){lw(f)});return}}else if(l===31){if(l=c(f),l!==null){i.blockedOn=l,ne(i.priority,function(){lw(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function r0(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var f=ax(i.nativeEvent);if(f===null){f=i.nativeEvent;var p=new f.constructor(f.type,f);ku=p,f.target.dispatchEvent(p),ku=null}else return l=Ye(f),l!==null&&ow(l),i.blockedOn=f,!1;l.shift()}return!0}function dw(i,l,f){r0(i)&&f.delete(l)}function VD(){ox=!1,mo!==null&&r0(mo)&&(mo=null),go!==null&&r0(go)&&(go=null),xo!==null&&r0(xo)&&(xo=null),gf.forEach(dw),xf.forEach(dw)}function s0(i,l){i.blockedOn===l&&(i.blockedOn=null,ox||(ox=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,VD)))}var a0=null;function hw(i){a0!==i&&(a0=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){a0===i&&(a0=null);for(var l=0;l<i.length;l+=3){var f=i[l],p=i[l+1],E=i[l+2];if(typeof p!="function"){if(ix(p||f)===null)continue;break}var w=Ye(f);w!==null&&(i.splice(l,3),l-=3,ag(w,{pending:!0,data:E,method:f.method,action:p},p,E))}}))}function Lc(i){function l(oe){return s0(oe,i)}mo!==null&&s0(mo,i),go!==null&&s0(go,i),xo!==null&&s0(xo,i),gf.forEach(l),xf.forEach(l);for(var f=0;f<vo.length;f++){var p=vo[f];p.blockedOn===i&&(p.blockedOn=null)}for(;0<vo.length&&(f=vo[0],f.blockedOn===null);)fw(f),f.blockedOn===null&&vo.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var E=f[p],w=f[p+1],P=E[ee]||null;if(typeof w=="function")P||hw(f);else if(P){var q=null;if(w&&w.hasAttribute("formAction")){if(E=w,P=w[ee]||null)q=P.formAction;else if(ix(E)!==null)continue}else q=P.action;typeof q=="function"?f[p+1]=q:(f.splice(p,3),p-=3),hw(f)}}}function pw(){function i(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(P){return E=P})},focusReset:"manual",scroll:"manual"})}function l(){E!==null&&(E(),E=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,E=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),E!==null&&(E(),E=null)}}}function lx(i){this._internalRoot=i}i0.prototype.render=lx.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=Us();aw(f,p,i,l,null,null)},i0.prototype.unmount=lx.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;aw(i.current,2,null,i,null,null),Bh(),l[ae]=null}};function i0(i){this._internalRoot=i}i0.prototype.unstable_scheduleHydration=function(i){if(i){var l=G();i={blockedOn:null,target:i,priority:l};for(var f=0;f<vo.length&&l!==0&&l<vo[f].priority;f++);vo.splice(f,0,i),f===0&&fw(i)}};var mw=e.version;if(mw!=="19.2.4")throw Error(r(527,mw,"19.2.4"));fe.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(l),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var BD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o0.isDisabled&&o0.supportsFiber)try{Ot=o0.inject(BD),hn=o0}catch{}}return _f.createRoot=function(i,l){if(!s(i))throw Error(r(299));var f=!1,p="",E=TE,w=wE,P=SE;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError)),l=rw(i,1,!1,null,null,f,p,null,E,w,P,pw),i[ae]=l.current,Hg(i),new lx(l)},_f.hydrateRoot=function(i,l,f){if(!s(i))throw Error(r(299));var p=!1,E="",w=TE,P=wE,q=SE,oe=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(P=f.onCaughtError),f.onRecoverableError!==void 0&&(q=f.onRecoverableError),f.formState!==void 0&&(oe=f.formState)),l=rw(i,1,!0,l,f??null,p,E,oe,w,P,q,pw),l.context=sw(null),f=l.current,p=Us(),p=va(p),E=no(p),E.callback=null,ro(f,E,p),f=p,l.current.lanes=f,qr(l,f),Ja(l),i[ae]=l.current,Hg(i),new i0(l)},_f.version="19.2.4",_f}var Aw;function YD(){if(Aw)return fx.exports;Aw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fx.exports=JD(),fx.exports}var WD=YD();const ZD=Hp(WD);const xC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const XD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const QD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const bw=t=>{const e=QD(t);return e.charAt(0).toUpperCase()+e.slice(1)};var eM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const tM=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const nM=ue.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...c},u)=>ue.createElement("svg",{ref:u,...eM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:xC("lucide",s),...!a&&!tM(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>ue.createElement(d,h)),...Array.isArray(a)?a:[a]]));const at=(t,e)=>{const n=ue.forwardRef(({className:r,...s},a)=>ue.createElement(nM,{ref:a,iconNode:e,className:xC(`lucide-${XD(bw(t))}`,`lucide-${t}`,r),...s}));return n.displayName=bw(t),n};const rM=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],sM=at("arrow-down",rM);const aM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],iM=at("arrow-left",aM);const oM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],lM=at("arrow-right",oM);const cM=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],uM=at("arrow-up",cM);const fM=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Xa=at("briefcase",fM);const dM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vC=at("calendar",dM);const hM=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],pM=at("camera",hM);const mM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iu=at("check",mM);const gM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xM=at("chevron-left",gM);const vM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yC=at("chevron-right",vM);const yM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ts=at("circle-alert",yM);const _M=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cl=at("circle-check-big",_M);const EM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_C=at("circle-check",EM);const TM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wM=at("circle-question-mark",TM);const SM=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Yx=at("cloud",SM);const AM=[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]],bM=at("cookie",AM);const CM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],NM=at("copy",CM);const IM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Wx=at("database",IM);const kM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],RM=at("download",kM);const DM=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Zx=at("external-link",DM);const MM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EC=at("eye-off",MM);const PM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],TC=at("eye",PM);const FM=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],F0=at("file-spreadsheet",FM);const OM=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],O0=at("file-text",OM);const LM=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],zf=at("file-up",LM);const UM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wC=at("funnel",UM);const VM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],rp=at("globe",VM);const BM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],SC=at("info",BM);const zM=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Zc=at("key",zM);const jM=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],AC=at("layers",jM);const HM=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Cw=at("layout-dashboard",HM);const GM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Io=at("loader-circle",GM);const $M=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Xx=at("lock",$M);const qM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KM=at("log-out",qM);const JM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],YM=at("mail",JM);const WM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ii=at("map-pin",WM);const ZM=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],XM=at("map",ZM);const QM=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],eP=at("maximize-2",QM);const tP=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],nP=at("menu",tP);const rP=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Nw=at("minimize-2",rP);const sP=[["path",{d:"M5 12h14",key:"1ays0h"}]],aP=at("minus",sP);const iP=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ko=at("package",iP);const oP=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],lP=at("pen-line",oP);const cP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uP=at("pen",cP);const fP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],mx=at("pencil",fP);const dP=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],bC=at("phone",dP);const hP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],m1=at("plus",hP);const pP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Md=at("save",pP);const mP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ki=at("search",mP);const gP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Iw=at("send",gP);const xP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CC=at("shield-check",xP);const vP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qx=at("shield",vP);const yP=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Ri=at("shopping-bag",yP);const _P=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],kw=at("sparkles",_P);const EP=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],ad=at("store",EP);const TP=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],wP=at("table",TP);const SP=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],g1=at("tag",SP);const AP=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Dl=at("trash-2",AP);const bP=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],CP=at("upload",bP);const NP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Rw=at("user-plus",NP);const IP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Is=at("user",IP);const kP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ev=at("users",kP);const RP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gs=at("x",RP),NC={admin_dev:" Admin DEV",admin_general:" Admin Geral",general_manager:" Gerente Geral",sales_manager:" Gerente de Vendas",sales_supervisor:" Supervisor de Vendas",sales_internal:" Vendedor Interno",sales_external:" Vendedor Externo",admin:" Admin (Legado)",salesperson:" Vendedor (Legado)"},Ns={admin_dev:1,admin:1,admin_general:2,general_manager:3,sales_manager:4,sales_supervisor:5,sales_internal:6,sales_external:7,salesperson:7},Dw=t=>NC[t]||t,DP=t=>t==="admin"?"admin_dev":t==="salesperson"?"sales_external":t,MP=t=>{const e=Ns[t],n=["admin_dev","admin_general","general_manager","sales_manager","sales_supervisor","sales_internal","sales_external"];return e===1?n:n.filter(r=>Ns[r]>e)},gx=(t,e)=>{const n=Ns[t],r=Ns[e];return r===1?n===1:n<r},tv=t=>Ns[t]<=2,$c=t=>Ns[t]>=3,nv=t=>Ns[t]<=5,If=t=>t.map(e=>e.id==="admin"||e.username==="admin"?{...e,role:"admin_dev",name:"Admin DEV",salesCategory:"N/A"}:e.role==="admin"?{...e,role:"admin_dev"}:e.role==="salesperson"?{...e,role:"sales_external"}:e),id=["Norte","Nordeste","Centro-Oeste","Sudeste","Sul"],od=["Todos","Som e Vdeo","Pneus e Rodas","Peas e Mecnica","Acessrios","Vidros e Pelculas","Outros"],PP={AC:"Norte",AL:"Nordeste",AP:"Norte",AM:"Norte",BA:"Nordeste",CE:"Nordeste",DF:"Centro-Oeste",ES:"Sudeste",GO:"Centro-Oeste",MA:"Nordeste",MT:"Centro-Oeste",MS:"Centro-Oeste",MG:"Sudeste",PA:"Norte",PB:"Nordeste",PR:"Sul",PE:"Nordeste",PI:"Nordeste",RJ:"Sudeste",RN:"Nordeste",RS:"Sul",RO:"Norte",RR:"Norte",SC:"Sul",SP:"Sudeste",SE:"Nordeste",TO:"Norte"},ld=t=>{const e=t.toUpperCase().trim();return PP[e]||"Indefinido"};var L0={exports:{}};var FP=L0.exports,Mw;function OP(){return Mw||(Mw=1,(function(t,e){((n,r)=>{t.exports=r()})(FP,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,c={},u=0,d={};function h(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(N){var F=z(N);F.chunkSize=parseInt(F.chunkSize),N.step||N.chunk||(F.chunkSize=null),this._handle=new A(F),(this._handle.streamer=this)._config=F}).call(this,C),this.parseChunk=function(N,F){var U=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<U){let j=this._config.newline;j||(M=this._config.quoteChar||'"',j=this._handle.guessLineEndings(N,M)),N=[...N.split(j).slice(U)].join(j)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(M=this._config.beforeFirstChunk(N))!==void 0&&(N=M),this.isFirstChunk=!1,this._halted=!1;var U=this._partialLine+N,M=(this._partialLine="",this._handle.parse(U,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(N=M.meta.cursor,U=(this._finished||(this._partialLine=U.substring(N-this._baseIndex),this._baseIndex=N),M&&M.data&&(this._rowCount+=M.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:M,workerId:d.WORKER_ID,finished:U});else if(I(this._config.chunk)&&!F){if(this._config.chunk(M,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=M=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(M.data),this._completeResults.errors=this._completeResults.errors.concat(M.errors),this._completeResults.meta=M.meta),this._completed||!U||!I(this._config.complete)||M&&M.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),U||M&&M.meta.paused||this._nextChunk(),M}this._halted=!0},this._sendError=function(N){I(this._config.error)?this._config.error(N):o&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:N,finished:!1})}}function x(C){var N;(C=C||{}).chunkSize||(C.chunkSize=d.RemoteChunkSize),h.call(this,C),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(N=new XMLHttpRequest,this._config.withCredentials&&(N.withCredentials=this._config.withCredentials),a||(N.onload=O(this._chunkLoaded,this),N.onerror=O(this._chunkError,this)),N.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var F,U=this._config.downloadRequestHeaders;for(F in U)N.setRequestHeader(F,U[F])}var M;this._config.chunkSize&&(M=this._start+this._config.chunkSize-1,N.setRequestHeader("Range","bytes="+this._start+"-"+M));try{N.send(this._config.downloadRequestBody)}catch(j){this._chunkError(j.message)}a&&N.status===0&&this._chunkError()}},this._chunkLoaded=function(){N.readyState===4&&(N.status<200||400<=N.status?this._chunkError():(this._start+=this._config.chunkSize||N.responseText.length,this._finished=!this._config.chunkSize||this._start>=(F=>(F=F.getResponseHeader("Content-Range"))!==null?parseInt(F.substring(F.lastIndexOf("/")+1)):-1)(N),this.parseChunk(N.responseText)))},this._chunkError=function(F){F=N.statusText||F,this._sendError(new Error(F))}}function v(C){(C=C||{}).chunkSize||(C.chunkSize=d.LocalChunkSize),h.call(this,C);var N,F,U=typeof FileReader<"u";this.stream=function(M){this._input=M,F=M.slice||M.webkitSlice||M.mozSlice,U?((N=new FileReader).onload=O(this._chunkLoaded,this),N.onerror=O(this._chunkError,this)):N=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input,j=(this._config.chunkSize&&(j=Math.min(this._start+this._config.chunkSize,this._input.size),M=F.call(M,this._start,j)),N.readAsText(M,this._config.encoding));U||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(N.error)}}function T(C){var N;h.call(this,C=C||{}),this.stream=function(F){return N=F,this._nextChunk()},this._nextChunk=function(){var F,U;if(!this._finished)return F=this._config.chunkSize,N=F?(U=N.substring(0,F),N.substring(F)):(U=N,""),this._finished=!N,this.parseChunk(U)}}function S(C){h.call(this,C=C||{});var N=[],F=!0,U=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){U&&N.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),N.length?this.parseChunk(N.shift()):F=!0},this._streamData=O(function(M){try{N.push(typeof M=="string"?M:M.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(N.shift()))}catch(j){this._streamError(j)}},this),this._streamError=O(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=O(function(){this._streamCleanUp(),U=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function A(C){var N,F,U,M,j=Math.pow(2,53),he=-j,Se=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,fe=this,ce=0,K=0,Ie=!1,Y=!1,H=[],Q={data:[],errors:[],meta:{}};function te(Ne){return C.skipEmptyLines==="greedy"?Ne.join("").trim()==="":Ne.length===1&&Ne[0].length===0}function W(){if(Q&&U&&(ge("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),U=!1),C.skipEmptyLines&&(Q.data=Q.data.filter(function(re){return!te(re)})),le()){let re=function(ft,Je){I(C.transformHeader)&&(ft=C.transformHeader(ft,Je)),H.push(ft)};var $e=re;if(Q)if(Array.isArray(Q.data[0])){for(var Ne=0;le()&&Ne<Q.data.length;Ne++)Q.data[Ne].forEach(re);Q.data.splice(0,1)}else Q.data.forEach(re)}function be(re,ft){for(var Je=C.header?{}:[],Qe=0;Qe<re.length;Qe++){var Ge=Qe,Ve=re[Qe],Ve=((st,it)=>(dt=>(C.dynamicTypingFunction&&C.dynamicTyping[dt]===void 0&&(C.dynamicTyping[dt]=C.dynamicTypingFunction(dt)),(C.dynamicTyping[dt]||C.dynamicTyping)===!0))(st)?it==="true"||it==="TRUE"||it!=="false"&&it!=="FALSE"&&((dt=>{if(Se.test(dt)&&(dt=parseFloat(dt),he<dt&&dt<j))return 1})(it)?parseFloat(it):ie.test(it)?new Date(it):it===""?null:it):it)(Ge=C.header?Qe>=H.length?"__parsed_extra":H[Qe]:Ge,Ve=C.transform?C.transform(Ve,Ge):Ve);Ge==="__parsed_extra"?(Je[Ge]=Je[Ge]||[],Je[Ge].push(Ve)):Je[Ge]=Ve}return C.header&&(Qe>H.length?ge("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+Qe,K+ft):Qe<H.length&&ge("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+Qe,K+ft)),Je}var ke;Q&&(C.header||C.dynamicTyping||C.transform)&&(ke=1,!Q.data.length||Array.isArray(Q.data[0])?(Q.data=Q.data.map(be),ke=Q.data.length):Q.data=be(Q.data,0),C.header&&Q.meta&&(Q.meta.fields=H),K+=ke)}function le(){return C.header&&H.length===0}function ge(Ne,be,ke,$e){Ne={type:Ne,code:be,message:ke},$e!==void 0&&(Ne.row=$e),Q.errors.push(Ne)}I(C.step)&&(M=C.step,C.step=function(Ne){Q=Ne,le()?W():(W(),Q.data.length!==0&&(ce+=Ne.data.length,C.preview&&ce>C.preview?F.abort():(Q.data=Q.data[0],M(Q,fe))))}),this.parse=function(Ne,be,ke){var $e=C.quoteChar||'"',$e=(C.newline||(C.newline=this.guessLineEndings(Ne,$e)),U=!1,C.delimiter?I(C.delimiter)&&(C.delimiter=C.delimiter(Ne),Q.meta.delimiter=C.delimiter):(($e=((re,ft,Je,Qe,Ge)=>{var Ve,st,it,dt;Ge=Ge||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var et=0;et<Ge.length;et++){for(var _t,kn=Ge[et],vt=0,Lt=0,Kt=0,yn=(it=void 0,new R({comments:Qe,delimiter:kn,newline:ft,preview:10}).parse(re)),jt=0;jt<yn.data.length;jt++)Je&&te(yn.data[jt])?Kt++:(_t=yn.data[jt].length,Lt+=_t,it===void 0?it=_t:0<_t&&(vt+=Math.abs(_t-it),it=_t));0<yn.data.length&&(Lt/=yn.data.length-Kt),(st===void 0||vt<=st)&&(dt===void 0||dt<Lt)&&1.99<Lt&&(st=vt,Ve=kn,dt=Lt)}return{successful:!!(C.delimiter=Ve),bestDelimiter:Ve}})(Ne,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=$e.bestDelimiter:(U=!0,C.delimiter=d.DefaultDelimiter),Q.meta.delimiter=C.delimiter),z(C));return C.preview&&C.header&&$e.preview++,N=Ne,F=new R($e),Q=F.parse(N,be,ke),W(),Ie?{meta:{paused:!0}}:Q||{meta:{paused:!1}}},this.paused=function(){return Ie},this.pause=function(){Ie=!0,F.abort(),N=I(C.chunk)?"":N.substring(F.getCharIndex())},this.resume=function(){fe.streamer._halted?(Ie=!1,fe.streamer.parseChunk(N,!0)):setTimeout(fe.resume,3)},this.aborted=function(){return Y},this.abort=function(){Y=!0,F.abort(),Q.meta.aborted=!0,I(C.complete)&&C.complete(Q),N=""},this.guessLineEndings=function(re,$e){re=re.substring(0,1048576);var $e=new RegExp(b($e)+"([^]*?)"+b($e),"gm"),ke=(re=re.replace($e,"")).split("\r"),$e=re.split(`
`),re=1<$e.length&&$e[0].length<ke[0].length;if(ke.length===1||re)return`
`;for(var ft=0,Je=0;Je<ke.length;Je++)ke[Je][0]===`
`&&ft++;return ft>=ke.length/2?`\r
`:"\r"}}function b(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R(C){var N=(C=C||{}).delimiter,F=C.newline,U=C.comments,M=C.step,j=C.preview,he=C.fastMode,Se=null,ie=!1,fe=C.quoteChar==null?'"':C.quoteChar,ce=fe;if(C.escapeChar!==void 0&&(ce=C.escapeChar),(typeof N!="string"||-1<d.BAD_DELIMITERS.indexOf(N))&&(N=","),U===N)throw new Error("Comment character same as delimiter");U===!0?U="#":(typeof U!="string"||-1<d.BAD_DELIMITERS.indexOf(U))&&(U=!1),F!==`
`&&F!=="\r"&&F!==`\r
`&&(F=`
`);var K=0,Ie=!1;this.parse=function(Y,H,Q){if(typeof Y!="string")throw new Error("Input must be a string");var te=Y.length,W=N.length,le=F.length,ge=U.length,Ne=I(M),be=[],ke=[],$e=[],re=K=0;if(!Y)return vt();if(he||he!==!1&&Y.indexOf(fe)===-1){for(var ft=Y.split(F),Je=0;Je<ft.length;Je++){if($e=ft[Je],K+=$e.length,Je!==ft.length-1)K+=F.length;else if(Q)return vt();if(!U||$e.substring(0,ge)!==U){if(Ne){if(be=[],dt($e.split(N)),Lt(),Ie)return vt()}else dt($e.split(N));if(j&&j<=Je)return be=be.slice(0,j),vt(!0)}}return vt()}for(var Qe=Y.indexOf(N,K),Ge=Y.indexOf(F,K),Ve=new RegExp(b(ce)+b(fe),"g"),st=Y.indexOf(fe,K);;)if(Y[K]===fe)for(st=K,K++;;){if((st=Y.indexOf(fe,st+1))===-1)return Q||ke.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:be.length,index:K}),_t();if(st===te-1)return _t(Y.substring(K,st).replace(Ve,fe));if(fe===ce&&Y[st+1]===ce)st++;else if(fe===ce||st===0||Y[st-1]!==ce){Qe!==-1&&Qe<st+1&&(Qe=Y.indexOf(N,st+1));var it=et((Ge=Ge!==-1&&Ge<st+1?Y.indexOf(F,st+1):Ge)===-1?Qe:Math.min(Qe,Ge));if(Y.substr(st+1+it,W)===N){$e.push(Y.substring(K,st).replace(Ve,fe)),Y[K=st+1+it+W]!==fe&&(st=Y.indexOf(fe,K)),Qe=Y.indexOf(N,K),Ge=Y.indexOf(F,K);break}if(it=et(Ge),Y.substring(st+1+it,st+1+it+le)===F){if($e.push(Y.substring(K,st).replace(Ve,fe)),kn(st+1+it+le),Qe=Y.indexOf(N,K),st=Y.indexOf(fe,K),Ne&&(Lt(),Ie))return vt();if(j&&be.length>=j)return vt(!0);break}ke.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:be.length,index:K}),st++}}else if(U&&$e.length===0&&Y.substring(K,K+ge)===U){if(Ge===-1)return vt();K=Ge+le,Ge=Y.indexOf(F,K),Qe=Y.indexOf(N,K)}else if(Qe!==-1&&(Qe<Ge||Ge===-1))$e.push(Y.substring(K,Qe)),K=Qe+W,Qe=Y.indexOf(N,K);else{if(Ge===-1)break;if($e.push(Y.substring(K,Ge)),kn(Ge+le),Ne&&(Lt(),Ie))return vt();if(j&&be.length>=j)return vt(!0)}return _t();function dt(Kt){be.push(Kt),re=K}function et(Kt){var yn=0;return yn=Kt!==-1&&(Kt=Y.substring(st+1,Kt))&&Kt.trim()===""?Kt.length:yn}function _t(Kt){return Q||(Kt===void 0&&(Kt=Y.substring(K)),$e.push(Kt),K=te,dt($e),Ne&&Lt()),vt()}function kn(Kt){K=Kt,dt($e),$e=[],Ge=Y.indexOf(F,K)}function vt(Kt){if(C.header&&!H&&be.length&&!ie){var yn=be[0],jt=Object.create(null),Mt=new Set(yn);let gt=!1;for(let Zt=0;Zt<yn.length;Zt++){let fn=yn[Zt];if(jt[fn=I(C.transformHeader)?C.transformHeader(fn,Zt):fn]){let Ot,hn=jt[fn];for(;Ot=fn+"_"+hn,hn++,Mt.has(Ot););Mt.add(Ot),yn[Zt]=Ot,jt[fn]++,gt=!0,(Se=Se===null?{}:Se)[Ot]=fn}else jt[fn]=1,yn[Zt]=fn;Mt.add(fn)}gt&&console.warn("Duplicate headers found and renamed."),ie=!0}return{data:be,errors:ke,meta:{delimiter:N,linebreak:F,aborted:Ie,truncated:!!Kt,cursor:re+(H||0),renamedHeaders:Se}}}function Lt(){M(vt()),be=[],ke=[]}},this.abort=function(){Ie=!0},this.getCharIndex=function(){return K}}function B(C){var N=C.data,F=c[N.workerId],U=!1;if(N.error)F.userError(N.error,N.file);else if(N.results&&N.results.data){var M={abort:function(){U=!0,D(N.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:L,resume:L};if(I(F.userStep)){for(var j=0;j<N.results.data.length&&(F.userStep({data:N.results.data[j],errors:N.results.errors,meta:N.results.meta},M),!U);j++);delete N.results}else I(F.userChunk)&&(F.userChunk(N.results,M,N.file),delete N.results)}N.finished&&!U&&D(N.workerId,N.results)}function D(C,N){var F=c[C];I(F.userComplete)&&F.userComplete(N),F.terminate(),delete c[C]}function L(){throw new Error("Not implemented.")}function z(C){if(typeof C!="object"||C===null)return C;var N,F=Array.isArray(C)?[]:{};for(N in C)F[N]=z(C[N]);return F}function O(C,N){return function(){C.apply(N,arguments)}}function I(C){return typeof C=="function"}return d.parse=function(C,N){var F=(N=N||{}).dynamicTyping||!1;if(I(F)&&(N.dynamicTypingFunction=F,F={}),N.dynamicTyping=F,N.transform=!!I(N.transform)&&N.transform,!N.worker||!d.WORKERS_SUPPORTED)return F=null,d.NODE_STREAM_INPUT,typeof C=="string"?(C=(U=>U.charCodeAt(0)!==65279?U:U.slice(1))(C),F=new(N.download?x:T)(N)):C.readable===!0&&I(C.read)&&I(C.on)?F=new S(N):(r.File&&C instanceof File||C instanceof Object)&&(F=new v(N)),F.stream(C);(F=(()=>{var U;return!!d.WORKERS_SUPPORTED&&(U=(()=>{var M=r.URL||r.webkitURL||null,j=n.toString();return d.BLOB_URL||(d.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",j,")();"],{type:"text/javascript"})))})(),(U=new r.Worker(U)).onmessage=B,U.id=u++,c[U.id]=U)})()).userStep=N.step,F.userChunk=N.chunk,F.userComplete=N.complete,F.userError=N.error,N.step=I(N.step),N.chunk=I(N.chunk),N.complete=I(N.complete),N.error=I(N.error),delete N.worker,F.postMessage({input:C,config:N,workerId:F.id})},d.unparse=function(C,N){var F=!1,U=!0,M=",",j=`\r
`,he='"',Se=he+he,ie=!1,fe=null,ce=!1,K=((()=>{if(typeof N=="object"){if(typeof N.delimiter!="string"||d.BAD_DELIMITERS.filter(function(H){return N.delimiter.indexOf(H)!==-1}).length||(M=N.delimiter),typeof N.quotes!="boolean"&&typeof N.quotes!="function"&&!Array.isArray(N.quotes)||(F=N.quotes),typeof N.skipEmptyLines!="boolean"&&typeof N.skipEmptyLines!="string"||(ie=N.skipEmptyLines),typeof N.newline=="string"&&(j=N.newline),typeof N.quoteChar=="string"&&(he=N.quoteChar),typeof N.header=="boolean"&&(U=N.header),Array.isArray(N.columns)){if(N.columns.length===0)throw new Error("Option columns is empty");fe=N.columns}N.escapeChar!==void 0&&(Se=N.escapeChar+he),N.escapeFormulae instanceof RegExp?ce=N.escapeFormulae:typeof N.escapeFormulae=="boolean"&&N.escapeFormulae&&(ce=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(he),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return Ie(null,C,ie);if(typeof C[0]=="object")return Ie(fe||Object.keys(C[0]),C,ie)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||fe),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),Ie(C.fields||[],C.data||[],ie);throw new Error("Unable to serialize unrecognized input");function Ie(H,Q,te){var W="",le=(typeof H=="string"&&(H=JSON.parse(H)),typeof Q=="string"&&(Q=JSON.parse(Q)),Array.isArray(H)&&0<H.length),ge=!Array.isArray(Q[0]);if(le&&U){for(var Ne=0;Ne<H.length;Ne++)0<Ne&&(W+=M),W+=Y(H[Ne],Ne);0<Q.length&&(W+=j)}for(var be=0;be<Q.length;be++){var ke=(le?H:Q[be]).length,$e=!1,re=le?Object.keys(Q[be]).length===0:Q[be].length===0;if(te&&!le&&($e=te==="greedy"?Q[be].join("").trim()==="":Q[be].length===1&&Q[be][0].length===0),te==="greedy"&&le){for(var ft=[],Je=0;Je<ke;Je++){var Qe=ge?H[Je]:Je;ft.push(Q[be][Qe])}$e=ft.join("").trim()===""}if(!$e){for(var Ge=0;Ge<ke;Ge++){0<Ge&&!re&&(W+=M);var Ve=le&&ge?H[Ge]:Ge;W+=Y(Q[be][Ve],Ge)}be<Q.length-1&&(!te||0<ke&&!re)&&(W+=j)}}return W}function Y(H,Q){var te,W;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(W=!1,ce&&typeof H=="string"&&ce.test(H)&&(H="'"+H,W=!0),te=H.toString().replace(K,Se),(W=W||F===!0||typeof F=="function"&&F(H,Q)||Array.isArray(F)&&F[Q]||((le,ge)=>{for(var Ne=0;Ne<ge.length;Ne++)if(-1<le.indexOf(ge[Ne]))return!0;return!1})(te,d.BAD_DELIMITERS)||-1<te.indexOf(M)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?he+te+he:te)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=R,d.ParserHandle=A,d.NetworkStreamer=x,d.FileStreamer=v,d.StringStreamer=T,d.ReadableStreamStreamer=S,r.jQuery&&((s=r.jQuery).fn.parse=function(C){var N=C.config||{},F=[];return this.each(function(j){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var he=0;he<this.files.length;he++)F.push({file:this.files[he],inputElem:this,instanceConfig:s.extend({},N)})}),U(),this;function U(){if(F.length===0)I(C.complete)&&C.complete();else{var j,he,Se,ie,fe=F[0];if(I(C.before)){var ce=C.before(fe.file,fe.inputElem);if(typeof ce=="object"){if(ce.action==="abort")return j="AbortError",he=fe.file,Se=fe.inputElem,ie=ce.reason,void(I(C.error)&&C.error({name:j},he,Se,ie));if(ce.action==="skip")return void M();typeof ce.config=="object"&&(fe.instanceConfig=s.extend(fe.instanceConfig,ce.config))}else if(ce==="skip")return void M()}var K=fe.instanceConfig.complete;fe.instanceConfig.complete=function(Ie){I(K)&&K(Ie,fe.file,fe.inputElem),M()},d.parse(fe.file,fe.instanceConfig)}}function M(){F.splice(0,1),U()}}),o&&(r.onmessage=function(C){C=C.data,d.WORKER_ID===void 0&&C&&(d.WORKER_ID=C.workerId),typeof C.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(C.input,C.config),finished:!0}):(r.File&&C.input instanceof File||C.input instanceof Object)&&(C=d.parse(C.input,C.config))&&r.postMessage({workerId:d.WORKER_ID,results:C,finished:!0})}),(x.prototype=Object.create(h.prototype)).constructor=x,(v.prototype=Object.create(h.prototype)).constructor=v,(T.prototype=Object.create(T.prototype)).constructor=T,(S.prototype=Object.create(h.prototype)).constructor=S,d})})(L0)),L0.exports}var LP=OP();const x1=Hp(LP);function Oe(t,e,n){function r(c,u){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:u,constr:o,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,u);const d=o.prototype,h=Object.keys(d);for(let x=0;x<h.length;x++){const v=h[x];v in c||(c[v]=d[v].bind(c))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function o(c){var u;const d=n?.Parent?new a:this;r(d,c),(u=d._zod).deferred??(u.deferred=[]);for(const h of d._zod.deferred)h();return d}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class Xc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class IC extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const kC={};function Ml(t){return kC}function RC(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function rv(t,e){return typeof e=="bigint"?e.toString():e}function v1(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function y1(t){return t==null}function _1(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function UP(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const u=r.match(/\d?e-(\d?)/);u?.[1]&&(s=Number.parseInt(u[1]))}const a=n>s?n:s,o=Number.parseInt(t.toFixed(a).replace(".","")),c=Number.parseInt(e.toFixed(a).replace(".",""));return o%c/10**a}const Pw=Symbol("evaluating");function vn(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Pw)return r===void 0&&(r=Pw,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function jl(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function qo(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function Fw(t){return JSON.stringify(t)}function VP(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const DC="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function sp(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const BP=v1(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function cd(t){if(sp(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(sp(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function MC(t){return cd(t)?{...t}:Array.isArray(t)?[...t]:t}const zP=new Set(["string","number","symbol"]);function ou(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ko(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function pt(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function jP(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const HP={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function GP(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=qo(t._zod.def,{get shape(){const o={};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(o[c]=n.shape[c])}return jl(this,"shape",o),o},checks:[]});return Ko(t,a)}function $P(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=qo(t._zod.def,{get shape(){const o={...t._zod.def.shape};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete o[c]}return jl(this,"shape",o),o},checks:[]});return Ko(t,a)}function qP(t,e){if(!cd(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const o in e)if(Object.getOwnPropertyDescriptor(a,o)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=qo(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return jl(this,"shape",a),a}});return Ko(t,s)}function KP(t,e){if(!cd(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=qo(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return jl(this,"shape",r),r}});return Ko(t,n)}function JP(t,e){const n=qo(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return jl(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Ko(t,n)}function YP(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const o=qo(e._zod.def,{get shape(){const c=e._zod.def.shape,u={...c};if(n)for(const d in n){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(u[d]=t?new t({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)u[d]=t?new t({type:"optional",innerType:c[d]}):c[d];return jl(this,"shape",u),u},checks:[]});return Ko(e,o)}function WP(t,e,n){const r=qo(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const o in n){if(!(o in a))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(a[o]=new t({type:"nonoptional",innerType:s[o]}))}else for(const o in s)a[o]=new t({type:"nonoptional",innerType:s[o]});return jl(this,"shape",a),a}});return Ko(e,r)}function qc(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function PC(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function l0(t){return typeof t=="string"?t:t?.message}function Pl(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=l0(t.inst?._zod.def?.error?.(t))??l0(e?.error?.(t))??l0(n.customError?.(t))??l0(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function E1(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function ud(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const FC=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,rv,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},OC=Oe("$ZodError",FC),LC=Oe("$ZodError",FC,{Parent:Error});function ZP(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function XP(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(o=>r({issues:o}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let o=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(e(a))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return r(t),n}const T1=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},a);if(o instanceof Promise)throw new Xc;if(o.issues.length){const c=new(s?.Err??t)(o.issues.map(u=>Pl(u,a,Ml())));throw DC(c,s?.callee),c}return o.value},w1=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){const c=new(s?.Err??t)(o.issues.map(u=>Pl(u,a,Ml())));throw DC(c,s?.callee),c}return o.value},Gp=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Xc;return a.issues.length?{success:!1,error:new(t??OC)(a.issues.map(o=>Pl(o,s,Ml())))}:{success:!0,data:a.value}},QP=Gp(LC),$p=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(o=>Pl(o,s,Ml())))}:{success:!0,data:a.value}},e6=$p(LC),t6=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return T1(t)(e,n,s)},n6=t=>(e,n,r)=>T1(t)(e,n,r),r6=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return w1(t)(e,n,s)},s6=t=>async(e,n,r)=>w1(t)(e,n,r),a6=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Gp(t)(e,n,s)},i6=t=>(e,n,r)=>Gp(t)(e,n,r),o6=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return $p(t)(e,n,s)},l6=t=>async(e,n,r)=>$p(t)(e,n,r),c6=/^[cC][^\s-]{8,}$/,u6=/^[0-9a-z]+$/,f6=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,d6=/^[0-9a-vA-V]{20}$/,h6=/^[A-Za-z0-9]{27}$/,p6=/^[a-zA-Z0-9_-]{21}$/,m6=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,g6=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ow=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,x6=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,v6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function y6(){return new RegExp(v6,"u")}const _6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,E6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,T6=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,w6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,S6=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,UC=/^[A-Za-z0-9_-]*$/,A6=/^\+[1-9]\d{6,14}$/,VC="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",b6=new RegExp(`^${VC}$`);function BC(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function C6(t){return new RegExp(`^${BC(t)}$`)}function N6(t){const e=BC({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${VC}T(?:${r})$`)}const I6=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},k6=/^-?\d+$/,R6=/^-?\d+(?:\.\d+)?$/,D6=/^[^A-Z]*$/,M6=/^[^a-z]*$/,ks=Oe("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),zC={number:"number",bigint:"bigint",object:"date"},jC=Oe("$ZodCheckLessThan",(t,e)=>{ks.init(t,e);const n=zC[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:typeof e.value=="object"?e.value.getTime():e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),HC=Oe("$ZodCheckGreaterThan",(t,e)=>{ks.init(t,e);const n=zC[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:typeof e.value=="object"?e.value.getTime():e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),P6=Oe("$ZodCheckMultipleOf",(t,e)=>{ks.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):UP(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),F6=Oe("$ZodCheckNumberFormat",(t,e)=>{ks.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),r=n?"int":"number",[s,a]=HP[e.format];t._zod.onattach.push(o=>{const c=o._zod.bag;c.format=e.format,c.minimum=s,c.maximum=a,n&&(c.pattern=k6)}),t._zod.check=o=>{const c=o.value;if(n){if(!Number.isInteger(c)){o.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?o.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!e.abort}):o.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!e.abort});return}}c<s&&o.issues.push({origin:"number",input:c,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),c>a&&o.issues.push({origin:"number",input:c,code:"too_big",maximum:a,inclusive:!0,inst:t,continue:!e.abort})}}),O6=Oe("$ZodCheckMaxLength",(t,e)=>{var n;ks.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!y1(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const o=E1(s);r.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),L6=Oe("$ZodCheckMinLength",(t,e)=>{var n;ks.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!y1(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const o=E1(s);r.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),U6=Oe("$ZodCheckLengthEquals",(t,e)=>{var n;ks.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!y1(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const o=E1(s),c=a>e.length;r.issues.push({origin:o,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),qp=Oe("$ZodCheckStringFormat",(t,e)=>{var n,r;ks.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),V6=Oe("$ZodCheckRegex",(t,e)=>{qp.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),B6=Oe("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=D6),qp.init(t,e)}),z6=Oe("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=M6),qp.init(t,e)}),j6=Oe("$ZodCheckIncludes",(t,e)=>{ks.init(t,e);const n=ou(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),H6=Oe("$ZodCheckStartsWith",(t,e)=>{ks.init(t,e);const n=new RegExp(`^${ou(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),G6=Oe("$ZodCheckEndsWith",(t,e)=>{ks.init(t,e);const n=new RegExp(`.*${ou(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),$6=Oe("$ZodCheckOverwrite",(t,e)=>{ks.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class q6{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),a=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of a)this.content.push(o)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const K6={major:4,minor:3,patch:6},tr=Oe("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=K6;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(o,c,u)=>{let d=qc(o),h;for(const x of c){if(x._zod.def.when){if(!x._zod.def.when(o))continue}else if(d)continue;const v=o.issues.length,T=x._zod.check(o);if(T instanceof Promise&&u?.async===!1)throw new Xc;if(h||T instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await T,o.issues.length!==v&&(d||(d=qc(o,v)))});else{if(o.issues.length===v)continue;d||(d=qc(o,v))}}return h?h.then(()=>o):o},a=(o,c,u)=>{if(qc(o))return o.aborted=!0,o;const d=s(c,r,u);if(d instanceof Promise){if(u.async===!1)throw new Xc;return d.then(h=>t._zod.parse(h,u))}return t._zod.parse(d,u)};t._zod.run=(o,c)=>{if(c.skipChecks)return t._zod.parse(o,c);if(c.direction==="backward"){const d=t._zod.parse({value:o.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(h=>a(h,o,c)):a(d,o,c)}const u=t._zod.parse(o,c);if(u instanceof Promise){if(c.async===!1)throw new Xc;return u.then(d=>s(d,r,c))}return s(u,r,c)}}vn(t,"~standard",()=>({validate:s=>{try{const a=QP(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return e6(t,s).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}))}),S1=Oe("$ZodString",(t,e)=>{tr.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??I6(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Vn=Oe("$ZodStringFormat",(t,e)=>{qp.init(t,e),S1.init(t,e)}),J6=Oe("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=g6),Vn.init(t,e)}),Y6=Oe("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ow(r))}else e.pattern??(e.pattern=Ow());Vn.init(t,e)}),W6=Oe("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=x6),Vn.init(t,e)}),Z6=Oe("$ZodURL",(t,e)=>{Vn.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),X6=Oe("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=y6()),Vn.init(t,e)}),Q6=Oe("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=p6),Vn.init(t,e)}),e5=Oe("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=c6),Vn.init(t,e)}),t5=Oe("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=u6),Vn.init(t,e)}),n5=Oe("$ZodULID",(t,e)=>{e.pattern??(e.pattern=f6),Vn.init(t,e)}),r5=Oe("$ZodXID",(t,e)=>{e.pattern??(e.pattern=d6),Vn.init(t,e)}),s5=Oe("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=h6),Vn.init(t,e)}),a5=Oe("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=N6(e)),Vn.init(t,e)}),i5=Oe("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=b6),Vn.init(t,e)}),o5=Oe("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=C6(e)),Vn.init(t,e)}),l5=Oe("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=m6),Vn.init(t,e)}),c5=Oe("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=_6),Vn.init(t,e),t._zod.bag.format="ipv4"}),u5=Oe("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=E6),Vn.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),f5=Oe("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=T6),Vn.init(t,e)}),d5=Oe("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=w6),Vn.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const o=Number(a);if(`${o}`!==a)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function GC(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const h5=Oe("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=S6),Vn.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{GC(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function p5(t){if(!UC.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return GC(n)}const m5=Oe("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=UC),Vn.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{p5(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),g5=Oe("$ZodE164",(t,e)=>{e.pattern??(e.pattern=A6),Vn.init(t,e)});function x5(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const v5=Oe("$ZodJWT",(t,e)=>{Vn.init(t,e),t._zod.check=n=>{x5(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),$C=Oe("$ZodNumber",(t,e)=>{tr.init(t,e),t._zod.pattern=t._zod.bag.pattern??R6,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...a?{received:a}:{}}),n}}),y5=Oe("$ZodNumberFormat",(t,e)=>{F6.init(t,e),$C.init(t,e)}),_5=Oe("$ZodUnknown",(t,e)=>{tr.init(t,e),t._zod.parse=n=>n}),E5=Oe("$ZodNever",(t,e)=>{tr.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function Lw(t,e,n){t.issues.length&&e.issues.push(...PC(n,t.issues)),e.value[n]=t.value}const T5=Oe("$ZodArray",(t,e)=>{tr.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let o=0;o<s.length;o++){const c=s[o],u=e.element._zod.run({value:c,issues:[]},r);u instanceof Promise?a.push(u.then(d=>Lw(d,n,o))):Lw(u,n,o)}return a.length?Promise.all(a).then(()=>n):n}});function ap(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...PC(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function qC(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=jP(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function KC(t,e,n,r,s,a){const o=[],c=s.keySet,u=s.catchall._zod,d=u.def.type,h=u.optout==="optional";for(const x in e){if(c.has(x))continue;if(d==="never"){o.push(x);continue}const v=u.run({value:e[x],issues:[]},r);v instanceof Promise?t.push(v.then(T=>ap(T,n,x,e,h))):ap(v,n,x,e,h)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const w5=Oe("$ZodObject",(t,e)=>{if(tr.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const u={...c};return Object.defineProperty(e,"shape",{value:u}),u}})}const r=v1(()=>qC(e));vn(t._zod,"propValues",()=>{const c=e.shape,u={};for(const d in c){const h=c[d]._zod;if(h.values){u[d]??(u[d]=new Set);for(const x of h.values)u[d].add(x)}}return u});const s=sp,a=e.catchall;let o;t._zod.parse=(c,u)=>{o??(o=r.value);const d=c.value;if(!s(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};const h=[],x=o.shape;for(const v of o.keys){const T=x[v],S=T._zod.optout==="optional",A=T._zod.run({value:d[v],issues:[]},u);A instanceof Promise?h.push(A.then(b=>ap(b,c,v,d,S))):ap(A,c,v,d,S)}return a?KC(h,d,c,u,r.value,t):h.length?Promise.all(h).then(()=>c):c}}),S5=Oe("$ZodObjectJIT",(t,e)=>{w5.init(t,e);const n=t._zod.parse,r=v1(()=>qC(e)),s=v=>{const T=new q6(["shape","payload","ctx"]),S=r.value,A=D=>{const L=Fw(D);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};T.write("const input = payload.value;");const b=Object.create(null);let R=0;for(const D of S.keys)b[D]=`key_${R++}`;T.write("const newResult = {};");for(const D of S.keys){const L=b[D],z=Fw(D),I=v[D]?._zod?.optout==="optional";T.write(`const ${L} = ${A(D)};`),I?T.write(`
        if (${L}.issues.length) {
          if (${z} in input) {
            payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${z}, ...iss.path] : [${z}]
            })));
          }
        }
        
        if (${L}.value === undefined) {
          if (${z} in input) {
            newResult[${z}] = undefined;
          }
        } else {
          newResult[${z}] = ${L}.value;
        }
        
      `):T.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${z}, ...iss.path] : [${z}]
          })));
        }
        
        if (${L}.value === undefined) {
          if (${z} in input) {
            newResult[${z}] = undefined;
          }
        } else {
          newResult[${z}] = ${L}.value;
        }
        
      `)}T.write("payload.value = newResult;"),T.write("return payload;");const B=T.compile();return(D,L)=>B(v,D,L)};let a;const o=sp,c=!kC.jitless,d=c&&BP.value,h=e.catchall;let x;t._zod.parse=(v,T)=>{x??(x=r.value);const S=v.value;return o(S)?c&&d&&T?.async===!1&&T.jitless!==!0?(a||(a=s(e.shape)),v=a(v,T),h?KC([],S,v,T,x,t):v):n(v,T):(v.issues.push({expected:"object",code:"invalid_type",input:S,inst:t}),v)}});function Uw(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!qc(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(o=>Pl(o,r,Ml())))}),e)}const A5=Oe("$ZodUnion",(t,e)=>{tr.init(t,e),vn(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),vn(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),vn(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),vn(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>_1(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let o=!1;const c=[];for(const u of e.options){const d=u._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)c.push(d),o=!0;else{if(d.issues.length===0)return d;c.push(d)}}return o?Promise.all(c).then(u=>Uw(u,s,t,a)):Uw(c,s,t,a)}}),b5=Oe("$ZodIntersection",(t,e)=>{tr.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),o=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||o instanceof Promise?Promise.all([a,o]).then(([u,d])=>Vw(n,u,d)):Vw(n,a,o)}});function sv(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(cd(t)&&cd(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const o=sv(t[a],e[a]);if(!o.valid)return{valid:!1,mergeErrorPath:[a,...o.mergeErrorPath]};s[a]=o.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],o=sv(s,a);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Vw(t,e,n){const r=new Map;let s;for(const c of e.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const u of c.keys)r.has(u)||r.set(u,{}),r.get(u).l=!0}else t.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const u of c.keys)r.has(u)||r.set(u,{}),r.get(u).r=!0;else t.issues.push(c);const a=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(a.length&&s&&t.issues.push({...s,keys:a}),qc(t))return t;const o=sv(e.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return t.value=o.data,t}const C5=Oe("$ZodEnum",(t,e)=>{tr.init(t,e);const n=RC(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>zP.has(typeof s)).map(s=>typeof s=="string"?ou(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const o=s.value;return r.has(o)||s.issues.push({code:"invalid_value",values:n,input:o,inst:t}),s}}),N5=Oe("$ZodLiteral",(t,e)=>{if(tr.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(e.values);t._zod.values=n,t._zod.pattern=new RegExp(`^(${e.values.map(r=>typeof r=="string"?ou(r):r?ou(r.toString()):String(r)).join("|")})$`),t._zod.parse=(r,s)=>{const a=r.value;return n.has(a)||r.issues.push({code:"invalid_value",values:e.values,input:a,inst:t}),r}}),I5=Oe("$ZodTransform",(t,e)=>{tr.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new IC(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(n.value=o,n));if(s instanceof Promise)throw new Xc;return n.value=s,n}});function Bw(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const JC=Oe("$ZodOptional",(t,e)=>{tr.init(t,e),t._zod.optin="optional",t._zod.optout="optional",vn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),vn(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${_1(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Bw(a,n.value)):Bw(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),k5=Oe("$ZodExactOptional",(t,e)=>{JC.init(t,e),vn(t._zod,"values",()=>e.innerType._zod.values),vn(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),R5=Oe("$ZodNullable",(t,e)=>{tr.init(t,e),vn(t._zod,"optin",()=>e.innerType._zod.optin),vn(t._zod,"optout",()=>e.innerType._zod.optout),vn(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${_1(n.source)}|null)$`):void 0}),vn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),D5=Oe("$ZodDefault",(t,e)=>{tr.init(t,e),t._zod.optin="optional",vn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>zw(a,e)):zw(s,e)}});function zw(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const M5=Oe("$ZodPrefault",(t,e)=>{tr.init(t,e),t._zod.optin="optional",vn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),P5=Oe("$ZodNonOptional",(t,e)=>{tr.init(t,e),vn(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>jw(a,t)):jw(s,t)}});function jw(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const F5=Oe("$ZodCatch",(t,e)=>{tr.init(t,e),vn(t._zod,"optin",()=>e.innerType._zod.optin),vn(t._zod,"optout",()=>e.innerType._zod.optout),vn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(o=>Pl(o,r,Ml()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Pl(a,r,Ml()))},input:n.value}),n.issues=[]),n)}}),O5=Oe("$ZodPipe",(t,e)=>{tr.init(t,e),vn(t._zod,"values",()=>e.in._zod.values),vn(t._zod,"optin",()=>e.in._zod.optin),vn(t._zod,"optout",()=>e.out._zod.optout),vn(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(o=>c0(o,e.in,r)):c0(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>c0(a,e.out,r)):c0(s,e.out,r)}});function c0(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const L5=Oe("$ZodReadonly",(t,e)=>{tr.init(t,e),vn(t._zod,"propValues",()=>e.innerType._zod.propValues),vn(t._zod,"values",()=>e.innerType._zod.values),vn(t._zod,"optin",()=>e.innerType?._zod?.optin),vn(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Hw):Hw(s)}});function Hw(t){return t.value=Object.freeze(t.value),t}const U5=Oe("$ZodCustom",(t,e)=>{ks.init(t,e),tr.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>Gw(a,n,r,t));Gw(s,n,r,t)}});function Gw(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(ud(s))}}var $w;class V5{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function B5(){return new V5}($w=globalThis).__zod_globalRegistry??($w.__zod_globalRegistry=B5());const kf=globalThis.__zod_globalRegistry;function z5(t,e){return new t({type:"string",...pt(e)})}function j5(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...pt(e)})}function qw(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...pt(e)})}function H5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...pt(e)})}function G5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...pt(e)})}function $5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...pt(e)})}function q5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...pt(e)})}function K5(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...pt(e)})}function J5(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...pt(e)})}function Y5(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...pt(e)})}function W5(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...pt(e)})}function Z5(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...pt(e)})}function X5(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...pt(e)})}function Q5(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...pt(e)})}function eF(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...pt(e)})}function tF(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...pt(e)})}function nF(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...pt(e)})}function rF(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...pt(e)})}function sF(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...pt(e)})}function aF(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...pt(e)})}function iF(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...pt(e)})}function oF(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...pt(e)})}function lF(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...pt(e)})}function cF(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...pt(e)})}function uF(t,e){return new t({type:"string",format:"date",check:"string_format",...pt(e)})}function fF(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...pt(e)})}function dF(t,e){return new t({type:"string",format:"duration",check:"string_format",...pt(e)})}function hF(t,e){return new t({type:"number",checks:[],...pt(e)})}function pF(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...pt(e)})}function mF(t){return new t({type:"unknown"})}function gF(t,e){return new t({type:"never",...pt(e)})}function Kw(t,e){return new jC({check:"less_than",...pt(e),value:t,inclusive:!1})}function xx(t,e){return new jC({check:"less_than",...pt(e),value:t,inclusive:!0})}function Jw(t,e){return new HC({check:"greater_than",...pt(e),value:t,inclusive:!1})}function vx(t,e){return new HC({check:"greater_than",...pt(e),value:t,inclusive:!0})}function Yw(t,e){return new P6({check:"multiple_of",...pt(e),value:t})}function YC(t,e){return new O6({check:"max_length",...pt(e),maximum:t})}function ip(t,e){return new L6({check:"min_length",...pt(e),minimum:t})}function WC(t,e){return new U6({check:"length_equals",...pt(e),length:t})}function xF(t,e){return new V6({check:"string_format",format:"regex",...pt(e),pattern:t})}function vF(t){return new B6({check:"string_format",format:"lowercase",...pt(t)})}function yF(t){return new z6({check:"string_format",format:"uppercase",...pt(t)})}function _F(t,e){return new j6({check:"string_format",format:"includes",...pt(e),includes:t})}function EF(t,e){return new H6({check:"string_format",format:"starts_with",...pt(e),prefix:t})}function TF(t,e){return new G6({check:"string_format",format:"ends_with",...pt(e),suffix:t})}function xu(t){return new $6({check:"overwrite",tx:t})}function wF(t){return xu(e=>e.normalize(t))}function SF(){return xu(t=>t.trim())}function AF(){return xu(t=>t.toLowerCase())}function bF(){return xu(t=>t.toUpperCase())}function CF(){return xu(t=>VP(t))}function NF(t,e,n){return new t({type:"array",element:e,...pt(n)})}function IF(t,e,n){return new t({type:"custom",check:"custom",fn:e,...pt(n)})}function kF(t){const e=RF(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(ud(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(ud(s))}},t(n.value,n)));return e}function RF(t,e){const n=new ks({check:"custom",...pt(e)});return n._zod.check=t,n}function ZC(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??kf,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function Gr(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,o);const c=t._zod.toJSONSchema?.();if(c)o.schema=c;else{const h={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,o.schema,h);else{const v=o.schema,T=e.processors[s.type];if(!T)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);T(t,e,v,h)}const x=t._zod.parent;x&&(o.ref||(o.ref=x),Gr(x,e,h),e.seen.get(x).isParent=!0)}const u=e.metadataRegistry.get(t);return u&&Object.assign(o.schema,u),e.io==="input"&&us(t)&&(delete o.schema.examples,delete o.schema.default),e.io==="input"&&o.schema._prefault&&((r=o.schema).default??(r.default=o.schema._prefault)),delete o.schema._prefault,e.seen.get(t).schema}function XC(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const o of t.seen.entries()){const c=t.metadataRegistry.get(o[0])?.id;if(c){const u=r.get(c);if(u&&u!==o[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,o[0])}}const s=o=>{const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const x=t.external.registry.get(o[0])?.id,v=t.external.uri??(S=>S);if(x)return{ref:v(x)};const T=o[1].defId??o[1].schema.id??`schema${t.counter++}`;return o[1].defId=T,{defId:T,ref:`${v("__shared")}#/${c}/${T}`}}if(o[1]===n)return{ref:"#"};const d=`#/${c}/`,h=o[1].schema.id??`__schema${t.counter++}`;return{defId:h,ref:d+h}},a=o=>{if(o[1].schema.$ref)return;const c=o[1],{ref:u,defId:d}=s(o);c.def={...c.schema},d&&(c.defId=d);const h=c.schema;for(const x in h)delete h[x];h.$ref=u};if(t.cycles==="throw")for(const o of t.seen.entries()){const c=o[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const o of t.seen.entries()){const c=o[1];if(e===o[0]){a(o);continue}if(t.external){const d=t.external.registry.get(o[0])?.id;if(e!==o[0]&&d){a(o);continue}}if(t.metadataRegistry.get(o[0])?.id){a(o);continue}if(c.cycle){a(o);continue}if(c.count>1&&t.reused==="ref"){a(o);continue}}}function QC(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=o=>{const c=t.seen.get(o);if(c.ref===null)return;const u=c.def??c.schema,d={...u},h=c.ref;if(c.ref=null,h){r(h);const v=t.seen.get(h),T=v.schema;if(T.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(u.allOf=u.allOf??[],u.allOf.push(T)):Object.assign(u,T),Object.assign(u,d),o._zod.parent===h)for(const A in u)A==="$ref"||A==="allOf"||A in d||delete u[A];if(T.$ref&&v.def)for(const A in u)A==="$ref"||A==="allOf"||A in v.def&&JSON.stringify(u[A])===JSON.stringify(v.def[A])&&delete u[A]}const x=o._zod.parent;if(x&&x!==h){r(x);const v=t.seen.get(x);if(v?.schema.$ref&&(u.$ref=v.schema.$ref,v.def))for(const T in u)T==="$ref"||T==="allOf"||T in v.def&&JSON.stringify(u[T])===JSON.stringify(v.def[T])&&delete u[T]}t.override({zodSchema:o,jsonSchema:u,path:c.path??[]})};for(const o of[...t.seen.entries()].reverse())r(o[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const o=t.external.registry.get(e)?.id;if(!o)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(o)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const o of t.seen.entries()){const c=o[1];c.def&&c.defId&&(a[c.defId]=c.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const o=JSON.parse(JSON.stringify(s));return Object.defineProperty(o,"~standard",{value:{...e["~standard"],jsonSchema:{input:op(e,"input",t.processors),output:op(e,"output",t.processors)}},enumerable:!1,writable:!1}),o}catch{throw new Error("Error converting schema to JSON.")}}function us(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return us(r.element,n);if(r.type==="set")return us(r.valueType,n);if(r.type==="lazy")return us(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return us(r.innerType,n);if(r.type==="intersection")return us(r.left,n)||us(r.right,n);if(r.type==="record"||r.type==="map")return us(r.keyType,n)||us(r.valueType,n);if(r.type==="pipe")return us(r.in,n)||us(r.out,n);if(r.type==="object"){for(const s in r.shape)if(us(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(us(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(us(s,n))return!0;return!!(r.rest&&us(r.rest,n))}return!1}const DF=(t,e={})=>n=>{const r=ZC({...n,processors:e});return Gr(t,r),XC(r,t),QC(r,t)},op=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},o=ZC({...s??{},target:a,io:e,processors:n});return Gr(t,o),XC(o,t),QC(o,t)},MF={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},PF=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:o,format:c,patterns:u,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof o=="number"&&(s.maxLength=o),c&&(s.format=MF[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),d&&(s.contentEncoding=d),u&&u.size>0){const h=[...u];h.length===1?s.pattern=h[0].source:h.length>1&&(s.allOf=[...h.map(x=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:x.source}))])}},FF=(t,e,n,r)=>{const s=n,{minimum:a,maximum:o,format:c,multipleOf:u,exclusiveMaximum:d,exclusiveMinimum:h}=t._zod.bag;typeof c=="string"&&c.includes("int")?s.type="integer":s.type="number",typeof h=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=h,s.exclusiveMinimum=!0):s.exclusiveMinimum=h),typeof a=="number"&&(s.minimum=a,typeof h=="number"&&e.target!=="draft-04"&&(h>=a?delete s.minimum:delete s.exclusiveMinimum)),typeof d=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=d,s.exclusiveMaximum=!0):s.exclusiveMaximum=d),typeof o=="number"&&(s.maximum=o,typeof d=="number"&&e.target!=="draft-04"&&(d<=o?delete s.maximum:delete s.exclusiveMaximum)),typeof u=="number"&&(s.multipleOf=u)},OF=(t,e,n,r)=>{n.not={}},LF=(t,e,n,r)=>{},UF=(t,e,n,r)=>{const s=t._zod.def,a=RC(s.entries);a.every(o=>typeof o=="number")&&(n.type="number"),a.every(o=>typeof o=="string")&&(n.type="string"),n.enum=a},VF=(t,e,n,r)=>{const s=t._zod.def,a=[];for(const o of s.values)if(o===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof o=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");a.push(Number(o))}else a.push(o);if(a.length!==0)if(a.length===1){const o=a[0];n.type=o===null?"null":typeof o,e.target==="draft-04"||e.target==="openapi-3.0"?n.enum=[o]:n.const=o}else a.every(o=>typeof o=="number")&&(n.type="number"),a.every(o=>typeof o=="string")&&(n.type="string"),a.every(o=>typeof o=="boolean")&&(n.type="boolean"),a.every(o=>o===null)&&(n.type="null"),n.enum=a},BF=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},zF=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},jF=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:o,maximum:c}=t._zod.bag;typeof o=="number"&&(s.minItems=o),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=Gr(a.element,e,{...r,path:[...r.path,"items"]})},HF=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const o=a.shape;for(const d in o)s.properties[d]=Gr(o[d],e,{...r,path:[...r.path,"properties",d]});const c=new Set(Object.keys(o)),u=new Set([...c].filter(d=>{const h=a.shape[d]._zod;return e.io==="input"?h.optin===void 0:h.optout===void 0}));u.size>0&&(s.required=Array.from(u)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=Gr(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},GF=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,o=s.options.map((c,u)=>Gr(c,e,{...r,path:[...r.path,a?"oneOf":"anyOf",u]}));a?n.oneOf=o:n.anyOf=o},$F=(t,e,n,r)=>{const s=t._zod.def,a=Gr(s.left,e,{...r,path:[...r.path,"allOf",0]}),o=Gr(s.right,e,{...r,path:[...r.path,"allOf",1]}),c=d=>"allOf"in d&&Object.keys(d).length===1,u=[...c(a)?a.allOf:[a],...c(o)?o.allOf:[o]];n.allOf=u},qF=(t,e,n,r)=>{const s=t._zod.def,a=Gr(s.innerType,e,r),o=e.seen.get(t);e.target==="openapi-3.0"?(o.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},KF=(t,e,n,r)=>{const s=t._zod.def;Gr(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},JF=(t,e,n,r)=>{const s=t._zod.def;Gr(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},YF=(t,e,n,r)=>{const s=t._zod.def;Gr(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},WF=(t,e,n,r)=>{const s=t._zod.def;Gr(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let o;try{o=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=o},ZF=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;Gr(a,e,r);const o=e.seen.get(t);o.ref=a},XF=(t,e,n,r)=>{const s=t._zod.def;Gr(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},eN=(t,e,n,r)=>{const s=t._zod.def;Gr(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},QF=Oe("ZodISODateTime",(t,e)=>{a5.init(t,e),jn.init(t,e)});function eO(t){return cF(QF,t)}const tO=Oe("ZodISODate",(t,e)=>{i5.init(t,e),jn.init(t,e)});function nO(t){return uF(tO,t)}const rO=Oe("ZodISOTime",(t,e)=>{o5.init(t,e),jn.init(t,e)});function sO(t){return fF(rO,t)}const aO=Oe("ZodISODuration",(t,e)=>{l5.init(t,e),jn.init(t,e)});function iO(t){return dF(aO,t)}const oO=(t,e)=>{OC.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>XP(t,n)},flatten:{value:n=>ZP(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,rv,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,rv,2)}},isEmpty:{get(){return t.issues.length===0}}})},pa=Oe("ZodError",oO,{Parent:Error}),lO=T1(pa),cO=w1(pa),uO=Gp(pa),fO=$p(pa),dO=t6(pa),hO=n6(pa),pO=r6(pa),mO=s6(pa),gO=a6(pa),xO=i6(pa),vO=o6(pa),yO=l6(pa),nr=Oe("ZodType",(t,e)=>(tr.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:op(t,"input"),output:op(t,"output")}}),t.toJSONSchema=DF(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(qo(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>Ko(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>lO(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>uO(t,n,r),t.parseAsync=async(n,r)=>cO(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>fO(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>dO(t,n,r),t.decode=(n,r)=>hO(t,n,r),t.encodeAsync=async(n,r)=>pO(t,n,r),t.decodeAsync=async(n,r)=>mO(t,n,r),t.safeEncode=(n,r)=>gO(t,n,r),t.safeDecode=(n,r)=>xO(t,n,r),t.safeEncodeAsync=async(n,r)=>vO(t,n,r),t.safeDecodeAsync=async(n,r)=>yO(t,n,r),t.refine=(n,r)=>t.check(dL(n,r)),t.superRefine=n=>t.check(hL(n)),t.overwrite=n=>t.check(xu(n)),t.optional=()=>Qw(t),t.exactOptional=()=>QO(t),t.nullable=()=>e2(t),t.nullish=()=>Qw(e2(t)),t.nonoptional=n=>aL(t,n),t.array=()=>rN(t),t.or=n=>$O([t,n]),t.and=n=>KO(t,n),t.transform=n=>t2(t,ZO(n)),t.default=n=>nL(t,n),t.prefault=n=>sL(t,n),t.catch=n=>oL(t,n),t.pipe=n=>t2(t,n),t.readonly=()=>uL(t),t.describe=n=>{const r=t.clone();return kf.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return kf.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return kf.get(t);const r=t.clone();return kf.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),tN=Oe("_ZodString",(t,e)=>{S1.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(r,s,a)=>PF(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(xF(...r)),t.includes=(...r)=>t.check(_F(...r)),t.startsWith=(...r)=>t.check(EF(...r)),t.endsWith=(...r)=>t.check(TF(...r)),t.min=(...r)=>t.check(ip(...r)),t.max=(...r)=>t.check(YC(...r)),t.length=(...r)=>t.check(WC(...r)),t.nonempty=(...r)=>t.check(ip(1,...r)),t.lowercase=r=>t.check(vF(r)),t.uppercase=r=>t.check(yF(r)),t.trim=()=>t.check(SF()),t.normalize=(...r)=>t.check(wF(...r)),t.toLowerCase=()=>t.check(AF()),t.toUpperCase=()=>t.check(bF()),t.slugify=()=>t.check(CF())}),_O=Oe("ZodString",(t,e)=>{S1.init(t,e),tN.init(t,e),t.email=n=>t.check(j5(EO,n)),t.url=n=>t.check(K5(TO,n)),t.jwt=n=>t.check(lF(LO,n)),t.emoji=n=>t.check(J5(wO,n)),t.guid=n=>t.check(qw(Ww,n)),t.uuid=n=>t.check(H5(u0,n)),t.uuidv4=n=>t.check(G5(u0,n)),t.uuidv6=n=>t.check($5(u0,n)),t.uuidv7=n=>t.check(q5(u0,n)),t.nanoid=n=>t.check(Y5(SO,n)),t.guid=n=>t.check(qw(Ww,n)),t.cuid=n=>t.check(W5(AO,n)),t.cuid2=n=>t.check(Z5(bO,n)),t.ulid=n=>t.check(X5(CO,n)),t.base64=n=>t.check(aF(PO,n)),t.base64url=n=>t.check(iF(FO,n)),t.xid=n=>t.check(Q5(NO,n)),t.ksuid=n=>t.check(eF(IO,n)),t.ipv4=n=>t.check(tF(kO,n)),t.ipv6=n=>t.check(nF(RO,n)),t.cidrv4=n=>t.check(rF(DO,n)),t.cidrv6=n=>t.check(sF(MO,n)),t.e164=n=>t.check(oF(OO,n)),t.datetime=n=>t.check(eO(n)),t.date=n=>t.check(nO(n)),t.time=n=>t.check(sO(n)),t.duration=n=>t.check(iO(n))});function la(t){return z5(_O,t)}const jn=Oe("ZodStringFormat",(t,e)=>{Vn.init(t,e),tN.init(t,e)}),EO=Oe("ZodEmail",(t,e)=>{W6.init(t,e),jn.init(t,e)}),Ww=Oe("ZodGUID",(t,e)=>{J6.init(t,e),jn.init(t,e)}),u0=Oe("ZodUUID",(t,e)=>{Y6.init(t,e),jn.init(t,e)}),TO=Oe("ZodURL",(t,e)=>{Z6.init(t,e),jn.init(t,e)}),wO=Oe("ZodEmoji",(t,e)=>{X6.init(t,e),jn.init(t,e)}),SO=Oe("ZodNanoID",(t,e)=>{Q6.init(t,e),jn.init(t,e)}),AO=Oe("ZodCUID",(t,e)=>{e5.init(t,e),jn.init(t,e)}),bO=Oe("ZodCUID2",(t,e)=>{t5.init(t,e),jn.init(t,e)}),CO=Oe("ZodULID",(t,e)=>{n5.init(t,e),jn.init(t,e)}),NO=Oe("ZodXID",(t,e)=>{r5.init(t,e),jn.init(t,e)}),IO=Oe("ZodKSUID",(t,e)=>{s5.init(t,e),jn.init(t,e)}),kO=Oe("ZodIPv4",(t,e)=>{c5.init(t,e),jn.init(t,e)}),RO=Oe("ZodIPv6",(t,e)=>{u5.init(t,e),jn.init(t,e)}),DO=Oe("ZodCIDRv4",(t,e)=>{f5.init(t,e),jn.init(t,e)}),MO=Oe("ZodCIDRv6",(t,e)=>{d5.init(t,e),jn.init(t,e)}),PO=Oe("ZodBase64",(t,e)=>{h5.init(t,e),jn.init(t,e)}),FO=Oe("ZodBase64URL",(t,e)=>{m5.init(t,e),jn.init(t,e)}),OO=Oe("ZodE164",(t,e)=>{g5.init(t,e),jn.init(t,e)}),LO=Oe("ZodJWT",(t,e)=>{v5.init(t,e),jn.init(t,e)}),nN=Oe("ZodNumber",(t,e)=>{$C.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(r,s,a)=>FF(t,r,s),t.gt=(r,s)=>t.check(Jw(r,s)),t.gte=(r,s)=>t.check(vx(r,s)),t.min=(r,s)=>t.check(vx(r,s)),t.lt=(r,s)=>t.check(Kw(r,s)),t.lte=(r,s)=>t.check(xx(r,s)),t.max=(r,s)=>t.check(xx(r,s)),t.int=r=>t.check(Zw(r)),t.safe=r=>t.check(Zw(r)),t.positive=r=>t.check(Jw(0,r)),t.nonnegative=r=>t.check(vx(0,r)),t.negative=r=>t.check(Kw(0,r)),t.nonpositive=r=>t.check(xx(0,r)),t.multipleOf=(r,s)=>t.check(Yw(r,s)),t.step=(r,s)=>t.check(Yw(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function av(t){return hF(nN,t)}const UO=Oe("ZodNumberFormat",(t,e)=>{y5.init(t,e),nN.init(t,e)});function Zw(t){return pF(UO,t)}const VO=Oe("ZodUnknown",(t,e)=>{_5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>LF()});function Xw(){return mF(VO)}const BO=Oe("ZodNever",(t,e)=>{E5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>OF(t,n,r)});function zO(t){return gF(BO,t)}const jO=Oe("ZodArray",(t,e)=>{T5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>jF(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(ip(n,r)),t.nonempty=n=>t.check(ip(1,n)),t.max=(n,r)=>t.check(YC(n,r)),t.length=(n,r)=>t.check(WC(n,r)),t.unwrap=()=>t.element});function rN(t,e){return NF(jO,t,e)}const HO=Oe("ZodObject",(t,e)=>{S5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>HF(t,n,r,s),vn(t,"shape",()=>e.shape),t.keyof=()=>aN(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Xw()}),t.loose=()=>t.clone({...t._zod.def,catchall:Xw()}),t.strict=()=>t.clone({...t._zod.def,catchall:zO()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>qP(t,n),t.safeExtend=n=>KP(t,n),t.merge=n=>JP(t,n),t.pick=n=>GP(t,n),t.omit=n=>$P(t,n),t.partial=(...n)=>YP(iN,t,n[0]),t.required=(...n)=>WP(oN,t,n[0])});function sN(t,e){const n={type:"object",shape:t??{},...pt(e)};return new HO(n)}const GO=Oe("ZodUnion",(t,e)=>{A5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>GF(t,n,r,s),t.options=e.options});function $O(t,e){return new GO({type:"union",options:t,...pt(e)})}const qO=Oe("ZodIntersection",(t,e)=>{b5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$F(t,n,r,s)});function KO(t,e){return new qO({type:"intersection",left:t,right:e})}const iv=Oe("ZodEnum",(t,e)=>{C5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(r,s,a)=>UF(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const o of r)if(n.has(o))a[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new iv({...e,checks:[],...pt(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const o of r)if(n.has(o))delete a[o];else throw new Error(`Key ${o} not found in enum`);return new iv({...e,checks:[],...pt(s),entries:a})}});function aN(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new iv({type:"enum",entries:n,...pt(e)})}const JO=Oe("ZodLiteral",(t,e)=>{N5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>VF(t,n,r),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function YO(t,e){return new JO({type:"literal",values:Array.isArray(t)?t:[t],...pt(e)})}const WO=Oe("ZodTransform",(t,e)=>{I5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>zF(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new IC(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(ud(a,n.value,e));else{const o=a;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),n.issues.push(ud(o))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function ZO(t){return new WO({type:"transform",transform:t})}const iN=Oe("ZodOptional",(t,e)=>{JC.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eN(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Qw(t){return new iN({type:"optional",innerType:t})}const XO=Oe("ZodExactOptional",(t,e)=>{k5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eN(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function QO(t){return new XO({type:"optional",innerType:t})}const eL=Oe("ZodNullable",(t,e)=>{R5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>qF(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function e2(t){return new eL({type:"nullable",innerType:t})}const tL=Oe("ZodDefault",(t,e)=>{D5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>JF(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function nL(t,e){return new tL({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():MC(e)}})}const rL=Oe("ZodPrefault",(t,e)=>{M5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>YF(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function sL(t,e){return new rL({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():MC(e)}})}const oN=Oe("ZodNonOptional",(t,e)=>{P5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>KF(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function aL(t,e){return new oN({type:"nonoptional",innerType:t,...pt(e)})}const iL=Oe("ZodCatch",(t,e)=>{F5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>WF(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function oL(t,e){return new iL({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const lL=Oe("ZodPipe",(t,e)=>{O5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>ZF(t,n,r,s),t.in=e.in,t.out=e.out});function t2(t,e){return new lL({type:"pipe",in:t,out:e})}const cL=Oe("ZodReadonly",(t,e)=>{L5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>XF(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function uL(t){return new cL({type:"readonly",innerType:t})}const fL=Oe("ZodCustom",(t,e)=>{U5.init(t,e),nr.init(t,e),t._zod.processJSONSchema=(n,r,s)=>BF(t,n)});function dL(t,e={}){return IF(fL,t,e)}function hL(t){return kF(t)}sN({companyName:la().min(1,"Nome da empresa  obrigatrio"),cnpj:la().optional(),address:la().min(5,"Endereo invlido"),contactName:la().optional(),phone:la().optional(),email:la().email("Email invlido").optional().or(YO("")),category:la().or(rN(la())).optional(),status:aN(["Ativo","Inativo","Prospeccao"]).optional().default("Ativo"),lat:av().optional(),lng:av().optional()});const pL=sN({name:la().min(1),price:av().positive(),category:la().min(1),sku:la().optional(),brand:la().min(1)}),n2=t=>{if(!t)return null;const e=t.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);if(e)return{lat:parseFloat(e[1]),lng:parseFloat(e[2])};const n=t.match(/[?&]q=(-?\d+\.\d+),(-?\d+\.\d+)/);return n?{lat:parseFloat(n[1]),lng:parseFloat(n[2])}:null},mL=t=>{if(!t)return null;try{const e=new URL(t),n=e.searchParams.get("query")||e.searchParams.get("q");if(n&&!n.match(/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/))return n}catch{const n=t.match(/[?&]query=([^&]+)/)||t.match(/[?&]q=([^&]+)/);if(n)return decodeURIComponent(n[1].replace(/\+/g," "))}return null},lp=t=>{if(t==null)return{address:""};const e=String(t).trim(),n=e.match(/^=HYPERLINK\s*\(\s*["']+(.*?)["']+\s*[;,]\s*["']+(.*?)["']+\s*\)$/i);if(n){const s=n[1].replace(/""/g,'"').trim(),a=n[2].replace(/""/g,'"').trim(),o=n2(s);return{link:s,address:a,...o}}const r=lN(e);if(r.includes("google.com/maps")||r.includes("maps.app.goo.gl")){const s=mL(r),a=n2(r);return{link:r,address:s||r,...a}}return{address:r}},lN=t=>{if(t==null)return"";const e=String(t),n=e.match(/"([^"]+)"\)$/);return n&&n[1]?n[1].trim():e.startsWith("=")?e.replace(/[="()]/g,"").trim():e.trim()},gL=t=>{const e=String(t).replace(/[R$\s.]/g,"").replace(",",".");return parseFloat(e)||0},r2=t=>{if(!t)return 0;const e=String(t).replace(/[%]/g,"").replace(",",".");return parseFloat(e)||0},A1=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),cN=t=>new Promise((e,n)=>{x1.parse(t,{header:!0,skipEmptyLines:!0,encoding:"UTF-8",complete:r=>{const s=r.data,a=[];s.forEach((o,c)=>{const u={};Object.keys(o).forEach(D=>{u[A1(D)]=o[D]});const d=u.departamento||u.categoria||"Geral",h=u["cod.prod / sku"]||u["cod.prod"]||u.sku||u["numero do sku"]||"",x=u["nome do produto"]||u.descricao||u.nome||u.produto||"",v=u.marca||u.fabricante||"Genrico",T=gL(u["preco de venda"]||u.preco||"0"),S=u["cod.fabrica"]||u["cod fabrica"]||u["codigo fabrica"]||"",A=r2(u.margem||"0"),b=r2(u.desconto||u.discount||"0"),R={category:d,sku:h,brand:v,factoryCode:S,name:x,price:T,margin:A,discount:b},B=pL.safeParse(R);B.success?a.push(B.data):console.warn(`Row ${c+1} invalid:`,B.error.issues)}),e(a)},error:r=>n(r)})}),xL=t=>new Promise((e,n)=>{x1.parse(t,{header:!0,skipEmptyLines:!0,encoding:"UTF-8",transformHeader:r=>r.trim().replace(/^\ufeff/,""),complete:r=>{const s=r.data,a=[];if(s.forEach(o=>{const c={};Object.keys(o).forEach(b=>{c[A1(b)]=o[b]});const u=c.endereco||c.logradouro||c.localizacao||c["endereco cobranca"]||c["link google maps"]||"";let{address:d,link:h,lat:x,lng:v}=lp(u);const T=c.cep||c.zip||c["codigo postal"]||"";T&&d&&!d.toLowerCase().includes(T.toLowerCase())&&(d=`${d}, ${T}`);const S=c.link||c.mapa||c["google maps"]||c.url||c.maps||c.coordenadas||c.geolocalizacao;if(S){const b=lp(S);b.link&&(h=b.link),b.lat&&(x=b.lat),b.lng&&(v=b.lng)}const A={companyName:c["razao social"]||c.cliente||c["nome fantasia"]||c.fantasia||c.empresa||c["nome comercial"]||"",cnpj:c.cnpj||c.taxid||c.inscricao||"",ownerName:c["nome do proprietario"]||c.proprietario||c.dono||c["contato principal"]||"",phone:c["telefone comercial"]||c.contato||c.telefone||c.celular||"",whatsapp:c.whatsapp||c.whats||c.celular||"",address:c["endereco comercial"]||c["logradouro comercial"]||d||"",street:c.rua||c.logradouro||"",number:c.numero||c.num||"",district:c.bairro||c.distrito||"",city:c["nome da cidade"]||c.cidade||c.municipio||"",state:c.estado||c.uf||"",zip:c.cep||c["codigo postal"]||T||"",country:c.pais||"",googleMapsLink:h,latitude:x,longitude:v};(A.companyName||A.address)&&a.push(A)}),a.length>0){const o=a[0];!o.companyName&&!o.address&&console.warn("CSV Parsing Warning: Could not identify 'Razo Social' or 'Endereo' columns. Check CSV headers.")}e(a)},error:r=>{n(r)}})}),vL=t=>new Promise((e,n)=>{x1.parse(t,{header:!0,skipEmptyLines:!0,encoding:"UTF-8",complete:r=>{const s=r.data,a=[];s.forEach(o=>{const c={};Object.keys(o).forEach(T=>{c[A1(T)]=o[T]});const u=c["razao social"]||c.cliente||c.empresa||"",d=c.cnpj||c["cpf/cnpj"]||c.cpf||"",h=c["cod.prod / sku"]||c["cod.prod"]||c.sku||"",x=c["nome do produto"]||c.produto||c.descricao||"",v=c["data da compra"]||c.data||c.emissao||"";u&&(h||x)&&a.push({companyName:String(u).trim(),cnpj:String(d).trim().replace(/[.\-\/]/g,""),sku:String(h).trim(),productName:String(x).trim(),purchaseDate:String(v).trim()})}),e(a)},error:r=>n(r)})});var uN=1252,yL=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],b1={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},C1=function(t){yL.indexOf(t)!=-1&&(uN=b1[0]=t)};function _L(){C1(1252)}var ka=function(t){C1(t)};function fN(){ka(1200),_L()}function s2(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function EL(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function dN(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var Rf=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?EL(t.slice(2)):e==254&&n==255?dN(t.slice(2)):e==65279?t.slice(1):t},f0=function(e){return String.fromCharCode(e)},a2=function(e){return String.fromCharCode(e)},fd,Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i2(t){for(var e="",n=0,r=0,s=0,a=0,o=0,c=0,u=0,d=0;d<t.length;)n=t.charCodeAt(d++),a=n>>2,r=t.charCodeAt(d++),o=(n&3)<<4|r>>4,s=t.charCodeAt(d++),c=(r&15)<<2|s>>6,u=s&63,isNaN(r)?c=u=64:isNaN(s)&&(u=64),e+=Ao.charAt(a)+Ao.charAt(o)+Ao.charAt(c)+Ao.charAt(u);return e}function $s(t){var e="",n=0,r=0,s=0,a=0,o=0,c=0,u=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)a=Ao.indexOf(t.charAt(d++)),o=Ao.indexOf(t.charAt(d++)),n=a<<2|o>>4,e+=String.fromCharCode(n),c=Ao.indexOf(t.charAt(d++)),r=(o&15)<<4|c>>2,c!==64&&(e+=String.fromCharCode(r)),u=Ao.indexOf(t.charAt(d++)),s=(c&3)<<6|u,u!==64&&(e+=String.fromCharCode(s));return e}var Wt=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Hl=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Lo(t){return Wt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function o2(t){return Wt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ia=function(e){return Wt?Hl(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function Gl(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function N1(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return N1(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var wo=Wt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Hl(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),s=0;for(e=0,n=0;e<t.length;n+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function TL(t){for(var e=[],n=0,r=t.length+250,s=Lo(t.length+255),a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o<128)s[n++]=o;else if(o<2048)s[n++]=192|o>>6&31,s[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var c=t.charCodeAt(++a)&1023;s[n++]=240|o>>8&7,s[n++]=128|o>>2&63,s[n++]=128|c>>6&15|(o&3)<<4,s[n++]=128|c&63}else s[n++]=224|o>>12&15,s[n++]=128|o>>6&63,s[n++]=128|o&63;n>r&&(e.push(s.slice(0,n)),n=0,s=Lo(65535),r=65530)}return e.push(s.slice(0,n)),wo(e)}var ms=/\u0000/g,Df=/[\u0001-\u0006]/g;function Qc(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function Ra(t,e){var n=""+t;return n.length>=e?n:$n("0",e-n.length)+n}function I1(t,e){var n=""+t;return n.length>=e?n:$n(" ",e-n.length)+n}function cp(t,e){var n=""+t;return n.length>=e?n:n+$n(" ",e-n.length)}function wL(t,e){var n=""+Math.round(t);return n.length>=e?n:$n("0",e-n.length)+n}function SL(t,e){var n=""+t;return n.length>=e?n:$n("0",e-n.length)+n}var l2=Math.pow(2,32);function Uc(t,e){if(t>l2||t<-l2)return wL(t,e);var n=Math.round(t);return SL(n,e)}function up(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var c2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],yx=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function AL(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Dt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},u2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bL={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function fp(t,e,n){for(var r=t<0?-1:1,s=t*r,a=0,o=1,c=0,u=1,d=0,h=0,x=Math.floor(s);d<e&&(x=Math.floor(s),c=x*o+a,h=x*d+u,!(s-x<5e-8));)s=1/(s-x),a=o,o=c,u=d,d=h;if(h>e&&(d>e?(h=u,c=a):(h=d,c=o)),!n)return[0,r*c,h];var v=Math.floor(r*c/h);return[v,r*c-v*h,h]}function Al(t,e,n){if(t>2958465||t<0)return null;var r=t|0,s=Math.floor(86400*(t-r)),a=0,o=[],c={D:r,T:s,u:86400*(t-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(c.u)<1e-6&&(c.u=0),e&&e.date1904&&(r+=1462),c.u>.9999&&(c.u=0,++s==86400&&(c.T=s=0,++r,++c.D)),r===60)o=n?[1317,10,29]:[1900,2,29],a=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var u=new Date(1900,0,1);u.setDate(u.getDate()+r-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],a=u.getDay(),r<60&&(a=(a+6)%7),n&&(a=DL(u,o))}return c.y=o[0],c.m=o[1],c.d=o[2],c.S=s%60,s=Math.floor(s/60),c.M=s%60,s=Math.floor(s/60),c.H=s,c.q=a,c}var hN=new Date(1899,11,31,0,0,0),CL=hN.getTime(),NL=new Date(1900,2,1,0,0,0);function pN(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=NL&&(n+=1440*60*1e3),(n-(CL+(t.getTimezoneOffset()-hN.getTimezoneOffset())*6e4))/(1440*60*1e3)}function k1(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function IL(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function kL(t){var e=t<0?12:11,n=k1(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function RL(t){var e=k1(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function dd(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=kL(t):e===10?n=t.toFixed(10).substr(0,12):n=RL(t),k1(IL(n.toUpperCase()))}function Fl(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):dd(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return da(14,pN(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function DL(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function ML(t,e,n,r){var s="",a=0,o=0,c=n.y,u,d=0;switch(t){case 98:c=n.y+543;case 121:switch(e.length){case 1:case 2:u=c%100,d=2;break;default:u=c%1e4,d=4;break}break;case 109:switch(e.length){case 1:case 2:u=n.m,d=e.length;break;case 3:return yx[n.m-1][1];case 5:return yx[n.m-1][0];default:return yx[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:u=n.d,d=e.length;break;case 3:return c2[n.q][0];default:return c2[n.q][1]}break;case 104:switch(e.length){case 1:case 2:u=1+(n.H+11)%12,d=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:u=n.H,d=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:u=n.M,d=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?Ra(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,a=Math.round(o*(n.S+n.u)),a>=60*o&&(a=0),e==="s"?a===0?"0":""+a/o:(s=Ra(a,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":u=n.D*24+n.H;break;case"[m]":case"[mm]":u=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":u=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}d=e.length===3?1:2;break;case 101:u=c,d=1;break}var h=d>0?Ra(u,d):"";return h}function bo(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var mN=/%/g;function PL(t,e,n){var r=e.replace(mN,""),s=e.length-r.length;return Mi(t,r,n*Math.pow(10,2*s))+$n("%",s)}function FL(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Mi(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function gN(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+gN(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+a):n+="E+"+(o-a);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,u,d,h){return u+d+h.substr(0,(s+a)%s)+"."+h.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var xN=/# (\?+)( ?)\/( ?)(\d+)/;function OL(t,e,n){var r=parseInt(t[4],10),s=Math.round(e*r),a=Math.floor(s/r),o=s-a*r,c=r;return n+(a===0?"":""+a)+" "+(o===0?$n(" ",t[1].length+1+t[4].length):I1(o,t[1].length)+t[2]+"/"+t[3]+Ra(c,t[4].length))}function LL(t,e,n){return n+(e===0?"":""+e)+$n(" ",t[1].length+2+t[4].length)}var vN=/^#*0*\.([0#]+)/,yN=/\).*[0#]/,_N=/\(###\) ###\\?-####/;function ds(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function f2(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function d2(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function UL(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function VL(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ia(t,e,n){if(t.charCodeAt(0)===40&&!e.match(yN)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ia("n",r,n):"("+ia("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return FL(t,e,n);if(e.indexOf("%")!==-1)return PL(t,e,n);if(e.indexOf("E")!==-1)return gN(e,n);if(e.charCodeAt(0)===36)return"$"+ia(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,o,c,u=Math.abs(n),d=n<0?"-":"";if(e.match(/^00+$/))return d+Uc(u,e.length);if(e.match(/^[#?]+$/))return s=Uc(n,0),s==="0"&&(s=""),s.length>e.length?s:ds(e.substr(0,e.length-s.length))+s;if(a=e.match(xN))return OL(a,u,d);if(e.match(/^#+0+$/))return d+Uc(u,e.length-e.indexOf("0"));if(a=e.match(vN))return s=f2(n,a[1].length).replace(/^([^\.]+)$/,"$1."+ds(a[1])).replace(/\.$/,"."+ds(a[1])).replace(/\.(\d*)$/,function(S,A){return"."+A+$n("0",ds(a[1]).length-A.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return d+f2(u,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return d+bo(Uc(u,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ia(t,e,-n):bo(""+(Math.floor(n)+UL(n,a[1].length)))+"."+Ra(d2(n,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return ia(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Qc(ia(t,e.replace(/[\\-]/g,""),n)),o=0,Qc(Qc(e.replace(/\\/g,"")).replace(/[0#]/g,function(S){return o<s.length?s.charAt(o++):S==="0"?"0":""}));if(e.match(_N))return s=ia(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),c=fp(u,Math.pow(10,o)-1,!1),s=""+d,h=Mi("n",a[1],c[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),s+=h+a[2]+"/"+a[3],h=cp(c[2],o),h.length<a[4].length&&(h=ds(a[4].substr(a[4].length-h.length))+h),s+=h,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),c=fp(u,Math.pow(10,o)-1,!0),d+(c[0]||(c[1]?"":"0"))+" "+(c[1]?I1(c[1],o)+a[2]+"/"+a[3]+cp(c[2],o):$n(" ",2*o+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=Uc(n,0),e.length<=s.length?s:ds(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var x=e.indexOf(".")-o,v=e.length-s.length-x;return ds(e.substr(0,x)+s+e.substr(e.length-v))}if(a=e.match(/^00,000\.([#0]*0)$/))return o=d2(n,a[1].length),n<0?"-"+ia(t,e,-n):bo(VL(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(S){return"00,"+(S.length<3?Ra(0,3-S.length):"")+S})+"."+Ra(o,a[1].length);switch(e){case"###,##0.00":return ia(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var T=bo(Uc(u,0));return T!=="0"?d+T:"";case"###,###.00":return ia(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return ia(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function BL(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Mi(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function zL(t,e,n){var r=e.replace(mN,""),s=e.length-r.length;return Mi(t,r,n*Math.pow(10,2*s))+$n("%",s)}function EN(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+EN(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+a):n+="E+"+(o-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,u,d,h){return u+d+h.substr(0,(s+a)%s)+"."+h.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Wa(t,e,n){if(t.charCodeAt(0)===40&&!e.match(yN)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Wa("n",r,n):"("+Wa("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return BL(t,e,n);if(e.indexOf("%")!==-1)return zL(t,e,n);if(e.indexOf("E")!==-1)return EN(e,n);if(e.charCodeAt(0)===36)return"$"+Wa(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,o,c,u=Math.abs(n),d=n<0?"-":"";if(e.match(/^00+$/))return d+Ra(u,e.length);if(e.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>e.length?s:ds(e.substr(0,e.length-s.length))+s;if(a=e.match(xN))return LL(a,u,d);if(e.match(/^#+0+$/))return d+Ra(u,e.length-e.indexOf("0"));if(a=e.match(vN))return s=(""+n).replace(/^([^\.]+)$/,"$1."+ds(a[1])).replace(/\.$/,"."+ds(a[1])),s=s.replace(/\.(\d*)$/,function(S,A){return"."+A+$n("0",ds(a[1]).length-A.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return d+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return d+bo(""+u);if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Wa(t,e,-n):bo(""+n)+"."+$n("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Wa(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Qc(Wa(t,e.replace(/[\\-]/g,""),n)),o=0,Qc(Qc(e.replace(/\\/g,"")).replace(/[0#]/g,function(S){return o<s.length?s.charAt(o++):S==="0"?"0":""}));if(e.match(_N))return s=Wa(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),c=fp(u,Math.pow(10,o)-1,!1),s=""+d,h=Mi("n",a[1],c[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),s+=h+a[2]+"/"+a[3],h=cp(c[2],o),h.length<a[4].length&&(h=ds(a[4].substr(a[4].length-h.length))+h),s+=h,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),c=fp(u,Math.pow(10,o)-1,!0),d+(c[0]||(c[1]?"":"0"))+" "+(c[1]?I1(c[1],o)+a[2]+"/"+a[3]+cp(c[2],o):$n(" ",2*o+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+n,e.length<=s.length?s:ds(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var x=e.indexOf(".")-o,v=e.length-s.length-x;return ds(e.substr(0,x)+s+e.substr(e.length-v))}if(a=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Wa(t,e,-n):bo(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(S){return"00,"+(S.length<3?Ra(0,3-S.length):"")+S})+"."+Ra(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var T=bo(""+u);return T!=="0"?d+T:"";default:if(e.match(/\.[0#?]*$/))return Wa(t,e.slice(0,e.lastIndexOf(".")),n)+ds(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Mi(t,e,n){return(n|0)===n?Wa(t,e,n):ia(t,e,n)}function jL(t){for(var e=[],n=!1,r=0,s=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(s,r-s),s=r+1}if(e[e.length]=t.substr(s),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var TN=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function vu(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":up(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(TN))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function HL(t,e,n,r){for(var s=[],a="",o=0,c="",u="t",d,h,x,v="H";o<t.length;)switch(c=t.charAt(o)){case"G":if(!up(t,o))throw new Error("unrecognized character "+c+" in "+t);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(a="";(x=t.charCodeAt(++o))!==34&&o<t.length;)a+=String.fromCharCode(x);s[s.length]={t:"t",v:a},++o;break;case"\\":var T=t.charAt(++o),S=T==="("||T===")"?T:"t";s[s.length]={t:S,v:T},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(d==null&&(d=Al(e,n,t.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:t.substr(o,2)},u=c,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||d==null&&(d=Al(e,n),d==null))return"";for(a=c;++o<t.length&&t.charAt(o).toLowerCase()===c;)a+=c;c==="m"&&u.toLowerCase()==="h"&&(c="M"),c==="h"&&(c=v),s[s.length]={t:c,v:a},u=c;break;case"A":case"a":case"":var A={t:c,v:c};if(d==null&&(d=Al(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(A.v=d.H>=12?"P":"A"),A.t="T",v="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(A.v=d.H>=12?"PM":"AM"),A.t="T",o+=5,v="h"):t.substr(o,5).toUpperCase()==="/"?(d!=null&&(A.v=d.H>=12?"":""),A.t="T",o+=5,v="h"):(A.t="t",++o),d==null&&A.t==="T")return"";s[s.length]=A,u=c;break;case"[":for(a=c;t.charAt(o++)!=="]"&&o<t.length;)a+=t.charAt(o);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(TN)){if(d==null&&(d=Al(e,n),d==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},u=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",vu(t)||(s[s.length]={t:"t",v:a}));break;case".":if(d!=null){for(a=c;++o<t.length&&(c=t.charAt(o))==="0";)a+=c;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=c;++o<t.length&&"0#?.,E+-%".indexOf(c=t.charAt(o))>-1;)a+=c;s[s.length]={t:"n",v:a};break;case"?":for(a=c;t.charAt(++o)===c;)a+=c;s[s.length]={t:c,v:a},u=c;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:r===1?"t":c,v:c},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=c;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)a+=t.charAt(o);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:c,v:c},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(c)===-1)throw new Error("unrecognized character "+c+" in "+t);s[s.length]={t:"t",v:c},++o;break}var b=0,R=0,B;for(o=s.length-1,u="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=v,u="h",b<1&&(b=1);break;case"s":(B=s[o].v.match(/\.0+$/))&&(R=Math.max(R,B[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":u=s[o].t;break;case"m":u==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var D="",L;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=ML(s[o].t.charCodeAt(0),s[o].v,d,R),s[o].t="t";break;case"n":case"?":for(L=o+1;s[L]!=null&&((c=s[L].t)==="?"||c==="D"||(c===" "||c==="t")&&s[L+1]!=null&&(s[L+1].t==="?"||s[L+1].t==="t"&&s[L+1].v==="/")||s[o].t==="("&&(c===" "||c==="n"||c===")")||c==="t"&&(s[L].v==="/"||s[L].v===" "&&s[L+1]!=null&&s[L+1].t=="?"));)s[o].v+=s[L].v,s[L]={v:"",t:";"},++L;D+=s[o].v,o=L-1;break;case"G":s[o].t="t",s[o].v=Fl(e,n);break}var z="",O,I;if(D.length>0){D.charCodeAt(0)==40?(O=e<0&&D.charCodeAt(0)===45?-e:e,I=Mi("n",D,O)):(O=e<0&&r>1?-e:e,I=Mi("n",D,O),O<0&&s[0]&&s[0].t=="t"&&(I=I.substr(1),s[0].v="-"+s[0].v)),L=I.length-1;var C=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){C=o;break}var N=s.length;if(C===s.length&&I.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(L>=s[o].v.length-1?(L-=s[o].v.length,s[o].v=I.substr(L+1,s[o].v.length)):L<0?s[o].v="":(s[o].v=I.substr(0,L+1),L=-1),s[o].t="t",N=o);L>=0&&N<s.length&&(s[N].v=I.substr(0,L+1)+s[N].v)}else if(C!==s.length&&I.indexOf("E")===-1){for(L=I.indexOf(".")-1,o=C;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(h=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")-1:s[o].v.length-1,z=s[o].v.substr(h+1);h>=0;--h)L>=0&&(s[o].v.charAt(h)==="0"||s[o].v.charAt(h)==="#")&&(z=I.charAt(L--)+z);s[o].v=z,s[o].t="t",N=o}for(L>=0&&N<s.length&&(s[N].v=I.substr(0,L+1)+s[N].v),L=I.indexOf(".")+1,o=C;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==C)){for(h=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")+1:0,z=s[o].v.substr(0,h);h<s[o].v.length;++h)L<I.length&&(z+=I.charAt(L++));s[o].v=z,s[o].t="t",N=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(O=r>1&&e<0&&o>0&&s[o-1].v==="-"?-e:e,s[o].v=Mi(s[o].t,s[o].v,O),s[o].t="t");var F="";for(o=0;o!==s.length;++o)s[o]!=null&&(F+=s[o].v);return F}var h2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function p2(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function GL(t,e){var n=jL(t),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var a=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,a];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(h2),c=n[1].match(h2);return p2(e,o)?[r,n[0]]:p2(e,c)?[r,n[1]]:[r,n[o!=null&&c!=null?2:1]]}return[r,a]}function da(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:Dt)[t],r==null&&(r=n.table&&n.table[u2[t]]||Dt[u2[t]]),r==null&&(r=bL[t]||"General");break}if(up(r,0))return Fl(e,n);e instanceof Date&&(e=pN(e,n.date1904));var s=GL(r,e);if(up(s[1]))return Fl(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return HL(s[1],e,n,s[0])}function Nl(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(Dt[n]==null){e<0&&(e=n);continue}if(Dt[n]==t){e=n;break}}e<0&&(e=391)}return Dt[e]=t,e}function wN(){Dt=AL()}var $L={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},SN=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function qL(t){var e=typeof t=="number"?Dt[t]:t;return e=e.replace(SN,"(\\d+)"),new RegExp("^"+e+"$")}function KL(t,e,n){var r=-1,s=-1,a=-1,o=-1,c=-1,u=-1;(e.match(SN)||[]).forEach(function(x,v){var T=parseInt(n[v+1],10);switch(x.toLowerCase().charAt(0)){case"y":r=T;break;case"d":a=T;break;case"h":o=T;break;case"s":u=T;break;case"m":o>=0?c=T:s=T;break}}),u>=0&&c==-1&&s>=0&&(c=s,s=-1);var d=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var h=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&c==-1&&u==-1?d:r==-1&&s==-1&&a==-1?h:d+"T"+h}var JL=(function(){var t={};t.version="1.2.0";function e(){for(var I=0,C=new Array(256),N=0;N!=256;++N)I=N,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,C[N]=I;return typeof Int32Array<"u"?new Int32Array(C):C}var n=e();function r(I){var C=0,N=0,F=0,U=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)U[F]=I[F];for(F=0;F!=256;++F)for(N=I[F],C=256+F;C<4096;C+=256)N=U[C]=N>>>8^I[N&255];var M=[];for(F=1;F!=16;++F)M[F-1]=typeof Int32Array<"u"?U.subarray(F*256,F*256+256):U.slice(F*256,F*256+256);return M}var s=r(n),a=s[0],o=s[1],c=s[2],u=s[3],d=s[4],h=s[5],x=s[6],v=s[7],T=s[8],S=s[9],A=s[10],b=s[11],R=s[12],B=s[13],D=s[14];function L(I,C){for(var N=C^-1,F=0,U=I.length;F<U;)N=N>>>8^n[(N^I.charCodeAt(F++))&255];return~N}function z(I,C){for(var N=C^-1,F=I.length-15,U=0;U<F;)N=D[I[U++]^N&255]^B[I[U++]^N>>8&255]^R[I[U++]^N>>16&255]^b[I[U++]^N>>>24]^A[I[U++]]^S[I[U++]]^T[I[U++]]^v[I[U++]]^x[I[U++]]^h[I[U++]]^d[I[U++]]^u[I[U++]]^c[I[U++]]^o[I[U++]]^a[I[U++]]^n[I[U++]];for(F+=15;U<F;)N=N>>>8^n[(N^I[U++])&255];return~N}function O(I,C){for(var N=C^-1,F=0,U=I.length,M=0,j=0;F<U;)M=I.charCodeAt(F++),M<128?N=N>>>8^n[(N^M)&255]:M<2048?(N=N>>>8^n[(N^(192|M>>6&31))&255],N=N>>>8^n[(N^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,j=I.charCodeAt(F++)&1023,N=N>>>8^n[(N^(240|M>>8&7))&255],N=N>>>8^n[(N^(128|M>>2&63))&255],N=N>>>8^n[(N^(128|j>>6&15|(M&3)<<4))&255],N=N>>>8^n[(N^(128|j&63))&255]):(N=N>>>8^n[(N^(224|M>>12&15))&255],N=N>>>8^n[(N^(128|M>>6&63))&255],N=N>>>8^n[(N^(128|M&63))&255]);return~N}return t.table=n,t.bstr=L,t.buf=z,t.str=O,t})(),en=(function(){var e={};e.version="1.2.1";function n(G,ne){for(var J=G.split("/"),X=ne.split("/"),ee=0,ae=0,xe=Math.min(J.length,X.length);ee<xe;++ee){if(ae=J[ee].length-X[ee].length)return ae;if(J[ee]!=X[ee])return J[ee]<X[ee]?-1:1}return J.length-X.length}function r(G){if(G.charAt(G.length-1)=="/")return G.slice(0,-1).indexOf("/")===-1?G:r(G.slice(0,-1));var ne=G.lastIndexOf("/");return ne===-1?G:G.slice(0,ne+1)}function s(G){if(G.charAt(G.length-1)=="/")return s(G.slice(0,-1));var ne=G.lastIndexOf("/");return ne===-1?G:G.slice(ne+1)}function a(G,ne){typeof ne=="string"&&(ne=new Date(ne));var J=ne.getHours();J=J<<6|ne.getMinutes(),J=J<<5|ne.getSeconds()>>>1,G.write_shift(2,J);var X=ne.getFullYear()-1980;X=X<<4|ne.getMonth()+1,X=X<<5|ne.getDate(),G.write_shift(2,X)}function o(G){var ne=G.read_shift(2)&65535,J=G.read_shift(2)&65535,X=new Date,ee=J&31;J>>>=5;var ae=J&15;J>>>=4,X.setMilliseconds(0),X.setFullYear(J+1980),X.setMonth(ae-1),X.setDate(ee);var xe=ne&31;ne>>>=5;var Re=ne&63;return ne>>>=6,X.setHours(ne),X.setMinutes(Re),X.setSeconds(xe<<1),X}function c(G){Br(G,0);for(var ne={},J=0;G.l<=G.length-4;){var X=G.read_shift(2),ee=G.read_shift(2),ae=G.l+ee,xe={};X===21589&&(J=G.read_shift(1),J&1&&(xe.mtime=G.read_shift(4)),ee>5&&(J&2&&(xe.atime=G.read_shift(4)),J&4&&(xe.ctime=G.read_shift(4))),xe.mtime&&(xe.mt=new Date(xe.mtime*1e3))),G.l=ae,ne[X]=xe}return ne}var u;function d(){return u||(u={})}function h(G,ne){if(G[0]==80&&G[1]==75)return Rr(G,ne);if((G[0]|32)==109&&(G[1]|32)==105)return qr(G,ne);if(G.length<512)throw new Error("CFB file size "+G.length+" < 512");var J=3,X=512,ee=0,ae=0,xe=0,Re=0,ve=0,Te=[],_e=G.slice(0,512);Br(_e,0);var je=x(_e);switch(J=je[0],J){case 3:X=512;break;case 4:X=4096;break;case 0:if(je[1]==0)return Rr(G,ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+J)}X!==512&&(_e=G.slice(0,X),Br(_e,28));var He=G.slice(0,X);v(_e,J);var Ye=_e.read_shift(4,"i");if(J===3&&Ye!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ye);_e.l+=4,xe=_e.read_shift(4,"i"),_e.l+=4,_e.chk("00100000","Mini Stream Cutoff Size: "),Re=_e.read_shift(4,"i"),ee=_e.read_shift(4,"i"),ve=_e.read_shift(4,"i"),ae=_e.read_shift(4,"i");for(var Be=-1,qe=0;qe<109&&(Be=_e.read_shift(4,"i"),!(Be<0));++qe)Te[qe]=Be;var nt=T(G,X);b(ve,ae,nt,X,Te);var on=B(nt,xe,Te,X);on[xe].name="!Directory",ee>0&&Re!==j&&(on[Re].name="!MiniFAT"),on[Te[0]].name="!FAT",on.fat_addrs=Te,on.ssz=X;var ln={},pn=[],Tr=[],as=[];D(xe,on,nt,pn,ee,ln,Tr,Re),S(Tr,as,pn),pn.shift();var _n={FileIndex:Tr,FullPaths:as};return ne&&ne.raw&&(_n.raw={header:He,sectors:nt}),_n}function x(G){if(G[G.l]==80&&G[G.l+1]==75)return[0,0];G.chk(he,"Header Signature: "),G.l+=16;var ne=G.read_shift(2,"u");return[G.read_shift(2,"u"),ne]}function v(G,ne){var J=9;switch(G.l+=2,J=G.read_shift(2)){case 9:if(ne!=3)throw new Error("Sector Shift: Expected 9 saw "+J);break;case 12:if(ne!=4)throw new Error("Sector Shift: Expected 12 saw "+J);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+J)}G.chk("0600","Mini Sector Shift: "),G.chk("000000000000","Reserved: ")}function T(G,ne){for(var J=Math.ceil(G.length/ne)-1,X=[],ee=1;ee<J;++ee)X[ee-1]=G.slice(ee*ne,(ee+1)*ne);return X[J-1]=G.slice(J*ne),X}function S(G,ne,J){for(var X=0,ee=0,ae=0,xe=0,Re=0,ve=J.length,Te=[],_e=[];X<ve;++X)Te[X]=_e[X]=X,ne[X]=J[X];for(;Re<_e.length;++Re)X=_e[Re],ee=G[X].L,ae=G[X].R,xe=G[X].C,Te[X]===X&&(ee!==-1&&Te[ee]!==ee&&(Te[X]=Te[ee]),ae!==-1&&Te[ae]!==ae&&(Te[X]=Te[ae])),xe!==-1&&(Te[xe]=X),ee!==-1&&X!=Te[X]&&(Te[ee]=Te[X],_e.lastIndexOf(ee)<Re&&_e.push(ee)),ae!==-1&&X!=Te[X]&&(Te[ae]=Te[X],_e.lastIndexOf(ae)<Re&&_e.push(ae));for(X=1;X<ve;++X)Te[X]===X&&(ae!==-1&&Te[ae]!==ae?Te[X]=Te[ae]:ee!==-1&&Te[ee]!==ee&&(Te[X]=Te[ee]));for(X=1;X<ve;++X)if(G[X].type!==0){if(Re=X,Re!=Te[Re])do Re=Te[Re],ne[X]=ne[Re]+"/"+ne[X];while(Re!==0&&Te[Re]!==-1&&Re!=Te[Re]);Te[X]=-1}for(ne[0]+="/",X=1;X<ve;++X)G[X].type!==2&&(ne[X]+="/")}function A(G,ne,J){for(var X=G.start,ee=G.size,ae=[],xe=X;J&&ee>0&&xe>=0;)ae.push(ne.slice(xe*M,xe*M+M)),ee-=M,xe=wl(J,xe*4);return ae.length===0?xr(0):wo(ae).slice(0,G.size)}function b(G,ne,J,X,ee){var ae=j;if(G===j){if(ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(G!==-1){var xe=J[G],Re=(X>>>2)-1;if(!xe)return;for(var ve=0;ve<Re&&(ae=wl(xe,ve*4))!==j;++ve)ee.push(ae);b(wl(xe,X-4),ne-1,J,X,ee)}}function R(G,ne,J,X,ee){var ae=[],xe=[];ee||(ee=[]);var Re=X-1,ve=0,Te=0;for(ve=ne;ve>=0;){ee[ve]=!0,ae[ae.length]=ve,xe.push(G[ve]);var _e=J[Math.floor(ve*4/X)];if(Te=ve*4&Re,X<4+Te)throw new Error("FAT boundary crossed: "+ve+" 4 "+X);if(!G[_e])break;ve=wl(G[_e],Te)}return{nodes:ae,data:S2([xe])}}function B(G,ne,J,X){var ee=G.length,ae=[],xe=[],Re=[],ve=[],Te=X-1,_e=0,je=0,He=0,Ye=0;for(_e=0;_e<ee;++_e)if(Re=[],He=_e+ne,He>=ee&&(He-=ee),!xe[He]){ve=[];var Be=[];for(je=He;je>=0;){Be[je]=!0,xe[je]=!0,Re[Re.length]=je,ve.push(G[je]);var qe=J[Math.floor(je*4/X)];if(Ye=je*4&Te,X<4+Ye)throw new Error("FAT boundary crossed: "+je+" 4 "+X);if(!G[qe]||(je=wl(G[qe],Ye),Be[je]))break}ae[He]={nodes:Re,data:S2([ve])}}return ae}function D(G,ne,J,X,ee,ae,xe,Re){for(var ve=0,Te=X.length?2:0,_e=ne[G].data,je=0,He=0,Ye;je<_e.length;je+=128){var Be=_e.slice(je,je+128);Br(Be,64),He=Be.read_shift(2),Ye=F1(Be,0,He-Te),X.push(Ye);var qe={name:Ye,type:Be.read_shift(1),color:Be.read_shift(1),L:Be.read_shift(4,"i"),R:Be.read_shift(4,"i"),C:Be.read_shift(4,"i"),clsid:Be.read_shift(16),state:Be.read_shift(4,"i"),start:0,size:0},nt=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);nt!==0&&(qe.ct=L(Be,Be.l-8));var on=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);on!==0&&(qe.mt=L(Be,Be.l-8)),qe.start=Be.read_shift(4,"i"),qe.size=Be.read_shift(4,"i"),qe.size<0&&qe.start<0&&(qe.size=qe.type=0,qe.start=j,qe.name=""),qe.type===5?(ve=qe.start,ee>0&&ve!==j&&(ne[ve].name="!StreamData")):qe.size>=4096?(qe.storage="fat",ne[qe.start]===void 0&&(ne[qe.start]=R(J,qe.start,ne.fat_addrs,ne.ssz)),ne[qe.start].name=qe.name,qe.content=ne[qe.start].data.slice(0,qe.size)):(qe.storage="minifat",qe.size<0?qe.size=0:ve!==j&&qe.start!==j&&ne[ve]&&(qe.content=A(qe,ne[ve].data,(ne[Re]||{}).data))),qe.content&&Br(qe.content,0),ae[Ye]=qe,xe.push(qe)}}function L(G,ne){return new Date((Bs(G,ne+4)/1e7*Math.pow(2,32)+Bs(G,ne)/1e7-11644473600)*1e3)}function z(G,ne){return d(),h(u.readFileSync(G),ne)}function O(G,ne){var J=ne&&ne.type;switch(J||Wt&&Buffer.isBuffer(G)&&(J="buffer"),J||"base64"){case"file":return z(G,ne);case"base64":return h(Ia($s(G)),ne);case"binary":return h(Ia(G),ne)}return h(G,ne)}function I(G,ne){var J=ne||{},X=J.root||"Root Entry";if(G.FullPaths||(G.FullPaths=[]),G.FileIndex||(G.FileIndex=[]),G.FullPaths.length!==G.FileIndex.length)throw new Error("inconsistent CFB structure");G.FullPaths.length===0&&(G.FullPaths[0]=X+"/",G.FileIndex[0]={name:X,type:5}),J.CLSID&&(G.FileIndex[0].clsid=J.CLSID),C(G)}function C(G){var ne="Sh33tJ5";if(!en.find(G,"/"+ne)){var J=xr(4);J[0]=55,J[1]=J[3]=50,J[2]=54,G.FileIndex.push({name:ne,type:2,content:J,size:4,L:69,R:69,C:69}),G.FullPaths.push(G.FullPaths[0]+ne),N(G)}}function N(G,ne){I(G);for(var J=!1,X=!1,ee=G.FullPaths.length-1;ee>=0;--ee){var ae=G.FileIndex[ee];switch(ae.type){case 0:X?J=!0:(G.FileIndex.pop(),G.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(ae.R*ae.L*ae.C)&&(J=!0),ae.R>-1&&ae.L>-1&&ae.R==ae.L&&(J=!0);break;default:J=!0;break}}if(!(!J&&!ne)){var xe=new Date(1987,1,19),Re=0,ve=Object.create?Object.create(null):{},Te=[];for(ee=0;ee<G.FullPaths.length;++ee)ve[G.FullPaths[ee]]=!0,G.FileIndex[ee].type!==0&&Te.push([G.FullPaths[ee],G.FileIndex[ee]]);for(ee=0;ee<Te.length;++ee){var _e=r(Te[ee][0]);X=ve[_e],X||(Te.push([_e,{name:s(_e).replace("/",""),type:1,clsid:ie,ct:xe,mt:xe,content:null}]),ve[_e]=!0)}for(Te.sort(function(Ye,Be){return n(Ye[0],Be[0])}),G.FullPaths=[],G.FileIndex=[],ee=0;ee<Te.length;++ee)G.FullPaths[ee]=Te[ee][0],G.FileIndex[ee]=Te[ee][1];for(ee=0;ee<Te.length;++ee){var je=G.FileIndex[ee],He=G.FullPaths[ee];if(je.name=s(He).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||ie,ee===0)je.C=Te.length>1?1:-1,je.size=0,je.type=5;else if(He.slice(-1)=="/"){for(Re=ee+1;Re<Te.length&&r(G.FullPaths[Re])!=He;++Re);for(je.C=Re>=Te.length?-1:Re,Re=ee+1;Re<Te.length&&r(G.FullPaths[Re])!=r(He);++Re);je.R=Re>=Te.length?-1:Re,je.type=1}else r(G.FullPaths[ee+1]||"")==r(He)&&(je.R=ee+1),je.type=2}}}function F(G,ne){var J=ne||{};if(J.fileType=="mad")return tc(G,J);if(N(G),J.fileType==="zip")return Cn(G,J);var X=(function(Ye){for(var Be=0,qe=0,nt=0;nt<Ye.FileIndex.length;++nt){var on=Ye.FileIndex[nt];if(on.content){var ln=on.content.length;ln>0&&(ln<4096?Be+=ln+63>>6:qe+=ln+511>>9)}}for(var pn=Ye.FullPaths.length+3>>2,Tr=Be+7>>3,as=Be+127>>7,_n=Tr+qe+pn+as,Pt=_n+127>>7,Rs=Pt<=109?0:Math.ceil((Pt-109)/127);_n+Pt+Rs+127>>7>Pt;)Rs=++Pt<=109?0:Math.ceil((Pt-109)/127);var se=[1,Rs,Pt,as,pn,qe,Be,0];return Ye.FileIndex[0].size=Be<<6,se[7]=(Ye.FileIndex[0].start=se[0]+se[1]+se[2]+se[3]+se[4]+se[5])+(se[6]+7>>3),se})(G),ee=xr(X[7]<<9),ae=0,xe=0;{for(ae=0;ae<8;++ae)ee.write_shift(1,Se[ae]);for(ae=0;ae<8;++ae)ee.write_shift(2,0);for(ee.write_shift(2,62),ee.write_shift(2,3),ee.write_shift(2,65534),ee.write_shift(2,9),ee.write_shift(2,6),ae=0;ae<3;++ae)ee.write_shift(2,0);for(ee.write_shift(4,0),ee.write_shift(4,X[2]),ee.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),ee.write_shift(4,0),ee.write_shift(4,4096),ee.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:j),ee.write_shift(4,X[3]),ee.write_shift(-4,X[1]?X[0]-1:j),ee.write_shift(4,X[1]),ae=0;ae<109;++ae)ee.write_shift(-4,ae<X[2]?X[1]+ae:-1)}if(X[1])for(xe=0;xe<X[1];++xe){for(;ae<236+xe*127;++ae)ee.write_shift(-4,ae<X[2]?X[1]+ae:-1);ee.write_shift(-4,xe===X[1]-1?j:xe+1)}var Re=function(Ye){for(xe+=Ye;ae<xe-1;++ae)ee.write_shift(-4,ae+1);Ye&&(++ae,ee.write_shift(-4,j))};for(xe=ae=0,xe+=X[1];ae<xe;++ae)ee.write_shift(-4,fe.DIFSECT);for(xe+=X[2];ae<xe;++ae)ee.write_shift(-4,fe.FATSECT);Re(X[3]),Re(X[4]);for(var ve=0,Te=0,_e=G.FileIndex[0];ve<G.FileIndex.length;++ve)_e=G.FileIndex[ve],_e.content&&(Te=_e.content.length,!(Te<4096)&&(_e.start=xe,Re(Te+511>>9)));for(Re(X[6]+7>>3);ee.l&511;)ee.write_shift(-4,fe.ENDOFCHAIN);for(xe=ae=0,ve=0;ve<G.FileIndex.length;++ve)_e=G.FileIndex[ve],_e.content&&(Te=_e.content.length,!(!Te||Te>=4096)&&(_e.start=xe,Re(Te+63>>6)));for(;ee.l&511;)ee.write_shift(-4,fe.ENDOFCHAIN);for(ae=0;ae<X[4]<<2;++ae){var je=G.FullPaths[ae];if(!je||je.length===0){for(ve=0;ve<17;++ve)ee.write_shift(4,0);for(ve=0;ve<3;++ve)ee.write_shift(4,-1);for(ve=0;ve<12;++ve)ee.write_shift(4,0);continue}_e=G.FileIndex[ae],ae===0&&(_e.start=_e.size?_e.start-1:j);var He=ae===0&&J.root||_e.name;if(Te=2*(He.length+1),ee.write_shift(64,He,"utf16le"),ee.write_shift(2,Te),ee.write_shift(1,_e.type),ee.write_shift(1,_e.color),ee.write_shift(-4,_e.L),ee.write_shift(-4,_e.R),ee.write_shift(-4,_e.C),_e.clsid)ee.write_shift(16,_e.clsid,"hex");else for(ve=0;ve<4;++ve)ee.write_shift(4,0);ee.write_shift(4,_e.state||0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,_e.start),ee.write_shift(4,_e.size),ee.write_shift(4,0)}for(ae=1;ae<G.FileIndex.length;++ae)if(_e=G.FileIndex[ae],_e.size>=4096)if(ee.l=_e.start+1<<9,Wt&&Buffer.isBuffer(_e.content))_e.content.copy(ee,ee.l,0,_e.size),ee.l+=_e.size+511&-512;else{for(ve=0;ve<_e.size;++ve)ee.write_shift(1,_e.content[ve]);for(;ve&511;++ve)ee.write_shift(1,0)}for(ae=1;ae<G.FileIndex.length;++ae)if(_e=G.FileIndex[ae],_e.size>0&&_e.size<4096)if(Wt&&Buffer.isBuffer(_e.content))_e.content.copy(ee,ee.l,0,_e.size),ee.l+=_e.size+63&-64;else{for(ve=0;ve<_e.size;++ve)ee.write_shift(1,_e.content[ve]);for(;ve&63;++ve)ee.write_shift(1,0)}if(Wt)ee.l=ee.length;else for(;ee.l<ee.length;)ee.write_shift(1,0);return ee}function U(G,ne){var J=G.FullPaths.map(function(ve){return ve.toUpperCase()}),X=J.map(function(ve){var Te=ve.split("/");return Te[Te.length-(ve.slice(-1)=="/"?2:1)]}),ee=!1;ne.charCodeAt(0)===47?(ee=!0,ne=J[0].slice(0,-1)+ne):ee=ne.indexOf("/")!==-1;var ae=ne.toUpperCase(),xe=ee===!0?J.indexOf(ae):X.indexOf(ae);if(xe!==-1)return G.FileIndex[xe];var Re=!ae.match(Df);for(ae=ae.replace(ms,""),Re&&(ae=ae.replace(Df,"!")),xe=0;xe<J.length;++xe)if((Re?J[xe].replace(Df,"!"):J[xe]).replace(ms,"")==ae||(Re?X[xe].replace(Df,"!"):X[xe]).replace(ms,"")==ae)return G.FileIndex[xe];return null}var M=64,j=-2,he="d0cf11e0a1b11ae1",Se=[208,207,17,224,161,177,26,225],ie="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:j,FREESECT:-1,HEADER_SIGNATURE:he,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ie,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(G,ne,J){d();var X=F(G,J);u.writeFileSync(ne,X)}function K(G){for(var ne=new Array(G.length),J=0;J<G.length;++J)ne[J]=String.fromCharCode(G[J]);return ne.join("")}function Ie(G,ne){var J=F(G,ne);switch(ne&&ne.type||"buffer"){case"file":return d(),u.writeFileSync(ne.filename,J),J;case"binary":return typeof J=="string"?J:K(J);case"base64":return i2(typeof J=="string"?J:K(J));case"buffer":if(Wt)return Buffer.isBuffer(J)?J:Hl(J);case"array":return typeof J=="string"?Ia(J):J}return J}var Y;function H(G){try{var ne=G.InflateRaw,J=new ne;if(J._processChunk(new Uint8Array([3,0]),J._finishFlushFlag),J.bytesRead)Y=G;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function Q(G,ne){if(!Y)return Ua(G,ne);var J=Y.InflateRaw,X=new J,ee=X._processChunk(G.slice(G.l),X._finishFlushFlag);return G.l+=X.bytesRead,ee}function te(G){return Y?Y.deflateRawSync(G):gt(G)}var W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ne(G){var ne=(G<<1|G<<11)&139536|(G<<5|G<<15)&558144;return(ne>>16|ne>>8|ne)&255}for(var be=typeof Uint8Array<"u",ke=be?new Uint8Array(256):[],$e=0;$e<256;++$e)ke[$e]=Ne($e);function re(G,ne){var J=ke[G&255];return ne<=8?J>>>8-ne:(J=J<<8|ke[G>>8&255],ne<=16?J>>>16-ne:(J=J<<8|ke[G>>16&255],J>>>24-ne))}function ft(G,ne){var J=ne&7,X=ne>>>3;return(G[X]|(J<=6?0:G[X+1]<<8))>>>J&3}function Je(G,ne){var J=ne&7,X=ne>>>3;return(G[X]|(J<=5?0:G[X+1]<<8))>>>J&7}function Qe(G,ne){var J=ne&7,X=ne>>>3;return(G[X]|(J<=4?0:G[X+1]<<8))>>>J&15}function Ge(G,ne){var J=ne&7,X=ne>>>3;return(G[X]|(J<=3?0:G[X+1]<<8))>>>J&31}function Ve(G,ne){var J=ne&7,X=ne>>>3;return(G[X]|(J<=1?0:G[X+1]<<8))>>>J&127}function st(G,ne,J){var X=ne&7,ee=ne>>>3,ae=(1<<J)-1,xe=G[ee]>>>X;return J<8-X||(xe|=G[ee+1]<<8-X,J<16-X)||(xe|=G[ee+2]<<16-X,J<24-X)||(xe|=G[ee+3]<<24-X),xe&ae}function it(G,ne,J){var X=ne&7,ee=ne>>>3;return X<=5?G[ee]|=(J&7)<<X:(G[ee]|=J<<X&255,G[ee+1]=(J&7)>>8-X),ne+3}function dt(G,ne,J){var X=ne&7,ee=ne>>>3;return J=(J&1)<<X,G[ee]|=J,ne+1}function et(G,ne,J){var X=ne&7,ee=ne>>>3;return J<<=X,G[ee]|=J&255,J>>>=8,G[ee+1]=J,ne+8}function _t(G,ne,J){var X=ne&7,ee=ne>>>3;return J<<=X,G[ee]|=J&255,J>>>=8,G[ee+1]=J&255,G[ee+2]=J>>>8,ne+16}function kn(G,ne){var J=G.length,X=2*J>ne?2*J:ne+5,ee=0;if(J>=ne)return G;if(Wt){var ae=o2(X);if(G.copy)G.copy(ae);else for(;ee<G.length;++ee)ae[ee]=G[ee];return ae}else if(be){var xe=new Uint8Array(X);if(xe.set)xe.set(G);else for(;ee<J;++ee)xe[ee]=G[ee];return xe}return G.length=X,G}function vt(G){for(var ne=new Array(G),J=0;J<G;++J)ne[J]=0;return ne}function Lt(G,ne,J){var X=1,ee=0,ae=0,xe=0,Re=0,ve=G.length,Te=be?new Uint16Array(32):vt(32);for(ae=0;ae<32;++ae)Te[ae]=0;for(ae=ve;ae<J;++ae)G[ae]=0;ve=G.length;var _e=be?new Uint16Array(ve):vt(ve);for(ae=0;ae<ve;++ae)Te[ee=G[ae]]++,X<ee&&(X=ee),_e[ae]=0;for(Te[0]=0,ae=1;ae<=X;++ae)Te[ae+16]=Re=Re+Te[ae-1]<<1;for(ae=0;ae<ve;++ae)Re=G[ae],Re!=0&&(_e[ae]=Te[Re+16]++);var je=0;for(ae=0;ae<ve;++ae)if(je=G[ae],je!=0)for(Re=re(_e[ae],X)>>X-je,xe=(1<<X+4-je)-1;xe>=0;--xe)ne[Re|xe<<je]=je&15|ae<<4;return X}var Kt=be?new Uint16Array(512):vt(512),yn=be?new Uint16Array(32):vt(32);if(!be){for(var jt=0;jt<512;++jt)Kt[jt]=0;for(jt=0;jt<32;++jt)yn[jt]=0}(function(){for(var G=[],ne=0;ne<32;ne++)G.push(5);Lt(G,yn,32);var J=[];for(ne=0;ne<=143;ne++)J.push(8);for(;ne<=255;ne++)J.push(9);for(;ne<=279;ne++)J.push(7);for(;ne<=287;ne++)J.push(8);Lt(J,Kt,288)})();var Mt=(function(){for(var ne=be?new Uint8Array(32768):[],J=0,X=0;J<ge.length-1;++J)for(;X<ge[J+1];++X)ne[X]=J;for(;X<32768;++X)ne[X]=29;var ee=be?new Uint8Array(259):[];for(J=0,X=0;J<le.length-1;++J)for(;X<le[J+1];++X)ee[X]=J;function ae(Re,ve){for(var Te=0;Te<Re.length;){var _e=Math.min(65535,Re.length-Te),je=Te+_e==Re.length;for(ve.write_shift(1,+je),ve.write_shift(2,_e),ve.write_shift(2,~_e&65535);_e-- >0;)ve[ve.l++]=Re[Te++]}return ve.l}function xe(Re,ve){for(var Te=0,_e=0,je=be?new Uint16Array(32768):[];_e<Re.length;){var He=Math.min(65535,Re.length-_e);if(He<10){for(Te=it(ve,Te,+(_e+He==Re.length)),Te&7&&(Te+=8-(Te&7)),ve.l=Te/8|0,ve.write_shift(2,He),ve.write_shift(2,~He&65535);He-- >0;)ve[ve.l++]=Re[_e++];Te=ve.l*8;continue}Te=it(ve,Te,+(_e+He==Re.length)+2);for(var Ye=0;He-- >0;){var Be=Re[_e];Ye=(Ye<<5^Be)&32767;var qe=-1,nt=0;if((qe=je[Ye])&&(qe|=_e&-32768,qe>_e&&(qe-=32768),qe<_e))for(;Re[qe+nt]==Re[_e+nt]&&nt<250;)++nt;if(nt>2){Be=ee[nt],Be<=22?Te=et(ve,Te,ke[Be+1]>>1)-1:(et(ve,Te,3),Te+=5,et(ve,Te,ke[Be-23]>>5),Te+=3);var on=Be<8?0:Be-4>>2;on>0&&(_t(ve,Te,nt-le[Be]),Te+=on),Be=ne[_e-qe],Te=et(ve,Te,ke[Be]>>3),Te-=3;var ln=Be<4?0:Be-2>>1;ln>0&&(_t(ve,Te,_e-qe-ge[Be]),Te+=ln);for(var pn=0;pn<nt;++pn)je[Ye]=_e&32767,Ye=(Ye<<5^Re[_e])&32767,++_e;He-=nt-1}else Be<=143?Be=Be+48:Te=dt(ve,Te,1),Te=et(ve,Te,ke[Be]),je[Ye]=_e&32767,++_e}Te=et(ve,Te,0)-1}return ve.l=(Te+7)/8|0,ve.l}return function(ve,Te){return ve.length<8?ae(ve,Te):xe(ve,Te)}})();function gt(G){var ne=xr(50+Math.floor(G.length*1.1)),J=Mt(G,ne);return ne.slice(0,J)}var Zt=be?new Uint16Array(32768):vt(32768),fn=be?new Uint16Array(32768):vt(32768),Ot=be?new Uint16Array(128):vt(128),hn=1,kr=1;function Rn(G,ne){var J=Ge(G,ne)+257;ne+=5;var X=Ge(G,ne)+1;ne+=5;var ee=Qe(G,ne)+4;ne+=4;for(var ae=0,xe=be?new Uint8Array(19):vt(19),Re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ve=1,Te=be?new Uint8Array(8):vt(8),_e=be?new Uint8Array(8):vt(8),je=xe.length,He=0;He<ee;++He)xe[W[He]]=ae=Je(G,ne),ve<ae&&(ve=ae),Te[ae]++,ne+=3;var Ye=0;for(Te[0]=0,He=1;He<=ve;++He)_e[He]=Ye=Ye+Te[He-1]<<1;for(He=0;He<je;++He)(Ye=xe[He])!=0&&(Re[He]=_e[Ye]++);var Be=0;for(He=0;He<je;++He)if(Be=xe[He],Be!=0){Ye=ke[Re[He]]>>8-Be;for(var qe=(1<<7-Be)-1;qe>=0;--qe)Ot[Ye|qe<<Be]=Be&7|He<<3}var nt=[];for(ve=1;nt.length<J+X;)switch(Ye=Ot[Ve(G,ne)],ne+=Ye&7,Ye>>>=3){case 16:for(ae=3+ft(G,ne),ne+=2,Ye=nt[nt.length-1];ae-- >0;)nt.push(Ye);break;case 17:for(ae=3+Je(G,ne),ne+=3;ae-- >0;)nt.push(0);break;case 18:for(ae=11+Ve(G,ne),ne+=7;ae-- >0;)nt.push(0);break;default:nt.push(Ye),ve<Ye&&(ve=Ye);break}var on=nt.slice(0,J),ln=nt.slice(J);for(He=J;He<286;++He)on[He]=0;for(He=X;He<30;++He)ln[He]=0;return hn=Lt(on,Zt,286),kr=Lt(ln,fn,30),ne}function Wo(G,ne){if(G[0]==3&&!(G[1]&3))return[Lo(ne),2];for(var J=0,X=0,ee=o2(ne||1<<18),ae=0,xe=ee.length>>>0,Re=0,ve=0;(X&1)==0;){if(X=Je(G,J),J+=3,X>>>1)X>>1==1?(Re=9,ve=5):(J=Rn(G,J),Re=hn,ve=kr);else{J&7&&(J+=8-(J&7));var Te=G[J>>>3]|G[(J>>>3)+1]<<8;if(J+=32,Te>0)for(!ne&&xe<ae+Te&&(ee=kn(ee,ae+Te),xe=ee.length);Te-- >0;)ee[ae++]=G[J>>>3],J+=8;continue}for(;;){!ne&&xe<ae+32767&&(ee=kn(ee,ae+32767),xe=ee.length);var _e=st(G,J,Re),je=X>>>1==1?Kt[_e]:Zt[_e];if(J+=je&15,je>>>=4,(je>>>8&255)===0)ee[ae++]=je;else{if(je==256)break;je-=257;var He=je<8?0:je-4>>2;He>5&&(He=0);var Ye=ae+le[je];He>0&&(Ye+=st(G,J,He),J+=He),_e=st(G,J,ve),je=X>>>1==1?yn[_e]:fn[_e],J+=je&15,je>>>=4;var Be=je<4?0:je-2>>1,qe=ge[je];for(Be>0&&(qe+=st(G,J,Be),J+=Be),!ne&&xe<Ye&&(ee=kn(ee,Ye+100),xe=ee.length);ae<Ye;)ee[ae]=ee[ae-qe],++ae}}}return ne?[ee,J+7>>>3]:[ee.slice(0,ae),J+7>>>3]}function Ua(G,ne){var J=G.slice(G.l||0),X=Wo(J,ne);return G.l+=X[1],X[0]}function li(G,ne){if(G)typeof console<"u"&&console.error(ne);else throw new Error(ne)}function Rr(G,ne){var J=G;Br(J,0);var X=[],ee=[],ae={FileIndex:X,FullPaths:ee};I(ae,{root:ne.root});for(var xe=J.length-4;(J[xe]!=80||J[xe+1]!=75||J[xe+2]!=5||J[xe+3]!=6)&&xe>=0;)--xe;J.l=xe+4,J.l+=4;var Re=J.read_shift(2);J.l+=6;var ve=J.read_shift(4);for(J.l=ve,xe=0;xe<Re;++xe){J.l+=20;var Te=J.read_shift(4),_e=J.read_shift(4),je=J.read_shift(2),He=J.read_shift(2),Ye=J.read_shift(2);J.l+=8;var Be=J.read_shift(4),qe=c(J.slice(J.l+je,J.l+je+He));J.l+=je+He+Ye;var nt=J.l;J.l=Be+4,ga(J,Te,_e,ae,qe),J.l=nt}return ae}function ga(G,ne,J,X,ee){G.l+=2;var ae=G.read_shift(2),xe=G.read_shift(2),Re=o(G);if(ae&8257)throw new Error("Unsupported ZIP encryption");for(var ve=G.read_shift(4),Te=G.read_shift(4),_e=G.read_shift(4),je=G.read_shift(2),He=G.read_shift(2),Ye="",Be=0;Be<je;++Be)Ye+=String.fromCharCode(G[G.l++]);if(He){var qe=c(G.slice(G.l,G.l+He));(qe[21589]||{}).mt&&(Re=qe[21589].mt),((ee||{})[21589]||{}).mt&&(Re=ee[21589].mt)}G.l+=He;var nt=G.slice(G.l,G.l+Te);switch(xe){case 8:nt=Q(G,_e);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+xe)}var on=!1;ae&8&&(ve=G.read_shift(4),ve==134695760&&(ve=G.read_shift(4),on=!0),Te=G.read_shift(4),_e=G.read_shift(4)),Te!=ne&&li(on,"Bad compressed size: "+ne+" != "+Te),_e!=J&&li(on,"Bad uncompressed size: "+J+" != "+_e),Ks(X,Ye,nt,{unsafe:!0,mt:Re})}function Cn(G,ne){var J=ne||{},X=[],ee=[],ae=xr(1),xe=J.compression?8:0,Re=0,ve=0,Te=0,_e=0,je=0,He=G.FullPaths[0],Ye=He,Be=G.FileIndex[0],qe=[],nt=0;for(ve=1;ve<G.FullPaths.length;++ve)if(Ye=G.FullPaths[ve].slice(He.length),Be=G.FileIndex[ve],!(!Be.size||!Be.content||Ye=="Sh33tJ5")){var on=_e,ln=xr(Ye.length);for(Te=0;Te<Ye.length;++Te)ln.write_shift(1,Ye.charCodeAt(Te)&127);ln=ln.slice(0,ln.l),qe[je]=JL.buf(Be.content,0);var pn=Be.content;xe==8&&(pn=te(pn)),ae=xr(30),ae.write_shift(4,67324752),ae.write_shift(2,20),ae.write_shift(2,Re),ae.write_shift(2,xe),Be.mt?a(ae,Be.mt):ae.write_shift(4,0),ae.write_shift(-4,qe[je]),ae.write_shift(4,pn.length),ae.write_shift(4,Be.content.length),ae.write_shift(2,ln.length),ae.write_shift(2,0),_e+=ae.length,X.push(ae),_e+=ln.length,X.push(ln),_e+=pn.length,X.push(pn),ae=xr(46),ae.write_shift(4,33639248),ae.write_shift(2,0),ae.write_shift(2,20),ae.write_shift(2,Re),ae.write_shift(2,xe),ae.write_shift(4,0),ae.write_shift(-4,qe[je]),ae.write_shift(4,pn.length),ae.write_shift(4,Be.content.length),ae.write_shift(2,ln.length),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(4,0),ae.write_shift(4,on),nt+=ae.l,ee.push(ae),nt+=ln.length,ee.push(ln),++je}return ae=xr(22),ae.write_shift(4,101010256),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,je),ae.write_shift(2,je),ae.write_shift(4,nt),ae.write_shift(4,_e),ae.write_shift(2,0),wo([wo(X),wo(ee),ae])}var Dr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function rr(G,ne){if(G.ctype)return G.ctype;var J=G.name||"",X=J.match(/\.([^\.]+)$/);return X&&Dr[X[1]]||ne&&(X=(J=ne).match(/[\.\\]([^\.\\])+$/),X&&Dr[X[1]])?Dr[X[1]]:"application/octet-stream"}function Mr(G){for(var ne=i2(G),J=[],X=0;X<ne.length;X+=76)J.push(ne.slice(X,X+76));return J.join(`\r
`)+`\r
`}function vs(G){var ne=G.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Te){var _e=Te.charCodeAt(0).toString(16).toUpperCase();return"="+(_e.length==1?"0"+_e:_e)});ne=ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ne.charAt(0)==`
`&&(ne="=0D"+ne.slice(1)),ne=ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var J=[],X=ne.split(`\r
`),ee=0;ee<X.length;++ee){var ae=X[ee];if(ae.length==0){J.push("");continue}for(var xe=0;xe<ae.length;){var Re=76,ve=ae.slice(xe,xe+Re);ve.charAt(Re-1)=="="?Re--:ve.charAt(Re-2)=="="?Re-=2:ve.charAt(Re-3)=="="&&(Re-=3),ve=ae.slice(xe,xe+Re),xe+=Re,xe<ae.length&&(ve+="="),J.push(ve)}}return J.join(`\r
`)}function qs(G){for(var ne=[],J=0;J<G.length;++J){for(var X=G[J];J<=G.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+G[++J];ne.push(X)}for(var ee=0;ee<ne.length;++ee)ne[ee]=ne[ee].replace(/[=][0-9A-Fa-f]{2}/g,function(ae){return String.fromCharCode(parseInt(ae.slice(1),16))});return Ia(ne.join(`\r
`))}function Yn(G,ne,J){for(var X="",ee="",ae="",xe,Re=0;Re<10;++Re){var ve=ne[Re];if(!ve||ve.match(/^\s*$/))break;var Te=ve.match(/^(.*?):\s*([^\s].*)$/);if(Te)switch(Te[1].toLowerCase()){case"content-location":X=Te[2].trim();break;case"content-type":ae=Te[2].trim();break;case"content-transfer-encoding":ee=Te[2].trim();break}}switch(++Re,ee.toLowerCase()){case"base64":xe=Ia($s(ne.slice(Re).join("")));break;case"quoted-printable":xe=qs(ne.slice(Re));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ee)}var _e=Ks(G,X.slice(J.length),xe,{unsafe:!0});ae&&(_e.ctype=ae)}function qr(G,ne){if(K(G.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var J=ne&&ne.root||"",X=(Wt&&Buffer.isBuffer(G)?G.toString("binary"):K(G)).split(`\r
`),ee=0,ae="";for(ee=0;ee<X.length;++ee)if(ae=X[ee],!!/^Content-Location:/i.test(ae)&&(ae=ae.slice(ae.indexOf("file")),J||(J=ae.slice(0,ae.lastIndexOf("/")+1)),ae.slice(0,J.length)!=J))for(;J.length>0&&(J=J.slice(0,J.length-1),J=J.slice(0,J.lastIndexOf("/")+1),ae.slice(0,J.length)!=J););var xe=(X[1]||"").match(/boundary="(.*?)"/);if(!xe)throw new Error("MAD cannot find boundary");var Re="--"+(xe[1]||""),ve=[],Te=[],_e={FileIndex:ve,FullPaths:Te};I(_e);var je,He=0;for(ee=0;ee<X.length;++ee){var Ye=X[ee];Ye!==Re&&Ye!==Re+"--"||(He++&&Yn(_e,X.slice(je,ee),J),je=ee)}return _e}function tc(G,ne){var J=ne||{},X=J.boundary||"SheetJS";X="------="+X;for(var ee=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],ae=G.FullPaths[0],xe=ae,Re=G.FileIndex[0],ve=1;ve<G.FullPaths.length;++ve)if(xe=G.FullPaths[ve].slice(ae.length),Re=G.FileIndex[ve],!(!Re.size||!Re.content||xe=="Sh33tJ5")){xe=xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(nt){return"_x"+nt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(nt){return"_u"+nt.charCodeAt(0).toString(16)+"_"});for(var Te=Re.content,_e=Wt&&Buffer.isBuffer(Te)?Te.toString("binary"):K(Te),je=0,He=Math.min(1024,_e.length),Ye=0,Be=0;Be<=He;++Be)(Ye=_e.charCodeAt(Be))>=32&&Ye<128&&++je;var qe=je>=He*4/5;ee.push(X),ee.push("Content-Location: "+(J.root||"file:///C:/SheetJS/")+xe),ee.push("Content-Transfer-Encoding: "+(qe?"quoted-printable":"base64")),ee.push("Content-Type: "+rr(Re,xe)),ee.push(""),ee.push(qe?vs(_e):Mr(_e))}return ee.push(X+`--\r
`),ee.join(`\r
`)}function xa(G){var ne={};return I(ne,G),ne}function Ks(G,ne,J,X){var ee=X&&X.unsafe;ee||I(G);var ae=!ee&&en.find(G,ne);if(!ae){var xe=G.FullPaths[0];ne.slice(0,xe.length)==xe?xe=ne:(xe.slice(-1)!="/"&&(xe+="/"),xe=(xe+ne).replace("//","/")),ae={name:s(ne),type:2},G.FileIndex.push(ae),G.FullPaths.push(xe),ee||en.utils.cfb_gc(G)}return ae.content=J,ae.size=J?J.length:0,X&&(X.CLSID&&(ae.clsid=X.CLSID),X.mt&&(ae.mt=X.mt),X.ct&&(ae.ct=X.ct)),ae}function sr(G,ne){I(G);var J=en.find(G,ne);if(J){for(var X=0;X<G.FileIndex.length;++X)if(G.FileIndex[X]==J)return G.FileIndex.splice(X,1),G.FullPaths.splice(X,1),!0}return!1}function va(G,ne,J){I(G);var X=en.find(G,ne);if(X){for(var ee=0;ee<G.FileIndex.length;++ee)if(G.FileIndex[ee]==X)return G.FileIndex[ee].name=s(J),G.FullPaths[ee]=J,!0}return!1}function ys(G){N(G,!0)}return e.find=U,e.read=O,e.parse=h,e.write=Ie,e.writeFile=ce,e.utils={cfb_new:xa,cfb_add:Ks,cfb_del:sr,cfb_mov:va,cfb_gc:ys,ReadShift:jf,CheckField:qN,prep_blob:Br,bconcat:wo,use_zlib:H,_deflateRaw:gt,_inflateRaw:Ua,consts:fe},e})();function YL(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function ri(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function R1(t){for(var e=[],n=ri(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}var dp=new Date(1899,11,30,0,0,0);function gs(t,e){var n=t.getTime(),r=dp.getTime()+(t.getTimezoneOffset()-dp.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var AN=new Date,WL=dp.getTime()+(AN.getTimezoneOffset()-dp.getTimezoneOffset())*6e4,m2=AN.getTimezoneOffset();function Kp(t){var e=new Date;return e.setTime(t*24*60*60*1e3+WL),e.getTimezoneOffset()!==m2&&e.setTime(e.getTime()+(e.getTimezoneOffset()-m2)*6e4),e}function ZL(t){var e=0,n=0,r=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(n=1,a>3&&(r=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(s[a],10)}return e}var g2=new Date("2017-02-19T19:06:09.000Z"),bN=isNaN(g2.getFullYear())?new Date("2/19/17"):g2,XL=bN.getFullYear()==2017;function Cr(t,e){var n=new Date(t);if(XL)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(bN.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Ol(t,e){if(Wt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Pf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Pf(dN(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Pf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Pf(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(a){return n[a]||a})}catch{}for(var r=[],s=0;s!=t.length;++s)r.push(String.fromCharCode(t[s]));return r.join("")}function jr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=jr(t[n]));return e}function $n(t,e){for(var n="";n.length<e;)n+=t;return n}function Ma(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,a){return n=-n,a}),!isNaN(e=Number(r)))?e/n:e}var QL=["january","february","march","april","may","june","july","august","september","october","november","december"];function lu(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&QL.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}var e8=(function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,r,s){if(t||typeof r=="string")return n.split(r);for(var a=n.split(r),o=[a[0]],c=1;c<a.length;++c)o.push(s),o.push(a[c]);return o}})();function CN(t){return t?t.content&&t.type?Ol(t.content,!0):t.data?Rf(t.data):t.asNodeBuffer&&Wt?Rf(t.asNodeBuffer().toString("binary")):t.asBinary?Rf(t.asBinary()):t._data&&t._data.getContent?Rf(Ol(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function NN(t){if(!t)return null;if(t.data)return s2(t.data);if(t.asNodeBuffer&&Wt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?s2(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function t8(t){return t&&t.name.slice(-4)===".bin"?NN(t):CN(t)}function oa(t,e){for(var n=t.FullPaths||ri(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),s=r.replace(/\\/g,"/"),a=0;a<n.length;++a){var o=n[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==o||s==o)return t.files?t.files[n[a]]:t.FileIndex[a]}return null}function D1(t,e){var n=oa(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function fr(t,e,n){if(!n)return t8(D1(t,e));if(!e)return null;try{return fr(t,e)}catch{return null}}function js(t,e,n){if(!n)return CN(D1(t,e));if(!e)return null;try{return js(t,e)}catch{return null}}function n8(t,e,n){return NN(D1(t,e))}function x2(t){for(var e=t.FullPaths||ri(t.files),n=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function r8(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Wt?r=Hl(n):r=TL(n),en.utils.cfb_add(t,e,r)}en.utils.cfb_add(t,e,n)}else t.file(e,n)}function IN(t,e){switch(e.type){case"base64":return en.read(t,{type:"base64"});case"binary":return en.read(t,{type:"binary"});case"buffer":case"array":return en.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Mf(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var r=t.split("/");r.length!==0;){var s=r.shift();s===".."?n.pop():s!=="."&&n.push(s)}return n.join("/")}var kN=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,s8=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,v2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,a8=/<[^>]*>/g,ss=kN.match(v2)?v2:a8,i8=/<\w*:/,o8=/<(\/?)\w+:/;function Et(t,e,n){for(var r={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(r[0]=t.slice(0,s)),s===t.length)return r;var o=t.match(s8),c=0,u="",d=0,h="",x="",v=1;if(o)for(d=0;d!=o.length;++d){for(x=o[d],a=0;a!=x.length&&x.charCodeAt(a)!==61;++a);for(h=x.slice(0,a).trim();x.charCodeAt(a+1)==32;)++a;for(v=(s=x.charCodeAt(a+1))==34||s==39?1:0,u=x.slice(a+1+v,x.length-v),c=0;c!=h.length&&h.charCodeAt(c)!==58;++c);if(c===h.length)h.indexOf("_")>0&&(h=h.slice(0,h.indexOf("_"))),r[h]=u,r[h.toLowerCase()]=u;else{var T=(c===5&&h.slice(0,5)==="xmlns"?"xmlns":"")+h.slice(c+1);if(r[T]&&h.slice(c-3,c)=="ext")continue;r[T]=u,r[T.toLowerCase()]=u}}return r}function ii(t){return t.replace(o8,"<$1")}var RN={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},l8=R1(RN),nn=(function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function n(r){var s=r+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(c,u){return RN[c]||String.fromCharCode(parseInt(u,c.indexOf("x")>-1?16:10))||c}).replace(e,function(c,u){return String.fromCharCode(parseInt(u,16))});var o=s.indexOf("]]>");return n(s.slice(0,a))+s.slice(a+9,o)+n(s.slice(o+3))}})(),c8=/[&<>'"]/g,u8=/[\u0000-\u001f]/g;function M1(t){var e=t+"";return e.replace(c8,function(n){return l8[n]}).replace(/\n/g,"<br/>").replace(u8,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}var y2=(function(){var t=/&#(\d+);/g;function e(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,e)}})();function Un(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function _x(t){for(var e="",n=0,r=0,s=0,a=0,o=0,c=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(s=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=s&63,e+=String.fromCharCode(o);continue}if(a=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63);continue}o=t.charCodeAt(n++),c=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(c>>>10&1023)),e+=String.fromCharCode(56320+(c&1023))}return e}function _2(t){var e=Lo(2*t.length),n,r,s=1,a=0,o=0,c;for(r=0;r<t.length;r+=s)s=1,(c=t.charCodeAt(r))<128?n=c:c<224?(n=(c&31)*64+(t.charCodeAt(r+1)&63),s=2):c<240?(n=(c&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),s=3):(s=4,n=(c&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[a++]=o&255,e[a++]=o>>>8,o=0),e[a++]=n%256,e[a++]=n>>>8;return e.slice(0,a).toString("ucs2")}function E2(t){return Hl(t,"binary").toString("utf8")}var d0="foo bar baz",Dn=Wt&&(E2(d0)==_x(d0)&&E2||_2(d0)==_x(d0)&&_2)||_x,Pf=Wt?function(t){return Hl(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,s=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},hd=(function(){var t={};return function(n,r){var s=n+"|"+(r||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",r||"")}})(),DN=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)r=r.replace(t[s][0],t[s][1]);return r}})(),f8=(function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}})(),d8=/<\/?(?:vt:)?variant>/g,h8=/<(?:vt:)([^>]*)>([\s\S]*)</;function T2(t,e){var n=Et(t),r=t.match(f8(n.baseType))||[],s=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return s}return r.forEach(function(a){var o=a.replace(d8,"").match(h8);o&&s.push({v:Dn(o[2]),t:o[1]})}),s}var p8=/(^\s|\s$|\n)/;function m8(t){return ri(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function g8(t,e,n){return"<"+t+(n!=null?m8(n):"")+(e!=null?(e.match(p8)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function P1(t){if(Wt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Dn(Gl(N1(t)));throw new Error("Bad input format: expected Buffer or string")}var pd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,x8={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},v8=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function y8(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return r==2047?s==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}function _8(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,o=r?-e:e;isFinite(o)?o==0?s=a=0:(s=Math.floor(Math.log(o)/Math.LN2),a=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var c=0;c<=5;++c,a/=256)t[n+c]=a&255;t[n+6]=(s&15)<<4|a&15,t[n+7]=s>>4|r}var w2=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var s=0,a=t[0][r].length;s<a;s+=n)e.push.apply(e,t[0][r].slice(s,s+n));return e},S2=Wt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Hl(e)})):w2(t)}:w2,A2=function(t,e,n){for(var r=[],s=e;s<n;s+=2)r.push(String.fromCharCode(Di(t,s)));return r.join("").replace(ms,"")},F1=Wt?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(ms,""):A2(t,e,n)}:A2,b2=function(t,e,n){for(var r=[],s=e;s<e+n;++s)r.push(("0"+t[s].toString(16)).slice(-2));return r.join("")},MN=Wt?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):b2(t,e,n)}:b2,C2=function(t,e,n){for(var r=[],s=e;s<n;s++)r.push(String.fromCharCode(Vc(t,s)));return r.join("")},Pd=Wt?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):C2(e,n,r)}:C2,PN=function(t,e){var n=Bs(t,e);return n>0?Pd(t,e+4,e+4+n-1):""},FN=PN,ON=function(t,e){var n=Bs(t,e);return n>0?Pd(t,e+4,e+4+n-1):""},LN=ON,UN=function(t,e){var n=2*Bs(t,e);return n>0?Pd(t,e+4,e+4+n-1):""},VN=UN,BN=function(e,n){var r=Bs(e,n);return r>0?F1(e,n+4,n+4+r):""},zN=BN,jN=function(t,e){var n=Bs(t,e);return n>0?Pd(t,e+4,e+4+n):""},HN=jN,GN=function(t,e){return y8(t,e)},hp=GN,$N=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Wt&&(FN=function(e,n){if(!Buffer.isBuffer(e))return PN(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},LN=function(e,n){if(!Buffer.isBuffer(e))return ON(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},VN=function(e,n){if(!Buffer.isBuffer(e))return UN(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},zN=function(e,n){if(!Buffer.isBuffer(e))return BN(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},HN=function(e,n){if(!Buffer.isBuffer(e))return jN(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},hp=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):GN(e,n)},$N=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Vc=function(t,e){return t[e]},Di=function(t,e){return t[e+1]*256+t[e]},E8=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Bs=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},wl=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},T8=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function jf(t,e){var n="",r,s,a=[],o,c,u,d;switch(e){case"dbcs":if(d=this.l,Wt&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(u=0;u<t;++u)n+=String.fromCharCode(Di(this,d)),d+=2;t*=2;break;case"utf8":n=Pd(this,this.l,this.l+t);break;case"utf16le":t*=2,n=F1(this,this.l,this.l+t);break;case"wstr":return jf.call(this,t,"dbcs");case"lpstr-ansi":n=FN(this,this.l),t=4+Bs(this,this.l);break;case"lpstr-cp":n=LN(this,this.l),t=4+Bs(this,this.l);break;case"lpwstr":n=VN(this,this.l),t=4+2*Bs(this,this.l);break;case"lpp4":t=4+Bs(this,this.l),n=zN(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Bs(this,this.l),n=HN(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=Vc(this,this.l+t++))!==0;)a.push(f0(o));n=a.join("");break;case"_wstr":for(t=0,n="";(o=Di(this,this.l+t))!==0;)a.push(f0(o)),t+=2;t+=2,n=a.join("");break;case"dbcs-cont":for(n="",d=this.l,u=0;u<t;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Vc(this,d),this.l=d+1,c=jf.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),a.join("")+c;a.push(f0(Di(this,d))),d+=2}n=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",d=this.l,u=0;u!=t;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Vc(this,d),this.l=d+1,c=jf.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),a.join("")+c;a.push(f0(Vc(this,d))),d+=1}n=a.join("");break;default:switch(t){case 1:return r=Vc(this,this.l),this.l++,r;case 2:return r=(e==="i"?E8:Di)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?wl:T8)(this,this.l),this.l+=4,r):(s=Bs(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=hp(this,this.l):s=hp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:n=MN(this,this.l,t);break}}return this.l+=t,n}var w8=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},S8=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},A8=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function b8(t,e,n){var r=0,s=0;if(n==="dbcs"){for(s=0;s!=e.length;++s)A8(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(n==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var o=e.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,w8(this,e,this.l);break;case 8:if(r=8,n==="f"){_8(this,e,this.l);break}case 16:break;case-4:r=4,S8(this,e,this.l);break}return this.l+=r,this}function qN(t,e){var n=MN(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Br(t,e){t.l=e,t.read_shift=jf,t.chk=qN,t.write_shift=b8}function rs(t,e){t.l+=e}function xr(t){var e=Lo(t);return Br(e,0),e}function ji(t,e,n){if(t){var r,s,a;Br(t,t.l||0);for(var o=t.length,c=0,u=0;t.l<o;){c=t.read_shift(1),c&128&&(c=(c&127)+((t.read_shift(1)&127)<<7));var d=yp[c]||yp[65535];for(r=t.read_shift(1),a=r&127,s=1;s<4&&r&128;++s)a+=((r=t.read_shift(1))&127)<<7*s;u=t.l+a;var h=d.f&&d.f(t,a,n);if(t.l=u,e(h,d,c))return}}}function ov(){var t=[],e=Wt?256:2048,n=function(d){var h=xr(d);return Br(h,0),h},r=n(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},a=function(d){return r&&d<r.length-r.l?r:(s(),r=n(Math.max(d+1,e)))},o=function(){return s(),wo(t)},c=function(d){s(),r=d,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:c,end:o,_bufs:t}}function Hf(t,e,n){var r=jr(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function N2(t,e,n){var r=jr(t);return r.s=Hf(r.s,e.s,n),r.e=Hf(r.e,e.s,n),r}function Gf(t,e){if(t.cRel&&t.c<0)for(t=jr(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=jr(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=Ct(t);return!t.cRel&&t.cRel!=null&&(n=I8(n)),!t.rRel&&t.rRel!=null&&(n=C8(n)),n}function Ex(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+yr(t.s.c)+":"+(t.e.cRel?"":"$")+yr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Hr(t.s.r)+":"+(t.e.rRel?"":"$")+Hr(t.e.r):Gf(t.s,e.biff)+":"+Gf(t.e,e.biff)}function O1(t){return parseInt(N8(t),10)-1}function Hr(t){return""+(t+1)}function C8(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function N8(t){return t.replace(/\$(\d+)$/,"$1")}function L1(t){for(var e=k8(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function yr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function I8(t){return t.replace(/^([A-Z])/,"$$$1")}function k8(t){return t.replace(/^\$([A-Z])/,"$1")}function R8(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ps(t){for(var e=0,n=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:e-1}}function Ct(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function yu(t){var e=t.indexOf(":");return e==-1?{s:ps(t),e:ps(t)}:{s:ps(t.slice(0,e)),e:ps(t.slice(e+1))}}function tn(t,e){return typeof e>"u"||typeof e=="number"?tn(t.s,t.e):(typeof t!="string"&&(t=Ct(t)),typeof e!="string"&&(e=Ct(e)),t==e?t:t+":"+e)}function qn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=t.length;for(n=0;r<a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.s.c=--n,n=0;r<a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(e.s.r=--n,r===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.e.c=--n,n=0;r!=a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return e.e.r=--n,e}function I2(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=da(t.z,n?gs(e):e)}catch{}try{return t.w=da((t.XF||{}).numFmtId||(n?14:0),n?gs(e):e)}catch{return""+e}}function Li(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?Kl[t.v]||t.v:e==null?I2(t,t.v):I2(t,e))}function Jo(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function KN(t,e,n){var r=n||{},s=t?Array.isArray(t):r.dense,a=t||(s?[]:{}),o=0,c=0;if(a&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var u=typeof r.origin=="string"?ps(r.origin):r.origin;o=u.r,c=u.c}a["!ref"]||(a["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var h=qn(a["!ref"]);d.s.c=h.s.c,d.s.r=h.s.r,d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),o==-1&&(d.e.r=o=h.e.r+1)}for(var x=0;x!=e.length;++x)if(e[x]){if(!Array.isArray(e[x]))throw new Error("aoa_to_sheet expects an array of arrays");for(var v=0;v!=e[x].length;++v)if(!(typeof e[x][v]>"u")){var T={v:e[x][v]},S=o+x,A=c+v;if(d.s.r>S&&(d.s.r=S),d.s.c>A&&(d.s.c=A),d.e.r<S&&(d.e.r=S),d.e.c<A&&(d.e.c=A),e[x][v]&&typeof e[x][v]=="object"&&!Array.isArray(e[x][v])&&!(e[x][v]instanceof Date))T=e[x][v];else if(Array.isArray(T.v)&&(T.f=e[x][v][1],T.v=T.v[0]),T.v===null)if(T.f)T.t="n";else if(r.nullError)T.t="e",T.v=0;else if(r.sheetStubs)T.t="z";else continue;else typeof T.v=="number"?T.t="n":typeof T.v=="boolean"?T.t="b":T.v instanceof Date?(T.z=r.dateNF||Dt[14],r.cellDates?(T.t="d",T.w=da(T.z,gs(T.v))):(T.t="n",T.v=gs(T.v),T.w=da(T.z,T.v))):T.t="s";if(s)a[S]||(a[S]=[]),a[S][A]&&a[S][A].z&&(T.z=a[S][A].z),a[S][A]=T;else{var b=Ct({c:A,r:S});a[b]&&a[b].z&&(T.z=a[b].z),a[b]=T}}}return d.s.c<1e7&&(a["!ref"]=tn(d)),a}function _u(t,e){return KN(null,t,e)}function D8(t){return t.read_shift(4,"i")}function ns(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function M8(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function U1(t,e){var n=t.l,r=t.read_shift(1),s=ns(t),a=[],o={t:s,h:s};if((r&1)!==0){for(var c=t.read_shift(4),u=0;u!=c;++u)a.push(M8(t));o.r=a}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}var P8=U1;function ma(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function $l(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var F8=ns;function V1(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var O8=ns,lv=V1;function B1(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var s=r===0?hp([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):wl(e,0)>>2;return n?s/100:s}function JN(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var ql=JN;function Xr(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function L8(t){var e={},n=t.read_shift(1),r=n>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),o=t.read_shift(1),c=t.read_shift(1),u=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var d=Il[s];d&&(e.rgb=gd(d));break;case 2:e.rgb=gd([o,c,u]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function U8(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function YN(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function V8(t){return YN(t,1)}function B8(t){return YN(t,2)}var z1=2,As=3,h0=11,k2=12,pp=19,p0=64,z8=65,j8=71,H8=4108,G8=4126,Sr=80,WN=81,$8=[Sr,WN],q8={1:{n:"CodePage",t:z1},2:{n:"Category",t:Sr},3:{n:"PresentationFormat",t:Sr},4:{n:"ByteCount",t:As},5:{n:"LineCount",t:As},6:{n:"ParagraphCount",t:As},7:{n:"SlideCount",t:As},8:{n:"NoteCount",t:As},9:{n:"HiddenCount",t:As},10:{n:"MultimediaClipCount",t:As},11:{n:"ScaleCrop",t:h0},12:{n:"HeadingPairs",t:H8},13:{n:"TitlesOfParts",t:G8},14:{n:"Manager",t:Sr},15:{n:"Company",t:Sr},16:{n:"LinksUpToDate",t:h0},17:{n:"CharacterCount",t:As},19:{n:"SharedDoc",t:h0},22:{n:"HyperlinksChanged",t:h0},23:{n:"AppVersion",t:As,p:"version"},24:{n:"DigSig",t:z8},26:{n:"ContentType",t:Sr},27:{n:"ContentStatus",t:Sr},28:{n:"Language",t:Sr},29:{n:"Version",t:Sr},255:{},2147483648:{n:"Locale",t:pp},2147483651:{n:"Behavior",t:pp},1919054434:{}},K8={1:{n:"CodePage",t:z1},2:{n:"Title",t:Sr},3:{n:"Subject",t:Sr},4:{n:"Author",t:Sr},5:{n:"Keywords",t:Sr},6:{n:"Comments",t:Sr},7:{n:"Template",t:Sr},8:{n:"LastAuthor",t:Sr},9:{n:"RevNumber",t:Sr},10:{n:"EditTime",t:p0},11:{n:"LastPrinted",t:p0},12:{n:"CreatedDate",t:p0},13:{n:"ModifiedDate",t:p0},14:{n:"PageCount",t:As},15:{n:"WordCount",t:As},16:{n:"CharCount",t:As},17:{n:"Thumbnail",t:j8},18:{n:"Application",t:Sr},19:{n:"DocSecurity",t:As},255:{},2147483648:{n:"Locale",t:pp},2147483651:{n:"Behavior",t:pp},1919054434:{}},R2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},J8=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Y8(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var W8=Y8([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Il=jr(W8),Kl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ZN={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},D2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Z8(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function X8(t){var e=Z8();if(!t||!t.match)return e;var n={};if((t.match(ss)||[]).forEach(function(r){var s=Et(r);switch(s[0].replace(i8,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[s.Extension]=s.ContentType;break;case"<Override":e[D2[s.ContentType]]!==void 0&&e[D2[s.ContentType]].push(s.PartName);break}}),e.xmlns!==x8.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}var Kc={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function cv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function $f(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(t.match(ss)||[]).forEach(function(s){var a=Et(s);if(a[0]==="<Relationship"){var o={};o.Type=a.Type,o.Target=a.Target,o.Id=a.Id,a.TargetMode&&(o.TargetMode=a.TargetMode);var c=a.TargetMode==="External"?a.Target:Mf(a.Target,e);n[c]=o,r[a.Id]=o}}),n["!id"]=r,n}var Q8="application/vnd.oasis.opendocument.spreadsheet";function eU(t,e){for(var n=P1(t),r,s;r=pd.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(s=Et(r[0],!1),s.path=="/"&&s.type!==Q8)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}var qf=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],tU=(function(){for(var t=new Array(qf.length),e=0;e<qf.length;++e){var n=qf[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t})();function XN(t){var e={};t=Dn(t);for(var n=0;n<qf.length;++n){var r=qf[n],s=t.match(tU[n]);s!=null&&s.length>0&&(e[r[1]]=nn(s[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=Cr(e[r[1]]))}return e}var nU=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function QN(t,e,n,r){var s=[];if(typeof t=="string")s=T2(t,r);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(h){return{v:h}}));var o=typeof e=="string"?T2(e,r).map(function(h){return h.v}):e,c=0,u=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(u=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=u,n.SheetNames=o.slice(c,c+u);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=u,n.DefinedNames=o.slice(c,c+u);break;case"Charts":case"Diagramme":n.Chartsheets=u,n.ChartNames=o.slice(c,c+u);break}c+=u}}function rU(t,e,n){var r={};return e||(e={}),t=Dn(t),nU.forEach(function(s){var a=(t.match(hd(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=nn(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var o=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(r[s[1]]=o[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&QN(r.HeadingPairs,r.TitlesOfParts,e,n),e}var sU=/<[^>]+>[^<]*/g;function aU(t,e){var n={},r="",s=t.match(sU);if(s)for(var a=0;a!=s.length;++a){var o=s[a],c=Et(o);switch(c[0]){case"<?xml":break;case"<Properties":break;case"<property":r=nn(c.name);break;case"</property>":r=null;break;default:if(o.indexOf("<vt:")===0){var u=o.split(">"),d=u[0].slice(4),h=u[1];switch(d){case"lpstr":case"bstr":case"lpwstr":n[r]=nn(h);break;case"bool":n[r]=Un(h);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(h,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(h);break;case"filetime":case"date":n[r]=Cr(h);break;case"cy":case"error":n[r]=nn(h);break;default:if(d.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,u)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return n}var iU={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Tx;function oU(t,e,n){Tx||(Tx=R1(iU)),e=Tx[e]||e,t[e]=n}function j1(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function eI(t,e,n){var r=t.l,s=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-r&3;)++t.l;return s}function tI(t,e,n){var r=t.read_shift(0,"lpwstr");return r}function nI(t,e,n){return e===31?tI(t):eI(t,e,n)}function uv(t,e,n){return nI(t,e,n===!1?0:4)}function lU(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return nI(t,e,0)}function cU(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var s=t.l;n[r]=t.read_shift(0,"lpwstr").replace(ms,""),t.l-s&2&&(t.l+=2)}return n}function uU(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(ms,"");return n}function fU(t){var e=t.l,n=mp(t,WN);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var r=mp(t,As);return[n,r]}function dU(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(fU(t));return n}function M2(t,e){for(var n=t.read_shift(4),r={},s=0;s!=n;++s){var a=t.read_shift(4),o=t.read_shift(4);r[a]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(ms,"").replace(Df,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function rI(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function hU(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function mp(t,e,n){var r=t.read_shift(2),s,a=n||{};if(t.l+=2,e!==k2&&r!==e&&$8.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===k2?r:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return eI(t,r,4).replace(ms,"");case 31:return tI(t);case 64:return j1(t);case 65:return rI(t);case 71:return hU(t);case 80:return uv(t,r,!a.raw).replace(ms,"");case 81:return lU(t,r).replace(ms,"");case 4108:return dU(t);case 4126:case 4127:return r==4127?cU(t):uU(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function P2(t,e){var n=t.l,r=t.read_shift(4),s=t.read_shift(4),a=[],o=0,c=0,u=-1,d={};for(o=0;o!=s;++o){var h=t.read_shift(4),x=t.read_shift(4);a[o]=[h,x+n]}a.sort(function(B,D){return B[1]-D[1]});var v={};for(o=0;o!=s;++o){if(t.l!==a[o][1]){var T=!0;if(o>0&&e)switch(e[a[o-1][0]].t){case 2:t.l+2===a[o][1]&&(t.l+=2,T=!1);break;case 80:t.l<=a[o][1]&&(t.l=a[o][1],T=!1);break;case 4108:t.l<=a[o][1]&&(t.l=a[o][1],T=!1);break}if((!e||o==0)&&t.l<=a[o][1]&&(T=!1,t.l=a[o][1]),T)throw new Error("Read Error: Expected address "+a[o][1]+" at "+t.l+" :"+o)}if(e){var S=e[a[o][0]];if(v[S.n]=mp(t,S.t,{raw:!0}),S.p==="version"&&(v[S.n]=String(v[S.n]>>16)+"."+("0000"+String(v[S.n]&65535)).slice(-4)),S.n=="CodePage")switch(v[S.n]){case 0:v[S.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ka(c=v[S.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+v[S.n])}}else if(a[o][0]===1){if(c=v.CodePage=mp(t,z1),ka(c),u!==-1){var A=t.l;t.l=a[u][1],d=M2(t,c),t.l=A}}else if(a[o][0]===0){if(c===0){u=o,t.l=a[o+1][1];continue}d=M2(t,c)}else{var b=d[a[o][0]],R;switch(t[t.l]){case 65:t.l+=4,R=rI(t);break;case 30:t.l+=4,R=uv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,R=uv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,R=t.read_shift(4,"i");break;case 19:t.l+=4,R=t.read_shift(4);break;case 5:t.l+=4,R=t.read_shift(8,"f");break;case 11:t.l+=4,R=Qn(t,4);break;case 64:t.l+=4,R=Cr(j1(t));break;default:throw new Error("unparsed value: "+t[t.l])}v[b]=R}}return t.l=n+r,v}function F2(t,e,n){var r=t.content;if(!r)return{};Br(r,0);var s,a,o,c,u=0;r.chk("feff","Byte Order: "),r.read_shift(2);var d=r.read_shift(4),h=r.read_shift(16);if(h!==en.utils.consts.HEADER_CLSID&&h!==n)throw new Error("Bad PropertySet CLSID "+h);if(s=r.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=r.read_shift(16),c=r.read_shift(4),s===1&&c!==r.l)throw new Error("Length mismatch: "+c+" !== "+r.l);s===2&&(o=r.read_shift(16),u=r.read_shift(4));var x=P2(r,e),v={SystemIdentifier:d};for(var T in x)v[T]=x[T];if(v.FMTID=a,s===1)return v;if(u-r.l==2&&(r.l+=2),r.l!==u)throw new Error("Length mismatch 2: "+r.l+" !== "+u);var S;try{S=P2(r,null)}catch{}for(T in S)v[T]=S[T];return v.FMTID=[a,o],v}function _o(t,e){return t.read_shift(e),null}function pU(t,e,n){for(var r=[],s=t.l+e;t.l<s;)r.push(n(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return r}function Qn(t,e){return t.read_shift(e)===1}function dr(t){return t.read_shift(2,"u")}function sI(t,e){return pU(t,e,dr)}function mU(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function Fd(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var o=r?t.read_shift(r,s):"";return o}function gU(t){var e=t.read_shift(2),n=t.read_shift(1),r=n&4,s=n&8,a=1+(n&1),o=0,c,u={};s&&(o=t.read_shift(2)),r&&(c=t.read_shift(4));var d=a==2?"dbcs-cont":"sbcs-cont",h=e===0?"":t.read_shift(e,d);return s&&(t.l+=4*o),r&&(t.l+=c),u.t=h,s||(u.raw="<t>"+u.t+"</t>",u.r=u.t),u}function Ll(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function Od(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):Ll(t,r,n)}function Jl(t,e,n){if(n.biff>5)return Od(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function xU(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function vU(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=n);var s=t.read_shift((r?e-24:e)>>1,"utf16le").replace(ms,"");return r&&(t.l+=24),s}function yU(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return n+r.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(a>>1,"utf16le").replace(ms,"");return n+o}function _U(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return vU(t);case"0303000000000000c000000000000046":return yU(t);default:throw new Error("Unsupported Moniker "+n)}}function m0(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(ms,""):"";return n}function EU(t,e){var n=t.l+e,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var s=t.read_shift(2);t.l+=2;var a,o,c,u,d="",h,x;s&16&&(a=m0(t,n-t.l)),s&128&&(o=m0(t,n-t.l)),(s&257)===257&&(c=m0(t,n-t.l)),(s&257)===1&&(u=_U(t,n-t.l)),s&8&&(d=m0(t,n-t.l)),s&32&&(h=t.read_shift(16)),s&64&&(x=j1(t)),t.l=n;var v=o||c||u||"";v&&d&&(v+="#"+d),v||(v="#"+d),s&2&&v.charAt(0)=="/"&&v.charAt(1)!="/"&&(v="file://"+v);var T={Target:v};return h&&(T.guid=h),x&&(T.time=x),a&&(T.Tooltip=a),T}function aI(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),s=t.read_shift(1);return[e,n,r,s]}function iI(t,e){var n=aI(t);return n[3]=0,n}function oi(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function TU(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function wU(t,e,n){return e===0?"":Jl(t,e,n)}function SU(t,e,n){var r=n.biff>8?4:2,s=t.read_shift(r),a=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[s,a,o]}function oI(t){var e=t.read_shift(2),n=B1(t);return[e,n]}function AU(t,e,n){t.l+=4,e-=4;var r=t.l+e,s=Fd(t,e,n),a=t.read_shift(2);if(r-=t.l,a!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+a);return t.l+=a,s}function Jp(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:n}}}function lI(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),s=t.read_shift(1);return{s:{c:r,r:e},e:{c:s,r:n}}}var bU=lI;function cI(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function CU(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function NU(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Jr(t){t.l+=2,t.l+=t.read_shift(2)}var IU={0:Jr,4:Jr,5:Jr,6:Jr,7:NU,8:Jr,9:Jr,10:Jr,11:Jr,12:Jr,13:CU,14:Jr,15:Jr,16:Jr,17:Jr,18:Jr,19:Jr,20:Jr,21:cI};function kU(t,e){for(var n=t.l+e,r=[];t.l<n;){var s=t.read_shift(2);t.l-=2;try{r.push(IU[s](t,n-t.l))}catch{return t.l=n,r}}return t.l!=n&&(t.l=n),r}function g0(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function RU(t,e){return e===0||t.read_shift(2),1200}function DU(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,s=Jl(t,0,n);return t.read_shift(e+r-t.l),s}function MU(t,e,n){var r=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function PU(t,e,n){var r=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var o=Fd(t,0,n);return o.length===0&&(o="Sheet1"),{pos:r,hs:s,dt:a,name:o}}function FU(t,e){for(var n=t.l+e,r=t.read_shift(4),s=t.read_shift(4),a=[],o=0;o!=s&&t.l<n;++o)a.push(gU(t));return a.Count=r,a.Unique=s,a}function OU(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function LU(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=n/20),e}function UU(t){var e=TU(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function VU(t){return t.read_shift(2),t.read_shift(4)}function O2(t,e,n){var r=0;n&&n.biff==2||(r=t.read_shift(2));var s=t.read_shift(2);n&&n.biff==2&&(r=1-(s>>15),s&=32767);var a={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[a,s]}function BU(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2),d=t.read_shift(2);return{Pos:[e,n],Dim:[r,s],Flags:a,CurTab:o,FirstTab:c,Selected:u,TabRatio:d}}function zU(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function jU(){}function HU(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=Fd(t,0,n),r}function GU(t){var e=oi(t);return e.isst=t.read_shift(4),e}function $U(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=t.l+e,s=oi(t);n.biff==2&&t.l++;var a=Od(t,r-t.l,n);return s.val=a,s}function qU(t,e,n){var r=t.read_shift(2),s=Jl(t,0,n);return[r,s]}var KU=Jl;function L2(t,e,n){var r=t.l+e,s=n.biff==8||!n.biff?4:2,a=t.read_shift(s),o=t.read_shift(s),c=t.read_shift(2),u=t.read_shift(2);return t.l=r,{s:{r:a,c},e:{r:o,c:u}}}function JU(t){var e=t.read_shift(2),n=t.read_shift(2),r=oI(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function YU(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(oI(t));if(t.l!==n)throw new Error("MulRK read error");var o=t.read_shift(2);if(a.length!=o-s+1)throw new Error("MulRK length mismatch");return{r,c:s,C:o,rkrec:a}}function WU(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var o=t.read_shift(2);if(a.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r,c:s,C:o,ixfe:a}}function ZU(t,e,n,r){var s={},a=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(4),u=t.read_shift(2);return s.patternType=J8[c>>26],r.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=c&127,s.icvBottom=c>>7&127,s.icvDiag=c>>14&127,s.dgDiag=c>>21&15,s.icvFore=u&127,s.icvBack=u>>7&127,s.fsxButton=u>>14&1),s}function XU(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=ZU(t,e,r.fStyle,n),r}function QU(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function U2(t,e,n){var r=oi(t);(n.biff==2||e==9)&&++t.l;var s=mU(t);return r.val=s,r.t=s===!0||s===!1?"b":"e",r}function e9(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=oi(t),s=Xr(t);return r.val=s,r}var V2=wU;function t9(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(n.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var o=Ll(t,a),c=[];r>t.l;)c.push(Od(t));return[a,s,o,c]}function B2(t,e,n){var r=t.read_shift(2),s,a={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(s=AU(t,e-2,n)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var n9=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function z2(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(n&&n.biff==2?1:2),u=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),u=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var d=Ll(t,o,n);s&32&&(d=n9[d.charCodeAt(0)]);var h=r-t.l;n&&n.biff==2&&--h;var x=r==t.l||c===0||!(h>0)?[]:LB(t,h,n,c);return{chKey:a,Name:d,itab:u,rgce:x}}function uI(t,e,n){if(n.biff<8)return r9(t,e,n);for(var r=[],s=t.l+e,a=t.read_shift(n.biff>8?4:2);a--!==0;)r.push(SU(t,n.biff>8?12:6,n));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return r}function r9(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=Fd(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function s9(t,e,n){if(n.biff<8){t.l+=e;return}var r=t.read_shift(2),s=t.read_shift(2),a=Ll(t,r,n),o=Ll(t,s,n);return[a,o]}function a9(t,e,n){var r=lI(t);t.l++;var s=t.read_shift(1);return e-=8,[UB(t,e,n),s,r]}function j2(t,e,n){var r=bU(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,FB(t,e,n)]}function i9(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,r=t.read_shift(4);return[e,n,r]}function o9(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),c=Jl(t,0,n);return n.biff<8&&t.read_shift(1),[{r,c:s},c,o,a]}}function l9(t,e,n){return o9(t,e,n)}function c9(t,e){for(var n=[],r=t.read_shift(2);r--;)n.push(Jp(t));return n}function u9(t,e,n){if(n&&n.biff<8)return d9(t,e,n);var r=cI(t),s=kU(t,e-22,r[1]);return{cmo:r,ft:s}}var f9={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=n,{fmt:r}}};function d9(t,e,n){t.l+=4;var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((f9[r]||rs)(t,e,n)),{cmo:[s,r,a],ft:o}}function h9(t,e,n){var r=t.l,s="";try{t.l+=4;var a=(n.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:o=xU(t,6,n);var c=t.read_shift(2);t.read_shift(2),dr(t,2);var u=t.read_shift(2);t.l+=u;for(var d=1;d<t.lens.length-1;++d){if(t.l-r!=t.lens[d])throw new Error("TxO: bad continue record");var h=t[t.l],x=Ll(t,t.lens[d+1]-t.lens[d]-1);if(s+=x,s.length>=(h?c:2*c))break}if(s.length!==c&&s.length!==c*2)throw new Error("cchText: "+c+" != "+s.length);return t.l=r+e,{t:s}}catch{return t.l=r+e,{t:s}}}function p9(t,e){var n=Jp(t);t.l+=16;var r=EU(t,e-24);return[n,r]}function m9(t,e){t.read_shift(2);var n=Jp(t),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(ms,""),[n,r]}function g9(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=R2[n]||n,n=t.read_shift(2),e[1]=R2[n]||n,e}function x9(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(iI(t));return n}function v9(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(iI(t));return n}function y9(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function fI(t,e,n){if(!n.cellStyles)return rs(t,e);var r=n&&n.biff>=12?4:2,s=t.read_shift(r),a=t.read_shift(r),o=t.read_shift(r),c=t.read_shift(r),u=t.read_shift(2);r==2&&(t.l+=2);var d={s,e:a,w:o,ixfe:c,flags:u};return(n.biff>=5||!n.biff)&&(d.level=u>>8&7),d}function _9(t,e){var n={};return e<32||(t.l+=16,n.header=Xr(t),n.footer=Xr(t),t.l+=2),n}function E9(t,e,n){var r={area:!1};if(n.biff!=5)return t.l+=e,r;var s=t.read_shift(1);return t.l+=3,s&16&&(r.area=!0),r}var T9=oi,w9=sI,S9=Od;function A9(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,s}function b9(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=oi(t);++t.l;var s=Jl(t,e-7,n);return r.t="str",r.val=s,r}function C9(t){var e=oi(t);++t.l;var n=Xr(t);return e.t="n",e.val=n,e}function N9(t){var e=oi(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function I9(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function k9(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function R9(t,e,n){var r=t.l+e,s=oi(t),a=t.read_shift(2),o=Ll(t,a,n);return t.l=r,s.t="str",s.val=o,s}var D9=[2,3,48,49,131,139,140,245],H2=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=R1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(c,u){var d=[],h=Lo(1);switch(u.type){case"base64":h=Ia($s(c));break;case"binary":h=Ia(c);break;case"buffer":case"array":h=c;break}Br(h,0);var x=h.read_shift(1),v=!!(x&136),T=!1,S=!1;switch(x){case 2:break;case 3:break;case 48:T=!0,v=!0;break;case 49:T=!0,v=!0;break;case 131:break;case 139:break;case 140:S=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+x.toString(16))}var A=0,b=521;x==2&&(A=h.read_shift(2)),h.l+=3,x!=2&&(A=h.read_shift(4)),A>1048576&&(A=1e6),x!=2&&(b=h.read_shift(2));var R=h.read_shift(2),B=u.codepage||1252;x!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(B=t[h[h.l]]),h.l+=1,h.l+=2),S&&(h.l+=36);for(var D=[],L={},z=Math.min(h.length,x==2?521:b-10-(T?264:0)),O=S?32:11;h.l<z&&h[h.l]!=13;)switch(L={},L.name=fd.utils.decode(B,h.slice(h.l,h.l+O)).replace(/[\u0000\r\n].*$/g,""),h.l+=O,L.type=String.fromCharCode(h.read_shift(1)),x!=2&&!S&&(L.offset=h.read_shift(4)),L.len=h.read_shift(1),x==2&&(L.offset=h.read_shift(2)),L.dec=h.read_shift(1),L.name.length&&D.push(L),x!=2&&(h.l+=S?13:14),L.type){case"B":(!T||L.len!=8)&&u.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+L.type)}if(h[h.l]!==13&&(h.l=b-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=b;var I=0,C=0;for(d[0]=[],C=0;C!=D.length;++C)d[0][C]=D[C].name;for(;A-- >0;){if(h[h.l]===42){h.l+=R;continue}for(++h.l,d[++I]=[],C=0,C=0;C!=D.length;++C){var N=h.slice(h.l,h.l+D[C].len);h.l+=D[C].len,Br(N,0);var F=fd.utils.decode(B,N);switch(D[C].type){case"C":F.trim().length&&(d[I][C]=F.replace(/\s+$/,""));break;case"D":F.length===8?d[I][C]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):d[I][C]=F;break;case"F":d[I][C]=parseFloat(F.trim());break;case"+":case"I":d[I][C]=S?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":d[I][C]=!0;break;case"N":case"F":d[I][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!v)throw new Error("DBF Unexpected MEMO for type "+x.toString(16));d[I][C]="##MEMO##"+(S?parseInt(F.trim(),10):N.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(d[I][C]=+F||0);break;case"@":d[I][C]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":d[I][C]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":d[I][C]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[I][C]=-N.read_shift(-8,"f");break;case"B":if(T&&D[C].len==8){d[I][C]=N.read_shift(8,"f");break}case"G":case"P":N.l+=D[C].len;break;case"0":if(D[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[C].type)}}}if(x!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return u&&u.sheetRows&&(d=d.slice(0,u.sheetRows)),u.DBF=D,d}function r(c,u){var d=u||{};d.dateNF||(d.dateNF="yyyymmdd");var h=_u(n(c,d),d);return h["!cols"]=d.DBF.map(function(x){return{wch:x.len,DBF:x}}),delete d.DBF,h}function s(c,u){try{return Jo(r(c,u),u)}catch(d){if(u&&u.WTF)throw d}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function o(c,u){var d=u||{};if(+d.codepage>=0&&ka(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var h=ov(),x=gv(c,{header:1,raw:!0,cellDates:!0}),v=x[0],T=x.slice(1),S=c["!cols"]||[],A=0,b=0,R=0,B=1;for(A=0;A<v.length;++A){if(((S[A]||{}).DBF||{}).name){v[A]=S[A].DBF.name,++R;continue}if(v[A]!=null){if(++R,typeof v[A]=="number"&&(v[A]=v[A].toString(10)),typeof v[A]!="string")throw new Error("DBF Invalid column name "+v[A]+" |"+typeof v[A]+"|");if(v.indexOf(v[A])!==A){for(b=0;b<1024;++b)if(v.indexOf(v[A]+"_"+b)==-1){v[A]+="_"+b;break}}}}var D=qn(c["!ref"]),L=[],z=[],O=[];for(A=0;A<=D.e.c-D.s.c;++A){var I="",C="",N=0,F=[];for(b=0;b<T.length;++b)T[b][A]!=null&&F.push(T[b][A]);if(F.length==0||v[A]==null){L[A]="?";continue}for(b=0;b<F.length;++b){switch(typeof F[b]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=F[b]instanceof Date?"D":"C";break;default:C="C"}N=Math.max(N,String(F[b]).length),I=I&&I!=C?"C":C}N>250&&(N=250),C=((S[A]||{}).DBF||{}).type,C=="C"&&S[A].DBF.len>N&&(N=S[A].DBF.len),I=="B"&&C=="N"&&(I="N",O[A]=S[A].DBF.dec,N=S[A].DBF.len),z[A]=I=="C"||C=="N"?N:a[I]||0,B+=z[A],L[A]=I}var U=h.next(32);for(U.write_shift(4,318902576),U.write_shift(4,T.length),U.write_shift(2,296+32*R),U.write_shift(2,B),A=0;A<4;++A)U.write_shift(4,0);for(U.write_shift(4,0|(+e[uN]||3)<<8),A=0,b=0;A<v.length;++A)if(v[A]!=null){var M=h.next(32),j=(v[A].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,j,"sbcs"),M.write_shift(1,L[A]=="?"?"C":L[A],"sbcs"),M.write_shift(4,b),M.write_shift(1,z[A]||a[L[A]]||0),M.write_shift(1,O[A]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),b+=z[A]||a[L[A]]||0}var he=h.next(264);for(he.write_shift(4,13),A=0;A<65;++A)he.write_shift(4,0);for(A=0;A<T.length;++A){var Se=h.next(B);for(Se.write_shift(1,0),b=0;b<v.length;++b)if(v[b]!=null)switch(L[b]){case"L":Se.write_shift(1,T[A][b]==null?63:T[A][b]?84:70);break;case"B":Se.write_shift(8,T[A][b]||0,"f");break;case"N":var ie="0";for(typeof T[A][b]=="number"&&(ie=T[A][b].toFixed(O[b]||0)),R=0;R<z[b]-ie.length;++R)Se.write_shift(1,32);Se.write_shift(1,ie,"sbcs");break;case"D":T[A][b]?(Se.write_shift(4,("0000"+T[A][b].getFullYear()).slice(-4),"sbcs"),Se.write_shift(2,("00"+(T[A][b].getMonth()+1)).slice(-2),"sbcs"),Se.write_shift(2,("00"+T[A][b].getDate()).slice(-2),"sbcs")):Se.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(T[A][b]!=null?T[A][b]:"").slice(0,z[b]);for(Se.write_shift(1,fe,"sbcs"),R=0;R<z[b]-fe.length;++R)Se.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:s,to_sheet:r,from_sheet:o}})(),M9=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ri(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(v,T){var S=t[T];return typeof S=="number"?a2(S):S},r=function(v,T,S){var A=T.charCodeAt(0)-32<<4|S.charCodeAt(0)-48;return A==59?v:a2(A)};t["|"]=254;function s(v,T){switch(T.type){case"base64":return a($s(v),T);case"binary":return a(v,T);case"buffer":return a(Wt&&Buffer.isBuffer(v)?v.toString("binary"):Gl(v),T);case"array":return a(Ol(v),T)}throw new Error("Unrecognized type "+T.type)}function a(v,T){var S=v.split(/[\n\r]+/),A=-1,b=-1,R=0,B=0,D=[],L=[],z=null,O={},I=[],C=[],N=[],F=0,U;for(+T.codepage>=0&&ka(+T.codepage);R!==S.length;++R){F=0;var M=S[R].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),j=M.replace(/;;/g,"\0").split(";").map(function(W){return W.replace(/\u0000/g,";")}),he=j[0],Se;if(M.length>0)switch(he){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":j[1].charAt(0)=="P"&&L.push(M.slice(3).replace(/;;/g,";"));break;case"C":var ie=!1,fe=!1,ce=!1,K=!1,Ie=-1,Y=-1;for(B=1;B<j.length;++B)switch(j[B].charAt(0)){case"A":break;case"X":b=parseInt(j[B].slice(1))-1,fe=!0;break;case"Y":for(A=parseInt(j[B].slice(1))-1,fe||(b=0),U=D.length;U<=A;++U)D[U]=[];break;case"K":Se=j[B].slice(1),Se.charAt(0)==='"'?Se=Se.slice(1,Se.length-1):Se==="TRUE"?Se=!0:Se==="FALSE"?Se=!1:isNaN(Ma(Se))?isNaN(lu(Se).getDate())||(Se=Cr(Se)):(Se=Ma(Se),z!==null&&vu(z)&&(Se=Kp(Se))),ie=!0;break;case"E":K=!0;var H=eu(j[B].slice(1),{r:A,c:b});D[A][b]=[D[A][b],H];break;case"S":ce=!0,D[A][b]=[D[A][b],"S5S"];break;case"G":break;case"R":Ie=parseInt(j[B].slice(1))-1;break;case"C":Y=parseInt(j[B].slice(1))-1;break;default:if(T&&T.WTF)throw new Error("SYLK bad record "+M)}if(ie&&(D[A][b]&&D[A][b].length==2?D[A][b][0]=Se:D[A][b]=Se,z=null),ce){if(K)throw new Error("SYLK shared formula cannot have own formula");var Q=Ie>-1&&D[Ie][Y];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");D[A][b][1]=EI(Q[1],{r:A-Ie,c:b-Y})}break;case"F":var te=0;for(B=1;B<j.length;++B)switch(j[B].charAt(0)){case"X":b=parseInt(j[B].slice(1))-1,++te;break;case"Y":for(A=parseInt(j[B].slice(1))-1,U=D.length;U<=A;++U)D[U]=[];break;case"M":F=parseInt(j[B].slice(1))/20;break;case"F":break;case"G":break;case"P":z=L[parseInt(j[B].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=j[B].slice(1).split(" "),U=parseInt(N[0],10);U<=parseInt(N[1],10);++U)F=parseInt(N[2],10),C[U-1]=F===0?{hidden:!0}:{wch:F},cu(C[U-1]);break;case"C":b=parseInt(j[B].slice(1))-1,C[b]||(C[b]={});break;case"R":A=parseInt(j[B].slice(1))-1,I[A]||(I[A]={}),F>0?(I[A].hpt=F,I[A].hpx=xd(F)):F===0&&(I[A].hidden=!0);break;default:if(T&&T.WTF)throw new Error("SYLK bad record "+M)}te<1&&(z=null);break;default:if(T&&T.WTF)throw new Error("SYLK bad record "+M)}}return I.length>0&&(O["!rows"]=I),C.length>0&&(O["!cols"]=C),T&&T.sheetRows&&(D=D.slice(0,T.sheetRows)),[D,O]}function o(v,T){var S=s(v,T),A=S[0],b=S[1],R=_u(A,T);return ri(b).forEach(function(B){R[B]=b[B]}),R}function c(v,T){return Jo(o(v,T),T)}function u(v,T,S,A){var b="C;Y"+(S+1)+";X"+(A+1)+";K";switch(v.t){case"n":b+=v.v||0,v.f&&!v.F&&(b+=";E"+y7(v.f,{r:S,c:A}));break;case"b":b+=v.v?"TRUE":"FALSE";break;case"e":b+=v.w||v.v;break;case"d":b+='"'+(v.w||v.v)+'"';break;case"s":b+='"'+v.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(v,T){T.forEach(function(S,A){var b="F;W"+(A+1)+" "+(A+1)+" ";S.hidden?b+="0":(typeof S.width=="number"&&!S.wpx&&(S.wpx=xp(S.width)),typeof S.wpx=="number"&&!S.wch&&(S.wch=vp(S.wpx)),typeof S.wch=="number"&&(b+=Math.round(S.wch))),b.charAt(b.length-1)!=" "&&v.push(b)})}function h(v,T){T.forEach(function(S,A){var b="F;";S.hidden?b+="M0;":S.hpt?b+="M"+20*S.hpt+";":S.hpx&&(b+="M"+20*vI(S.hpx)+";"),b.length>2&&v.push(b+"R"+(A+1))})}function x(v,T){var S=["ID;PWXL;N;E"],A=[],b=qn(v["!ref"]),R,B=Array.isArray(v),D=`\r
`;S.push("P;PGeneral"),S.push("F;P0;DG0G8;M255"),v["!cols"]&&d(S,v["!cols"]),v["!rows"]&&h(S,v["!rows"]),S.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var L=b.s.r;L<=b.e.r;++L)for(var z=b.s.c;z<=b.e.c;++z){var O=Ct({r:L,c:z});R=B?(v[L]||[])[z]:v[O],!(!R||R.v==null&&(!R.f||R.F))&&A.push(u(R,v,L,z))}return S.join(D)+D+A.join(D)+D+"E"+D}return{to_workbook:c,to_sheet:o,from_sheet:x}})(),P9=(function(){function t(a,o){switch(o.type){case"base64":return e($s(a),o);case"binary":return e(a,o);case"buffer":return e(Wt&&Buffer.isBuffer(a)?a.toString("binary"):Gl(a),o);case"array":return e(Ol(a),o)}throw new Error("Unrecognized type "+o.type)}function e(a,o){for(var c=a.split(`
`),u=-1,d=-1,h=0,x=[];h!==c.length;++h){if(c[h].trim()==="BOT"){x[++u]=[],d=0;continue}if(!(u<0)){var v=c[h].trim().split(","),T=v[0],S=v[1];++h;for(var A=c[h]||"";(A.match(/["]/g)||[]).length&1&&h<c.length-1;)A+=`
`+c[++h];switch(A=A.trim(),+T){case-1:if(A==="BOT"){x[++u]=[],d=0;continue}else if(A!=="EOD")throw new Error("Unrecognized DIF special command "+A);break;case 0:A==="TRUE"?x[u][d]=!0:A==="FALSE"?x[u][d]=!1:isNaN(Ma(S))?isNaN(lu(S).getDate())?x[u][d]=S:x[u][d]=Cr(S):x[u][d]=Ma(S),++d;break;case 1:A=A.slice(1,A.length-1),A=A.replace(/""/g,'"'),A&&A.match(/^=".*"$/)&&(A=A.slice(2,-1)),x[u][d++]=A!==""?A:null;break}if(A==="EOD")break}}return o&&o.sheetRows&&(x=x.slice(0,o.sheetRows)),x}function n(a,o){return _u(t(a,o),o)}function r(a,o){return Jo(n(a,o),o)}var s=(function(){var a=function(u,d,h,x,v){u.push(d),u.push(h+","+x),u.push('"'+v.replace(/"/g,'""')+'"')},o=function(u,d,h,x){u.push(d+","+h),u.push(d==1?'"'+x.replace(/"/g,'""')+'"':x)};return function(u){var d=[],h=qn(u["!ref"]),x,v=Array.isArray(u);a(d,"TABLE",0,1,"sheetjs"),a(d,"VECTORS",0,h.e.r-h.s.r+1,""),a(d,"TUPLES",0,h.e.c-h.s.c+1,""),a(d,"DATA",0,0,"");for(var T=h.s.r;T<=h.e.r;++T){o(d,-1,0,"BOT");for(var S=h.s.c;S<=h.e.c;++S){var A=Ct({r:T,c:S});if(x=v?(u[T]||[])[S]:u[A],!x){o(d,1,0,"");continue}switch(x.t){case"n":var b=x.w;!b&&x.v!=null&&(b=x.v),b==null?x.f&&!x.F?o(d,1,0,"="+x.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,x.v?1:0,x.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(x.v)?x.v:'="'+x.v+'"');break;case"d":x.w||(x.w=da(x.z||Dt[14],gs(Cr(x.v)))),o(d,0,x.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var R=`\r
`,B=d.join(R);return B}})();return{to_workbook:r,to_sheet:n,from_sheet:s}})(),F9=(function(){function t(x){return x.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(x){return x.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(x,v){for(var T=x.split(`
`),S=-1,A=-1,b=0,R=[];b!==T.length;++b){var B=T[b].trim().split(":");if(B[0]==="cell"){var D=ps(B[1]);if(R.length<=D.r)for(S=R.length;S<=D.r;++S)R[S]||(R[S]=[]);switch(S=D.r,A=D.c,B[2]){case"t":R[S][A]=t(B[3]);break;case"v":R[S][A]=+B[3];break;case"vtf":var L=B[B.length-1];case"vtc":B[3]==="nl"?R[S][A]=!!+B[4]:R[S][A]=+B[4],B[2]=="vtf"&&(R[S][A]=[R[S][A],L])}}}return v&&v.sheetRows&&(R=R.slice(0,v.sheetRows)),R}function r(x,v){return _u(n(x,v),v)}function s(x,v){return Jo(r(x,v),v)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,c=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function d(x){if(!x||!x["!ref"])return"";for(var v=[],T=[],S,A="",b=yu(x["!ref"]),R=Array.isArray(x),B=b.s.r;B<=b.e.r;++B)for(var D=b.s.c;D<=b.e.c;++D)if(A=Ct({r:B,c:D}),S=R?(x[B]||[])[D]:x[A],!(!S||S.v==null||S.t==="z")){switch(T=["cell",A,"t"],S.t){case"s":case"str":T.push(e(S.v));break;case"n":S.f?(T[2]="vtf",T[3]="n",T[4]=S.v,T[5]=e(S.f)):(T[2]="v",T[3]=S.v);break;case"b":T[2]="vt"+(S.f?"f":"c"),T[3]="nl",T[4]=S.v?"1":"0",T[5]=e(S.f||(S.v?"TRUE":"FALSE"));break;case"d":var L=gs(Cr(S.v));T[2]="vtc",T[3]="nd",T[4]=""+L,T[5]=S.w||da(S.z||Dt[14],L);break;case"e":continue}v.push(T.join(":"))}return v.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),v.push("valueformat:1:text-wiki"),v.join(`
`)}function h(x){return[a,o,c,o,d(x),u].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:h}})(),md=(function(){function t(h,x,v,T,S){S.raw?x[v][T]=h:h===""||(h==="TRUE"?x[v][T]=!0:h==="FALSE"?x[v][T]=!1:isNaN(Ma(h))?isNaN(lu(h).getDate())?x[v][T]=h:x[v][T]=Cr(h):x[v][T]=Ma(h))}function e(h,x){var v=x||{},T=[];if(!h||h.length===0)return T;for(var S=h.split(/[\r\n]/),A=S.length-1;A>=0&&S[A].length===0;)--A;for(var b=10,R=0,B=0;B<=A;++B)R=S[B].indexOf(" "),R==-1?R=S[B].length:R++,b=Math.max(b,R);for(B=0;B<=A;++B){T[B]=[];var D=0;for(t(S[B].slice(0,b).trim(),T,B,D,v),D=1;D<=(S[B].length-b)/10+1;++D)t(S[B].slice(b+(D-1)*10,b+D*10).trim(),T,B,D,v)}return v.sheetRows&&(T=T.slice(0,v.sheetRows)),T}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(h){for(var x={},v=!1,T=0,S=0;T<h.length;++T)(S=h.charCodeAt(T))==34?v=!v:!v&&S in n&&(x[S]=(x[S]||0)+1);S=[];for(T in x)Object.prototype.hasOwnProperty.call(x,T)&&S.push([x[T],T]);if(!S.length){x=r;for(T in x)Object.prototype.hasOwnProperty.call(x,T)&&S.push([x[T],T])}return S.sort(function(A,b){return A[0]-b[0]||r[A[1]]-r[b[1]]}),n[S.pop()[1]]||44}function a(h,x){var v=x||{},T="",S=v.dense?[]:{},A={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(T=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(T=h.charAt(4),h=h.slice(6)):T=s(h.slice(0,1024)):v&&v.FS?T=v.FS:T=s(h.slice(0,1024));var b=0,R=0,B=0,D=0,L=0,z=T.charCodeAt(0),O=!1,I=0,C=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var N=v.dateNF!=null?qL(v.dateNF):null;function F(){var U=h.slice(D,L),M={};if(U.charAt(0)=='"'&&U.charAt(U.length-1)=='"'&&(U=U.slice(1,-1).replace(/""/g,'"')),U.length===0)M.t="z";else if(v.raw)M.t="s",M.v=U;else if(U.trim().length===0)M.t="s",M.v=U;else if(U.charCodeAt(0)==61)U.charCodeAt(1)==34&&U.charCodeAt(U.length-1)==34?(M.t="s",M.v=U.slice(2,-1).replace(/""/g,'"')):E7(U)?(M.t="n",M.f=U.slice(1)):(M.t="s",M.v=U);else if(U=="TRUE")M.t="b",M.v=!0;else if(U=="FALSE")M.t="b",M.v=!1;else if(!isNaN(B=Ma(U)))M.t="n",v.cellText!==!1&&(M.w=U),M.v=B;else if(!isNaN(lu(U).getDate())||N&&U.match(N)){M.z=v.dateNF||Dt[14];var j=0;N&&U.match(N)&&(U=KL(U,v.dateNF,U.match(N)||[]),j=1),v.cellDates?(M.t="d",M.v=Cr(U,j)):(M.t="n",M.v=gs(Cr(U,j))),v.cellText!==!1&&(M.w=da(M.z,M.v instanceof Date?gs(M.v):M.v)),v.cellNF||delete M.z}else M.t="s",M.v=U;if(M.t=="z"||(v.dense?(S[b]||(S[b]=[]),S[b][R]=M):S[Ct({c:R,r:b})]=M),D=L+1,C=h.charCodeAt(D),A.e.c<R&&(A.e.c=R),A.e.r<b&&(A.e.r=b),I==z)++R;else if(R=0,++b,v.sheetRows&&v.sheetRows<=b)return!0}e:for(;L<h.length;++L)switch(I=h.charCodeAt(L)){case 34:C===34&&(O=!O);break;case z:case 10:case 13:if(!O&&F())break e;break}return L-D>0&&F(),S["!ref"]=tn(A),S}function o(h,x){return!(x&&x.PRN)||x.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?a(h,x):_u(e(h,x),x)}function c(h,x){var v="",T=x.type=="string"?[0,0,0,0]:W1(h,x);switch(x.type){case"base64":v=$s(h);break;case"binary":v=h;break;case"buffer":x.codepage==65001?v=h.toString("utf8"):x.codepage&&typeof fd<"u"||(v=Wt&&Buffer.isBuffer(h)?h.toString("binary"):Gl(h));break;case"array":v=Ol(h);break;case"string":v=h;break;default:throw new Error("Unrecognized type "+x.type)}return T[0]==239&&T[1]==187&&T[2]==191?v=Dn(v.slice(3)):x.type!="string"&&x.type!="buffer"&&x.codepage==65001?v=Dn(v):x.type=="binary"&&typeof fd<"u",v.slice(0,19)=="socialcalc:version:"?F9.to_sheet(x.type=="string"?v:Dn(v),x):o(v,x)}function u(h,x){return Jo(c(h,x),x)}function d(h){for(var x=[],v=qn(h["!ref"]),T,S=Array.isArray(h),A=v.s.r;A<=v.e.r;++A){for(var b=[],R=v.s.c;R<=v.e.c;++R){var B=Ct({r:A,c:R});if(T=S?(h[A]||[])[R]:h[B],!T||T.v==null){b.push("          ");continue}for(var D=(T.w||(Li(T),T.w)||"").slice(0,10);D.length<10;)D+=" ";b.push(D+(R===0?" ":""))}x.push(b.join(""))}return x.join(`
`)}return{to_workbook:u,to_sheet:c,from_sheet:d}})();function O9(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var s=M9.to_workbook(t,n);return n.WTF=r,s}catch(a){if(n.WTF=r,!a.message.match(/SYLK bad record ID/)&&r)throw a;return md.to_workbook(t,e)}}var Kf=(function(){function t(H,Q,te){if(H){Br(H,H.l||0);for(var W=te.Enum||Ie;H.l<H.length;){var le=H.read_shift(2),ge=W[le]||W[65535],Ne=H.read_shift(2),be=H.l+Ne,ke=ge.f&&ge.f(H,Ne,te);if(H.l=be,Q(ke,ge,le))return}}}function e(H,Q){switch(Q.type){case"base64":return n(Ia($s(H)),Q);case"binary":return n(Ia(H),Q);case"buffer":case"array":return n(H,Q)}throw"Unsupported type "+Q.type}function n(H,Q){if(!H)return H;var te=Q||{},W=te.dense?[]:{},le="Sheet1",ge="",Ne=0,be={},ke=[],$e=[],re={s:{r:0,c:0},e:{r:0,c:0}},ft=te.sheetRows||0;if(H[2]==0&&(H[3]==8||H[3]==9)&&H.length>=16&&H[14]==5&&H[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(H[2]==2)te.Enum=Ie,t(H,function(Ve,st,it){switch(it){case 0:te.vers=Ve,Ve>=4096&&(te.qpro=!0);break;case 6:re=Ve;break;case 204:Ve&&(ge=Ve);break;case 222:ge=Ve;break;case 15:case 51:te.qpro||(Ve[1].v=Ve[1].v.slice(1));case 13:case 14:case 16:it==14&&(Ve[2]&112)==112&&(Ve[2]&15)>1&&(Ve[2]&15)<15&&(Ve[1].z=te.dateNF||Dt[14],te.cellDates&&(Ve[1].t="d",Ve[1].v=Kp(Ve[1].v))),te.qpro&&Ve[3]>Ne&&(W["!ref"]=tn(re),be[le]=W,ke.push(le),W=te.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},Ne=Ve[3],le=ge||"Sheet"+(Ne+1),ge="");var dt=te.dense?(W[Ve[0].r]||[])[Ve[0].c]:W[Ct(Ve[0])];if(dt){dt.t=Ve[1].t,dt.v=Ve[1].v,Ve[1].z!=null&&(dt.z=Ve[1].z),Ve[1].f!=null&&(dt.f=Ve[1].f);break}te.dense?(W[Ve[0].r]||(W[Ve[0].r]=[]),W[Ve[0].r][Ve[0].c]=Ve[1]):W[Ct(Ve[0])]=Ve[1];break}},te);else if(H[2]==26||H[2]==14)te.Enum=Y,H[2]==14&&(te.qpro=!0,H.l=0),t(H,function(Ve,st,it){switch(it){case 204:le=Ve;break;case 22:Ve[1].v=Ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ve[3]>Ne&&(W["!ref"]=tn(re),be[le]=W,ke.push(le),W=te.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},Ne=Ve[3],le="Sheet"+(Ne+1)),ft>0&&Ve[0].r>=ft)break;te.dense?(W[Ve[0].r]||(W[Ve[0].r]=[]),W[Ve[0].r][Ve[0].c]=Ve[1]):W[Ct(Ve[0])]=Ve[1],re.e.c<Ve[0].c&&(re.e.c=Ve[0].c),re.e.r<Ve[0].r&&(re.e.r=Ve[0].r);break;case 27:Ve[14e3]&&($e[Ve[14e3][0]]=Ve[14e3][1]);break;case 1537:$e[Ve[0]]=Ve[1],Ve[0]==Ne&&(le=Ve[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+H[2]);if(W["!ref"]=tn(re),be[ge||le]=W,ke.push(ge||le),!$e.length)return{SheetNames:ke,Sheets:be};for(var Je={},Qe=[],Ge=0;Ge<$e.length;++Ge)be[ke[Ge]]?(Qe.push($e[Ge]||ke[Ge]),Je[$e[Ge]]=be[$e[Ge]]||be[ke[Ge]]):(Qe.push($e[Ge]),Je[$e[Ge]]={"!ref":"A1"});return{SheetNames:Qe,Sheets:Je}}function r(H,Q){var te=Q||{};if(+te.codepage>=0&&ka(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var W=ov(),le=qn(H["!ref"]),ge=Array.isArray(H),Ne=[];Na(W,0,a(1030)),Na(W,6,u(le));for(var be=Math.min(le.e.r,8191),ke=le.s.r;ke<=be;++ke)for(var $e=Hr(ke),re=le.s.c;re<=le.e.c;++re){ke===le.s.r&&(Ne[re]=yr(re));var ft=Ne[re]+$e,Je=ge?(H[ke]||[])[re]:H[ft];if(!(!Je||Je.t=="z"))if(Je.t=="n")(Je.v|0)==Je.v&&Je.v>=-32768&&Je.v<=32767?Na(W,13,T(ke,re,Je.v)):Na(W,14,A(ke,re,Je.v));else{var Qe=Li(Je);Na(W,15,x(ke,re,Qe.slice(0,239)))}}return Na(W,1),W.end()}function s(H,Q){var te=Q||{};if(+te.codepage>=0&&ka(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var W=ov();Na(W,0,o(H));for(var le=0,ge=0;le<H.SheetNames.length;++le)(H.Sheets[H.SheetNames[le]]||{})["!ref"]&&Na(W,27,K(H.SheetNames[le],ge++));var Ne=0;for(le=0;le<H.SheetNames.length;++le){var be=H.Sheets[H.SheetNames[le]];if(!(!be||!be["!ref"])){for(var ke=qn(be["!ref"]),$e=Array.isArray(be),re=[],ft=Math.min(ke.e.r,8191),Je=ke.s.r;Je<=ft;++Je)for(var Qe=Hr(Je),Ge=ke.s.c;Ge<=ke.e.c;++Ge){Je===ke.s.r&&(re[Ge]=yr(Ge));var Ve=re[Ge]+Qe,st=$e?(be[Je]||[])[Ge]:be[Ve];if(!(!st||st.t=="z"))if(st.t=="n")Na(W,23,F(Je,Ge,Ne,st.v));else{var it=Li(st);Na(W,22,I(Je,Ge,Ne,it.slice(0,239)))}}++Ne}}return Na(W,1),W.end()}function a(H){var Q=xr(2);return Q.write_shift(2,H),Q}function o(H){var Q=xr(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var te=0,W=0,le=0,ge=0;ge<H.SheetNames.length;++ge){var Ne=H.SheetNames[ge],be=H.Sheets[Ne];if(!(!be||!be["!ref"])){++le;var ke=yu(be["!ref"]);te<ke.e.r&&(te=ke.e.r),W<ke.e.c&&(W=ke.e.c)}}return te>8191&&(te=8191),Q.write_shift(2,te),Q.write_shift(1,le),Q.write_shift(1,W),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function c(H,Q,te){var W={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&te.qpro?(W.s.c=H.read_shift(1),H.l++,W.s.r=H.read_shift(2),W.e.c=H.read_shift(1),H.l++,W.e.r=H.read_shift(2),W):(W.s.c=H.read_shift(2),W.s.r=H.read_shift(2),Q==12&&te.qpro&&(H.l+=2),W.e.c=H.read_shift(2),W.e.r=H.read_shift(2),Q==12&&te.qpro&&(H.l+=2),W.s.c==65535&&(W.s.c=W.e.c=W.s.r=W.e.r=0),W)}function u(H){var Q=xr(8);return Q.write_shift(2,H.s.c),Q.write_shift(2,H.s.r),Q.write_shift(2,H.e.c),Q.write_shift(2,H.e.r),Q}function d(H,Q,te){var W=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(W[0].c=H.read_shift(1),W[3]=H.read_shift(1),W[0].r=H.read_shift(2),H.l+=2):(W[2]=H.read_shift(1),W[0].c=H.read_shift(2),W[0].r=H.read_shift(2)),W}function h(H,Q,te){var W=H.l+Q,le=d(H,Q,te);if(le[1].t="s",te.vers==20768){H.l++;var ge=H.read_shift(1);return le[1].v=H.read_shift(ge,"utf8"),le}return te.qpro&&H.l++,le[1].v=H.read_shift(W-H.l,"cstr"),le}function x(H,Q,te){var W=xr(7+te.length);W.write_shift(1,255),W.write_shift(2,Q),W.write_shift(2,H),W.write_shift(1,39);for(var le=0;le<W.length;++le){var ge=te.charCodeAt(le);W.write_shift(1,ge>=128?95:ge)}return W.write_shift(1,0),W}function v(H,Q,te){var W=d(H,Q,te);return W[1].v=H.read_shift(2,"i"),W}function T(H,Q,te){var W=xr(7);return W.write_shift(1,255),W.write_shift(2,Q),W.write_shift(2,H),W.write_shift(2,te,"i"),W}function S(H,Q,te){var W=d(H,Q,te);return W[1].v=H.read_shift(8,"f"),W}function A(H,Q,te){var W=xr(13);return W.write_shift(1,255),W.write_shift(2,Q),W.write_shift(2,H),W.write_shift(8,te,"f"),W}function b(H,Q,te){var W=H.l+Q,le=d(H,Q,te);if(le[1].v=H.read_shift(8,"f"),te.qpro)H.l=W;else{var ge=H.read_shift(2);L(H.slice(H.l,H.l+ge),le),H.l+=ge}return le}function R(H,Q,te){var W=Q&32768;return Q&=-32769,Q=(W?H:0)+(Q>=8192?Q-16384:Q),(W?"":"$")+(te?yr(Q):Hr(Q))}var B={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},D=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function L(H,Q){Br(H,0);for(var te=[],W=0,le="",ge="",Ne="",be="";H.l<H.length;){var ke=H[H.l++];switch(ke){case 0:te.push(H.read_shift(8,"f"));break;case 1:ge=R(Q[0].c,H.read_shift(2),!0),le=R(Q[0].r,H.read_shift(2),!1),te.push(ge+le);break;case 2:{var $e=R(Q[0].c,H.read_shift(2),!0),re=R(Q[0].r,H.read_shift(2),!1);ge=R(Q[0].c,H.read_shift(2),!0),le=R(Q[0].r,H.read_shift(2),!1),te.push($e+re+":"+ge+le)}break;case 3:if(H.l<H.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(H.read_shift(2));break;case 6:{for(var ft="";ke=H[H.l++];)ft+=String.fromCharCode(ke);te.push('"'+ft.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:be=te.pop(),Ne=te.pop(),te.push(["AND","OR"][ke-20]+"("+Ne+","+be+")");break;default:if(ke<32&&D[ke])be=te.pop(),Ne=te.pop(),te.push(Ne+D[ke]+be);else if(B[ke]){if(W=B[ke][1],W==69&&(W=H[H.l++]),W>te.length){console.error("WK1 bad formula parse 0x"+ke.toString(16)+":|"+te.join("|")+"|");return}var Je=te.slice(-W);te.length-=W,te.push(B[ke][0]+"("+Je.join(",")+")")}else return ke<=7?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=24?console.error("WK1 unsupported op "+ke.toString(16)):ke<=30?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=115?console.error("WK1 unsupported function opcode "+ke.toString(16)):console.error("WK1 unrecognized opcode "+ke.toString(16))}}te.length==1?Q[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function z(H){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=H.read_shift(2),Q[3]=H[H.l++],Q[0].c=H[H.l++],Q}function O(H,Q){var te=z(H);return te[1].t="s",te[1].v=H.read_shift(Q-4,"cstr"),te}function I(H,Q,te,W){var le=xr(6+W.length);le.write_shift(2,H),le.write_shift(1,te),le.write_shift(1,Q),le.write_shift(1,39);for(var ge=0;ge<W.length;++ge){var Ne=W.charCodeAt(ge);le.write_shift(1,Ne>=128?95:Ne)}return le.write_shift(1,0),le}function C(H,Q){var te=z(H);te[1].v=H.read_shift(2);var W=te[1].v>>1;if(te[1].v&1)switch(W&7){case 0:W=(W>>3)*5e3;break;case 1:W=(W>>3)*500;break;case 2:W=(W>>3)/20;break;case 3:W=(W>>3)/200;break;case 4:W=(W>>3)/2e3;break;case 5:W=(W>>3)/2e4;break;case 6:W=(W>>3)/16;break;case 7:W=(W>>3)/64;break}return te[1].v=W,te}function N(H,Q){var te=z(H),W=H.read_shift(4),le=H.read_shift(4),ge=H.read_shift(2);if(ge==65535)return W===0&&le===3221225472?(te[1].t="e",te[1].v=15):W===0&&le===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var Ne=ge&32768;return ge=(ge&32767)-16446,te[1].v=(1-Ne*2)*(le*Math.pow(2,ge+32)+W*Math.pow(2,ge)),te}function F(H,Q,te,W){var le=xr(14);if(le.write_shift(2,H),le.write_shift(1,te),le.write_shift(1,Q),W==0)return le.write_shift(4,0),le.write_shift(4,0),le.write_shift(2,65535),le;var ge=0,Ne=0,be=0,ke=0;return W<0&&(ge=1,W=-W),Ne=Math.log2(W)|0,W/=Math.pow(2,Ne-31),ke=W>>>0,(ke&2147483648)==0&&(W/=2,++Ne,ke=W>>>0),W-=ke,ke|=2147483648,ke>>>=0,W*=Math.pow(2,32),be=W>>>0,le.write_shift(4,be),le.write_shift(4,ke),Ne+=16383+(ge?32768:0),le.write_shift(2,Ne),le}function U(H,Q){var te=N(H);return H.l+=Q-14,te}function M(H,Q){var te=z(H),W=H.read_shift(4);return te[1].v=W>>6,te}function j(H,Q){var te=z(H),W=H.read_shift(8,"f");return te[1].v=W,te}function he(H,Q){var te=j(H);return H.l+=Q-10,te}function Se(H,Q){return H[H.l+Q-1]==0?H.read_shift(Q,"cstr"):""}function ie(H,Q){var te=H[H.l++];te>Q-1&&(te=Q-1);for(var W="";W.length<te;)W+=String.fromCharCode(H[H.l++]);return W}function fe(H,Q,te){if(!(!te.qpro||Q<21)){var W=H.read_shift(1);H.l+=17,H.l+=1,H.l+=2;var le=H.read_shift(Q-21,"cstr");return[W,le]}}function ce(H,Q){for(var te={},W=H.l+Q;H.l<W;){var le=H.read_shift(2);if(le==14e3){for(te[le]=[0,""],te[le][0]=H.read_shift(2);H[H.l];)te[le][1]+=String.fromCharCode(H[H.l]),H.l++;H.l++}}return te}function K(H,Q){var te=xr(5+H.length);te.write_shift(2,14e3),te.write_shift(2,Q);for(var W=0;W<H.length;++W){var le=H.charCodeAt(W);te[te.l++]=le>127?95:le}return te[te.l++]=0,te}var Ie={0:{n:"BOF",f:dr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:c},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:v},14:{n:"NUMBER",f:S},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Se},222:{n:"SHEETNAMELP",f:ie},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:O},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:U},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:M},38:{n:"??"},39:{n:"NUMBER27",f:j},40:{n:"FORMULA28",f:he},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Se},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}})();function L9(t){var e={},n=t.match(ss),r=0,s=!1;if(n)for(;r!=n.length;++r){var a=Et(n[r]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=b1[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var U9=(function(){var t=hd("t"),e=hd("rPr");function n(a){var o=a.match(t);if(!o)return{t:"s",v:""};var c={t:"s",v:nn(o[1])},u=a.match(e);return u&&(c.s=L9(u[1])),c}var r=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(r,"").split(s).map(n).filter(function(c){return c.v})}})(),V9=(function(){var e=/(\r\n|\n)/g;function n(s,a,o){var c=[];s.u&&c.push("text-decoration: underline;"),s.uval&&c.push("text-underline-style:"+s.uval+";"),s.sz&&c.push("font-size:"+s.sz+"pt;"),s.outline&&c.push("text-effect: outline;"),s.shadow&&c.push("text-shadow: auto;"),a.push('<span style="'+c.join("")+'">'),s.b&&(a.push("<b>"),o.push("</b>")),s.i&&(a.push("<i>"),o.push("</i>")),s.strike&&(a.push("<s>"),o.push("</s>"));var u=s.valign||"";return u=="superscript"||u=="super"?u="sup":u=="subscript"&&(u="sub"),u!=""&&(a.push("<"+u+">"),o.push("</"+u+">")),o.push("</span>"),s}function r(s){var a=[[],s.v,[]];return s.v?(s.s&&n(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(r).join("")}})(),B9=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,z9=/<(?:\w+:)?r>/,j9=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function H1(t,e){var n=e?e.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=nn(Dn(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Dn(t),n&&(r.h=M1(r.t))):t.match(z9)&&(r.r=Dn(t),r.t=nn(Dn((t.replace(j9,"").match(B9)||[]).join("").replace(ss,""))),n&&(r.h=V9(U9(r.r)))),r):{t:""}}var H9=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,G9=/<(?:\w+:)?(?:si|sstItem)>/g,$9=/<\/(?:\w+:)?(?:si|sstItem)>/;function q9(t,e){var n=[],r="";if(!t)return n;var s=t.match(H9);if(s){r=s[2].replace(G9,"").split($9);for(var a=0;a!=r.length;++a){var o=H1(r[a].trim(),e);o!=null&&(n[n.length]=o)}s=Et(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}function K9(t){return[t.read_shift(4),t.read_shift(4)]}function J9(t,e){var n=[],r=!1;return ji(t,function(a,o,c){switch(c){case 159:n.Count=a[0],n.Unique=a[1];break;case 19:n.push(a);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(o.T,!r||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}),n}function dI(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function Pi(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function Y9(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Pi(t,4),e.U=Pi(t,4),e.W=Pi(t,4),e}function W9(t){for(var e=t.read_shift(4),n=t.l+e-4,r={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=a,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function Z9(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(W9(t));return e}function X9(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Q9(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Pi(t,4),e.U=Pi(t,4),e.W=Pi(t,4),e}function eV(t){var e=Q9(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function hI(t,e){var n=t.l+e,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var s=!1;switch(r.AlgID){case 26126:case 26127:case 26128:s=r.Flags==36;break;case 26625:s=r.Flags==4;break;case 0:s=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function pI(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function tV(t){var e=Pi(t);switch(e.Minor){case 2:return[e.Minor,nV(t)];case 3:return[e.Minor,rV()];case 4:return[e.Minor,sV(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function nV(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=hI(t,n),s=pI(t,t.length-t.l);return{t:"Std",h:r,v:s}}function rV(){throw new Error("File is password-protected: ECMA-376 Extensible")}function sV(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(ss,function(a){var o=Et(a);switch(ii(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(c){r[c]=o[c]});break;case"<dataIntegrity":r.encryptedHmacKey=o.encryptedHmacKey,r.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(o);break;default:throw o[0]}}),r}function aV(t,e){var n={},r=n.EncryptionVersionInfo=Pi(t,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,n.EncryptionHeader=hI(t,s),e-=s,n.EncryptionVerifier=pI(t,e),n}function iV(t){var e={},n=e.EncryptionVersionInfo=Pi(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function oV(t){var e=0,n,r=dI(t),s=r.length+1,a,o,c,u,d;for(n=Lo(s),n[0]=r.length,a=1;a!=s;++a)n[a]=r[a-1];for(a=s-1;a>=0;--a)o=n[a],c=(e&16384)===0?0:1,u=e<<1&32767,d=c|u,e=d^o;return e^52811}var mI=(function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(o){return(o/2|o*128)&255},s=function(o,c){return r(o^c)},a=function(o){for(var c=e[o.length-1],u=104,d=o.length-1;d>=0;--d)for(var h=o[d],x=0;x!=7;++x)h&64&&(c^=n[u]),h*=2,--u;return c};return function(o){for(var c=dI(o),u=a(c),d=c.length,h=Lo(16),x=0;x!=16;++x)h[x]=0;var v,T,S;for((d&1)===1&&(v=u>>8,h[d]=s(t[0],v),--d,v=u&255,T=c[c.length-1],h[d]=s(T,v));d>0;)--d,v=u>>8,h[d]=s(c[d],v),--d,v=u&255,h[d]=s(c[d],v);for(d=15,S=15-c.length;S>0;)v=u>>8,h[d]=s(t[S],v),--d,--S,v=u&255,h[d]=s(c[d],v),--d,--S;return h}})(),lV=function(t,e,n,r,s){s||(s=e),r||(r=mI(t));var a,o;for(a=0;a!=e.length;++a)o=e[a],o^=r[n],o=(o>>5|o<<3)&255,s[a]=o,++n;return[s,n,r]},cV=function(t){var e=0,n=mI(t);return function(r){var s=lV("",r,e,n);return e=s[1],s[0]}};function uV(t,e,n,r){var s={key:dr(t),verificationBytes:dr(t)};return n.password&&(s.verifier=oV(n.password)),r.valid=s.verificationBytes===s.verifier,r.valid&&(r.insitu=cV(n.password)),s}function fV(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=iV(t):r.Data=aV(t,e),r}function dV(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?fV(t,e-2,r):uV(t,n.biff>=8?e:e-2,n,r),r}var hV=(function(){function t(s,a){switch(a.type){case"base64":return e($s(s),a);case"binary":return e(s,a);case"buffer":return e(Wt&&Buffer.isBuffer(s)?s.toString("binary"):Gl(s),a);case"array":return e(Ol(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var o=a||{},c=o.dense?[]:{},u=s.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(h,x){Array.isArray(c)&&(c[x]=[]);for(var v=/\\\w+\b/g,T=0,S,A=-1;S=v.exec(h);){switch(S[0]){case"\\cell":var b=h.slice(T,v.lastIndex-S[0].length);if(b[0]==" "&&(b=b.slice(1)),++A,b.length){var R={v:b,t:"s"};Array.isArray(c)?c[x][A]=R:c[Ct({r:x,c:A})]=R}break}T=v.lastIndex}A>d.e.c&&(d.e.c=A)}),c["!ref"]=tn(d),c}function n(s,a){return Jo(t(s,a),a)}function r(s){for(var a=["{\\rtf1\\ansi"],o=qn(s["!ref"]),c,u=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){a.push("\\trowd\\trautofit1");for(var h=o.s.c;h<=o.e.c;++h)a.push("\\cellx"+(h+1));for(a.push("\\pard\\intbl"),h=o.s.c;h<=o.e.c;++h){var x=Ct({r:d,c:h});c=u?(s[d]||[])[h]:s[x],!(!c||c.v==null&&(!c.f||c.F))&&(a.push(" "+(c.w||(Li(c),c.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}})();function pV(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function gd(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function mV(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(e,n,r),a=Math.min(e,n,r),o=s-a;if(o===0)return[0,0,e];var c=0,u=0,d=s+a;switch(u=o/(d>1?2-d:d),s){case e:c=((n-r)/o+6)%6;break;case n:c=(r-e)/o+2;break;case r:c=(e-n)/o+4;break}return[c/6,u,d/2]}function gV(t){var e=t[0],n=t[1],r=t[2],s=n*2*(r<.5?r:1-r),a=r-s/2,o=[a,a,a],c=6*e,u;if(n!==0)switch(c|0){case 0:case 6:u=s*c,o[0]+=s,o[1]+=u;break;case 1:u=s*(2-c),o[0]+=u,o[1]+=s;break;case 2:u=s*(c-2),o[1]+=s,o[2]+=u;break;case 3:u=s*(4-c),o[1]+=u,o[2]+=s;break;case 4:u=s*(c-4),o[2]+=s,o[0]+=u;break;case 5:u=s*(6-c),o[2]+=u,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function gp(t,e){if(e===0)return t;var n=mV(pV(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),gd(gV(n))}var gI=6,xV=15,vV=1,hs=gI;function xp(t){return Math.floor((t+Math.round(128/hs)/256)*hs)}function vp(t){return Math.floor((t-5)/hs*100+.5)/100}function fv(t){return Math.round((t*hs+5)/hs*256)/256}function wx(t){return fv(vp(xp(t)))}function G1(t){var e=Math.abs(t-wx(t)),n=hs;if(e>.005)for(hs=vV;hs<xV;++hs)Math.abs(t-wx(t))<=e&&(e=Math.abs(t-wx(t)),n=hs);hs=n}function cu(t){t.width?(t.wpx=xp(t.width),t.wch=vp(t.wpx),t.MDW=hs):t.wpx?(t.wch=vp(t.wpx),t.width=fv(t.wch),t.MDW=hs):typeof t.wch=="number"&&(t.width=fv(t.wch),t.wpx=xp(t.width),t.MDW=hs),t.customWidth&&delete t.customWidth}var yV=96,xI=yV;function vI(t){return t*96/xI}function xd(t){return t*xI/96}var _V={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function EV(t,e,n,r){e.Borders=[];var s={},a=!1;(t[0].match(ss)||[]).forEach(function(o){var c=Et(o);switch(ii(c[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},c.diagonalUp&&(s.diagonalUp=Un(c.diagonalUp)),c.diagonalDown&&(s.diagonalDown=Un(c.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+c[0]+" in borders")}})}function TV(t,e,n,r){e.Fills=[];var s={},a=!1;(t[0].match(ss)||[]).forEach(function(o){var c=Et(o);switch(ii(c[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":c.patternType&&(s.patternType=c.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),c.indexed&&(s.bgColor.indexed=parseInt(c.indexed,10)),c.theme&&(s.bgColor.theme=parseInt(c.theme,10)),c.tint&&(s.bgColor.tint=parseFloat(c.tint)),c.rgb&&(s.bgColor.rgb=c.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),c.theme&&(s.fgColor.theme=parseInt(c.theme,10)),c.tint&&(s.fgColor.tint=parseFloat(c.tint)),c.rgb!=null&&(s.fgColor.rgb=c.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+c[0]+" in fills")}})}function wV(t,e,n,r){e.Fonts=[];var s={},a=!1;(t[0].match(ss)||[]).forEach(function(o){var c=Et(o);switch(ii(c[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":c.val&&(s.name=Dn(c.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=c.val?Un(c.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=c.val?Un(c.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(c.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=c.val?Un(c.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=c.val?Un(c.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=c.val?Un(c.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=c.val?Un(c.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=c.val?Un(c.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":c.val&&(s.sz=+c.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":c.val&&(s.vertAlign=c.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":c.val&&(s.family=parseInt(c.val,10));break;case"<family/>":case"</family>":break;case"<scheme":c.val&&(s.scheme=c.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(c.val=="1")break;c.codepage=b1[parseInt(c.val,10)];break;case"<color":if(s.color||(s.color={}),c.auto&&(s.color.auto=Un(c.auto)),c.rgb)s.color.rgb=c.rgb.slice(-6);else if(c.indexed){s.color.index=parseInt(c.indexed,10);var u=Il[s.color.index];s.color.index==81&&(u=Il[1]),u||(u=Il[1]),s.color.rgb=u[0].toString(16)+u[1].toString(16)+u[2].toString(16)}else c.theme&&(s.color.theme=parseInt(c.theme,10),c.tint&&(s.color.tint=parseFloat(c.tint)),c.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=gp(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+c[0]+" in fonts")}})}function SV(t,e,n){e.NumberFmt=[];for(var r=ri(Dt),s=0;s<r.length;++s)e.NumberFmt[r[s]]=Dt[r[s]];var a=t[0].match(ss);if(a)for(s=0;s<a.length;++s){var o=Et(a[s]);switch(ii(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var c=nn(Dn(o.formatCode)),u=parseInt(o.numFmtId,10);if(e.NumberFmt[u]=c,u>0){if(u>392){for(u=392;u>60&&e.NumberFmt[u]!=null;--u);e.NumberFmt[u]=c}Nl(c,u)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var x0=["numFmtId","fillId","fontId","borderId","xfId"],v0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function AV(t,e,n){e.CellXf=[];var r,s=!1;(t[0].match(ss)||[]).forEach(function(a){var o=Et(a),c=0;switch(ii(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=o,delete r[0],c=0;c<x0.length;++c)r[x0[c]]&&(r[x0[c]]=parseInt(r[x0[c]],10));for(c=0;c<v0.length;++c)r[v0[c]]&&(r[v0[c]]=Un(r[v0[c]]));if(e.NumberFmt&&r.numFmtId>392){for(c=392;c>60;--c)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[c]){r.numFmtId=c;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var u={};o.vertical&&(u.vertical=o.vertical),o.horizontal&&(u.horizontal=o.horizontal),o.textRotation!=null&&(u.textRotation=o.textRotation),o.indent&&(u.indent=o.indent),o.wrapText&&(u.wrapText=Un(o.wrapText)),r.alignment=u;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var bV=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(c,u,d){var h={};if(!c)return h;c=c.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var x;return(x=c.match(e))&&SV(x,h,d),(x=c.match(s))&&wV(x,h,u,d),(x=c.match(r))&&TV(x,h,u,d),(x=c.match(a))&&EV(x,h,u,d),(x=c.match(n))&&AV(x,h,d),h}})();function CV(t,e){var n=t.read_shift(2),r=ns(t);return[n,r]}function NV(t,e,n){var r={};r.sz=t.read_shift(2)/20;var s=U8(t);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var a=t.read_shift(2);switch(a===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var c=t.read_shift(1);c>0&&(r.family=c);var u=t.read_shift(1);switch(u>0&&(r.charset=u),t.l++,r.color=L8(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ns(t),r}var IV=rs;function kV(t,e){var n=t.l+e,r=t.read_shift(2),s=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:s}}var RV=rs;function DV(t,e,n){var r={};r.NumberFmt=[];for(var s in Dt)r.NumberFmt[s]=Dt[s];r.CellXf=[],r.Fonts=[];var a=[],o=!1;return ji(t,function(u,d,h){switch(h){case 44:r.NumberFmt[u[0]]=u[1],Nl(u[1],u[0]);break;case 43:r.Fonts.push(u),u.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(u.color.rgb=gp(e.themeElements.clrScheme[u.color.theme].rgb,u.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&r.CellXf.push(u);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:a.push(h),o=!0;break;case 38:a.pop(),o=!1;break;default:if(d.T>0)a.push(h);else if(d.T<0)a.pop();else if(!o||n.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}var MV=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function PV(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(ss)||[]).forEach(function(s){var a=Et(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=a.val;break;case"<a:sysClr":r.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[MV.indexOf(a[0])]=r,r={}):r.name=a[0].slice(3,a[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function FV(){}function OV(){}var LV=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,UV=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,VV=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function BV(t,e,n){e.themeElements={};var r;[["clrScheme",LV,PV],["fontScheme",UV,FV],["fmtScheme",VV,OV]].forEach(function(s){if(!(r=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](r,e,n)})}var zV=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function yI(t,e){(!t||t.length===0)&&(t=jV());var n,r={};if(!(n=t.match(zV)))throw new Error("themeElements not found in theme");return BV(n[0],r,e),r.raw=t,r}function jV(t,e){var n=[kN];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function HV(t,e,n){var r=t.l+e,s=t.read_shift(4);if(s!==124226){if(!n.cellStyles){t.l=r;return}var a=t.slice(t.l);t.l=r;var o;try{o=IN(a,{type:"array"})}catch{return}var c=js(o,"theme/theme/theme1.xml",!0);if(c)return yI(c,n)}}function GV(t){return t.read_shift(4)}function $V(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=qV(t,4);break;case 2:e.xclrValue=aI(t);break;case 3:e.xclrValue=GV(t);break;case 4:t.l+=4;break}return t.l+=8,e}function qV(t,e){return rs(t,e)}function KV(t,e){return rs(t,e)}function JV(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=$V(t);break;case 6:r[1]=KV(t,n);break;case 14:case 15:r[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function YV(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(JV(t,n-t.l));return{ixfe:r,ext:a}}function WV(t,e){e.forEach(function(n){n[0]})}function ZV(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ns(t)}}function XV(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function QV(t){return t.l+=4,t.read_shift(4)!=0}function e7(t,e,n){var r={Types:[],Cell:[],Value:[]},s=n||{},a=[],o=!1,c=2;return ji(t,function(u,d,h){switch(h){case 335:r.Types.push({name:u.name});break;case 51:u.forEach(function(x){c==1?r.Cell.push({type:r.Types[x[0]-1].name,index:x[1]}):c==0&&r.Value.push({type:r.Types[x[0]-1].name,index:x[1]})});break;case 337:c=u?1:0;break;case 338:c=2;break;case 35:a.push(h),o=!0;break;case 36:a.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+h.toString(16))}}}),r}function t7(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var s=!1,a=2,o;return t.replace(ss,function(c){var u=Et(c);switch(ii(u[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:u.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<r.Types.length;++d)r.Types[d].name==u.name&&(o=r.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?r.Cell.push({type:r.Types[u.t-1].name,index:+u.v}):a==0&&r.Value.push({type:r.Types[u.t-1].name,index:+u.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+u.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+u[0]+" in metadata")}return c}),r}function n7(t){var e=[];if(!t)return e;var n=1;return(t.match(ss)||[]).forEach(function(r){var s=Et(r);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?n=s.i:s.i=n,e.push(s);break}}),e}function r7(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=Ct(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function s7(t,e,n){var r=[];return ji(t,function(a,o,c){switch(c){case 63:r.push(a);break;default:if(!o.T)throw new Error("Unexpected record 0x"+c.toString(16))}}),r}function a7(t,e,n,r){if(!t)return t;var s=r||{},a=!1;ji(t,function(c,u,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!u.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function i7(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}function G2(t,e,n,r){var s=Array.isArray(t),a;e.forEach(function(o){var c=ps(o.ref);if(s?(t[c.r]||(t[c.r]=[]),a=t[c.r][c.c]):a=t[o.ref],!a){a={t:"z"},s?t[c.r][c.c]=a:t[o.ref]=a;var u=qn(t["!ref"]||"BDWGO1000001:A1");u.s.r>c.r&&(u.s.r=c.r),u.e.r<c.r&&(u.e.r=c.r),u.s.c>c.c&&(u.s.c=c.c),u.e.c<c.c&&(u.e.c=c.c);var d=tn(u);d!==t["!ref"]&&(t["!ref"]=d)}a.c||(a.c=[]);var h={a:o.author,t:o.t,r:o.r,T:n};o.h&&(h.h=o.h);for(var x=a.c.length-1;x>=0;--x){if(!n&&a.c[x].T)return;n&&!a.c[x].T&&a.c.splice(x,1)}if(n&&r){for(x=0;x<r.length;++x)if(h.a==r[x].id){h.a=r[x].name||h.a;break}}a.c.push(h)})}function o7(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var c=o.match(/<(?:\w+:)?author[^>]*>(.*)/);c&&n.push(c[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var c=o.match(/<(?:\w+:)?comment[^>]*>/);if(c){var u=Et(c[0]),d={author:u.authorId&&n[u.authorId]||"sheetjsghost",ref:u.ref,guid:u.guid},h=ps(u.ref);if(!(e.sheetRows&&e.sheetRows<=h.r)){var x=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),v=!!x&&!!x[1]&&H1(x[1])||{r:"",t:"",h:""};d.r=v.r,v.r=="<t></t>"&&(v.t=v.h=""),d.t=(v.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(d.h=v.h),r.push(d)}}}}),r}function l7(t,e){var n=[],r=!1,s={},a=0;return t.replace(ss,function(c,u){var d=Et(c);switch(ii(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&n.push(s);break;case"<text>":case"<text":a=u+c.length;break;case"</text>":s.t=t.slice(a,u).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return c}),n}function c7(t,e){var n=[],r=!1;return t.replace(ss,function(a){var o=Et(a);switch(ii(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return a}),n}function u7(t){var e={};e.iauthor=t.read_shift(4);var n=ql(t);return e.rfx=n.s,e.ref=Ct(n.s),t.l+=16,e}var f7=ns;function d7(t,e){var n=[],r=[],s={},a=!1;return ji(t,function(c,u,d){switch(d){case 632:r.push(c);break;case 635:s=c;break;case 637:s.t=c.t,s.h=c.h,s.r=c.r;break;case 636:if(s.author=r[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!u.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}var h7="application/vnd.ms-office.vbaProject";function p7(t){var e=en.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");en.utils.cfb_add(e,s,t.FileIndex[r].content)}}),en.write(e)}function m7(){return{"!type":"dialog"}}function g7(){return{"!type":"dialog"}}function x7(){return{"!type":"macro"}}function v7(){return{"!type":"macro"}}var eu=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,s,a,o){var c=!1,u=!1;a.length==0?u=!0:a.charAt(0)=="["&&(u=!0,a=a.slice(1,-1)),o.length==0?c=!0:o.charAt(0)=="["&&(c=!0,o=o.slice(1,-1));var d=a.length>0?parseInt(a,10)|0:0,h=o.length>0?parseInt(o,10)|0:0;return c?h+=e.c:--h,u?d+=e.r:--d,s+(c?"":"$")+yr(h)+(u?"":"$")+Hr(d)}return function(s,a){return e=a,s.replace(t,n)}})(),_I=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,y7=(function(){return function(e,n){return e.replace(_I,function(r,s,a,o,c,u){var d=L1(o)-(a?0:n.c),h=O1(u)-(c?0:n.r),x=h==0?"":c?h+1:"["+h+"]",v=d==0?"":a?d+1:"["+d+"]";return s+"R"+x+"C"+v})}})();function EI(t,e){return t.replace(_I,function(n,r,s,a,o,c){return r+(s=="$"?s+a:yr(L1(a)+e.c))+(o=="$"?o+c:Hr(O1(c)+e.r))})}function _7(t,e,n){var r=yu(e),s=r.s,a=ps(n),o={r:a.r-s.r,c:a.c-s.c};return EI(t,o)}function E7(t){return t.length!=1}function $2(t){return t.replace(/_xlfn\./g,"")}function cr(t){t.l+=1}function Uo(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function TI(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return wI(t);n.biff==12&&(r=4)}var s=t.read_shift(r),a=t.read_shift(r),o=Uo(t),c=Uo(t);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:c[0],cRel:c[1],rRel:c[2]}}}function wI(t){var e=Uo(t),n=Uo(t),r=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function T7(t,e,n){if(n.biff<8)return wI(t);var r=t.read_shift(n.biff==12?4:2),s=t.read_shift(n.biff==12?4:2),a=Uo(t),o=Uo(t);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function SI(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return w7(t);var r=t.read_shift(n&&n.biff==12?4:2),s=Uo(t);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function w7(t){var e=Uo(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function S7(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function A7(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return b7(t);var s=t.read_shift(r>=12?4:2),a=t.read_shift(2),o=(a&16384)>>14,c=(a&32768)>>15;if(a&=16383,c==1)for(;s>524287;)s-=1048576;if(o==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:o,rRel:c}}function b7(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:s,rRel:r}}function C7(t,e,n){var r=(t[t.l++]&96)>>5,s=TI(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,s]}function N7(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var o=TI(t,a,n);return[r,s,o]}function I7(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function k7(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[r,s]}function R7(t,e,n){var r=(t[t.l++]&96)>>5,s=T7(t,e-1,n);return[r,s]}function D7(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function q2(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function M7(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),s=[],a=0;a<=r;++a)s.push(t.read_shift(n&&n.biff==2?1:2));return s}function P7(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function F7(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function O7(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function L7(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function AI(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function U7(t){return t.read_shift(2),AI(t)}function V7(t){return t.read_shift(2),AI(t)}function B7(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=SI(t,0,n);return[r,s]}function z7(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=A7(t,0,n);return[r,s]}function j7(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var a=SI(t,0,n);return[r,s,a]}function H7(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(n&&n.biff<=3?1:2);return[GB[s],NI[s],r]}function G7(t,e,n){var r=t[t.l++],s=t.read_shift(1),a=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:$7(t);return[s,(a[0]===0?NI:HB)[a[1]]]}function $7(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function q7(t,e,n){t.l+=n&&n.biff==2?3:4}function K7(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function J7(t){return t.l++,Kl[t.read_shift(1)]}function Y7(t){return t.l++,t.read_shift(2)}function W7(t){return t.l++,t.read_shift(1)!==0}function Z7(t){return t.l++,Xr(t)}function X7(t,e,n){return t.l++,Fd(t,e-1,n)}function Q7(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Qn(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=Kl[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Xr(t);break;case 2:n[1]=Jl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function eB(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),s=[],a=0;a!=r;++a)s.push((n.biff==12?ql:Jp)(t));return s}function tB(t,e,n){var r=0,s=0;n.biff==12?(r=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--s==0&&(s=256));for(var a=0,o=[];a!=r&&(o[a]=[]);++a)for(var c=0;c!=s;++c)o[a][c]=Q7(t,n.biff);return o}function nB(t,e,n){var r=t.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=t.read_shift(s);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,a]}function rB(t,e,n){if(n.biff==5)return sB(t);var r=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[r,s,a]}function sB(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function aB(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function iB(t,e,n){var r=t.read_shift(1)>>>5&3,s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function oB(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function lB(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[r,s]}var cB=rs,uB=rs,fB=rs;function Ld(t,e,n){return t.l+=2,[S7(t)]}function $1(t){return t.l+=6,[]}var dB=Ld,hB=$1,pB=$1,mB=Ld;function bI(t){return t.l+=2,[dr(t),t.read_shift(2)&1]}var gB=Ld,xB=bI,vB=$1,yB=Ld,_B=Ld,EB=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function TB(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),o=EB[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:s,C:a}}function wB(t){return t.l+=2,[t.read_shift(4)]}function SB(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function AB(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function bB(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function CB(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function NB(t){return t.l+=4,[0,0]}var K2={1:{n:"PtgExp",f:K7},2:{n:"PtgTbl",f:fB},3:{n:"PtgAdd",f:cr},4:{n:"PtgSub",f:cr},5:{n:"PtgMul",f:cr},6:{n:"PtgDiv",f:cr},7:{n:"PtgPower",f:cr},8:{n:"PtgConcat",f:cr},9:{n:"PtgLt",f:cr},10:{n:"PtgLe",f:cr},11:{n:"PtgEq",f:cr},12:{n:"PtgGe",f:cr},13:{n:"PtgGt",f:cr},14:{n:"PtgNe",f:cr},15:{n:"PtgIsect",f:cr},16:{n:"PtgUnion",f:cr},17:{n:"PtgRange",f:cr},18:{n:"PtgUplus",f:cr},19:{n:"PtgUminus",f:cr},20:{n:"PtgPercent",f:cr},21:{n:"PtgParen",f:cr},22:{n:"PtgMissArg",f:cr},23:{n:"PtgStr",f:X7},26:{n:"PtgSheet",f:SB},27:{n:"PtgEndSheet",f:AB},28:{n:"PtgErr",f:J7},29:{n:"PtgBool",f:W7},30:{n:"PtgInt",f:Y7},31:{n:"PtgNum",f:Z7},32:{n:"PtgArray",f:D7},33:{n:"PtgFunc",f:H7},34:{n:"PtgFuncVar",f:G7},35:{n:"PtgName",f:nB},36:{n:"PtgRef",f:B7},37:{n:"PtgArea",f:C7},38:{n:"PtgMemArea",f:aB},39:{n:"PtgMemErr",f:cB},40:{n:"PtgMemNoMem",f:uB},41:{n:"PtgMemFunc",f:iB},42:{n:"PtgRefErr",f:oB},43:{n:"PtgAreaErr",f:I7},44:{n:"PtgRefN",f:z7},45:{n:"PtgAreaN",f:R7},46:{n:"PtgMemAreaN",f:bB},47:{n:"PtgMemNoMemN",f:CB},57:{n:"PtgNameX",f:rB},58:{n:"PtgRef3d",f:j7},59:{n:"PtgArea3d",f:N7},60:{n:"PtgRefErr3d",f:lB},61:{n:"PtgAreaErr3d",f:k7},255:{}},IB={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},kB={1:{n:"PtgElfLel",f:bI},2:{n:"PtgElfRw",f:yB},3:{n:"PtgElfCol",f:dB},6:{n:"PtgElfRwV",f:_B},7:{n:"PtgElfColV",f:mB},10:{n:"PtgElfRadical",f:gB},11:{n:"PtgElfRadicalS",f:vB},13:{n:"PtgElfColS",f:hB},15:{n:"PtgElfColSV",f:pB},16:{n:"PtgElfRadicalLel",f:xB},25:{n:"PtgList",f:TB},29:{n:"PtgSxName",f:wB},255:{}},RB={0:{n:"PtgAttrNoop",f:NB},1:{n:"PtgAttrSemi",f:L7},2:{n:"PtgAttrIf",f:F7},4:{n:"PtgAttrChoose",f:M7},8:{n:"PtgAttrGoto",f:P7},16:{n:"PtgAttrSum",f:q7},32:{n:"PtgAttrBaxcel",f:q2},33:{n:"PtgAttrBaxcel",f:q2},64:{n:"PtgAttrSpace",f:U7},65:{n:"PtgAttrSpaceSemi",f:V7},128:{n:"PtgAttrIfError",f:O7},255:{}};function Ud(t,e,n,r){if(r.biff<8)return rs(t,e);for(var s=t.l+e,a=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=tB(t,0,r),a.push(n[o][1]);break;case"PtgMemArea":n[o][2]=eB(t,n[o][1],r),a.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),a.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=s-t.l,e!==0&&a.push(rs(t,e)),a}function Vd(t,e,n){for(var r=t.l+e,s,a,o=[];r!=t.l;)e=r-t.l,a=t[t.l],s=K2[a]||K2[IB[a]],(a===24||a===25)&&(s=(a===24?kB:RB)[t[t.l+1]]),!s||!s.f?rs(t,e):o.push([s.n,s.f(t,e,n)]);return o}function DB(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],s=[],a=0;a<r.length;++a){var o=r[a];o?o[0]===2?s.push('"'+o[1].replace(/"/g,'""')+'"'):s.push(o[1]):s.push("")}e.push(s.join(","))}return e.join(";")}var MB={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function PB(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function CI(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(t[r[0]][0]){case 357:return s=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[r[0]][0][3]?(s=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function J2(t,e,n){var r=CI(t,e,n);return r=="#REF"?r:PB(r,n)}function Wr(t,e,n,r,s){var a=s&&s.biff||8,o={s:{c:0,r:0}},c=[],u,d,h,x=0,v=0,T,S="";if(!t[0]||!t[0][0])return"";for(var A=-1,b="",R=0,B=t[0].length;R<B;++R){var D=t[0][R];switch(D[0]){case"PtgUminus":c.push("-"+c.pop());break;case"PtgUplus":c.push("+"+c.pop());break;case"PtgPercent":c.push(c.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=c.pop(),d=c.pop(),A>=0){switch(t[0][A][1][0]){case 0:b=$n(" ",t[0][A][1][1]);break;case 1:b=$n("\r",t[0][A][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}d=d+b,A=-1}c.push(d+MB[D[0]]+u);break;case"PtgIsect":u=c.pop(),d=c.pop(),c.push(d+" "+u);break;case"PtgUnion":u=c.pop(),d=c.pop(),c.push(d+","+u);break;case"PtgRange":u=c.pop(),d=c.pop(),c.push(d+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=Hf(D[1][1],o,s),c.push(Gf(h,a));break;case"PtgRefN":h=n?Hf(D[1][1],n,s):D[1][1],c.push(Gf(h,a));break;case"PtgRef3d":x=D[1][1],h=Hf(D[1][2],o,s),S=J2(r,x,s),c.push(S+"!"+Gf(h,a));break;case"PtgFunc":case"PtgFuncVar":var L=D[1][0],z=D[1][1];L||(L=0),L&=127;var O=L==0?[]:c.slice(-L);c.length-=L,z==="User"&&(z=O.shift()),c.push(z+"("+O.join(",")+")");break;case"PtgBool":c.push(D[1]?"TRUE":"FALSE");break;case"PtgInt":c.push(D[1]);break;case"PtgNum":c.push(String(D[1]));break;case"PtgStr":c.push('"'+D[1].replace(/"/g,'""')+'"');break;case"PtgErr":c.push(D[1]);break;case"PtgAreaN":T=N2(D[1][1],n?{s:n}:o,s),c.push(Ex(T,s));break;case"PtgArea":T=N2(D[1][1],o,s),c.push(Ex(T,s));break;case"PtgArea3d":x=D[1][1],T=D[1][2],S=J2(r,x,s),c.push(S+"!"+Ex(T,s));break;case"PtgAttrSum":c.push("SUM("+c.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":v=D[1][2];var I=(r.names||[])[v-1]||(r[0]||[])[v],C=I?I.Name:"SH33TJSNAME"+String(v);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),c.push(C);break;case"PtgNameX":var N=D[1][1];v=D[1][2];var F;if(s.biff<=5)N<0&&(N=-N),r[N]&&(F=r[N][v]);else{var U="";if(((r[N]||[])[0]||[])[0]==14849||(((r[N]||[])[0]||[])[0]==1025?r[N][v]&&r[N][v].itab>0&&(U=r.SheetNames[r[N][v].itab-1]+"!"):U=r.SheetNames[v-1]+"!"),r[N]&&r[N][v])U+=r[N][v].Name;else if(r[0]&&r[0][v])U+=r[0][v].Name;else{var M=(CI(r,N,s)||"").split(";;");M[v-1]?U=M[v-1]:U+="SH33TJSERRX"}c.push(U);break}F||(F={Name:"SH33TJSERRY"}),c.push(F.Name);break;case"PtgParen":var j="(",he=")";if(A>=0){switch(b="",t[0][A][1][0]){case 2:j=$n(" ",t[0][A][1][1])+j;break;case 3:j=$n("\r",t[0][A][1][1])+j;break;case 4:he=$n(" ",t[0][A][1][1])+he;break;case 5:he=$n("\r",t[0][A][1][1])+he;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}A=-1}c.push(j+c.pop()+he);break;case"PtgRefErr":c.push("#REF!");break;case"PtgRefErr3d":c.push("#REF!");break;case"PtgExp":h={c:D[1][1],r:D[1][0]};var Se={c:n.c,r:n.r};if(r.sharedf[Ct(h)]){var ie=r.sharedf[Ct(h)];c.push(Wr(ie,o,Se,r,s))}else{var fe=!1;for(u=0;u!=r.arrayf.length;++u)if(d=r.arrayf[u],!(h.c<d[0].s.c||h.c>d[0].e.c)&&!(h.r<d[0].s.r||h.r>d[0].e.r)){c.push(Wr(d[1],o,Se,r,s)),fe=!0;break}fe||c.push(D[1])}break;case"PtgArray":c.push("{"+DB(D[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":A=R;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":c.push("");break;case"PtgAreaErr":c.push("#REF!");break;case"PtgAreaErr3d":c.push("#REF!");break;case"PtgList":c.push("Table"+D[1].idx+"[#"+D[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(D));default:throw new Error("Unrecognized Formula Token: "+String(D))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&A>=0&&ce.indexOf(t[0][R][0])==-1){D=t[0][A];var K=!0;switch(D[1][0]){case 4:K=!1;case 0:b=$n(" ",D[1][1]);break;case 5:K=!1;case 1:b=$n("\r",D[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+D[1][0])}c.push((K?b:"")+c.pop()+(K?"":b)),A=-1}}if(c.length>1&&s.WTF)throw new Error("bad formula stack");return c[0]}function FB(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,o=t.read_shift(s);if(o==65535)return[[],rs(t,e-2)];var c=Vd(t,o,n);return e!==o+s&&(a=Ud(t,e-o-s,c,n)),t.l=r,[c,a]}function OB(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,o=t.read_shift(s);if(o==65535)return[[],rs(t,e-2)];var c=Vd(t,o,n);return e!==o+s&&(a=Ud(t,e-o-s,c,n)),t.l=r,[c,a]}function LB(t,e,n,r){var s=t.l+e,a=Vd(t,r,n),o;return s!==t.l&&(o=Ud(t,s-t.l,a,n)),[a,o]}function UB(t,e,n){var r=t.l+e,s,a=t.read_shift(2),o=Vd(t,a,n);return a==65535?[[],rs(t,e-2)]:(e!==a+2&&(s=Ud(t,r-a-2,o,n)),[o,s])}function VB(t){var e;if(Di(t,t.l+6)!==65535)return[Xr(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Sx(t,e,n){var r=t.l+e,s=oi(t);n.biff==2&&++t.l;var a=VB(t),o=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var c=OB(t,r-t.l,n);return{cell:s,val:a[0],formula:c,shared:o>>3&1,tt:a[1]}}function Yp(t,e,n){var r=t.read_shift(4),s=Vd(t,r,n),a=t.read_shift(4),o=a>0?Ud(t,a,s,n):null;return[s,o]}var BB=Yp,Wp=Yp,zB=Yp,jB=Yp,HB={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},NI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},GB={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Y2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Ax(t){var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var Jf={},tu={};function Yf(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function II(t,e,n,r,s,a){try{r.cellNF&&(t.z=Dt[e])}catch(c){if(r.WTF)throw c}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Cr(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(Dt[e]==null&&Nl($L[e]||"General",e),t.t==="e")t.w=t.w||Kl[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=dd(t.v);else if(t.t==="d"){var o=gs(t.v);(o|0)===o?t.w=o.toString(10):t.w=dd(o)}else{if(t.v===void 0)return"";t.w=Fl(t.v,tu)}else t.t==="d"?t.w=da(e,gs(t.v),tu):t.w=da(e,t.v,tu)}catch(c){if(r.WTF)throw c}if(r.cellStyles&&n!=null)try{t.s=a.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=gp(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=gp(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(c){if(r.WTF&&a.Fills)throw c}}}function $B(t,e){var n=qn(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=tn(n))}var qB=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,KB=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,JB=/<(?:\w:)?hyperlink [^>]*>/mg,YB=/"(\w*:\w*)"/,WB=/<(?:\w:)?col\b[^>]*[\/]?>/g,ZB=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,XB=/<(?:\w:)?pageMargins[^>]*\/>/g,kI=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,QB=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ez=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function tz(t,e,n,r,s,a,o){if(!t)return t;r||(r={"!id":{}});var c=e.dense?[]:{},u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",h="",x=t.match(KB);x?(d=t.slice(0,x.index),h=t.slice(x.index+x[0].length)):d=h=t;var v=d.match(kI);v?q1(v[0],c,s,n):(v=d.match(QB))&&nz(v[0],v[1]||"",c,s,n);var T=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(T>0){var S=d.slice(T,T+50).match(YB);S&&$B(c,S[1])}var A=d.match(ez);A&&A[1]&&lz(A[1],s);var b=[];if(e.cellStyles){var R=d.match(WB);R&&az(b,R)}x&&cz(x[1],c,e,u,a,o);var B=h.match(ZB);B&&(c["!autofilter"]=iz(B[0]));var D=[],L=h.match(qB);if(L)for(T=0;T!=L.length;++T)D[T]=qn(L[T].slice(L[T].indexOf('"')+1));var z=h.match(JB);z&&rz(c,z,r);var O=h.match(XB);if(O&&(c["!margins"]=sz(Et(O[0]))),!c["!ref"]&&u.e.c>=u.s.c&&u.e.r>=u.s.r&&(c["!ref"]=tn(u)),e.sheetRows>0&&c["!ref"]){var I=qn(c["!ref"]);e.sheetRows<=+I.e.r&&(I.e.r=e.sheetRows-1,I.e.r>u.e.r&&(I.e.r=u.e.r),I.e.r<I.s.r&&(I.s.r=I.e.r),I.e.c>u.e.c&&(I.e.c=u.e.c),I.e.c<I.s.c&&(I.s.c=I.e.c),c["!fullref"]=c["!ref"],c["!ref"]=tn(I))}return b.length>0&&(c["!cols"]=b),D.length>0&&(c["!merges"]=D),c}function q1(t,e,n,r){var s=Et(t);n.Sheets[r]||(n.Sheets[r]={}),s.codeName&&(n.Sheets[r].CodeName=nn(Dn(s.codeName)))}function nz(t,e,n,r,s){q1(t.slice(0,t.indexOf(">")),n,r,s)}function rz(t,e,n){for(var r=Array.isArray(t),s=0;s!=e.length;++s){var a=Et(Dn(e[s]),!0);if(!a.ref)return;var o=((n||{})["!id"]||[])[a.id];o?(a.Target=o.Target,a.location&&(a.Target+="#"+nn(a.location))):(a.Target="#"+nn(a.location),o={Target:a.Target,TargetMode:"Internal"}),a.Rel=o,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var c=qn(a.ref),u=c.s.r;u<=c.e.r;++u)for(var d=c.s.c;d<=c.e.c;++d){var h=Ct({c:d,r:u});r?(t[u]||(t[u]=[]),t[u][d]||(t[u][d]={t:"z",v:void 0}),t[u][d].l=a):(t[h]||(t[h]={t:"z",v:void 0}),t[h].l=a)}}}function sz(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function az(t,e){for(var n=!1,r=0;r!=e.length;++r){var s=Et(e[r],!0);s.hidden&&(s.hidden=Un(s.hidden));var a=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,G1(s.width)),cu(s);a<=o;)t[a++]=jr(s)}}function iz(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var oz=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function lz(t,e){e.Views||(e.Views=[{}]),(t.match(oz)||[]).forEach(function(n,r){var s=Et(n);e.Views[r]||(e.Views[r]={}),+s.zoomScale&&(e.Views[r].zoom=+s.zoomScale),Un(s.rightToLeft)&&(e.Views[r].RTL=!0)})}var cz=(function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=hd("v"),o=hd("f");return function(u,d,h,x,v,T){for(var S=0,A="",b=[],R=[],B=0,D=0,L=0,z="",O,I,C=0,N=0,F,U,M=0,j=0,he=Array.isArray(T.CellXf),Se,ie=[],fe=[],ce=Array.isArray(d),K=[],Ie={},Y=!1,H=!!h.sheetStubs,Q=u.split(e),te=0,W=Q.length;te!=W;++te){A=Q[te].trim();var le=A.length;if(le!==0){var ge=0;e:for(S=0;S<le;++S)switch(A[S]){case">":if(A[S-1]!="/"){++S;break e}if(h&&h.cellStyles){if(I=Et(A.slice(ge,S),!0),C=I.r!=null?parseInt(I.r,10):C+1,N=-1,h.sheetRows&&h.sheetRows<C)continue;Ie={},Y=!1,I.ht&&(Y=!0,Ie.hpt=parseFloat(I.ht),Ie.hpx=xd(Ie.hpt)),I.hidden=="1"&&(Y=!0,Ie.hidden=!0),I.outlineLevel!=null&&(Y=!0,Ie.level=+I.outlineLevel),Y&&(K[C-1]=Ie)}break;case"<":ge=S;break}if(ge>=S)break;if(I=Et(A.slice(ge,S),!0),C=I.r!=null?parseInt(I.r,10):C+1,N=-1,!(h.sheetRows&&h.sheetRows<C)){x.s.r>C-1&&(x.s.r=C-1),x.e.r<C-1&&(x.e.r=C-1),h&&h.cellStyles&&(Ie={},Y=!1,I.ht&&(Y=!0,Ie.hpt=parseFloat(I.ht),Ie.hpx=xd(Ie.hpt)),I.hidden=="1"&&(Y=!0,Ie.hidden=!0),I.outlineLevel!=null&&(Y=!0,Ie.level=+I.outlineLevel),Y&&(K[C-1]=Ie)),b=A.slice(S).split(t);for(var Ne=0;Ne!=b.length&&b[Ne].trim().charAt(0)=="<";++Ne);for(b=b.slice(Ne),S=0;S!=b.length;++S)if(A=b[S].trim(),A.length!==0){if(R=A.match(n),B=S,D=0,L=0,A="<c "+(A.slice(0,1)=="<"?">":"")+A,R!=null&&R.length===2){for(B=0,z=R[1],D=0;D!=z.length&&!((L=z.charCodeAt(D)-64)<1||L>26);++D)B=26*B+L;--B,N=B}else++N;for(D=0;D!=A.length&&A.charCodeAt(D)!==62;++D);if(++D,I=Et(A.slice(0,D),!0),I.r||(I.r=Ct({r:C-1,c:N})),z=A.slice(D),O={t:""},(R=z.match(a))!=null&&R[1]!==""&&(O.v=nn(R[1])),h.cellFormula){if((R=z.match(o))!=null&&R[1]!==""){if(O.f=nn(Dn(R[1])).replace(/\r\n/g,`
`),h.xlfn||(O.f=$2(O.f)),R[0].indexOf('t="array"')>-1)O.F=(z.match(s)||[])[1],O.F.indexOf(":")>-1&&ie.push([qn(O.F),O.F]);else if(R[0].indexOf('t="shared"')>-1){U=Et(R[0]);var be=nn(Dn(R[1]));h.xlfn||(be=$2(be)),fe[parseInt(U.si,10)]=[U,be,I.r]}}else(R=z.match(/<f[^>]*\/>/))&&(U=Et(R[0]),fe[U.si]&&(O.f=_7(fe[U.si][1],fe[U.si][2],I.r)));var ke=ps(I.r);for(D=0;D<ie.length;++D)ke.r>=ie[D][0].s.r&&ke.r<=ie[D][0].e.r&&ke.c>=ie[D][0].s.c&&ke.c<=ie[D][0].e.c&&(O.F=ie[D][1])}if(I.t==null&&O.v===void 0)if(O.f||O.F)O.v=0,O.t="n";else if(H)O.t="z";else continue;else O.t=I.t||"n";switch(x.s.c>N&&(x.s.c=N),x.e.c<N&&(x.e.c=N),O.t){case"n":if(O.v==""||O.v==null){if(!H)continue;O.t="z"}else O.v=parseFloat(O.v);break;case"s":if(typeof O.v>"u"){if(!H)continue;O.t="z"}else F=Jf[parseInt(O.v,10)],O.v=F.t,O.r=F.r,h.cellHTML&&(O.h=F.h);break;case"str":O.t="s",O.v=O.v!=null?Dn(O.v):"",h.cellHTML&&(O.h=M1(O.v));break;case"inlineStr":R=z.match(r),O.t="s",R!=null&&(F=H1(R[1]))?(O.v=F.t,h.cellHTML&&(O.h=F.h)):O.v="";break;case"b":O.v=Un(O.v);break;case"d":h.cellDates?O.v=Cr(O.v,1):(O.v=gs(Cr(O.v,1)),O.t="n");break;case"e":(!h||h.cellText!==!1)&&(O.w=O.v),O.v=ZN[O.v];break}if(M=j=0,Se=null,he&&I.s!==void 0&&(Se=T.CellXf[I.s],Se!=null&&(Se.numFmtId!=null&&(M=Se.numFmtId),h.cellStyles&&Se.fillId!=null&&(j=Se.fillId))),II(O,M,j,h,v,T),h.cellDates&&he&&O.t=="n"&&vu(Dt[M])&&(O.t="d",O.v=Kp(O.v)),I.cm&&h.xlmeta){var $e=(h.xlmeta.Cell||[])[+I.cm-1];$e&&$e.type=="XLDAPR"&&(O.D=!0)}if(ce){var re=ps(I.r);d[re.r]||(d[re.r]=[]),d[re.r][re.c]=O}else d[I.r]=O}}}}K.length>0&&(d["!rows"]=K)}})();function uz(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=r,a&7&&(n.level=a&7),a&16&&(n.hidden=!0),a&32&&(n.hpt=s/20),n}var fz=ql;function dz(){}function hz(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=F8(t),n}function pz(t){var e=ma(t);return[e]}function mz(t){var e=$l(t);return[e]}function gz(t){var e=ma(t),n=t.read_shift(1);return[e,n,"b"]}function xz(t){var e=$l(t),n=t.read_shift(1);return[e,n,"b"]}function vz(t){var e=ma(t),n=t.read_shift(1);return[e,n,"e"]}function yz(t){var e=$l(t),n=t.read_shift(1);return[e,n,"e"]}function _z(t){var e=ma(t),n=t.read_shift(4);return[e,n,"s"]}function Ez(t){var e=$l(t),n=t.read_shift(4);return[e,n,"s"]}function Tz(t){var e=ma(t),n=Xr(t);return[e,n,"n"]}function RI(t){var e=$l(t),n=Xr(t);return[e,n,"n"]}function wz(t){var e=ma(t),n=B1(t);return[e,n,"n"]}function Sz(t){var e=$l(t),n=B1(t);return[e,n,"n"]}function Az(t){var e=ma(t),n=U1(t);return[e,n,"is"]}function bz(t){var e=ma(t),n=ns(t);return[e,n,"str"]}function Cz(t){var e=$l(t),n=ns(t);return[e,n,"str"]}function Nz(t,e,n){var r=t.l+e,s=ma(t);s.r=n["!row"];var a=t.read_shift(1),o=[s,a,"b"];if(n.cellFormula){t.l+=2;var c=Wp(t,r-t.l,n);o[3]=Wr(c,null,s,n.supbooks,n)}else t.l=r;return o}function Iz(t,e,n){var r=t.l+e,s=ma(t);s.r=n["!row"];var a=t.read_shift(1),o=[s,a,"e"];if(n.cellFormula){t.l+=2;var c=Wp(t,r-t.l,n);o[3]=Wr(c,null,s,n.supbooks,n)}else t.l=r;return o}function kz(t,e,n){var r=t.l+e,s=ma(t);s.r=n["!row"];var a=Xr(t),o=[s,a,"n"];if(n.cellFormula){t.l+=2;var c=Wp(t,r-t.l,n);o[3]=Wr(c,null,s,n.supbooks,n)}else t.l=r;return o}function Rz(t,e,n){var r=t.l+e,s=ma(t);s.r=n["!row"];var a=ns(t),o=[s,a,"str"];if(n.cellFormula){t.l+=2;var c=Wp(t,r-t.l,n);o[3]=Wr(c,null,s,n.supbooks,n)}else t.l=r;return o}var Dz=ql;function Mz(t,e){var n=t.l+e,r=ql(t),s=V1(t),a=ns(t),o=ns(t),c=ns(t);t.l=n;var u={rfx:r,relId:s,loc:a,display:c};return o&&(u.Tooltip=o),u}function Pz(){}function Fz(t,e,n){var r=t.l+e,s=JN(t),a=t.read_shift(1),o=[s];if(o[2]=a,n.cellFormula){var c=BB(t,r-t.l,n);o[1]=c}else t.l=r;return o}function Oz(t,e,n){var r=t.l+e,s=ql(t),a=[s];if(n.cellFormula){var o=jB(t,r-t.l,n);a[1]=o,t.l=r}else t.l=r;return a}var Lz=["left","right","top","bottom","header","footer"];function Uz(t){var e={};return Lz.forEach(function(n){e[n]=Xr(t)}),e}function Vz(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Bz(){}function zz(){}function jz(t,e,n,r,s,a,o){if(!t)return t;var c=e||{};r||(r={"!id":{}});var u=c.dense?[]:{},d,h={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=!1,v=!1,T,S,A,b,R,B,D,L,z,O=[];c.biff=12,c["!row"]=0;var I=0,C=!1,N=[],F={},U=c.supbooks||s.supbooks||[[]];if(U.sharedf=F,U.arrayf=N,U.SheetNames=s.SheetNames||s.Sheets.map(function(ce){return ce.name}),!c.supbooks&&(c.supbooks=U,s.Names))for(var M=0;M<s.Names.length;++M)U[0][M+1]=s.Names[M];var j=[],he=[],Se=!1;yp[16]={n:"BrtShortReal",f:RI};var ie;if(ji(t,function(K,Ie,Y){if(!v)switch(Y){case 148:d=K;break;case 0:T=K,c.sheetRows&&c.sheetRows<=T.r&&(v=!0),L=Hr(b=T.r),c["!row"]=T.r,(K.hidden||K.hpt||K.level!=null)&&(K.hpt&&(K.hpx=xd(K.hpt)),he[K.r]=K);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(S={t:K[2]},K[2]){case"n":S.v=K[1];break;case"s":D=Jf[K[1]],S.v=D.t,S.r=D.r;break;case"b":S.v=!!K[1];break;case"e":S.v=K[1],c.cellText!==!1&&(S.w=Kl[S.v]);break;case"str":S.t="s",S.v=K[1];break;case"is":S.t="s",S.v=K[1].t;break}if((A=o.CellXf[K[0].iStyleRef])&&II(S,A.numFmtId,null,c,a,o),R=K[0].c==-1?R+1:K[0].c,c.dense?(u[b]||(u[b]=[]),u[b][R]=S):u[yr(R)+L]=S,c.cellFormula){for(C=!1,I=0;I<N.length;++I){var H=N[I];T.r>=H[0].s.r&&T.r<=H[0].e.r&&R>=H[0].s.c&&R<=H[0].e.c&&(S.F=tn(H[0]),C=!0)}!C&&K.length>3&&(S.f=K[3])}if(h.s.r>T.r&&(h.s.r=T.r),h.s.c>R&&(h.s.c=R),h.e.r<T.r&&(h.e.r=T.r),h.e.c<R&&(h.e.c=R),c.cellDates&&A&&S.t=="n"&&vu(Dt[A.numFmtId])){var Q=Al(S.v);Q&&(S.t="d",S.v=new Date(Q.y,Q.m-1,Q.d,Q.H,Q.M,Q.S,Q.u))}ie&&(ie.type=="XLDAPR"&&(S.D=!0),ie=void 0);break;case 1:case 12:if(!c.sheetStubs||x)break;S={t:"z",v:void 0},R=K[0].c==-1?R+1:K[0].c,c.dense?(u[b]||(u[b]=[]),u[b][R]=S):u[yr(R)+L]=S,h.s.r>T.r&&(h.s.r=T.r),h.s.c>R&&(h.s.c=R),h.e.r<T.r&&(h.e.r=T.r),h.e.c<R&&(h.e.c=R),ie&&(ie.type=="XLDAPR"&&(S.D=!0),ie=void 0);break;case 176:O.push(K);break;case 49:ie=((c.xlmeta||{}).Cell||[])[K-1];break;case 494:var te=r["!id"][K.relId];for(te?(K.Target=te.Target,K.loc&&(K.Target+="#"+K.loc),K.Rel=te):K.relId==""&&(K.Target="#"+K.loc),b=K.rfx.s.r;b<=K.rfx.e.r;++b)for(R=K.rfx.s.c;R<=K.rfx.e.c;++R)c.dense?(u[b]||(u[b]=[]),u[b][R]||(u[b][R]={t:"z",v:void 0}),u[b][R].l=K):(B=Ct({c:R,r:b}),u[B]||(u[B]={t:"z",v:void 0}),u[B].l=K);break;case 426:if(!c.cellFormula)break;N.push(K),z=c.dense?u[b][R]:u[yr(R)+L],z.f=Wr(K[1],h,{r:T.r,c:R},U,c),z.F=tn(K[0]);break;case 427:if(!c.cellFormula)break;F[Ct(K[0].s)]=K[1],z=c.dense?u[b][R]:u[yr(R)+L],z.f=Wr(K[1],h,{r:T.r,c:R},U,c);break;case 60:if(!c.cellStyles)break;for(;K.e>=K.s;)j[K.e--]={width:K.w/256,hidden:!!(K.flags&1),level:K.level},Se||(Se=!0,G1(K.w/256)),cu(j[K.e+1]);break;case 161:u["!autofilter"]={ref:tn(K)};break;case 476:u["!margins"]=K;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),K.name&&(s.Sheets[n].CodeName=K.name),(K.above||K.left)&&(u["!outline"]={above:K.above,left:K.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),K.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:x=!0;break;case 36:x=!1;break;case 37:x=!0;break;case 38:x=!1;break;default:if(!Ie.T){if(!x||c.WTF)throw new Error("Unexpected record 0x"+Y.toString(16))}}},c),delete c.supbooks,delete c["!row"],!u["!ref"]&&(h.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(u["!ref"]=tn(d||h)),c.sheetRows&&u["!ref"]){var fe=qn(u["!ref"]);c.sheetRows<=+fe.e.r&&(fe.e.r=c.sheetRows-1,fe.e.r>h.e.r&&(fe.e.r=h.e.r),fe.e.r<fe.s.r&&(fe.s.r=fe.e.r),fe.e.c>h.e.c&&(fe.e.c=h.e.c),fe.e.c<fe.s.c&&(fe.s.c=fe.e.c),u["!fullref"]=u["!ref"],u["!ref"]=tn(fe))}return O.length>0&&(u["!merges"]=O),j.length>0&&(u["!cols"]=j),he.length>0&&(u["!rows"]=he),u}function Hz(t){var e=[],n=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var o=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=n?+o[2]:o[2])});var s=nn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){r=a.replace(/<.*?>/g,"")}),[e,s,r]}function Gz(t,e,n,r,s,a){var o=a||{"!type":"chart"};if(!t)return a;var c=0,u=0,d="A",h={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(x){var v=Hz(x);h.s.r=h.s.c=0,h.e.c=c,d=yr(c),v[0].forEach(function(T,S){o[d+Hr(S)]={t:"n",v:T,z:v[1]},u=S}),h.e.r<u&&(h.e.r=u),++c}),c>0&&(o["!ref"]=tn(h)),o}function $z(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},o,c=t.match(kI);return c&&q1(c[0],a,s,n),(o=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=o[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}function qz(t,e){t.l+=10;var n=ns(t);return{name:n}}function Kz(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},o=!1;return ji(t,function(u,d,h){switch(h){case 550:a["!rel"]=u;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),u.name&&(s.Sheets[n].CodeName=u.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}}},e),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}var DI=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Jz=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Yz=[],Wz=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function W2(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],s=0;s!=e.length;++s){var a=e[s];if(r[a[0]]==null)r[a[0]]=a[1];else switch(a[2]){case"bool":typeof r[a[0]]=="string"&&(r[a[0]]=Un(r[a[0]]));break;case"int":typeof r[a[0]]=="string"&&(r[a[0]]=parseInt(r[a[0]],10));break}}}function Z2(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=Un(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function MI(t){Z2(t.WBProps,DI),Z2(t.CalcPr,Wz),W2(t.WBView,Jz),W2(t.Sheets,Yz),tu.date1904=Un(t.WBProps.date1904)}var Zz="][*?/\\".split("");function Xz(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return Zz.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}var Qz=/<\w+:workbook/;function ej(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,s="xmlns",a={},o=0;if(t.replace(ss,function(u,d){var h=Et(u);switch(ii(h[0])){case"<?xml":break;case"<workbook":u.match(Qz)&&(s="xmlns"+u.match(/<(\w+):/)[1]),n.xmlns=h[s];break;case"</workbook>":break;case"<fileVersion":delete h[0],n.AppVersion=h;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":DI.forEach(function(x){if(h[x[0]]!=null)switch(x[2]){case"bool":n.WBProps[x[0]]=Un(h[x[0]]);break;case"int":n.WBProps[x[0]]=parseInt(h[x[0]],10);break;default:n.WBProps[x[0]]=h[x[0]]}}),h.codeName&&(n.WBProps.CodeName=Dn(h.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete h[0],n.WBView.push(h);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(h.state){case"hidden":h.Hidden=1;break;case"veryHidden":h.Hidden=2;break;default:h.Hidden=0}delete h.state,h.name=nn(Dn(h.name)),delete h[0],n.Sheets.push(h);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":a={},a.Name=Dn(h.name),h.comment&&(a.Comment=h.comment),h.localSheetId&&(a.Sheet=+h.localSheetId),Un(h.hidden||"0")&&(a.Hidden=!0),o=d+u.length;break;case"</definedName>":a.Ref=nn(Dn(t.slice(o,d))),n.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete h[0],n.CalcPr=h;break;case"<calcPr/>":delete h[0],n.CalcPr=h;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+h[0]+" in workbook")}return u}),v8.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return MI(n),n}function tj(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=lv(t),n.name=ns(t),n}function nj(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var s=e>8?ns(t):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function rj(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function sj(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=O8(t),o=zB(t,0,n),c=V1(t);t.l=r;var u={Name:a,Ptg:o};return s<268435455&&(u.Sheet=s),c&&(u.Comment=c),u}function aj(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],s=!1;e||(e={}),e.biff=12;var a=[],o=[[]];return o.SheetNames=[],o.XTI=[],yp[16]={n:"BrtFRTArchID$",f:rj},ji(t,function(u,d,h){switch(h){case 156:o.SheetNames.push(u.name),n.Sheets.push(u);break;case 153:n.WBProps=u;break;case 39:u.Sheet!=null&&(e.SID=u.Sheet),u.Ref=Wr(u.Ptg,null,null,o,e),delete e.SID,delete u.Ptg,a.push(u);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([h,u]):o[0]=[h,u],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(u),o.XTI=o.XTI.concat(u);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(h),s=!0;break;case 36:r.pop(),s=!1;break;case 37:r.push(h),s=!0;break;case 38:r.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+h.toString(16))}}},e),MI(n),n.Names=a,n.supbooks=o,n}function ij(t,e,n){return e.slice(-4)===".bin"?aj(t,n):ej(t,n)}function oj(t,e,n,r,s,a,o,c){return e.slice(-4)===".bin"?jz(t,r,n,s,a,o,c):tz(t,r,n,s,a,o,c)}function lj(t,e,n,r,s,a,o,c){return e.slice(-4)===".bin"?Kz(t,r,n,s,a):$z(t,r,n,s,a)}function cj(t,e,n,r,s,a,o,c){return e.slice(-4)===".bin"?x7():v7()}function uj(t,e,n,r,s,a,o,c){return e.slice(-4)===".bin"?m7():g7()}function fj(t,e,n,r){return e.slice(-4)===".bin"?DV(t,n,r):bV(t,n,r)}function dj(t,e,n){return yI(t,n)}function hj(t,e,n){return e.slice(-4)===".bin"?J9(t,n):q9(t,n)}function pj(t,e,n){return e.slice(-4)===".bin"?d7(t,n):o7(t,n)}function mj(t,e,n){return e.slice(-4)===".bin"?s7(t):n7(t)}function gj(t,e,n,r){return n.slice(-4)===".bin"?a7(t,e,n,r):void 0}function xj(t,e,n){return e.slice(-4)===".bin"?e7(t,e,n):t7(t,e,n)}var PI=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,FI=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ca(t,e){var n=t.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var s=t.match(PI),a,o,c,u;if(s)for(u=0;u!=s.length;++u)a=s[u].match(FI),(o=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?c="xmlns"+a[1].slice(6):c=a[1].slice(o+1),r[c]=a[2].slice(1,a[2].length-1));return r}function vj(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var r=t.match(PI),s,a,o,c;if(r)for(c=0;c!=r.length;++c)s=r[c].match(FI),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),n[o]=s[2].slice(1,s[2].length-1));return n}var Wf;function yj(t,e){var n=Wf[t]||nn(t);return n==="General"?Fl(e):da(n,e)}function _j(t,e,n,r){var s=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Un(r);break;case"i2":case"int":s=parseInt(r,10);break;case"r4":case"float":s=parseFloat(r);break;case"date":case"dateTime.tz":s=Cr(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[nn(e)]=s}function Ej(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||Kl[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=dd(t.v):t.w=Fl(t.v):t.w=yj(e||"General",t.v)}catch(a){if(n.WTF)throw a}try{var r=Wf[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&t.t=="n"&&vu(r)){var s=Al(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(n.WTF)throw a}}}function Tj(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=_V[r.Pattern]||r.Pattern)}t[e.ID]=e}function wj(t,e,n,r,s,a,o,c,u,d){var h="General",x=r.StyleID,v={};d=d||{};var T=[],S=0;for(x===void 0&&c&&(x=c.StyleID),x===void 0&&o&&(x=o.StyleID);a[x]!==void 0&&(a[x].nf&&(h=a[x].nf),a[x].Interior&&T.push(a[x].Interior),!!a[x].Parent);)x=a[x].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=Un(t);break;case"String":r.t="s",r.r=y2(nn(t)),r.v=t.indexOf("<")>-1?nn(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(Cr(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=nn(t):r.v<60&&(r.v=r.v-1),(!h||h=="General")&&(h="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=ZN[t],d.cellText!==!1&&(r.w=t);break;default:t==""&&e==""?r.t="z":(r.t="s",r.v=y2(e||t));break}if(Ej(r,h,d),d.cellFormula!==!1)if(r.Formula){var A=nn(r.Formula);A.charCodeAt(0)==61&&(A=A.slice(1)),r.f=eu(A,s),delete r.Formula,r.ArrayRange=="RC"?r.F=eu("RC:RC",s):r.ArrayRange&&(r.F=eu(r.ArrayRange,s),u.push([qn(r.F),r.F]))}else for(S=0;S<u.length;++S)s.r>=u[S][0].s.r&&s.r<=u[S][0].e.r&&s.c>=u[S][0].s.c&&s.c<=u[S][0].e.c&&(r.F=u[S][1]);d.cellStyles&&(T.forEach(function(b){!v.patternType&&b.patternType&&(v.patternType=b.patternType)}),r.s=v),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function Sj(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function bx(t,e){var n=e||{};wN();var r=Rf(P1(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=Dn(r));var s=r.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=jr(n);return o.type="string",md.to_workbook(r,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(st){s.indexOf("<"+st)>=0&&(a=!0)}),a)return Mj(r,n);Wf={"General Number":"General","General Date":Dt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Dt[15],"Short Date":Dt[14],"Long Time":Dt[19],"Medium Time":Dt[18],"Short Time":Dt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Dt[2],Standard:Dt[4],Percent:Dt[10],Scientific:Dt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var c,u=[],d,h={},x=[],v=n.dense?[]:{},T="",S={},A={},b=Ca('<Data ss:Type="String">'),R=0,B=0,D=0,L={s:{r:2e6,c:2e6},e:{r:0,c:0}},z={},O={},I="",C=0,N=[],F={},U={},M=0,j=[],he=[],Se={},ie=[],fe,ce=!1,K=[],Ie=[],Y={},H=0,Q=0,te={Sheets:[],WBProps:{date1904:!1}},W={};pd.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var le="";c=pd.exec(r);)switch(c[3]=(le=c[3]).toLowerCase()){case"data":if(le=="data"){if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&u.push([c[3],!0]);break}if(u[u.length-1][1])break;c[1]==="/"?wj(r.slice(R,c.index),I,b,u[u.length-1][0]=="comment"?Se:S,{c:B,r:D},z,ie[B],A,K,n):(I="",b=Ca(c[0]),R=c.index+c[0].length);break;case"cell":if(c[1]==="/")if(he.length>0&&(S.c=he),(!n.sheetRows||n.sheetRows>D)&&S.v!==void 0&&(n.dense?(v[D]||(v[D]=[]),v[D][B]=S):v[yr(B)+Hr(D)]=S),S.HRef&&(S.l={Target:nn(S.HRef)},S.HRefScreenTip&&(S.l.Tooltip=S.HRefScreenTip),delete S.HRef,delete S.HRefScreenTip),(S.MergeAcross||S.MergeDown)&&(H=B+(parseInt(S.MergeAcross,10)|0),Q=D+(parseInt(S.MergeDown,10)|0),N.push({s:{c:B,r:D},e:{c:H,r:Q}})),!n.sheetStubs)S.MergeAcross?B=H+1:++B;else if(S.MergeAcross||S.MergeDown){for(var ge=B;ge<=H;++ge)for(var Ne=D;Ne<=Q;++Ne)(ge>B||Ne>D)&&(n.dense?(v[Ne]||(v[Ne]=[]),v[Ne][ge]={t:"z"}):v[yr(ge)+Hr(Ne)]={t:"z"});B=H+1}else++B;else S=vj(c[0]),S.Index&&(B=+S.Index-1),B<L.s.c&&(L.s.c=B),B>L.e.c&&(L.e.c=B),c[0].slice(-2)==="/>"&&++B,he=[];break;case"row":c[1]==="/"||c[0].slice(-2)==="/>"?(D<L.s.r&&(L.s.r=D),D>L.e.r&&(L.e.r=D),c[0].slice(-2)==="/>"&&(A=Ca(c[0]),A.Index&&(D=+A.Index-1)),B=0,++D):(A=Ca(c[0]),A.Index&&(D=+A.Index-1),Y={},(A.AutoFitHeight=="0"||A.Height)&&(Y.hpx=parseInt(A.Height,10),Y.hpt=vI(Y.hpx),Ie[D]=Y),A.Hidden=="1"&&(Y.hidden=!0,Ie[D]=Y));break;case"worksheet":if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"));x.push(T),L.s.r<=L.e.r&&L.s.c<=L.e.c&&(v["!ref"]=tn(L),n.sheetRows&&n.sheetRows<=L.e.r&&(v["!fullref"]=v["!ref"],L.e.r=n.sheetRows-1,v["!ref"]=tn(L))),N.length&&(v["!merges"]=N),ie.length>0&&(v["!cols"]=ie),Ie.length>0&&(v["!rows"]=Ie),h[T]=v}else L={s:{r:2e6,c:2e6},e:{r:0,c:0}},D=B=0,u.push([c[3],!1]),d=Ca(c[0]),T=nn(d.Name),v=n.dense?[]:{},N=[],K=[],Ie=[],W={name:T,Hidden:0},te.Sheets.push(W);break;case"table":if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else{if(c[0].slice(-2)=="/>")break;u.push([c[3],!1]),ie=[],ce=!1}break;case"style":c[1]==="/"?Tj(z,O,n):O=Ca(c[0]);break;case"numberformat":O.nf=nn(Ca(c[0]).Format||"General"),Wf[O.nf]&&(O.nf=Wf[O.nf]);for(var be=0;be!=392&&Dt[be]!=O.nf;++be);if(be==392){for(be=57;be!=392;++be)if(Dt[be]==null){Nl(O.nf,be);break}}break;case"column":if(u[u.length-1][0]!=="table")break;if(fe=Ca(c[0]),fe.Hidden&&(fe.hidden=!0,delete fe.Hidden),fe.Width&&(fe.wpx=parseInt(fe.Width,10)),!ce&&fe.wpx>10){ce=!0,hs=gI;for(var ke=0;ke<ie.length;++ke)ie[ke]&&cu(ie[ke])}ce&&cu(fe),ie[fe.Index-1||ie.length]=fe;for(var $e=0;$e<+fe.Span;++$e)ie[ie.length]=jr(fe);break;case"namedrange":if(c[1]==="/")break;te.Names||(te.Names=[]);var re=Et(c[0]),ft={Name:re.Name,Ref:eu(re.RefersTo.slice(1),{r:0,c:0})};te.Sheets.length>0&&(ft.Sheet=te.Sheets.length-1),te.Names.push(ft);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(c[0].slice(-2)==="/>")break;c[1]==="/"?I+=r.slice(C,c.index):C=c.index+c[0].length;break;case"interior":if(!n.cellStyles)break;O.Interior=Ca(c[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(c[0].slice(-2)==="/>")break;c[1]==="/"?oU(F,le,r.slice(M,c.index)):M=c.index+c[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else u.push([c[3],!1]);break;case"comment":if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"));Sj(Se),he.push(Se)}else u.push([c[3],!1]),d=Ca(c[0]),Se={a:d.Author};break;case"autofilter":if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else if(c[0].charAt(c[0].length-2)!=="/"){var Je=Ca(c[0]);v["!autofilter"]={ref:eu(Je.Range).replace(/\$/g,"")},u.push([c[3],!0])}break;case"name":break;case"datavalidation":if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&u.push([c[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(c[1]==="/"){if((d=u.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&u.push([c[3],!0]);break;case"null":break;default:if(u.length==0&&c[3]=="document"||u.length==0&&c[3]=="uof")return rS(r,n);var Qe=!0;switch(u[u.length-1][0]){case"officedocumentsettings":switch(c[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Qe=!1}break;case"componentoptions":switch(c[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Qe=!1}break;case"excelworkbook":switch(c[3]){case"date1904":te.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Qe=!1}break;case"workbookoptions":switch(c[3]){case"owcversion":break;case"height":break;case"width":break;default:Qe=!1}break;case"worksheetoptions":switch(c[3]){case"visible":if(c[0].slice(-2)!=="/>")if(c[1]==="/")switch(r.slice(M,c.index)){case"SheetHidden":W.Hidden=1;break;case"SheetVeryHidden":W.Hidden=2;break}else M=c.index+c[0].length;break;case"header":v["!margins"]||Yf(v["!margins"]={},"xlml"),isNaN(+Et(c[0]).Margin)||(v["!margins"].header=+Et(c[0]).Margin);break;case"footer":v["!margins"]||Yf(v["!margins"]={},"xlml"),isNaN(+Et(c[0]).Margin)||(v["!margins"].footer=+Et(c[0]).Margin);break;case"pagemargins":var Ge=Et(c[0]);v["!margins"]||Yf(v["!margins"]={},"xlml"),isNaN(+Ge.Top)||(v["!margins"].top=+Ge.Top),isNaN(+Ge.Left)||(v["!margins"].left=+Ge.Left),isNaN(+Ge.Right)||(v["!margins"].right=+Ge.Right),isNaN(+Ge.Bottom)||(v["!margins"].bottom=+Ge.Bottom);break;case"displayrighttoleft":te.Views||(te.Views=[]),te.Views[0]||(te.Views[0]={}),te.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":v["!outline"]||(v["!outline"]={}),v["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":v["!outline"]||(v["!outline"]={}),v["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Qe=!1}break;case"pivottable":case"pivotcache":switch(c[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Qe=!1}break;case"pagebreaks":switch(c[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Qe=!1}break;case"autofilter":switch(c[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Qe=!1}break;case"querytable":switch(c[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Qe=!1}break;case"datavalidation":switch(c[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Qe=!1}break;case"sorting":case"conditionalformatting":switch(c[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Qe=!1}break;case"mapinfo":case"schema":case"data":switch(c[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Qe=!1}break;case"smarttags":break;default:Qe=!1;break}if(Qe||c[3].match(/!\[CDATA/))break;if(!u[u.length-1][1])throw"Unrecognized tag: "+c[3]+"|"+u.join("|");if(u[u.length-1][0]==="customdocumentproperties"){if(c[0].slice(-2)==="/>")break;c[1]==="/"?_j(U,le,j,r.slice(M,c.index)):(j=c,M=c.index+c[0].length);break}if(n.WTF)throw"Unrecognized tag: "+c[3]+"|"+u.join("|")}var Ve={};return!n.bookSheets&&!n.bookProps&&(Ve.Sheets=h),Ve.SheetNames=x,Ve.Workbook=te,Ve.SSF=jr(Dt),Ve.Props=F,Ve.Custprops=U,Ve}function dv(t,e){switch(Y1(e=e||{}),e.type||"base64"){case"base64":return bx($s(t),e);case"binary":case"buffer":case"file":return bx(t,e);case"array":return bx(Gl(t),e)}}function Aj(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=V8(n),n.length-n.l<=4)return e;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=B8(n),r=n.read_shift(4),r==0||r>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var bj=[60,1084,2066,2165,2175];function Cj(t,e,n,r,s){var a=r,o=[],c=n.slice(n.l,n.l+a);if(s&&s.enc&&s.enc.insitu&&c.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(c)}o.push(c),n.l+=a;for(var u=Di(n,n.l),d=hv[u],h=0;d!=null&&bj.indexOf(u)>-1;)a=Di(n,n.l+2),h=n.l+4,u==2066?h+=4:(u==2165||u==2175)&&(h+=12),c=n.slice(h,n.l+4+a),o.push(c),n.l+=4+a,d=hv[u=Di(n,n.l)];var x=wo(o);Br(x,0);var v=0;x.lens=[];for(var T=0;T<o.length;++T)x.lens.push(v),v+=o[T].length;if(x.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+x.length+" < "+r;return e.f(x,x.length,s)}function Ya(t,e,n){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Dt[r])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Kl[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=dd(t.v):t.w=Fl(t.v):t.w=da(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&r&&t.t=="n"&&vu(Dt[r]||String(r))){var s=Al(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function y0(t,e,n){return{v:t,ixfe:e,t:n}}function Nj(t,e){var n={opts:{}},r={},s=e.dense?[]:{},a={},o={},c=null,u=[],d="",h={},x,v="",T,S,A,b,R={},B=[],D,L,z=[],O=[],I={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},N=function(gt){return gt<8?Il[gt]:gt<64&&O[gt-8]||Il[gt]},F=function(gt,Zt,fn){var Ot=Zt.XF.data;if(!(!Ot||!Ot.patternType||!fn||!fn.cellStyles)){Zt.s={},Zt.s.patternType=Ot.patternType;var hn;(hn=gd(N(Ot.icvFore)))&&(Zt.s.fgColor={rgb:hn}),(hn=gd(N(Ot.icvBack)))&&(Zt.s.bgColor={rgb:hn})}},U=function(gt,Zt,fn){if(!(Y>1)&&!(fn.sheetRows&&gt.r>=fn.sheetRows)){if(fn.cellStyles&&Zt.XF&&Zt.XF.data&&F(gt,Zt,fn),delete Zt.ixfe,delete Zt.XF,x=gt,v=Ct(gt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),gt.r<o.s.r&&(o.s.r=gt.r),gt.c<o.s.c&&(o.s.c=gt.c),gt.r+1>o.e.r&&(o.e.r=gt.r+1),gt.c+1>o.e.c&&(o.e.c=gt.c+1),fn.cellFormula&&Zt.f){for(var Ot=0;Ot<B.length;++Ot)if(!(B[Ot][0].s.c>gt.c||B[Ot][0].s.r>gt.r)&&!(B[Ot][0].e.c<gt.c||B[Ot][0].e.r<gt.r)){Zt.F=tn(B[Ot][0]),(B[Ot][0].s.c!=gt.c||B[Ot][0].s.r!=gt.r)&&delete Zt.f,Zt.f&&(Zt.f=""+Wr(B[Ot][1],o,gt,K,M));break}}fn.dense?(s[gt.r]||(s[gt.r]=[]),s[gt.r][gt.c]=Zt):s[v]=Zt}},M={enc:!1,sbcch:0,snames:[],sharedf:R,arrayf:B,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(M.password=e.password);var j,he=[],Se=[],ie=[],fe=[],ce=!1,K=[];K.SheetNames=M.snames,K.sharedf=M.sharedf,K.arrayf=M.arrayf,K.names=[],K.XTI=[];var Ie=0,Y=0,H=0,Q=[],te=[],W;M.codepage=1200,ka(1200);for(var le=!1;t.l<t.length-1;){var ge=t.l,Ne=t.read_shift(2);if(Ne===0&&Ie===10)break;var be=t.l===t.length?0:t.read_shift(2),ke=hv[Ne];if(ke&&ke.f){if(e.bookSheets&&Ie===133&&Ne!==133)break;if(Ie=Ne,ke.r===2||ke.r==12){var $e=t.read_shift(2);if(be-=2,!M.enc&&$e!==Ne&&(($e&255)<<8|$e>>8)!==Ne)throw new Error("rt mismatch: "+$e+"!="+Ne);ke.r==12&&(t.l+=10,be-=10)}var re={};if(Ne===10?re=ke.f(t,be,M):re=Cj(Ne,ke,t,be,M),Y==0&&[9,521,1033,2057].indexOf(Ie)===-1)continue;switch(Ne){case 34:n.opts.Date1904=I.WBProps.date1904=re;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(M.enc||(t.l=0),M.enc=re,!e.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:M.lastuser=re;break;case 66:var ft=Number(re);switch(ft){case 21010:ft=1200;break;case 32768:ft=1e4;break;case 32769:ft=1252;break}ka(M.codepage=ft),le=!0;break;case 317:M.rrtabid=re;break;case 25:M.winlocked=re;break;case 439:n.opts.RefreshAll=re;break;case 12:n.opts.CalcCount=re;break;case 16:n.opts.CalcDelta=re;break;case 17:n.opts.CalcIter=re;break;case 13:n.opts.CalcMode=re;break;case 14:n.opts.CalcPrecision=re;break;case 95:n.opts.CalcSaveRecalc=re;break;case 15:M.CalcRefMode=re;break;case 2211:n.opts.FullCalc=re;break;case 129:re.fDialog&&(s["!type"]="dialog"),re.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),re.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:z.push(re);break;case 430:K.push([re]),K[K.length-1].XTI=[];break;case 35:case 547:K[K.length-1].push(re);break;case 24:case 536:W={Name:re.Name,Ref:Wr(re.rgce,o,null,K,M)},re.itab>0&&(W.Sheet=re.itab-1),K.names.push(W),K[0]||(K[0]=[],K[0].XTI=[]),K[K.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(te[re.itab-1]={ref:tn(re.rgce[0][0][1][2])});break;case 22:M.ExternCount=re;break;case 23:K.length==0&&(K[0]=[],K[0].XTI=[]),K[K.length-1].XTI=K[K.length-1].XTI.concat(re),K.XTI=K.XTI.concat(re);break;case 2196:if(M.biff<8)break;W!=null&&(W.Comment=re[1]);break;case 18:s["!protect"]=re;break;case 19:re!==0&&M.WTF&&console.error("Password verifier: "+re);break;case 133:a[re.pos]=re,M.snames.push(re.name);break;case 10:{if(--Y)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=tn(o),e.sheetRows&&e.sheetRows<=o.e.r){var Je=o.e.r;o.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=tn(o),o.e.r=Je}o.e.r++,o.e.c++}he.length>0&&(s["!merges"]=he),Se.length>0&&(s["!objects"]=Se),ie.length>0&&(s["!cols"]=ie),fe.length>0&&(s["!rows"]=fe),I.Sheets.push(C)}d===""?h=s:r[d]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(M.biff===8&&(M.biff={9:2,521:3,1033:4}[Ne]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),M.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(M.biff=5,le=!0,ka(M.codepage=28591)),M.biff==8&&re.BIFFVer==0&&re.dt==16&&(M.biff=2),Y++)break;if(s=e.dense?[]:{},M.biff<8&&!le&&(le=!0,ka(M.codepage=e.codepage||1252)),M.biff<5||re.BIFFVer==0&&re.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Qe={pos:t.l-be,name:d};a[Qe.pos]=Qe,M.snames.push(d)}else d=(a[ge]||{name:""}).name;re.dt==32&&(s["!type"]="chart"),re.dt==64&&(s["!type"]="macro"),he=[],Se=[],M.arrayf=B=[],ie=[],fe=[],ce=!1,C={Hidden:(a[ge]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[re.r]||[])[re.c]:s[Ct({c:re.c,r:re.r})])&&++re.c,D={ixfe:re.ixfe,XF:z[re.ixfe]||{},v:re.val,t:"n"},H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:re.c,r:re.r},D,e);break;case 5:case 517:D={ixfe:re.ixfe,XF:z[re.ixfe],v:re.val,t:re.t},H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:re.c,r:re.r},D,e);break;case 638:D={ixfe:re.ixfe,XF:z[re.ixfe],v:re.rknum,t:"n"},H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:re.c,r:re.r},D,e);break;case 189:for(var Ge=re.c;Ge<=re.C;++Ge){var Ve=re.rkrec[Ge-re.c][0];D={ixfe:Ve,XF:z[Ve],v:re.rkrec[Ge-re.c][1],t:"n"},H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:Ge,r:re.r},D,e)}break;case 6:case 518:case 1030:{if(re.val=="String"){c=re;break}if(D=y0(re.val,re.cell.ixfe,re.tt),D.XF=z[D.ixfe],e.cellFormula){var st=re.formula;if(st&&st[0]&&st[0][0]&&st[0][0][0]=="PtgExp"){var it=st[0][0][1][0],dt=st[0][0][1][1],et=Ct({r:it,c:dt});R[et]?D.f=""+Wr(re.formula,o,re.cell,K,M):D.F=((e.dense?(s[it]||[])[dt]:s[et])||{}).F}else D.f=""+Wr(re.formula,o,re.cell,K,M)}H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U(re.cell,D,e),c=re}break;case 7:case 519:if(c)c.val=re,D=y0(re,c.cell.ixfe,"s"),D.XF=z[D.ixfe],e.cellFormula&&(D.f=""+Wr(c.formula,o,c.cell,K,M)),H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U(c.cell,D,e),c=null;else throw new Error("String record expects Formula");break;case 33:case 545:{B.push(re);var _t=Ct(re[0].s);if(T=e.dense?(s[re[0].s.r]||[])[re[0].s.c]:s[_t],e.cellFormula&&T){if(!c||!_t||!T)break;T.f=""+Wr(re[1],o,re[0],K,M),T.F=tn(re[0])}}break;case 1212:{if(!e.cellFormula)break;if(v){if(!c)break;R[Ct(c.cell)]=re[0],T=e.dense?(s[c.cell.r]||[])[c.cell.c]:s[Ct(c.cell)],(T||{}).f=""+Wr(re[0],o,x,K,M)}}break;case 253:D=y0(u[re.isst].t,re.ixfe,"s"),u[re.isst].h&&(D.h=u[re.isst].h),D.XF=z[D.ixfe],H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:re.c,r:re.r},D,e);break;case 513:e.sheetStubs&&(D={ixfe:re.ixfe,XF:z[re.ixfe],t:"z"},H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:re.c,r:re.r},D,e));break;case 190:if(e.sheetStubs)for(var kn=re.c;kn<=re.C;++kn){var vt=re.ixfe[kn-re.c];D={ixfe:vt,XF:z[vt],t:"z"},H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:kn,r:re.r},D,e)}break;case 214:case 516:case 4:D=y0(re.val,re.ixfe,"s"),D.XF=z[D.ixfe],H>0&&(D.z=Q[D.ixfe>>8&63]),Ya(D,e,n.opts.Date1904),U({c:re.c,r:re.r},D,e);break;case 0:case 512:Y===1&&(o=re);break;case 252:u=re;break;case 1054:if(M.biff==4){Q[H++]=re[1];for(var Lt=0;Lt<H+163&&Dt[Lt]!=re[1];++Lt);Lt>=163&&Nl(re[1],H+163)}else Nl(re[1],re[0]);break;case 30:{Q[H++]=re;for(var Kt=0;Kt<H+163&&Dt[Kt]!=re;++Kt);Kt>=163&&Nl(re,H+163)}break;case 229:he=he.concat(re);break;case 93:Se[re.cmo[0]]=M.lastobj=re;break;case 438:M.lastobj.TxO=re;break;case 127:M.lastobj.ImData=re;break;case 440:for(b=re[0].s.r;b<=re[0].e.r;++b)for(A=re[0].s.c;A<=re[0].e.c;++A)T=e.dense?(s[b]||[])[A]:s[Ct({c:A,r:b})],T&&(T.l=re[1]);break;case 2048:for(b=re[0].s.r;b<=re[0].e.r;++b)for(A=re[0].s.c;A<=re[0].e.c;++A)T=e.dense?(s[b]||[])[A]:s[Ct({c:A,r:b})],T&&T.l&&(T.l.Tooltip=re[1]);break;case 28:{if(M.biff<=5&&M.biff>=2)break;T=e.dense?(s[re[0].r]||[])[re[0].c]:s[Ct(re[0])];var yn=Se[re[2]];T||(e.dense?(s[re[0].r]||(s[re[0].r]=[]),T=s[re[0].r][re[0].c]={t:"z"}):T=s[Ct(re[0])]={t:"z"},o.e.r=Math.max(o.e.r,re[0].r),o.s.r=Math.min(o.s.r,re[0].r),o.e.c=Math.max(o.e.c,re[0].c),o.s.c=Math.min(o.s.c,re[0].c)),T.c||(T.c=[]),S={a:re[1],t:yn.TxO.t},T.c.push(S)}break;case 2173:WV(z[re.ixfe],re.ext);break;case 125:{if(!M.cellStyles)break;for(;re.e>=re.s;)ie[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},ce||(ce=!0,G1(re.w/256)),cu(ie[re.e+1])}break;case 520:{var jt={};re.level!=null&&(fe[re.r]=jt,jt.level=re.level),re.hidden&&(fe[re.r]=jt,jt.hidden=!0),re.hpt&&(fe[re.r]=jt,jt.hpt=re.hpt,jt.hpx=xd(re.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Yf(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ne]]=re;break;case 161:s["!margins"]||Yf(s["!margins"]={}),s["!margins"].header=re.header,s["!margins"].footer=re.footer;break;case 574:re.RTL&&(I.Views[0].RTL=!0);break;case 146:O=re;break;case 2198:j=re;break;case 140:L=re;break;case 442:d?C.CodeName=re||C.name:I.WBProps.CodeName=re||"ThisWorkbook";break}}else ke||console.error("Missing Info for XLS Record 0x"+Ne.toString(16)),t.l+=be}return n.SheetNames=ri(a).sort(function(Mt,gt){return Number(Mt)-Number(gt)}).map(function(Mt){return a[Mt].name}),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&h["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=h)):n.Preamble=h,n.Sheets&&te.forEach(function(Mt,gt){n.Sheets[n.SheetNames[gt]]["!autofilter"]=Mt}),n.Strings=u,n.SSF=jr(Dt),M.enc&&(n.Encryption=M.enc),j&&(n.Themes=j),n.Metadata={},L!==void 0&&(n.Metadata.Country=L),K.names.length>0&&(I.Names=K.names),n.Workbook=I,n}var X2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Ij(t,e,n){var r=en.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var s=F2(r,q8,X2.DSI);for(var a in s)e[a]=s[a]}catch(d){if(n.WTF)throw d}var o=en.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var c=F2(o,K8,X2.SI);for(var u in c)e[u]==null&&(e[u]=c[u])}catch(d){if(n.WTF)throw d}e.HeadingPairs&&e.TitlesOfParts&&(QN(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function OI(t,e){e||(e={}),Y1(e),fN(),e.codepage&&C1(e.codepage);var n,r;if(t.FullPaths){if(en.find(t,"/encryption"))throw new Error("File is password-protected");n=en.find(t,"!CompObj"),r=en.find(t,"/Workbook")||en.find(t,"/Book")}else{switch(e.type){case"base64":t=Ia($s(t));break;case"binary":t=Ia(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Br(t,0),r={content:t}}var s,a;if(n&&Aj(n),e.bookProps&&!e.bookSheets)s={};else{var o=Wt?"buffer":"array";if(r&&r.content)s=Nj(r.content,e);else if((a=en.find(t,"PerfectOffice_MAIN"))&&a.content)s=Kf.to_workbook(a.content,(e.type=o,e));else if((a=en.find(t,"NativeContent_MAIN"))&&a.content)s=Kf.to_workbook(a.content,(e.type=o,e));else throw(a=en.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&en.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=p7(t))}var c={};return t.FullPaths&&Ij(t,c,e),s.Props=s.Custprops=c,e.bookFiles&&(s.cfb=t),s}var yp={0:{f:uz},1:{f:pz},2:{f:wz},3:{f:vz},4:{f:gz},5:{f:Tz},6:{f:bz},7:{f:_z},8:{f:Rz},9:{f:kz},10:{f:Nz},11:{f:Iz},12:{f:mz},13:{f:Sz},14:{f:yz},15:{f:xz},16:{f:RI},17:{f:Cz},18:{f:Ez},19:{f:U1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:sj},40:{},42:{},43:{f:NV},44:{f:CV},45:{f:IV},46:{f:RV},47:{f:kV},48:{},49:{f:D8},50:{},51:{f:XV},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:fI},62:{f:Az},63:{f:r7},64:{f:Bz},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:rs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Vz},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:hz},148:{f:fz,p:16},151:{f:Pz},152:{},153:{f:nj},154:{},155:{},156:{f:tj},157:{},158:{},159:{T:1,f:K9},160:{T:-1},161:{T:1,f:ql},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Dz},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:ZV},336:{T:-1},337:{f:QV,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:lv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:uI},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Fz},427:{f:Oz},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Uz},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:dz},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Mz},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:lv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:f7},633:{T:1},634:{T:-1},635:{T:1,f:u7},636:{T:-1},637:{f:P8},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:qz},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:zz},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},hv={6:{f:Sx},10:{f:_o},12:{f:dr},13:{f:dr},14:{f:Qn},15:{f:Qn},16:{f:Xr},17:{f:Qn},18:{f:Qn},19:{f:dr},20:{f:V2},21:{f:V2},23:{f:uI},24:{f:z2},25:{f:Qn},26:{},27:{},28:{f:l9},29:{},34:{f:Qn},35:{f:B2},38:{f:Xr},39:{f:Xr},40:{f:Xr},41:{f:Xr},42:{f:Qn},43:{f:Qn},47:{f:dV},49:{f:HU},51:{f:dr},60:{},61:{f:BU},64:{f:Qn},65:{f:jU},66:{f:dr},77:{},80:{},81:{},82:{},85:{f:dr},89:{},90:{},91:{},92:{f:DU},93:{f:u9},94:{},95:{f:Qn},96:{},97:{},99:{f:Qn},125:{f:fI},128:{f:QU},129:{f:MU},130:{f:dr},131:{f:Qn},132:{f:Qn},133:{f:PU},134:{},140:{f:g9},141:{f:dr},144:{},146:{f:v9},151:{},152:{},153:{},154:{},155:{},156:{f:dr},157:{},158:{},160:{f:w9},161:{f:_9},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:YU},190:{f:WU},193:{f:_o},197:{},198:{},199:{},200:{},201:{},202:{f:Qn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:dr},220:{},221:{f:Qn},222:{},224:{f:XU},225:{f:RU},226:{f:_o},227:{},229:{f:c9},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:FU},253:{f:GU},255:{f:OU},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:sI},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Qn},353:{f:_o},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:t9},431:{f:Qn},432:{},433:{},434:{},437:{},438:{f:h9},439:{f:Qn},440:{f:p9},441:{},442:{f:Od},443:{},444:{f:dr},445:{},446:{},448:{f:_o},449:{f:VU,r:2},450:{f:_o},512:{f:L2},513:{f:T9},515:{f:e9},516:{f:$U},517:{f:U2},519:{f:S9},520:{f:LU},523:{},545:{f:j2},549:{f:O2},566:{},574:{f:zU},638:{f:JU},659:{},1048:{},1054:{f:qU},1084:{},1212:{f:a9},2048:{f:m9},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:g0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:_o},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:y9,r:12},2173:{f:YV,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Qn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:s9,r:12},2197:{},2198:{f:HV,r:12},2199:{},2200:{},2201:{},2202:{f:i9,r:12},2203:{f:_o},2204:{},2205:{},2206:{},2207:{},2211:{f:UU},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:dr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:E9},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:x9},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:L2},1:{},2:{f:N9},3:{f:C9},4:{f:b9},5:{f:U2},7:{f:I9},8:{},9:{f:g0},11:{},22:{f:dr},30:{f:KU},31:{},32:{},33:{f:j2},36:{},37:{f:O2},50:{f:k9},62:{},52:{},67:{},68:{f:dr},69:{},86:{},126:{},127:{f:A9},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:R9},223:{},234:{},354:{},421:{},518:{f:Sx},521:{f:g0},536:{f:z2},547:{f:B2},561:{},579:{},1030:{f:Sx},1033:{f:g0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Na(t,e,n,r){var s=e;if(!isNaN(s)){var a=(n||[]).length||0,o=t.next(4);o.write_shift(2,s),o.write_shift(2,a),a>0&&$N(n)&&t.push(n)}}function Q2(t,e){var n=e||{},r=n.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),o=s.index,c=a&&a.index||t.length,u=e8(t.slice(o,c),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,h=0,x=0,v=0,T={s:{r:1e7,c:1e7},e:{r:0,c:0}},S=[];for(o=0;o<u.length;++o){var A=u[o].trim(),b=A.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,n.sheetRows&&n.sheetRows<=d){--d;break}h=0;continue}if(!(b!="<td"&&b!="<th")){var R=A.split(/<\/t[dh]>/i);for(c=0;c<R.length;++c){var B=R[c].trim();if(B.match(/<t[dh]/i)){for(var D=B,L=0;D.charAt(0)=="<"&&(L=D.indexOf(">"))>-1;)D=D.slice(L+1);for(var z=0;z<S.length;++z){var O=S[z];O.s.c==h&&O.s.r<d&&d<=O.e.r&&(h=O.e.c+1,z=-1)}var I=Et(B.slice(0,B.indexOf(">")));v=I.colspan?+I.colspan:1,((x=+I.rowspan)>1||v>1)&&S.push({s:{r:d,c:h},e:{r:d+(x||1)-1,c:h+v-1}});var C=I.t||I["data-t"]||"";if(!D.length){h+=v;continue}if(D=DN(D),T.s.r>d&&(T.s.r=d),T.e.r<d&&(T.e.r=d),T.s.c>h&&(T.s.c=h),T.e.c<h&&(T.e.c=h),!D.length){h+=v;continue}var N={t:"s",v:D};n.raw||!D.trim().length||C=="s"||(D==="TRUE"?N={t:"b",v:!0}:D==="FALSE"?N={t:"b",v:!1}:isNaN(Ma(D))?isNaN(lu(D).getDate())||(N={t:"d",v:Cr(D)},n.cellDates||(N={t:"n",v:gs(N.v)}),N.z=n.dateNF||Dt[14]):N={t:"n",v:Ma(D)}),n.dense?(r[d]||(r[d]=[]),r[d][h]=N):r[Ct({r:d,c:h})]=N,h+=v}}}}return r["!ref"]=tn(T),S.length&&(r["!merges"]=S),r}function kj(t,e,n,r){for(var s=t["!merges"]||[],a=[],o=e.s.c;o<=e.e.c;++o){for(var c=0,u=0,d=0;d<s.length;++d)if(!(s[d].s.r>n||s[d].s.c>o)&&!(s[d].e.r<n||s[d].e.c<o)){if(s[d].s.r<n||s[d].s.c<o){c=-1;break}c=s[d].e.r-s[d].s.r+1,u=s[d].e.c-s[d].s.c+1;break}if(!(c<0)){var h=Ct({r:n,c:o}),x=r.dense?(t[n]||[])[o]:t[h],v=x&&x.v!=null&&(x.h||M1(x.w||(Li(x),x.w)||""))||"",T={};c>1&&(T.rowspan=c),u>1&&(T.colspan=u),r.editable?v='<span contenteditable="true">'+v+"</span>":x&&(T["data-t"]=x&&x.t||"z",x.v!=null&&(T["data-v"]=x.v),x.z!=null&&(T["data-z"]=x.z),x.l&&(x.l.Target||"#").charAt(0)!="#"&&(v='<a href="'+x.l.Target+'">'+v+"</a>")),T.id=(r.id||"sjs")+"-"+h,a.push(g8("td",v,T))}}var S="<tr>";return S+a.join("")+"</tr>"}var Rj='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Dj="</body></html>";function Mj(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return Jo(Q2(n[0],e),e);var r=Z1();return n.forEach(function(s,a){X1(r,Q2(s,e),"Sheet"+(a+1))}),r}function Pj(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function Fj(t,e){var n=e||{},r=n.header!=null?n.header:Rj,s=n.footer!=null?n.footer:Dj,a=[r],o=yu(t["!ref"]);n.dense=Array.isArray(t),a.push(Pj(t,o,n));for(var c=o.s.r;c<=o.e.r;++c)a.push(kj(t,o,c,n));return a.push("</table>"+s),a.join("")}function LI(t,e,n){var r=n||{},s=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var o=typeof r.origin=="string"?ps(r.origin):r.origin;s=o.r,a=o.c}var c=e.getElementsByTagName("tr"),u=Math.min(r.sheetRows||1e7,c.length),d={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var h=yu(t["!ref"]);d.s.r=Math.min(d.s.r,h.s.r),d.s.c=Math.min(d.s.c,h.s.c),d.e.r=Math.max(d.e.r,h.e.r),d.e.c=Math.max(d.e.c,h.e.c),s==-1&&(d.e.r=s=h.e.r+1)}var x=[],v=0,T=t["!rows"]||(t["!rows"]=[]),S=0,A=0,b=0,R=0,B=0,D=0;for(t["!cols"]||(t["!cols"]=[]);S<c.length&&A<u;++S){var L=c[S];if(eS(L)){if(r.display)continue;T[A]={hidden:!0}}var z=L.children;for(b=R=0;b<z.length;++b){var O=z[b];if(!(r.display&&eS(O))){var I=O.hasAttribute("data-v")?O.getAttribute("data-v"):O.hasAttribute("v")?O.getAttribute("v"):DN(O.innerHTML),C=O.getAttribute("data-z")||O.getAttribute("z");for(v=0;v<x.length;++v){var N=x[v];N.s.c==R+a&&N.s.r<A+s&&A+s<=N.e.r&&(R=N.e.c+1-a,v=-1)}D=+O.getAttribute("colspan")||1,((B=+O.getAttribute("rowspan")||1)>1||D>1)&&x.push({s:{r:A+s,c:R+a},e:{r:A+s+(B||1)-1,c:R+a+(D||1)-1}});var F={t:"s",v:I},U=O.getAttribute("data-t")||O.getAttribute("t")||"";I!=null&&(I.length==0?F.t=U||"z":r.raw||I.trim().length==0||U=="s"||(I==="TRUE"?F={t:"b",v:!0}:I==="FALSE"?F={t:"b",v:!1}:isNaN(Ma(I))?isNaN(lu(I).getDate())||(F={t:"d",v:Cr(I)},r.cellDates||(F={t:"n",v:gs(F.v)}),F.z=r.dateNF||Dt[14]):F={t:"n",v:Ma(I)})),F.z===void 0&&C!=null&&(F.z=C);var M="",j=O.getElementsByTagName("A");if(j&&j.length)for(var he=0;he<j.length&&!(j[he].hasAttribute("href")&&(M=j[he].getAttribute("href"),M.charAt(0)!="#"));++he);M&&M.charAt(0)!="#"&&(F.l={Target:M}),r.dense?(t[A+s]||(t[A+s]=[]),t[A+s][R+a]=F):t[Ct({c:R+a,r:A+s})]=F,d.e.c<R+a&&(d.e.c=R+a),R+=D}}++A}return x.length&&(t["!merges"]=(t["!merges"]||[]).concat(x)),d.e.r=Math.max(d.e.r,A-1+s),t["!ref"]=tn(d),A>=u&&(t["!fullref"]=tn((d.e.r=c.length-S+A-1+s,d))),t}function UI(t,e){var n=e||{},r=n.dense?[]:{};return LI(r,t,e)}function Oj(t,e){return Jo(UI(t,e),e)}function eS(t){var e="",n=Lj(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Lj(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Uj(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=nn(e.replace(/<[^>]*>/g,""));return[n]}var tS={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function VI(t,e){var n=e||{},r=P1(t),s=[],a,o,c={name:""},u="",d=0,h,x,v={},T=[],S=n.dense?[]:{},A,b,R={value:""},B="",D=0,L=[],z=-1,O=-1,I={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,N={},F=[],U={},M=0,j=0,he=[],Se=1,ie=1,fe=[],ce={Names:[]},K={},Ie=["",""],Y=[],H={},Q="",te=0,W=!1,le=!1,ge=0;for(pd.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");A=pd.exec(r);)switch(A[3]=A[3].replace(/_.*$/,"")){case"table":case"":A[1]==="/"?(I.e.c>=I.s.c&&I.e.r>=I.s.r?S["!ref"]=tn(I):S["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=I.e.r&&(S["!fullref"]=S["!ref"],I.e.r=n.sheetRows-1,S["!ref"]=tn(I)),F.length&&(S["!merges"]=F),he.length&&(S["!rows"]=he),h.name=h.||h.name,typeof JSON<"u"&&JSON.stringify(h),T.push(h.name),v[h.name]=S,le=!1):A[0].charAt(A[0].length-2)!=="/"&&(h=Et(A[0],!1),z=O=-1,I.s.r=I.s.c=1e7,I.e.r=I.e.c=0,S=n.dense?[]:{},F=[],he=[],le=!0);break;case"table-row-group":A[1]==="/"?--C:++C;break;case"table-row":case"":if(A[1]==="/"){z+=Se,Se=1;break}if(x=Et(A[0],!1),x.?z=x.-1:z==-1&&(z=0),Se=+x["number-rows-repeated"]||1,Se<10)for(ge=0;ge<Se;++ge)C>0&&(he[z+ge]={level:C});O=-1;break;case"covered-table-cell":A[1]!=="/"&&++O,n.sheetStubs&&(n.dense?(S[z]||(S[z]=[]),S[z][O]={t:"z"}):S[Ct({r:z,c:O})]={t:"z"}),B="",L=[];break;case"table-cell":case"":if(A[0].charAt(A[0].length-2)==="/")++O,R=Et(A[0],!1),ie=parseInt(R["number-columns-repeated"]||"1",10),b={t:"z",v:null},R.formula&&n.cellFormula!=!1&&(b.f=Y2(nn(R.formula))),(R.||R["value-type"])=="string"&&(b.t="s",b.v=nn(R["string-value"]||""),n.dense?(S[z]||(S[z]=[]),S[z][O]=b):S[Ct({r:z,c:O})]=b),O+=ie-1;else if(A[1]!=="/"){++O,B="",D=0,L=[],ie=1;var Ne=Se?z+Se-1:z;if(O>I.e.c&&(I.e.c=O),O<I.s.c&&(I.s.c=O),z<I.s.r&&(I.s.r=z),Ne>I.e.r&&(I.e.r=Ne),R=Et(A[0],!1),Y=[],H={},b={t:R.||R["value-type"],v:null},n.cellFormula)if(R.formula&&(R.formula=nn(R.formula)),R["number-matrix-columns-spanned"]&&R["number-matrix-rows-spanned"]&&(M=parseInt(R["number-matrix-rows-spanned"],10)||0,j=parseInt(R["number-matrix-columns-spanned"],10)||0,U={s:{r:z,c:O},e:{r:z+M-1,c:O+j-1}},b.F=tn(U),fe.push([U,b.F])),R.formula)b.f=Y2(R.formula);else for(ge=0;ge<fe.length;++ge)z>=fe[ge][0].s.r&&z<=fe[ge][0].e.r&&O>=fe[ge][0].s.c&&O<=fe[ge][0].e.c&&(b.F=fe[ge][1]);switch((R["number-columns-spanned"]||R["number-rows-spanned"])&&(M=parseInt(R["number-rows-spanned"],10)||0,j=parseInt(R["number-columns-spanned"],10)||0,U={s:{r:z,c:O},e:{r:z+M-1,c:O+j-1}},F.push(U)),R["number-columns-repeated"]&&(ie=parseInt(R["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Un(R["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(R.value);break;case"percentage":b.t="n",b.v=parseFloat(R.value);break;case"currency":b.t="n",b.v=parseFloat(R.value);break;case"date":b.t="d",b.v=Cr(R["date-value"]),n.cellDates||(b.t="n",b.v=gs(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=ZL(R["time-value"])/86400,n.cellDates&&(b.t="d",b.v=Kp(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(R.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",R["string-value"]!=null&&(B=nn(R["string-value"]),L=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(W=!1,b.t==="s"&&(b.v=B||"",L.length&&(b.R=L),W=D==0),K.Target&&(b.l=K),Y.length>0&&(b.c=Y,Y=[]),B&&n.cellText!==!1&&(b.w=B),W&&(b.t="z",delete b.v),(!W||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=z))for(var be=0;be<Se;++be){if(ie=parseInt(R["number-columns-repeated"]||"1",10),n.dense)for(S[z+be]||(S[z+be]=[]),S[z+be][O]=be==0?b:jr(b);--ie>0;)S[z+be][O+ie]=jr(b);else for(S[Ct({r:z+be,c:O})]=b;--ie>0;)S[Ct({r:z+be,c:O+ie})]=jr(b);I.e.c<=O&&(I.e.c=O)}ie=parseInt(R["number-columns-repeated"]||"1",10),O+=ie-1,ie=0,b={},B="",L=[]}K={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(A[1]==="/"){if((a=s.pop())[0]!==A[3])throw"Bad state: "+a}else A[0].charAt(A[0].length-2)!=="/"&&s.push([A[3],!0]);break;case"annotation":if(A[1]==="/"){if((a=s.pop())[0]!==A[3])throw"Bad state: "+a;H.t=B,L.length&&(H.R=L),H.a=Q,Y.push(H)}else A[0].charAt(A[0].length-2)!=="/"&&s.push([A[3],!1]);Q="",te=0,B="",D=0,L=[];break;case"creator":A[1]==="/"?Q=r.slice(te,A.index):te=A.index+A[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(A[1]==="/"){if((a=s.pop())[0]!==A[3])throw"Bad state: "+a}else A[0].charAt(A[0].length-2)!=="/"&&s.push([A[3],!1]);B="",D=0,L=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(A[1]==="/"){if(N[c.name]=u,(a=s.pop())[0]!==A[3])throw"Bad state: "+a}else A[0].charAt(A[0].length-2)!=="/"&&(u="",c=Et(A[0],!1),s.push([A[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Et(A[0],!1),u+=tS[A[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Et(A[0],!1),u+=tS[A[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(A[0].slice(-2)==="/>")break;if(A[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":u+=r.slice(d,A.index);break}else d=A.index+A[0].length;break;case"named-range":o=Et(A[0],!1),Ie=Ax(o["cell-range-address"]);var ke={Name:o.name,Ref:Ie[0]+"!"+Ie[1]};le&&(ke.Sheet=T.length),ce.Names.push(ke);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(A[1]==="/"&&(!R||!R["string-value"])){var $e=Uj(r.slice(D,A.index));B=(B.length>0?B+`
`:"")+$e[0]}else Et(A[0],!1),D=A.index+A[0].length;break;case"s":break;case"database-range":if(A[1]==="/")break;try{Ie=Ax(Et(A[0])["target-range-address"]),v[Ie[0]]["!autofilter"]={ref:Ie[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(A[1]!=="/"){if(K=Et(A[0],!1),!K.href)break;K.Target=nn(K.href),delete K.href,K.Target.charAt(0)=="#"&&K.Target.indexOf(".")>-1?(Ie=Ax(K.Target.slice(1)),K.Target="#"+Ie[0]+"!"+Ie[1]):K.Target.match(/^\.\.[\\\/]/)&&(K.Target=K.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(A[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(A)}}var re={Sheets:v,SheetNames:T,Workbook:ce};return n.bookSheets&&delete re.Sheets,re}function nS(t,e){e=e||{},oa(t,"META-INF/manifest.xml")&&eU(fr(t,"META-INF/manifest.xml"),e);var n=js(t,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=VI(Dn(n),e);return oa(t,"meta.xml")&&(r.Props=XN(fr(t,"meta.xml"))),r}function rS(t,e){return VI(t,e)}function K1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pv(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Dn(Gl(t))}function mv(t){var e=t.reduce(function(s,a){return s+a.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(s){n.set(s,r),r+=s.length}),n}function sS(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Vj(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,r=t[e+14]&1,s=e+13;s>=e;--s)r=r*256+t[s];return(t[e+15]&128?-r:r)*Math.pow(10,n-6176)}function vd(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function _r(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function Qr(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],s=vd(t,n),a=s&7;s=Math.floor(s/8);var o=0,c;if(s==0)break;switch(a){case 0:{for(var u=n[0];t[n[0]++]>=128;);c=t.slice(u,n[0])}break;case 5:o=4,c=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,c=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=vd(t,n),c=t.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(r))}var d={data:c,type:a};e[s]==null?e[s]=[d]:e[s].push(d)}return e}function J1(t,e){return t?.map(function(n){return e(n.data)})||[]}function Bj(t){for(var e,n=[],r=[0];r[0]<t.length;){var s=vd(t,r),a=Qr(t.slice(r[0],r[0]+s));r[0]+=s;var o={id:_r(a[1][0].data),messages:[]};a[2].forEach(function(c){var u=Qr(c.data),d=_r(u[3][0].data);o.messages.push({meta:u,data:t.slice(r[0],r[0]+d)}),r[0]+=d}),(e=a[3])!=null&&e[0]&&(o.merge=_r(a[3][0].data)>>>0>0),n.push(o)}return n}function zj(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=vd(e,n),s=[];n[0]<e.length;){var a=e[n[0]]&3;if(a==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var c=o-59;o=e[n[0]],c>1&&(o|=e[n[0]+1]<<8),c>2&&(o|=e[n[0]+2]<<16),c>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=c}s.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var u=0,d=0;if(a==1?(d=(e[n[0]]>>2&7)+4,u=(e[n[0]++]&224)<<3,u|=e[n[0]++]):(d=(e[n[0]++]>>2)+1,a==2?(u=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(u=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),s=[mv(s)],u==0)throw new Error("Invalid offset 0");if(u>s[0].length)throw new Error("Invalid offset beyond length");if(d>=u)for(s.push(s[0].slice(-u)),d-=u;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-u,-u+d))}}var h=mv(s);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function jj(t){for(var e=[],n=0;n<t.length;){var r=t[n++],s=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(zj(r,t.slice(n,n+s))),n+=s}if(n!==t.length)throw new Error("data is not a valid framed stream!");return mv(e)}function Hj(t,e,n,r){var s=K1(t),a=s.getUint32(4,!0),o=(r>1?12:8)+sS(a&(r>1?3470:398))*4,c=-1,u=-1,d=NaN,h=new Date(2001,0,1);a&512&&(c=s.getUint32(o,!0),o+=4),o+=sS(a&(r>1?12288:4096))*4,a&16&&(u=s.getUint32(o,!0),o+=4),a&32&&(d=s.getFloat64(o,!0),o+=8),a&64&&(h.setTime(h.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var x;switch(t[2]){case 0:break;case 2:x={t:"n",v:d};break;case 3:x={t:"s",v:e[u]};break;case 5:x={t:"d",v:h};break;case 6:x={t:"b",v:d>0};break;case 7:x={t:"n",v:d/86400};break;case 8:x={t:"e",v:0};break;case 9:if(c>-1)x={t:"s",v:n[c]};else if(u>-1)x={t:"s",v:e[u]};else if(!isNaN(d))x={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return x}function Gj(t,e,n){var r=K1(t),s=r.getUint32(8,!0),a=12,o=-1,c=-1,u=NaN,d=NaN,h=new Date(2001,0,1);s&1&&(u=Vj(t,a),a+=16),s&2&&(d=r.getFloat64(a,!0),a+=8),s&4&&(h.setTime(h.getTime()+r.getFloat64(a,!0)*1e3),a+=8),s&8&&(c=r.getUint32(a,!0),a+=4),s&16&&(o=r.getUint32(a,!0),a+=4);var x;switch(t[1]){case 0:break;case 2:x={t:"n",v:u};break;case 3:x={t:"s",v:e[c]};break;case 5:x={t:"d",v:h};break;case 6:x={t:"b",v:d>0};break;case 7:x={t:"n",v:d/86400};break;case 8:x={t:"e",v:0};break;case 9:if(o>-1)x={t:"s",v:n[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:x={t:"n",v:u};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return x}function $j(t,e,n){switch(t[0]){case 0:case 1:case 2:case 3:return Hj(t,e,n,t[0]);case 5:return Gj(t,e,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ro(t){var e=Qr(t);return vd(e[1][0].data)}function aS(t,e){var n=Qr(e.data),r=_r(n[1][0].data),s=n[3],a=[];return(s||[]).forEach(function(o){var c=Qr(o.data),u=_r(c[1][0].data)>>>0;switch(r){case 1:a[u]=pv(c[3][0].data);break;case 8:{var d=t[Ro(c[9][0].data)][0],h=Qr(d.data),x=t[Ro(h[1][0].data)][0],v=_r(x.meta[1][0].data);if(v!=2001)throw new Error("2000 unexpected reference to ".concat(v));var T=Qr(x.data);a[u]=T[3].map(function(S){return pv(S.data)}).join("")}break}}),a}function qj(t,e){var n,r,s,a,o,c,u,d,h,x,v,T,S,A,b=Qr(t),R=_r(b[1][0].data)>>>0,B=_r(b[2][0].data)>>>0,D=((r=(n=b[8])==null?void 0:n[0])==null?void 0:r.data)&&_r(b[8][0].data)>0||!1,L,z;if((a=(s=b[7])==null?void 0:s[0])!=null&&a.data&&e!=0)L=(c=(o=b[7])==null?void 0:o[0])==null?void 0:c.data,z=(d=(u=b[6])==null?void 0:u[0])==null?void 0:d.data;else if((x=(h=b[4])==null?void 0:h[0])!=null&&x.data&&e!=1)L=(T=(v=b[4])==null?void 0:v[0])==null?void 0:T.data,z=(A=(S=b[3])==null?void 0:S[0])==null?void 0:A.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var O=D?4:1,I=K1(L),C=[],N=0;N<L.length/2;++N){var F=I.getUint16(N*2,!0);F<65535&&C.push([N,F])}if(C.length!=B)throw"Expected ".concat(B," cells, found ").concat(C.length);var U=[];for(N=0;N<C.length-1;++N)U[C[N][0]]=z.subarray(C[N][1]*O,C[N+1][1]*O);return C.length>=1&&(U[C[C.length-1][0]]=z.subarray(C[C.length-1][1]*O)),{R,cells:U}}function Kj(t,e){var n,r=Qr(e.data),s=(n=r?.[7])!=null&&n[0]?_r(r[7][0].data)>>>0>0?1:0:-1,a=J1(r[5],function(o){return qj(o,s)});return{nrows:_r(r[4][0].data)>>>0,data:a.reduce(function(o,c){return o[c.R]||(o[c.R]=[]),c.cells.forEach(function(u,d){if(o[c.R][d])throw new Error("Duplicate cell r=".concat(c.R," c=").concat(d));o[c.R][d]=u}),o},[])}}function Jj(t,e,n){var r,s=Qr(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(_r(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(_r(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=tn(a);var o=Qr(s[4][0].data),c=aS(t,t[Ro(o[4][0].data)][0]),u=(r=o[17])!=null&&r[0]?aS(t,t[Ro(o[17][0].data)][0]):[],d=Qr(o[3][0].data),h=0;d[1].forEach(function(x){var v=Qr(x.data),T=t[Ro(v[2][0].data)][0],S=_r(T.meta[1][0].data);if(S!=6002)throw new Error("6001 unexpected reference to ".concat(S));var A=Kj(t,T);A.data.forEach(function(b,R){b.forEach(function(B,D){var L=Ct({r:h+R,c:D}),z=$j(B,c,u);z&&(n[L]=z)})}),h+=A.nrows})}function Yj(t,e){var n=Qr(e.data),r={"!ref":"A1"},s=t[Ro(n[2][0].data)],a=_r(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Jj(t,s[0],r),r}function Wj(t,e){var n,r=Qr(e.data),s={name:(n=r[1])!=null&&n[0]?pv(r[1][0].data):"",sheets:[]},a=J1(r[2],Ro);return a.forEach(function(o){t[o].forEach(function(c){var u=_r(c.meta[1][0].data);u==6e3&&s.sheets.push(Yj(t,c))})}),s}function Zj(t,e){var n=Z1(),r=Qr(e.data),s=J1(r[1],Ro);if(s.forEach(function(a){t[a].forEach(function(o){var c=_r(o.meta[1][0].data);if(c==2){var u=Wj(t,o);u.sheets.forEach(function(d,h){X1(n,d,h==0?u.name:u.name+"_"+h,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function Cx(t){var e,n,r,s,a={},o=[];if(t.FullPaths.forEach(function(u){if(u.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(u){if(u.name.match(/\.iwa$/)){var d;try{d=jj(u.content)}catch(x){return console.log("?? "+u.content.length+" "+(x.message||x))}var h;try{h=Bj(d)}catch(x){return console.log("## "+(x.message||x))}h.forEach(function(x){a[x.id]=x.messages,o.push(x.id)})}}),!o.length)throw new Error("File has no messages");var c=((s=(r=(n=(e=a?.[1])==null?void 0:e[0])==null?void 0:n.meta)==null?void 0:r[1])==null?void 0:s[0].data)&&_r(a[1][0].meta[1][0].data)==1&&a[1][0];if(c||o.forEach(function(u){a[u].forEach(function(d){var h=_r(d.meta[1][0].data)>>>0;if(h==1)if(!c)c=d;else throw new Error("Document has multiple roots")})}),!c)throw new Error("Cannot find Document root");return Zj(a,c)}function Xj(t){return function(n){for(var r=0;r!=t.length;++r){var s=t[r];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function Y1(t){Xj([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function Qj(t){return Kc.WS.indexOf(t)>-1?"sheet":t==Kc.CS?"chart":t==Kc.DS?"dialog":t==Kc.MS?"macro":t&&t.length?t:"sheet"}function eH(t,e){if(!t)return 0;try{t=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,Qj(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function tH(t,e,n,r,s,a,o,c,u,d,h,x){try{a[r]=$f(js(t,n,!0),e);var v=fr(t,e),T;switch(c){case"sheet":T=oj(v,e,s,u,a[r],d,h,x);break;case"chart":if(T=lj(v,e,s,u,a[r],d,h,x),!T||!T["!drawel"])break;var S=Mf(T["!drawel"].Target,e),A=cv(S),b=i7(js(t,S,!0),$f(js(t,A,!0),S)),R=Mf(b,S),B=cv(R);T=Gz(js(t,R,!0),R,u,$f(js(t,B,!0),R),d,T);break;case"macro":T=cj(v,e,s,u,a[r],d,h,x);break;case"dialog":T=uj(v,e,s,u,a[r],d,h,x);break;default:throw new Error("Unrecognized sheet type "+c)}o[r]=T;var D=[];a&&a[r]&&ri(a[r]).forEach(function(L){var z="";if(a[r][L].Type==Kc.CMNT){z=Mf(a[r][L].Target,e);var O=pj(fr(t,z,!0),z,u);if(!O||!O.length)return;G2(T,O,!1)}a[r][L].Type==Kc.TCMNT&&(z=Mf(a[r][L].Target,e),D=D.concat(l7(fr(t,z,!0),u)))}),D&&D.length&&G2(T,D,!0,u.people||[])}catch(L){if(u.WTF)throw L}}function aa(t){return t.charAt(0)=="/"?t.slice(1):t}function nH(t,e){if(wN(),e=e||{},Y1(e),oa(t,"META-INF/manifest.xml")||oa(t,"objectdata.xml"))return nS(t,e);if(oa(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Cx<"u"){if(t.FileIndex)return Cx(t);var n=en.utils.cfb_new();return x2(t).forEach(function(he){r8(n,he,n8(t,he))}),Cx(n)}throw new Error("Unsupported NUMBERS file")}if(!oa(t,"[Content_Types].xml"))throw oa(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):oa(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=x2(t),s=X8(js(t,"[Content_Types].xml")),a=!1,o,c;if(s.workbooks.length===0&&(c="xl/workbook.xml",fr(t,c,!0)&&s.workbooks.push(c)),s.workbooks.length===0){if(c="xl/workbook.bin",!fr(t,c,!0))throw new Error("Could not find workbook");s.workbooks.push(c),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var u={},d={};if(!e.bookSheets&&!e.bookProps){if(Jf=[],s.sst)try{Jf=hj(fr(t,aa(s.sst)),s.sst,e)}catch(he){if(e.WTF)throw he}e.cellStyles&&s.themes.length&&(u=dj(js(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(d=fj(fr(t,aa(s.style)),s.style,u,e))}s.links.map(function(he){try{var Se=$f(js(t,cv(aa(he))),he);return gj(fr(t,aa(he)),Se,he,e)}catch{}});var h=ij(fr(t,aa(s.workbooks[0])),s.workbooks[0],e),x={},v="";s.coreprops.length&&(v=fr(t,aa(s.coreprops[0]),!0),v&&(x=XN(v)),s.extprops.length!==0&&(v=fr(t,aa(s.extprops[0]),!0),v&&rU(v,x,e)));var T={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(v=js(t,aa(s.custprops[0]),!0),v&&(T=aU(v,e)));var S={};if((e.bookSheets||e.bookProps)&&(h.Sheets?o=h.Sheets.map(function(Se){return Se.name}):x.Worksheets&&x.SheetNames.length>0&&(o=x.SheetNames),e.bookProps&&(S.Props=x,S.Custprops=T),e.bookSheets&&typeof o<"u"&&(S.SheetNames=o),e.bookSheets?S.SheetNames:e.bookProps))return S;o={};var A={};e.bookDeps&&s.calcchain&&(A=mj(fr(t,aa(s.calcchain)),s.calcchain));var b=0,R={},B,D;{var L=h.Sheets;x.Worksheets=L.length,x.SheetNames=[];for(var z=0;z!=L.length;++z)x.SheetNames[z]=L[z].name}var O=a?"bin":"xml",I=s.workbooks[0].lastIndexOf("/"),C=(s.workbooks[0].slice(0,I+1)+"_rels/"+s.workbooks[0].slice(I+1)+".rels").replace(/^\//,"");oa(t,C)||(C="xl/_rels/workbook."+O+".rels");var N=$f(js(t,C,!0),C.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=xj(fr(t,aa(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=c7(fr(t,aa(s.people[0])),e)),N&&(N=eH(N,h.Sheets));var F=fr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=x.Worksheets;++b){var U="sheet";if(N&&N[b]?(B="xl/"+N[b][1].replace(/[\/]?xl\//,""),oa(t,B)||(B=N[b][1]),oa(t,B)||(B=C.replace(/_rels\/.*$/,"")+N[b][1]),U=N[b][2]):(B="xl/worksheets/sheet"+(b+1-F)+"."+O,B=B.replace(/sheet0\./,"sheet.")),D=B.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(b!=e.sheets)continue e;break;case"string":if(x.SheetNames[b].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var M=!1,j=0;j!=e.sheets.length;++j)typeof e.sheets[j]=="number"&&e.sheets[j]==b&&(M=1),typeof e.sheets[j]=="string"&&e.sheets[j].toLowerCase()==x.SheetNames[b].toLowerCase()&&(M=1);if(!M)continue e}}tH(t,B,D,x.SheetNames[b],b,R,o,U,e,h,u,d)}return S={Directory:s,Workbook:h,Props:x,Custprops:T,Deps:A,Sheets:o,SheetNames:x.SheetNames,Strings:Jf,Styles:d,Themes:u,SSF:jr(Dt)},e&&e.bookFiles&&(t.files?(S.keys=r,S.files=t.files):(S.keys=[],S.files={},t.FullPaths.forEach(function(he,Se){he=he.replace(/^Root Entry[\/]/,""),S.keys.push(he),S.files[he]=t.FileIndex[Se]}))),e&&e.bookVBA&&(s.vba.length>0?S.vbaraw=fr(t,aa(s.vba[0]),!0):s.defaults&&s.defaults.bin===h7&&(S.vbaraw=fr(t,"xl/vbaProject.bin",!0))),S}function rH(t,e){var n=e||{},r="Workbook",s=en.find(t,r);try{if(r="/!DataSpaces/Version",s=en.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(Y9(s.content),r="/!DataSpaces/DataSpaceMap",s=en.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=Z9(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=en.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=X9(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=en.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);eV(s.content)}catch{}if(r="/EncryptionInfo",s=en.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var c=tV(s.content);if(r="/EncryptedPackage",s=en.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(c[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(c[1],s.content,n.password||"",n);if(c[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(c[1],s.content,n.password||"",n);throw new Error("File is password-protected")}function W1(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=$s(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function sH(t,e){return en.find(t,"EncryptedPackage")?rH(t,e):OI(t,e)}function aH(t,e){var n,r=t,s=e||{};return s.type||(s.type=Wt&&Buffer.isBuffer(t)?"buffer":"base64"),n=IN(r,s),nH(n,s)}function BI(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return dv(t.slice(n),e);default:break e}return md.to_workbook(t,e)}function iH(t,e){var n="",r=W1(t,e);switch(e.type){case"base64":n=$s(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=Ol(t);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=Dn(n)),e.type="binary",BI(n,e)}function oH(t,e){var n=t;return e.type=="base64"&&(n=$s(n)),n=fd.utils.decode(1200,n.slice(2),"str"),e.type="binary",BI(n,e)}function lH(t){return t.match(/[^\x00-\x7F]/)?Pf(t):t}function Nx(t,e,n,r){return r?(n.type="string",md.to_workbook(t,n)):md.to_workbook(e,n)}function _p(t,e){fN();var n=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return _p(new Uint8Array(t),(n=jr(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=t,s=[0,0,0,0],a=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),tu={},n.dateNF&&(tu.dateNF=n.dateNF),n.type||(n.type=Wt&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=Wt?"buffer":"binary",r=YL(t),typeof Uint8Array<"u"&&!Wt&&(n.type="array")),n.type=="string"&&(a=!0,n.type="binary",n.codepage=65001,r=lH(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),c=new Uint8Array(o);if(c.foo="bar",!c.foo)return n=jr(n),n.type="array",_p(N1(r),n)}switch((s=W1(r,n))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return sH(en.read(r,n),n);break;case 9:if(s[1]<=8)return OI(r,n);break;case 60:return dv(r,n);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return O9(r,n);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return P9.to_workbook(r,n);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?aH(r,n):Nx(t,r,n,a);case 239:return s[3]===60?dv(r,n):Nx(t,r,n,a);case 255:if(s[1]===254)return oH(r,n);if(s[1]===0&&s[2]===2&&s[3]===0)return Kf.to_workbook(r,n);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Kf.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return H2.to_workbook(r,n);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return hV.to_workbook(r,n);break;case 10:case 13:case 32:return iH(r,n);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return D9.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?H2.to_workbook(r,n):Nx(t,r,n,a)}function cH(t,e,n,r,s,a,o,c){var u=Hr(n),d=c.defval,h=c.raw||!Object.prototype.hasOwnProperty.call(c,"raw"),x=!0,v=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(v,"__rowNum__",{value:n,enumerable:!1})}catch{v.__rowNum__=n}else v.__rowNum__=n;if(!o||t[n])for(var T=e.s.c;T<=e.e.c;++T){var S=o?t[n][T]:t[r[T]+u];if(S===void 0||S.t===void 0){if(d===void 0)continue;a[T]!=null&&(v[a[T]]=d);continue}var A=S.v;switch(S.t){case"z":if(A==null)break;continue;case"e":A=A==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+S.t)}if(a[T]!=null){if(A==null)if(S.t=="e"&&A===null)v[a[T]]=null;else if(d!==void 0)v[a[T]]=d;else if(h&&A===null)v[a[T]]=null;else continue;else v[a[T]]=h&&(S.t!=="n"||S.t==="n"&&c.rawNumbers!==!1)?A:Li(S,A,c);A!=null&&(x=!1)}}return{row:v,isempty:x}}function gv(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,s=1,a=[],o=0,c="",u={s:{r:0,c:0},e:{r:0,c:0}},d=e||{},h=d.range!=null?d.range:t["!ref"];switch(d.header===1?r=1:d.header==="A"?r=2:Array.isArray(d.header)?r=3:d.header==null&&(r=0),typeof h){case"string":u=qn(h);break;case"number":u=qn(t["!ref"]),u.s.r=h;break;default:u=h}r>0&&(s=0);var x=Hr(u.s.r),v=[],T=[],S=0,A=0,b=Array.isArray(t),R=u.s.r,B=0,D={};b&&!t[R]&&(t[R]=[]);var L=d.skipHidden&&t["!cols"]||[],z=d.skipHidden&&t["!rows"]||[];for(B=u.s.c;B<=u.e.c;++B)if(!(L[B]||{}).hidden)switch(v[B]=yr(B),n=b?t[R][B]:t[v[B]+x],r){case 1:a[B]=B-u.s.c;break;case 2:a[B]=v[B];break;case 3:a[B]=d.header[B-u.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),c=o=Li(n,null,d),A=D[o]||0,!A)D[o]=1;else{do c=o+"_"+A++;while(D[c]);D[o]=A,D[c]=1}a[B]=c}for(R=u.s.r+s;R<=u.e.r;++R)if(!(z[R]||{}).hidden){var O=cH(t,u,R,v,r,a,b,d);(O.isempty===!1||(r===1?d.blankrows!==!1:d.blankrows))&&(T[S++]=O.row)}return T.length=S,T}var iS=/"/g;function uH(t,e,n,r,s,a,o,c){for(var u=!0,d=[],h="",x=Hr(n),v=e.s.c;v<=e.e.c;++v)if(r[v]){var T=c.dense?(t[n]||[])[v]:t[r[v]+x];if(T==null)h="";else if(T.v!=null){u=!1,h=""+(c.rawNumbers&&T.t=="n"?T.v:Li(T,null,c));for(var S=0,A=0;S!==h.length;++S)if((A=h.charCodeAt(S))===s||A===a||A===34||c.forceQuotes){h='"'+h.replace(iS,'""')+'"';break}h=="ID"&&(h='"ID"')}else T.f!=null&&!T.F?(u=!1,h="="+T.f,h.indexOf(",")>=0&&(h='"'+h.replace(iS,'""')+'"')):h="";d.push(h)}return c.blankrows===!1&&u?null:d.join(o)}function zI(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var s=qn(t["!ref"]),a=r.FS!==void 0?r.FS:",",o=a.charCodeAt(0),c=r.RS!==void 0?r.RS:`
`,u=c.charCodeAt(0),d=new RegExp((a=="|"?"\\|":a)+"+$"),h="",x=[];r.dense=Array.isArray(t);for(var v=r.skipHidden&&t["!cols"]||[],T=r.skipHidden&&t["!rows"]||[],S=s.s.c;S<=s.e.c;++S)(v[S]||{}).hidden||(x[S]=yr(S));for(var A=0,b=s.s.r;b<=s.e.r;++b)(T[b]||{}).hidden||(h=uH(t,s,b,x,o,u,a,r),h!=null&&(r.strip&&(h=h.replace(d,"")),(h||r.blankrows!==!1)&&n.push((A++?c:"")+h)));return delete r.dense,n.join("")}function fH(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=zI(t,e);return n}function dH(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var s=qn(t["!ref"]),a="",o=[],c,u=[],d=Array.isArray(t);for(c=s.s.c;c<=s.e.c;++c)o[c]=yr(c);for(var h=s.s.r;h<=s.e.r;++h)for(a=Hr(h),c=s.s.c;c<=s.e.c;++c)if(e=o[c]+a,n=d?(t[h]||[])[c]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}u[u.length]=e+"="+r}return u}function jI(t,e,n){var r=n||{},s=+!r.skipHeader,a=t||{},o=0,c=0;if(a&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var u=typeof r.origin=="string"?ps(r.origin):r.origin;o=u.r,c=u.c}var d,h={s:{c:0,r:0},e:{c,r:o+e.length-1+s}};if(a["!ref"]){var x=qn(a["!ref"]);h.e.c=Math.max(h.e.c,x.e.c),h.e.r=Math.max(h.e.r,x.e.r),o==-1&&(o=x.e.r+1,h.e.r=o+e.length-1+s)}else o==-1&&(o=0,h.e.r=e.length-1+s);var v=r.header||[],T=0;e.forEach(function(A,b){ri(A).forEach(function(R){(T=v.indexOf(R))==-1&&(v[T=v.length]=R);var B=A[R],D="z",L="",z=Ct({c:c+T,r:o+b+s});d=yd(a,z),B&&typeof B=="object"&&!(B instanceof Date)?a[z]=B:(typeof B=="number"?D="n":typeof B=="boolean"?D="b":typeof B=="string"?D="s":B instanceof Date?(D="d",r.cellDates||(D="n",B=gs(B)),L=r.dateNF||Dt[14]):B===null&&r.nullError&&(D="e",B=0),d?(d.t=D,d.v=B,delete d.w,delete d.R,L&&(d.z=L)):a[z]=d={t:D,v:B},L&&(d.z=L))})}),h.e.c=Math.max(h.e.c,c+v.length-1);var S=Hr(o);if(s)for(T=0;T<v.length;++T)a[yr(T+c)+S]={t:"s",v:v[T]};return a["!ref"]=tn(h),a}function hH(t,e){return jI(null,t,e)}function yd(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=ps(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?yd(t,Ct(e)):yd(t,Ct({r:e,c:n||0}))}function pH(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Z1(){return{SheetNames:[],Sheets:{}}}function X1(t,e,n,r){var s=1;if(!n)for(;s<=65535&&t.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var o=a&&a[1]||n;for(++s;s<=65535&&t.SheetNames.indexOf(n=o+s)!=-1;++s);}if(Xz(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function mH(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=pH(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function gH(t,e){return t.z=e,t}function HI(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function xH(t,e,n){return HI(t,"#"+e,n)}function vH(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function yH(t,e,n,r){for(var s=typeof e!="string"?e:qn(e),a=typeof e=="string"?e:tn(e),o=s.s.r;o<=s.e.r;++o)for(var c=s.s.c;c<=s.e.c;++c){var u=yd(t,o,c);u.t="n",u.F=a,delete u.v,o==s.s.r&&c==s.s.c&&(u.f=n,r&&(u.D=!0))}return t}var Ff={encode_col:yr,encode_row:Hr,encode_cell:Ct,encode_range:tn,decode_col:L1,decode_row:O1,split_cell:R8,decode_cell:ps,decode_range:yu,format_cell:Li,sheet_add_aoa:KN,sheet_add_json:jI,sheet_add_dom:LI,aoa_to_sheet:_u,json_to_sheet:hH,table_to_sheet:UI,table_to_book:Oj,sheet_to_csv:zI,sheet_to_txt:fH,sheet_to_json:gv,sheet_to_html:Fj,sheet_to_formulae:dH,sheet_to_row_object_array:gv,sheet_get_cell:yd,book_new:Z1,book_append_sheet:X1,book_set_sheet_visibility:mH,cell_set_number_format:gH,cell_set_hyperlink:HI,cell_set_internal_link:xH,cell_add_comment:vH,sheet_set_array_formula:yH,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const GI=t=>String(t).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),_H=t=>{if(!t)return 0;if(typeof t=="number")return t;const e=String(t).replace(/[R$\s.]/g,"").replace(",",".");return parseFloat(e)||0},oS=t=>{if(!t)return 0;if(typeof t=="number")return t;const e=String(t).replace(/[%]/g,"").replace(",",".");return parseFloat(e)||0},EH=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{try{const a=s.target?.result,o=_p(a,{type:"binary"}),c=o.SheetNames[0],u=o.Sheets[c];if(!u["!ref"]){e([]);return}const d=Ff.decode_range(u["!ref"]),h=[],x=[],v=d.s.r;for(let T=d.s.c;T<=d.e.c;++T){const S=Ff.encode_cell({c:T,r:v}),A=u[S];if(A&&A.v){const b=String(A.v);x.push({index:T,name:b,normalized:GI(b)})}}for(let T=v+1;T<=d.e.r;++T){const S={};let A;if(x.forEach(M=>{const j=Ff.encode_cell({c:M.index,r:T}),he=u[j];he&&(S[M.normalized]=he.v,!A&&(M.normalized.includes("endereco")||M.normalized.includes("logradouro")||M.normalized.includes("localizacao")||M.normalized==="rua"||M.normalized==="mapa"||M.normalized==="link")&&he.l&&he.l.Target&&(A=he.l.Target))}),Object.keys(S).length===0)continue;const b=S.endereco||S.logradouro||S.localizacao||S["endereco completo"]||S.rua||S.end||"";let{address:R,link:B,lat:D,lng:L}=lp(b),z=A||B;const O=S.link||S.mapa||S["google maps"]||S.url||S.maps||S.coordenadas||S.geolocalizacao;let I;x.forEach(M=>{if(["link","mapa","google maps","url","maps","coordenadas","geolocalizacao"].includes(M.normalized)){const j=Ff.encode_cell({c:M.index,r:T}),he=u[j];he&&he.l&&he.l.Target&&(I=he.l.Target)}});const C=I||O;if(C){const M=lp(C);M.link&&(z=M.link),M.lat&&(D=M.lat),M.lng&&(L=M.lng)}const N=S["razao social"]||S.cliente||S["nome fantasia"]||S.empresa||S.nome||S["nome cliente"]||S.parceiro||S.loja||"",F=S["nome do proprietario"]||S.proprietario||S.dono||S["contato principal"]||S.responsavel||S.socio||"",U=String(S.contato||S.telefone||S.celular||S.whatsapp||S.tel||S.fone||"");(N||R||b)&&h.push({companyName:N,ownerName:F,phone:U,address:R,googleMapsLink:z,latitude:D,longitude:L})}e(h)}catch(a){console.error("Excel Parsing Error:",a),n(a)}},r.onerror=s=>n(s),r.readAsBinaryString(t)}),$I=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{try{const a=s.target?.result,o=_p(a,{type:"binary"}),c=o.SheetNames[0],u=o.Sheets[c],d=[];Ff.sheet_to_json(u,{defval:""}).forEach(x=>{const v={};Object.keys(x).forEach(z=>{v[GI(z)]=x[z]});const T=v.departamento||v.categoria||"Geral",S=String(v["cod.prod / sku"]||v["cod.prod"]||v.sku||v["numero do sku"]||""),A=v["nome do produto"]||v.descricao||v.nome||v.produto||"",b=v.marca||v.fabricante||"Genrico",R=_H(v["preco de venda"]||v.preco||0),B=String(v["cod.fabrica"]||v["cod fabrica"]||v["codigo fabrica"]||""),D=oS(v.margem||0),L=oS(v.desconto||v.discount||0);(S||A)&&d.push({category:T,sku:S,brand:b,factoryCode:B,name:A,price:R,margin:D,discount:L})}),e(d)}catch(a){console.error("Product Excel Parsing Error:",a),n(a)}},r.onerror=s=>n(s),r.readAsBinaryString(t)});var TH={};let wH,SH;function AH(){return{geminiUrl:wH,vertexUrl:SH}}function bH(t,e,n,r){var s,a;if(!t?.baseUrl){const o=AH();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(a=o.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}class Hi{}function Ze(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(t,e,n){for(let a=0;a<e.length-1;a++){const o=e[a];if(o.endsWith("[]")){const c=o.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[c])){const u=t[c];if(Array.isArray(n))for(let d=0;d<u.length;d++){const h=u[d];y(h,e.slice(a+1),n[d])}else for(const d of u)y(d,e.slice(a+1),n)}return}else if(o.endsWith("[0]")){const c=o.slice(0,-3);c in t||(t[c]=[{}]);const u=t[c];y(u[0],e.slice(a+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function g(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const o=t[a];return Array.isArray(o)?o.map(c=>g(c,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function CH(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),a=r.split("."),o=new Set;let c=-1;for(let u=0;u<s.length;u++)if(s[u]==="*"){c=u;break}if(c!==-1&&a.length>c)for(let u=c;u<a.length;u++){const d=a[u];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}xv(t,s,a,0,o)}}function xv(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const o=a.slice(0,-2),c=t;if(o in c&&Array.isArray(c[o]))for(const u of c[o])xv(u,e,n,r+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,c=Object.keys(o).filter(d=>!d.startsWith("_")&&!s.has(d)),u={};for(const d of c)u[d]=o[d];for(const[d,h]of Object.entries(u)){const x=[];for(const v of n.slice(r))v==="*"?x.push(d):x.push(v);y(o,x,h)}for(const d of c)delete o[d]}}else{const o=t;a in o&&xv(o[a],e,n,r+1,s)}}function Q1(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function NH(t){const e={},n=g(t,["operationName"]);n!=null&&y(e,["operationName"],n);const r=g(t,["resourceName"]);return r!=null&&y(e,["_url","resourceName"],r),e}function IH(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=g(t,["done"]);s!=null&&y(e,["done"],s);const a=g(t,["error"]);a!=null&&y(e,["error"],a);const o=g(t,["response","generateVideoResponse"]);return o!=null&&y(e,["response"],RH(o)),e}function kH(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=g(t,["done"]);s!=null&&y(e,["done"],s);const a=g(t,["error"]);a!=null&&y(e,["error"],a);const o=g(t,["response"]);return o!=null&&y(e,["response"],DH(o)),e}function RH(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>MH(o))),y(e,["generatedVideos"],a)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function DH(t){const e={},n=g(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>PH(o))),y(e,["generatedVideos"],a)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function MH(t){const e={},n=g(t,["video"]);return n!=null&&y(e,["video"],BH(n)),e}function PH(t){const e={},n=g(t,["_self"]);return n!=null&&y(e,["video"],zH(n)),e}function FH(t){const e={},n=g(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function OH(t){const e={},n=g(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function LH(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=g(t,["done"]);s!=null&&y(e,["done"],s);const a=g(t,["error"]);a!=null&&y(e,["error"],a);const o=g(t,["response"]);return o!=null&&y(e,["response"],UH(o)),e}function UH(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&y(e,["parent"],r);const s=g(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function qI(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=g(t,["done"]);s!=null&&y(e,["done"],s);const a=g(t,["error"]);a!=null&&y(e,["error"],a);const o=g(t,["response"]);return o!=null&&y(e,["response"],VH(o)),e}function VH(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&y(e,["parent"],r);const s=g(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function BH(t){const e={},n=g(t,["uri"]);n!=null&&y(e,["uri"],n);const r=g(t,["encodedVideo"]);r!=null&&y(e,["videoBytes"],Q1(r));const s=g(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function zH(t){const e={},n=g(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=g(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],Q1(r));const s=g(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}var lS;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lS||(lS={}));var cS;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(cS||(cS={}));var uS;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(uS||(uS={}));var Co;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Co||(Co={}));var fS;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fS||(fS={}));var dS;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(dS||(dS={}));var hS;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hS||(hS={}));var pS;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pS||(pS={}));var mS;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mS||(mS={}));var gS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gS||(gS={}));var xS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(xS||(xS={}));var vS;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(vS||(vS={}));var yS;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(yS||(yS={}));var _S;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_S||(_S={}));var ES;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ES||(ES={}));var TS;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(TS||(TS={}));var wS;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(wS||(wS={}));var SS;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(SS||(SS={}));var AS;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(AS||(AS={}));var bS;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(bS||(bS={}));var CS;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CS||(CS={}));var Ep;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ep||(Ep={}));var NS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(NS||(NS={}));var IS;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(IS||(IS={}));var kS;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kS||(kS={}));var vv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vv||(vv={}));var RS;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(RS||(RS={}));var DS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(DS||(DS={}));var yv;(function(t){t.COLLECTION="COLLECTION"})(yv||(yv={}));var MS;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(MS||(MS={}));var PS;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PS||(PS={}));var FS;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(FS||(FS={}));var OS;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(OS||(OS={}));var LS;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(LS||(LS={}));var US;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(US||(US={}));var VS;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(VS||(VS={}));var BS;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(BS||(BS={}));var zS;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(zS||(zS={}));var jS;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(jS||(jS={}));var HS;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(HS||(HS={}));var GS;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(GS||(GS={}));var $S;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})($S||($S={}));var qS;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(qS||(qS={}));var KS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(KS||(KS={}));var JS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(JS||(JS={}));var YS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(YS||(YS={}));var WS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(WS||(WS={}));var ZS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ZS||(ZS={}));var XS;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(XS||(XS={}));var QS;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(QS||(QS={}));var eA;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eA||(eA={}));var tA;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tA||(tA={}));var nA;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(nA||(nA={}));var rA;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rA||(rA={}));var sA;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sA||(sA={}));var aA;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(aA||(aA={}));var Jc;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Jc||(Jc={}));class _v{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ef{get text(){var e,n,r,s,a,o,c,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const x=[];for(const v of(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[T,S]of Object.entries(v))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(S!==null||S!==void 0)&&x.push(T);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,d+=v.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,r,s,a,o,c,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const x of(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[v,T]of Object.entries(x))v!=="inlineData"&&(T!==null||T!==void 0)&&h.push(v);x.inlineData&&typeof x.inlineData.data=="string"&&(d+=atob(x.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,s,a,o,c,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,r,s,a,o,c,u,d;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,s,a,o,c,u,d;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.output}}class iA{}class oA{}class jH{}class HH{}class GH{}class $H{}class lA{}class cA{}class uA{}class qH{}class Tp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Tp;let s;const a=e;return n?s=kH(a):s=IH(a),Object.assign(r,s),r}}class fA{}class dA{}class hA{}class pA{}class KH{}class JH{}class YH{}class ey{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ey,a=LH(e);return Object.assign(r,a),r}}class WH{}class ZH{}class XH{}class QH{}class mA{}class eG{get text(){var e,n,r;let s="",a=!1;const o=[];for(const c of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(c))u!=="text"&&u!=="thought"&&d!==null&&o.push(u);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(o))c!=="inlineData"&&u!==null&&a.push(c);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class tG{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ty{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ty,a=qI(e);return Object.assign(r,a),r}}function an(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function KI(t,e){const n=an(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function JI(t){return Array.isArray(t)?t.map(e=>wp(e)):[wp(t)]}function wp(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function YI(t){const e=wp(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function WI(t){const e=wp(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gA(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ZI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>gA(e)):[gA(t)]}function Ev(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function xA(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function vA(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function es(t){if(t==null)throw new Error("ContentUnion is required");return Ev(t)?t:{role:"user",parts:ZI(t)}}function ny(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=es(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=es(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>es(n)):[es(e)]}function fa(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(xA(t)||vA(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[es(t)]}const e=[],n=[],r=Ev(t[0]);for(const s of t){const a=Ev(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(xA(s)||vA(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:ZI(n)}),e}function nG(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Co).includes(n[0].toUpperCase())?n[0].toUpperCase():Co.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Co).includes(r.toUpperCase())?r.toUpperCase():Co.TYPE_UNSPECIFIED})}}function nu(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&nG(t.type,e);for(const[o,c]of Object.entries(t))if(c!=null)if(o=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Co).includes(c.toUpperCase())?c.toUpperCase():Co.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=nu(c);else if(r.includes(o)){const u=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}u.push(nu(d))}e[o]=u}else if(s.includes(o)){const u={};for(const[d,h]of Object.entries(c))u[d]=nu(h);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=c}return e}function ry(t){return nu(t)}function sy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ay(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Eu(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=nu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=nu(e.response));return t}function Tu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function rG(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Gi(t,e){if(typeof e!="string")throw new Error("name must be a string");return rG(t,e,"cachedContents")}function XI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Yo(t){return Q1(t)}function sG(t){return t!=null&&typeof t=="object"&&"name"in t}function aG(t){return t!=null&&typeof t=="object"&&"video"in t}function iG(t){return t!=null&&typeof t=="object"&&"uri"in t}function QI(t){var e;let n;if(sG(t)&&(n=t.name),!(iG(t)&&(n=t.uri,n===void 0))&&!(aG(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ek(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function tk(t){for(const e of["models","tunedModels","publisherModels"])if(oG(t,e))return t[e];return[]}function oG(t,e){return t!==null&&typeof t=="object"&&e in t}function lG(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function cG(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const o=lG(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function nk(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function uG(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rk(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function wu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function sk(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function fG(t){const e={},n=g(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const r=g(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>$G(o))),y(e,["inlinedResponses"],a)}const s=g(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["inlinedEmbedContentResponses"],a)}return e}function dG(t){const e={},n=g(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const r=g(t,["gcsDestination","outputUriPrefix"]);r!=null&&y(e,["gcsUri"],r);const s=g(t,["bigqueryDestination","outputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function hG(t){const e={},n=g(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const r=g(t,["gcsUri"]);r!=null&&y(e,["gcsDestination","outputUriPrefix"],r);const s=g(t,["bigqueryUri"]);if(s!=null&&y(e,["bigqueryDestination","outputUri"],s),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function U0(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata","displayName"]);r!=null&&y(e,["displayName"],r);const s=g(t,["metadata","state"]);s!=null&&y(e,["state"],sk(s));const a=g(t,["metadata","createTime"]);a!=null&&y(e,["createTime"],a);const o=g(t,["metadata","endTime"]);o!=null&&y(e,["endTime"],o);const c=g(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const u=g(t,["metadata","model"]);u!=null&&y(e,["model"],u);const d=g(t,["metadata","output"]);return d!=null&&y(e,["dest"],fG(rk(d))),e}function Tv(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["displayName"]);r!=null&&y(e,["displayName"],r);const s=g(t,["state"]);s!=null&&y(e,["state"],sk(s));const a=g(t,["error"]);a!=null&&y(e,["error"],a);const o=g(t,["createTime"]);o!=null&&y(e,["createTime"],o);const c=g(t,["startTime"]);c!=null&&y(e,["startTime"],c);const u=g(t,["endTime"]);u!=null&&y(e,["endTime"],u);const d=g(t,["updateTime"]);d!=null&&y(e,["updateTime"],d);const h=g(t,["model"]);h!=null&&y(e,["model"],h);const x=g(t,["inputConfig"]);x!=null&&y(e,["src"],pG(x));const v=g(t,["outputConfig"]);v!=null&&y(e,["dest"],dG(rk(v)));const T=g(t,["completionStats"]);return T!=null&&y(e,["completionStats"],T),e}function pG(t){const e={},n=g(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const r=g(t,["gcsSource","uris"]);r!=null&&y(e,["gcsUri"],r);const s=g(t,["bigquerySource","inputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function mG(t,e){const n={};if(g(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=g(e,["fileName"]);r!=null&&y(n,["fileName"],r);const s=g(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>GG(t,o))),y(n,["requests","requests"],a)}return n}function gG(t){const e={},n=g(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const r=g(t,["gcsUri"]);r!=null&&y(e,["gcsSource","uris"],r);const s=g(t,["bigqueryUri"]);if(s!=null&&y(e,["bigquerySource","inputUri"],s),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function xG(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function vG(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],wu(t,r)),n}function yG(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],wu(t,r)),n}function _G(t){const e={},n=g(t,["content"]);n!=null&&y(e,["content"],n);const r=g(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],EG(r));const s=g(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const a=g(t,["finishReason"]);a!=null&&y(e,["finishReason"],a);const o=g(t,["avgLogprobs"]);o!=null&&y(e,["avgLogprobs"],o);const c=g(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const u=g(t,["index"]);u!=null&&y(e,["index"],u);const d=g(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const h=g(t,["safetyRatings"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(T=>T)),y(e,["safetyRatings"],v)}const x=g(t,["urlContextMetadata"]);return x!=null&&y(e,["urlContextMetadata"],x),e}function EG(t){const e={},n=g(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),y(e,["citations"],r)}return e}function ak(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>XG(a))),y(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function TG(t,e){const n={},r=g(t,["displayName"]);if(e!==void 0&&r!=null&&y(e,["batch","displayName"],r),g(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function wG(t,e){const n={},r=g(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const s=g(t,["dest"]);return e!==void 0&&s!=null&&y(e,["outputConfig"],hG(uG(s))),n}function yA(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],an(t,r));const s=g(e,["src"]);s!=null&&y(n,["batch","inputConfig"],mG(t,nk(t,s)));const a=g(e,["config"]);return a!=null&&TG(a,n),n}function SG(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],an(t,r));const s=g(e,["src"]);s!=null&&y(n,["inputConfig"],gG(nk(t,s)));const a=g(e,["config"]);return a!=null&&wG(a,n),n}function AG(t,e){const n={},r=g(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["batch","displayName"],r),n}function bG(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],an(t,r));const s=g(e,["src"]);s!=null&&y(n,["batch","inputConfig"],MG(t,s));const a=g(e,["config"]);return a!=null&&AG(a,n),n}function CG(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],wu(t,r)),n}function NG(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],wu(t,r)),n}function IG(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const s=g(t,["done"]);s!=null&&y(e,["done"],s);const a=g(t,["error"]);return a!=null&&y(e,["error"],a),e}function kG(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const s=g(t,["done"]);s!=null&&y(e,["done"],s);const a=g(t,["error"]);return a!=null&&y(e,["error"],a),e}function RG(t,e){const n={},r=g(e,["contents"]);if(r!=null){let a=ny(t,r);Array.isArray(a)&&(a=a.map(o=>o)),y(n,["requests[]","request","content"],a)}const s=g(e,["config"]);return s!=null&&(y(n,["_self"],DG(s,n)),CH(n,{"requests[].*":"requests[].request.*"})),n}function DG(t,e){const n={},r=g(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const s=g(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const a=g(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&y(e,["requests[]","outputDimensionality"],a),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function MG(t,e){const n={},r=g(e,["fileName"]);r!=null&&y(n,["file_name"],r);const s=g(e,["inlinedRequests"]);return s!=null&&y(n,["requests"],RG(t,s)),n}function PG(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function FG(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const s=g(t,["name"]);if(s!=null&&y(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OG(t){const e={},n=g(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const r=g(t,["mode"]);if(r!=null&&y(e,["mode"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LG(t,e,n){const r={},s=g(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],ak(es(s)));const a=g(e,["temperature"]);a!=null&&y(r,["temperature"],a);const o=g(e,["topP"]);o!=null&&y(r,["topP"],o);const c=g(e,["topK"]);c!=null&&y(r,["topK"],c);const u=g(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const d=g(e,["maxOutputTokens"]);d!=null&&y(r,["maxOutputTokens"],d);const h=g(e,["stopSequences"]);h!=null&&y(r,["stopSequences"],h);const x=g(e,["responseLogprobs"]);x!=null&&y(r,["responseLogprobs"],x);const v=g(e,["logprobs"]);v!=null&&y(r,["logprobs"],v);const T=g(e,["presencePenalty"]);T!=null&&y(r,["presencePenalty"],T);const S=g(e,["frequencyPenalty"]);S!=null&&y(r,["frequencyPenalty"],S);const A=g(e,["seed"]);A!=null&&y(r,["seed"],A);const b=g(e,["responseMimeType"]);b!=null&&y(r,["responseMimeType"],b);const R=g(e,["responseSchema"]);R!=null&&y(r,["responseSchema"],ry(R));const B=g(e,["responseJsonSchema"]);if(B!=null&&y(r,["responseJsonSchema"],B),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=g(e,["safetySettings"]);if(n!==void 0&&D!=null){let j=D;Array.isArray(j)&&(j=j.map(he=>QG(he))),y(n,["safetySettings"],j)}const L=g(e,["tools"]);if(n!==void 0&&L!=null){let j=Tu(L);Array.isArray(j)&&(j=j.map(he=>t$(Eu(he)))),y(n,["tools"],j)}const z=g(e,["toolConfig"]);if(n!==void 0&&z!=null&&y(n,["toolConfig"],e$(z)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=g(e,["cachedContent"]);n!==void 0&&O!=null&&y(n,["cachedContent"],Gi(t,O));const I=g(e,["responseModalities"]);I!=null&&y(r,["responseModalities"],I);const C=g(e,["mediaResolution"]);C!=null&&y(r,["mediaResolution"],C);const N=g(e,["speechConfig"]);if(N!=null&&y(r,["speechConfig"],sy(N)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=g(e,["thinkingConfig"]);F!=null&&y(r,["thinkingConfig"],F);const U=g(e,["imageConfig"]);U!=null&&y(r,["imageConfig"],HG(U));const M=g(e,["enableEnhancedCivicAnswers"]);if(M!=null&&y(r,["enableEnhancedCivicAnswers"],M),g(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function UG(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>_G(d))),y(e,["candidates"],u)}const s=g(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const a=g(t,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const o=g(t,["responseId"]);o!=null&&y(e,["responseId"],o);const c=g(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function VG(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],wu(t,r)),n}function BG(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],wu(t,r)),n}function zG(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function jG(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function HG(t){const e={},n=g(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const r=g(t,["imageSize"]);if(r!=null&&y(e,["imageSize"],r),g(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function GG(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["request","model"],an(t,r));const s=g(e,["contents"]);if(s!=null){let c=fa(s);Array.isArray(c)&&(c=c.map(u=>ak(u))),y(n,["request","contents"],c)}const a=g(e,["metadata"]);a!=null&&y(n,["metadata"],a);const o=g(e,["config"]);return o!=null&&y(n,["request","generationConfig"],LG(t,o,g(n,["request"],{}))),n}function $G(t){const e={},n=g(t,["response"]);n!=null&&y(e,["response"],UG(n));const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=g(t,["error"]);return s!=null&&y(e,["error"],s),e}function qG(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);if(e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),g(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function KG(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);e!==void 0&&s!=null&&y(e,["_query","pageToken"],s);const a=g(t,["filter"]);return e!==void 0&&a!=null&&y(e,["_query","filter"],a),n}function JG(t){const e={},n=g(t,["config"]);return n!=null&&qG(n,e),e}function YG(t){const e={},n=g(t,["config"]);return n!=null&&KG(n,e),e}function WG(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=g(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>U0(o))),y(e,["batchJobs"],a)}return e}function ZG(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=g(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Tv(o))),y(e,["batchJobs"],a)}return e}function XG(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&y(e,["fileData"],PG(a));const o=g(t,["functionCall"]);o!=null&&y(e,["functionCall"],FG(o));const c=g(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const u=g(t,["inlineData"]);u!=null&&y(e,["inlineData"],xG(u));const d=g(t,["text"]);d!=null&&y(e,["text"],d);const h=g(t,["thought"]);h!=null&&y(e,["thought"],h);const x=g(t,["thoughtSignature"]);x!=null&&y(e,["thoughtSignature"],x);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function QG(t){const e={},n=g(t,["category"]);if(n!=null&&y(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function e$(t){const e={},n=g(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const r=g(t,["functionCallingConfig"]);return r!=null&&y(e,["functionCallingConfig"],OG(r)),e}function t$(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const s=g(t,["codeExecution"]);if(s!=null&&y(e,["codeExecution"],s),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(x=>x)),y(e,["functionDeclarations"],h)}const o=g(t,["googleMaps"]);o!=null&&y(e,["googleMaps"],zG(o));const c=g(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],jG(c));const u=g(t,["googleSearchRetrieval"]);u!=null&&y(e,["googleSearchRetrieval"],u);const d=g(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}var Ui;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ui||(Ui={}));class Yl{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class n$ extends Hi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Yl(Ui.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=yA(this.apiClient,e),r=n._url,s=Ze("{model}:batchGenerateContent",r),c=n.batch.inputConfig.requests,u=c.requests,d=[];for(const h of u){const x=Object.assign({},h);if(x.systemInstruction){const v=x.systemInstruction;delete x.systemInstruction;const T=x.request;T.systemInstruction=v,x.request=T}d.push(x)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const a=this.getGcsUri(e),o=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=SG(this.apiClient,e);return c=Ze("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Tv(h))}else{const d=yA(this.apiClient,e);return c=Ze("{model}:batchGenerateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>U0(h))}}async createEmbeddingsInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=bG(this.apiClient,e);return a=Ze("{model}:asyncBatchEmbedContent",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>U0(u))}}async get(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=BG(this.apiClient,e);return c=Ze("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Tv(h))}else{const d=VG(this.apiClient,e);return c=Ze("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>U0(h))}}async cancel(e){var n,r,s,a;let o="",c={};if(this.apiClient.isVertexAI()){const u=yG(this.apiClient,e);o=Ze("batchPredictionJobs/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=vG(this.apiClient,e);o=Ze("batches/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=YG(e);return c=Ze("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=ZG(h),v=new mA;return Object.assign(v,x),v})}else{const d=JG(e);return c=Ze("batches",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=WG(h),v=new mA;return Object.assign(v,x),v})}}async delete(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=NG(this.apiClient,e);return c=Ze("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>kG(h))}else{const d=CG(this.apiClient,e);return c=Ze("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>IG(h))}}}function r$(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function _A(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>b$(a))),y(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function s$(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=g(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=g(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const o=g(t,["contents"]);if(e!==void 0&&o!=null){let h=fa(o);Array.isArray(h)&&(h=h.map(x=>_A(x))),y(e,["contents"],h)}const c=g(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],_A(es(c)));const u=g(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(x=>N$(x))),y(e,["tools"],h)}const d=g(t,["toolConfig"]);if(e!==void 0&&d!=null&&y(e,["toolConfig"],C$(d)),g(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function a$(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=g(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=g(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const o=g(t,["contents"]);if(e!==void 0&&o!=null){let x=fa(o);Array.isArray(x)&&(x=x.map(v=>v)),y(e,["contents"],x)}const c=g(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],es(c));const u=g(t,["tools"]);if(e!==void 0&&u!=null){let x=u;Array.isArray(x)&&(x=x.map(v=>I$(v))),y(e,["tools"],x)}const d=g(t,["toolConfig"]);e!==void 0&&d!=null&&y(e,["toolConfig"],d);const h=g(t,["kmsKeyName"]);return e!==void 0&&h!=null&&y(e,["encryption_spec","kmsKeyName"],h),n}function i$(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],KI(t,r));const s=g(e,["config"]);return s!=null&&s$(s,n),n}function o$(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],KI(t,r));const s=g(e,["config"]);return s!=null&&a$(s,n),n}function l$(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Gi(t,r)),n}function c$(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Gi(t,r)),n}function u$(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function f$(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function d$(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function h$(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const s=g(t,["name"]);if(s!=null&&y(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function p$(t){const e={},n=g(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const r=g(t,["mode"]);if(r!=null&&y(e,["mode"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function m$(t){const e={},n=g(t,["description"]);n!=null&&y(e,["description"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const s=g(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=g(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const o=g(t,["response"]);o!=null&&y(e,["response"],o);const c=g(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function g$(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Gi(t,r)),n}function x$(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Gi(t,r)),n}function v$(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function y$(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function _$(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function E$(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function T$(t){const e={},n=g(t,["config"]);return n!=null&&_$(n,e),e}function w$(t){const e={},n=g(t,["config"]);return n!=null&&E$(n,e),e}function S$(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=g(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["cachedContents"],a)}return e}function A$(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=g(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["cachedContents"],a)}return e}function b$(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&y(e,["fileData"],d$(a));const o=g(t,["functionCall"]);o!=null&&y(e,["functionCall"],h$(o));const c=g(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const u=g(t,["inlineData"]);u!=null&&y(e,["inlineData"],r$(u));const d=g(t,["text"]);d!=null&&y(e,["text"],d);const h=g(t,["thought"]);h!=null&&y(e,["thought"],h);const x=g(t,["thoughtSignature"]);x!=null&&y(e,["thoughtSignature"],x);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function C$(t){const e={},n=g(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const r=g(t,["functionCallingConfig"]);return r!=null&&y(e,["functionCallingConfig"],p$(r)),e}function N$(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const s=g(t,["codeExecution"]);if(s!=null&&y(e,["codeExecution"],s),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(x=>x)),y(e,["functionDeclarations"],h)}const o=g(t,["googleMaps"]);o!=null&&y(e,["googleMaps"],v$(o));const c=g(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],y$(c));const u=g(t,["googleSearchRetrieval"]);u!=null&&y(e,["googleSearchRetrieval"],u);const d=g(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function I$(t){const e={},n=g(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const r=g(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(t,["codeExecution"]);s!=null&&y(e,["codeExecution"],s);const a=g(t,["enterpriseWebSearch"]);a!=null&&y(e,["enterpriseWebSearch"],a);const o=g(t,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(v=>m$(v))),y(e,["functionDeclarations"],x)}const c=g(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const u=g(t,["googleSearch"]);u!=null&&y(e,["googleSearch"],u);const d=g(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=g(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function k$(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=g(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function R$(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=g(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function D$(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],Gi(t,r));const s=g(e,["config"]);return s!=null&&k$(s,n),n}function M$(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],Gi(t,r));const s=g(e,["config"]);return s!=null&&R$(s,n),n}class P$ extends Hi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Yl(Ui.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=o$(this.apiClient,e);return c=Ze("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=i$(this.apiClient,e);return c=Ze("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=x$(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=g$(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=c$(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=f$(h),v=new hA;return Object.assign(v,x),v})}else{const d=l$(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=u$(h),v=new hA;return Object.assign(v,x),v})}}async update(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=M$(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=D$(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=w$(e);return c=Ze("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=A$(h),v=new pA;return Object.assign(v,x),v})}else{const d=T$(e);return c=Ze("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=S$(h),v=new pA;return Object.assign(v,x),v})}}}function Sp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function EA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(t){return this instanceof St?(this.v=t,this):new St(t)}function Pa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(T){return function(S){return Promise.resolve(S).then(T,x)}}function c(T,S){r[T]&&(s[T]=function(A){return new Promise(function(b,R){a.push([T,A,b,R])>1||u(T,A)})},S&&(s[T]=S(s[T])))}function u(T,S){try{d(r[T](S))}catch(A){v(a[0][3],A)}}function d(T){T.value instanceof St?Promise.resolve(T.value.v).then(h,x):v(a[0][2],T)}function h(T){u("next",T)}function x(T){u("throw",T)}function v(T,S){T(S),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Fa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof EA=="function"?EA(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(o){return new Promise(function(c,u){o=t[a](o),s(c,u,o.done,o.value)})}}function s(a,o,c,u){Promise.resolve(u).then(function(d){a({value:d,done:c})},o)}}function F$(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ik(n)}function ik(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function O$(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TA(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!ik(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class L${constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new U$(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class U${constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),O$(a)}async sendMessage(e){var n;await this.sendPromise;const r=es(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,o,c;const u=await s,d=(o=(a=u.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,h=u.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let v=[];h!=null&&(v=(c=h.slice(x))!==null&&c!==void 0?c:[]);const T=d?[d]:[];this.recordHistory(r,T,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=es(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?TA(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Pa(this,arguments,function*(){var s,a,o,c,u,d;const h=[];try{for(var x=!0,v=Fa(e),T;T=yield St(v.next()),s=T.done,!s;x=!0){c=T.value,x=!1;const S=c;if(F$(S)){const A=(d=(u=S.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content;A!==void 0&&h.push(A)}yield yield St(S)}}catch(S){a={error:S}}finally{try{!x&&!s&&(o=v.return)&&(yield St(o.call(v)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...TA(r)):this.history.push(e),this.history.push(...s)}}class _d extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_d.prototype)}}function V$(t){const e={},n=g(t,["file"]);return n!=null&&y(e,["file"],n),e}function B$(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function z$(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","file"],QI(n)),e}function j$(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function H$(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","file"],QI(n)),e}function G$(t){const e={},n=g(t,["uris"]);return n!=null&&y(e,["uris"],n),e}function $$(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function q$(t){const e={},n=g(t,["config"]);return n!=null&&$$(n,e),e}function K$(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=g(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["files"],a)}return e}function J$(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["files"],s)}return e}class Y$ extends Hi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Yl(Ui.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=q$(e);return a=Ze("files",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const d=K$(u),h=new WH;return Object.assign(h,d),h})}}async createInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=V$(e);return a=Ze("upload/v1beta/files",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=B$(u),h=new ZH;return Object.assign(h,d),h})}}async get(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=H$(e);return a=Ze("files/{file}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=z$(e);return a=Ze("files/{file}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const d=j$(u),h=new XH;return Object.assign(h,d),h})}}async registerFilesInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=G$(e);return a=Ze("files:register",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=J$(u),h=new QH;return Object.assign(h,d),h})}}}function V0(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function W$(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>dq(a))),y(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function Z$(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function X$(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const s=g(t,["name"]);if(s!=null&&y(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Q$(t){const e={},n=g(t,["description"]);n!=null&&y(e,["description"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const s=g(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=g(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const o=g(t,["response"]);o!=null&&y(e,["response"],o);const c=g(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function eq(t){const e={},n=g(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const r=g(t,["responseJsonSchema"]);r!=null&&y(e,["responseJsonSchema"],r);const s=g(t,["audioTimestamp"]);s!=null&&y(e,["audioTimestamp"],s);const a=g(t,["candidateCount"]);a!=null&&y(e,["candidateCount"],a);const o=g(t,["enableAffectiveDialog"]);o!=null&&y(e,["enableAffectiveDialog"],o);const c=g(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const u=g(t,["logprobs"]);u!=null&&y(e,["logprobs"],u);const d=g(t,["maxOutputTokens"]);d!=null&&y(e,["maxOutputTokens"],d);const h=g(t,["mediaResolution"]);h!=null&&y(e,["mediaResolution"],h);const x=g(t,["presencePenalty"]);x!=null&&y(e,["presencePenalty"],x);const v=g(t,["responseLogprobs"]);v!=null&&y(e,["responseLogprobs"],v);const T=g(t,["responseMimeType"]);T!=null&&y(e,["responseMimeType"],T);const S=g(t,["responseModalities"]);S!=null&&y(e,["responseModalities"],S);const A=g(t,["responseSchema"]);A!=null&&y(e,["responseSchema"],A);const b=g(t,["routingConfig"]);b!=null&&y(e,["routingConfig"],b);const R=g(t,["seed"]);R!=null&&y(e,["seed"],R);const B=g(t,["speechConfig"]);B!=null&&y(e,["speechConfig"],B);const D=g(t,["stopSequences"]);D!=null&&y(e,["stopSequences"],D);const L=g(t,["temperature"]);L!=null&&y(e,["temperature"],L);const z=g(t,["thinkingConfig"]);z!=null&&y(e,["thinkingConfig"],z);const O=g(t,["topK"]);O!=null&&y(e,["topK"],O);const I=g(t,["topP"]);if(I!=null&&y(e,["topP"],I),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tq(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function nq(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function rq(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=g(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const o=g(t,["topP"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","topP"],o);const c=g(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const u=g(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const d=g(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const h=g(t,["seed"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","seed"],h);const x=g(t,["speechConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","speechConfig"],ay(x));const v=g(t,["thinkingConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","thinkingConfig"],v);const T=g(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],T);const S=g(t,["systemInstruction"]);e!==void 0&&S!=null&&y(e,["setup","systemInstruction"],W$(es(S)));const A=g(t,["tools"]);if(e!==void 0&&A!=null){let O=Tu(A);Array.isArray(O)&&(O=O.map(I=>pq(Eu(I)))),y(e,["setup","tools"],O)}const b=g(t,["sessionResumption"]);e!==void 0&&b!=null&&y(e,["setup","sessionResumption"],hq(b));const R=g(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","inputAudioTranscription"],R);const B=g(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&y(e,["setup","outputAudioTranscription"],B);const D=g(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&y(e,["setup","realtimeInputConfig"],D);const L=g(t,["contextWindowCompression"]);e!==void 0&&L!=null&&y(e,["setup","contextWindowCompression"],L);const z=g(t,["proactivity"]);if(e!==void 0&&z!=null&&y(e,["setup","proactivity"],z),g(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function sq(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],eq(r));const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=g(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const o=g(t,["topP"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","topP"],o);const c=g(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const u=g(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const d=g(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const h=g(t,["seed"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","seed"],h);const x=g(t,["speechConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","speechConfig"],ay(x));const v=g(t,["thinkingConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","thinkingConfig"],v);const T=g(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],T);const S=g(t,["systemInstruction"]);e!==void 0&&S!=null&&y(e,["setup","systemInstruction"],es(S));const A=g(t,["tools"]);if(e!==void 0&&A!=null){let I=Tu(A);Array.isArray(I)&&(I=I.map(C=>mq(Eu(C)))),y(e,["setup","tools"],I)}const b=g(t,["sessionResumption"]);e!==void 0&&b!=null&&y(e,["setup","sessionResumption"],b);const R=g(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","inputAudioTranscription"],R);const B=g(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&y(e,["setup","outputAudioTranscription"],B);const D=g(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&y(e,["setup","realtimeInputConfig"],D);const L=g(t,["contextWindowCompression"]);e!==void 0&&L!=null&&y(e,["setup","contextWindowCompression"],L);const z=g(t,["proactivity"]);e!==void 0&&z!=null&&y(e,["setup","proactivity"],z);const O=g(t,["explicitVadSignal"]);return e!==void 0&&O!=null&&y(e,["setup","explicitVadSignal"],O),n}function aq(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],an(t,r));const s=g(e,["config"]);return s!=null&&y(n,["config"],rq(s,n)),n}function iq(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],an(t,r));const s=g(e,["config"]);return s!=null&&y(n,["config"],sq(s,n)),n}function oq(t){const e={},n=g(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function lq(t){const e={},n=g(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),y(e,["weightedPrompts"],r)}return e}function cq(t){const e={},n=g(t,["media"]);if(n!=null){let d=JI(n);Array.isArray(d)&&(d=d.map(h=>V0(h))),y(e,["mediaChunks"],d)}const r=g(t,["audio"]);r!=null&&y(e,["audio"],V0(WI(r)));const s=g(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const a=g(t,["video"]);a!=null&&y(e,["video"],V0(YI(a)));const o=g(t,["text"]);o!=null&&y(e,["text"],o);const c=g(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const u=g(t,["activityEnd"]);return u!=null&&y(e,["activityEnd"],u),e}function uq(t){const e={},n=g(t,["media"]);if(n!=null){let d=JI(n);Array.isArray(d)&&(d=d.map(h=>h)),y(e,["mediaChunks"],d)}const r=g(t,["audio"]);r!=null&&y(e,["audio"],WI(r));const s=g(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const a=g(t,["video"]);a!=null&&y(e,["video"],YI(a));const o=g(t,["text"]);o!=null&&y(e,["text"],o);const c=g(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const u=g(t,["activityEnd"]);return u!=null&&y(e,["activityEnd"],u),e}function fq(t){const e={},n=g(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const r=g(t,["serverContent"]);r!=null&&y(e,["serverContent"],r);const s=g(t,["toolCall"]);s!=null&&y(e,["toolCall"],s);const a=g(t,["toolCallCancellation"]);a!=null&&y(e,["toolCallCancellation"],a);const o=g(t,["usageMetadata"]);o!=null&&y(e,["usageMetadata"],gq(o));const c=g(t,["goAway"]);c!=null&&y(e,["goAway"],c);const u=g(t,["sessionResumptionUpdate"]);u!=null&&y(e,["sessionResumptionUpdate"],u);const d=g(t,["voiceActivityDetectionSignal"]);d!=null&&y(e,["voiceActivityDetectionSignal"],d);const h=g(t,["voiceActivity"]);return h!=null&&y(e,["voiceActivity"],xq(h)),e}function dq(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&y(e,["fileData"],Z$(a));const o=g(t,["functionCall"]);o!=null&&y(e,["functionCall"],X$(o));const c=g(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const u=g(t,["inlineData"]);u!=null&&y(e,["inlineData"],V0(u));const d=g(t,["text"]);d!=null&&y(e,["text"],d);const h=g(t,["thought"]);h!=null&&y(e,["thought"],h);const x=g(t,["thoughtSignature"]);x!=null&&y(e,["thoughtSignature"],x);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function hq(t){const e={},n=g(t,["handle"]);if(n!=null&&y(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pq(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const s=g(t,["codeExecution"]);if(s!=null&&y(e,["codeExecution"],s),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(x=>x)),y(e,["functionDeclarations"],h)}const o=g(t,["googleMaps"]);o!=null&&y(e,["googleMaps"],tq(o));const c=g(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],nq(c));const u=g(t,["googleSearchRetrieval"]);u!=null&&y(e,["googleSearchRetrieval"],u);const d=g(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function mq(t){const e={},n=g(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const r=g(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(t,["codeExecution"]);s!=null&&y(e,["codeExecution"],s);const a=g(t,["enterpriseWebSearch"]);a!=null&&y(e,["enterpriseWebSearch"],a);const o=g(t,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(v=>Q$(v))),y(e,["functionDeclarations"],x)}const c=g(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const u=g(t,["googleSearch"]);u!=null&&y(e,["googleSearch"],u);const d=g(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=g(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function gq(t){const e={},n=g(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const r=g(t,["cachedContentTokenCount"]);r!=null&&y(e,["cachedContentTokenCount"],r);const s=g(t,["candidatesTokenCount"]);s!=null&&y(e,["responseTokenCount"],s);const a=g(t,["toolUsePromptTokenCount"]);a!=null&&y(e,["toolUsePromptTokenCount"],a);const o=g(t,["thoughtsTokenCount"]);o!=null&&y(e,["thoughtsTokenCount"],o);const c=g(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const u=g(t,["promptTokensDetails"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>S)),y(e,["promptTokensDetails"],T)}const d=g(t,["cacheTokensDetails"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(S=>S)),y(e,["cacheTokensDetails"],T)}const h=g(t,["candidatesTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(S=>S)),y(e,["responseTokensDetails"],T)}const x=g(t,["toolUsePromptTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(S=>S)),y(e,["toolUsePromptTokensDetails"],T)}const v=g(t,["trafficType"]);return v!=null&&y(e,["trafficType"],v),e}function xq(t){const e={},n=g(t,["type"]);return n!=null&&y(e,["voiceActivityType"],n),e}function vq(t,e){const n={},r=g(t,["data"]);if(r!=null&&y(n,["data"],r),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(t,["mimeType"]);return s!=null&&y(n,["mimeType"],s),n}function yq(t,e){const n={},r=g(t,["content"]);r!=null&&y(n,["content"],r);const s=g(t,["citationMetadata"]);s!=null&&y(n,["citationMetadata"],_q(s));const a=g(t,["tokenCount"]);a!=null&&y(n,["tokenCount"],a);const o=g(t,["finishReason"]);o!=null&&y(n,["finishReason"],o);const c=g(t,["avgLogprobs"]);c!=null&&y(n,["avgLogprobs"],c);const u=g(t,["groundingMetadata"]);u!=null&&y(n,["groundingMetadata"],u);const d=g(t,["index"]);d!=null&&y(n,["index"],d);const h=g(t,["logprobsResult"]);h!=null&&y(n,["logprobsResult"],h);const x=g(t,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(S=>S)),y(n,["safetyRatings"],T)}const v=g(t,["urlContextMetadata"]);return v!=null&&y(n,["urlContextMetadata"],v),n}function _q(t,e){const n={},r=g(t,["citationSources"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),y(n,["citations"],s)}return n}function Eq(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["contents"]);if(a!=null){let o=fa(a);Array.isArray(o)&&(o=o.map(c=>c)),y(r,["contents"],o)}return r}function Tq(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(n,["tokensInfo"],a)}return n}function wq(t,e){const n={},r=g(t,["values"]);r!=null&&y(n,["values"],r);const s=g(t,["statistics"]);return s!=null&&y(n,["statistics"],Sq(s)),n}function Sq(t,e){const n={},r=g(t,["truncated"]);r!=null&&y(n,["truncated"],r);const s=g(t,["token_count"]);return s!=null&&y(n,["tokenCount"],s),n}function Zp(t,e){const n={},r=g(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>MK(o))),y(n,["parts"],a)}const s=g(t,["role"]);return s!=null&&y(n,["role"],s),n}function Aq(t,e){const n={},r=g(t,["controlType"]);r!=null&&y(n,["controlType"],r);const s=g(t,["enableControlImageComputation"]);return s!=null&&y(n,["computeControl"],s),n}function bq(t,e){const n={};if(g(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Cq(t,e,n){const r={},s=g(t,["systemInstruction"]);e!==void 0&&s!=null&&y(e,["systemInstruction"],es(s));const a=g(t,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>uk(u))),y(e,["tools"],c)}const o=g(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],vK(o)),r}function Nq(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["contents"]);if(a!=null){let c=fa(a);Array.isArray(c)&&(c=c.map(u=>Zp(u))),y(r,["contents"],c)}const o=g(e,["config"]);return o!=null&&bq(o),r}function Iq(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["contents"]);if(a!=null){let c=fa(a);Array.isArray(c)&&(c=c.map(u=>u)),y(r,["contents"],c)}const o=g(e,["config"]);return o!=null&&Cq(o,r),r}function kq(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["totalTokens"]);s!=null&&y(n,["totalTokens"],s);const a=g(t,["cachedContentTokenCount"]);return a!=null&&y(n,["cachedContentTokenCount"],a),n}function Rq(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["totalTokens"]);return s!=null&&y(n,["totalTokens"],s),n}function Dq(t,e,n){const r={},s=g(e,["model"]);return s!=null&&y(r,["_url","name"],an(t,s)),r}function Mq(t,e,n){const r={},s=g(e,["model"]);return s!=null&&y(r,["_url","name"],an(t,s)),r}function Pq(t,e){const n={},r=g(t,["sdkHttpResponse"]);return r!=null&&y(n,["sdkHttpResponse"],r),n}function Fq(t,e){const n={},r=g(t,["sdkHttpResponse"]);return r!=null&&y(n,["sdkHttpResponse"],r),n}function Oq(t,e,n){const r={},s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const a=g(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const o=g(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const c=g(t,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const u=g(t,["guidanceScale"]);e!==void 0&&u!=null&&y(e,["parameters","guidanceScale"],u);const d=g(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=g(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const x=g(t,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const v=g(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=g(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const S=g(t,["language"]);e!==void 0&&S!=null&&y(e,["parameters","language"],S);const A=g(t,["outputMimeType"]);e!==void 0&&A!=null&&y(e,["parameters","outputOptions","mimeType"],A);const b=g(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const R=g(t,["addWatermark"]);e!==void 0&&R!=null&&y(e,["parameters","addWatermark"],R);const B=g(t,["labels"]);e!==void 0&&B!=null&&y(e,["labels"],B);const D=g(t,["editMode"]);e!==void 0&&D!=null&&y(e,["parameters","editMode"],D);const L=g(t,["baseSteps"]);return e!==void 0&&L!=null&&y(e,["parameters","editConfig","baseSteps"],L),r}function Lq(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["prompt"]);a!=null&&y(r,["instances[0]","prompt"],a);const o=g(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>VK(d))),y(r,["instances[0]","referenceImages"],u)}const c=g(e,["config"]);return c!=null&&Oq(c,r),r}function Uq(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Xp(o))),y(n,["generatedImages"],a)}return n}function Vq(t,e,n){const r={},s=g(t,["taskType"]);e!==void 0&&s!=null&&y(e,["requests[]","taskType"],s);const a=g(t,["title"]);e!==void 0&&a!=null&&y(e,["requests[]","title"],a);const o=g(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Bq(t,e,n){const r={},s=g(t,["taskType"]);e!==void 0&&s!=null&&y(e,["instances[]","task_type"],s);const a=g(t,["title"]);e!==void 0&&a!=null&&y(e,["instances[]","title"],a);const o=g(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const c=g(t,["mimeType"]);e!==void 0&&c!=null&&y(e,["instances[]","mimeType"],c);const u=g(t,["autoTruncate"]);return e!==void 0&&u!=null&&y(e,["parameters","autoTruncate"],u),r}function zq(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["contents"]);if(a!=null){let u=ny(t,a);Array.isArray(u)&&(u=u.map(d=>d)),y(r,["requests[]","content"],u)}const o=g(e,["config"]);o!=null&&Vq(o,r);const c=g(e,["model"]);return c!==void 0&&y(r,["requests[]","model"],an(t,c)),r}function jq(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["contents"]);if(a!=null){let c=ny(t,a);Array.isArray(c)&&(c=c.map(u=>u)),y(r,["instances[]","content"],c)}const o=g(e,["config"]);return o!=null&&Bq(o,r),r}function Hq(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>c)),y(n,["embeddings"],o)}const a=g(t,["metadata"]);return a!=null&&y(n,["metadata"],a),n}function Gq(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["predictions[]","embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>wq(c))),y(n,["embeddings"],o)}const a=g(t,["metadata"]);return a!=null&&y(n,["metadata"],a),n}function $q(t,e){const n={},r=g(t,["endpoint"]);r!=null&&y(n,["name"],r);const s=g(t,["deployedModelId"]);return s!=null&&y(n,["deployedModelId"],s),n}function qq(t,e){const n={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["fileUri"]);r!=null&&y(n,["fileUri"],r);const s=g(t,["mimeType"]);return s!=null&&y(n,["mimeType"],s),n}function Kq(t,e){const n={},r=g(t,["id"]);r!=null&&y(n,["id"],r);const s=g(t,["args"]);s!=null&&y(n,["args"],s);const a=g(t,["name"]);if(a!=null&&y(n,["name"],a),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function Jq(t,e){const n={},r=g(t,["allowedFunctionNames"]);r!=null&&y(n,["allowedFunctionNames"],r);const s=g(t,["mode"]);if(s!=null&&y(n,["mode"],s),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function Yq(t,e){const n={},r=g(t,["description"]);r!=null&&y(n,["description"],r);const s=g(t,["name"]);s!=null&&y(n,["name"],s);const a=g(t,["parameters"]);a!=null&&y(n,["parameters"],a);const o=g(t,["parametersJsonSchema"]);o!=null&&y(n,["parametersJsonSchema"],o);const c=g(t,["response"]);c!=null&&y(n,["response"],c);const u=g(t,["responseJsonSchema"]);if(u!=null&&y(n,["responseJsonSchema"],u),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function Wq(t,e,n,r){const s={},a=g(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],Zp(es(a)));const o=g(e,["temperature"]);o!=null&&y(s,["temperature"],o);const c=g(e,["topP"]);c!=null&&y(s,["topP"],c);const u=g(e,["topK"]);u!=null&&y(s,["topK"],u);const d=g(e,["candidateCount"]);d!=null&&y(s,["candidateCount"],d);const h=g(e,["maxOutputTokens"]);h!=null&&y(s,["maxOutputTokens"],h);const x=g(e,["stopSequences"]);x!=null&&y(s,["stopSequences"],x);const v=g(e,["responseLogprobs"]);v!=null&&y(s,["responseLogprobs"],v);const T=g(e,["logprobs"]);T!=null&&y(s,["logprobs"],T);const S=g(e,["presencePenalty"]);S!=null&&y(s,["presencePenalty"],S);const A=g(e,["frequencyPenalty"]);A!=null&&y(s,["frequencyPenalty"],A);const b=g(e,["seed"]);b!=null&&y(s,["seed"],b);const R=g(e,["responseMimeType"]);R!=null&&y(s,["responseMimeType"],R);const B=g(e,["responseSchema"]);B!=null&&y(s,["responseSchema"],ry(B));const D=g(e,["responseJsonSchema"]);if(D!=null&&y(s,["responseJsonSchema"],D),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=g(e,["safetySettings"]);if(n!==void 0&&L!=null){let he=L;Array.isArray(he)&&(he=he.map(Se=>BK(Se))),y(n,["safetySettings"],he)}const z=g(e,["tools"]);if(n!==void 0&&z!=null){let he=Tu(z);Array.isArray(he)&&(he=he.map(Se=>KK(Eu(Se)))),y(n,["tools"],he)}const O=g(e,["toolConfig"]);if(n!==void 0&&O!=null&&y(n,["toolConfig"],qK(O)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=g(e,["cachedContent"]);n!==void 0&&I!=null&&y(n,["cachedContent"],Gi(t,I));const C=g(e,["responseModalities"]);C!=null&&y(s,["responseModalities"],C);const N=g(e,["mediaResolution"]);N!=null&&y(s,["mediaResolution"],N);const F=g(e,["speechConfig"]);if(F!=null&&y(s,["speechConfig"],sy(F)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=g(e,["thinkingConfig"]);U!=null&&y(s,["thinkingConfig"],U);const M=g(e,["imageConfig"]);M!=null&&y(s,["imageConfig"],wK(M));const j=g(e,["enableEnhancedCivicAnswers"]);if(j!=null&&y(s,["enableEnhancedCivicAnswers"],j),g(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function Zq(t,e,n,r){const s={},a=g(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],es(a));const o=g(e,["temperature"]);o!=null&&y(s,["temperature"],o);const c=g(e,["topP"]);c!=null&&y(s,["topP"],c);const u=g(e,["topK"]);u!=null&&y(s,["topK"],u);const d=g(e,["candidateCount"]);d!=null&&y(s,["candidateCount"],d);const h=g(e,["maxOutputTokens"]);h!=null&&y(s,["maxOutputTokens"],h);const x=g(e,["stopSequences"]);x!=null&&y(s,["stopSequences"],x);const v=g(e,["responseLogprobs"]);v!=null&&y(s,["responseLogprobs"],v);const T=g(e,["logprobs"]);T!=null&&y(s,["logprobs"],T);const S=g(e,["presencePenalty"]);S!=null&&y(s,["presencePenalty"],S);const A=g(e,["frequencyPenalty"]);A!=null&&y(s,["frequencyPenalty"],A);const b=g(e,["seed"]);b!=null&&y(s,["seed"],b);const R=g(e,["responseMimeType"]);R!=null&&y(s,["responseMimeType"],R);const B=g(e,["responseSchema"]);B!=null&&y(s,["responseSchema"],ry(B));const D=g(e,["responseJsonSchema"]);D!=null&&y(s,["responseJsonSchema"],D);const L=g(e,["routingConfig"]);L!=null&&y(s,["routingConfig"],L);const z=g(e,["modelSelectionConfig"]);z!=null&&y(s,["modelConfig"],z);const O=g(e,["safetySettings"]);if(n!==void 0&&O!=null){let ce=O;Array.isArray(ce)&&(ce=ce.map(K=>K)),y(n,["safetySettings"],ce)}const I=g(e,["tools"]);if(n!==void 0&&I!=null){let ce=Tu(I);Array.isArray(ce)&&(ce=ce.map(K=>uk(Eu(K)))),y(n,["tools"],ce)}const C=g(e,["toolConfig"]);n!==void 0&&C!=null&&y(n,["toolConfig"],C);const N=g(e,["labels"]);n!==void 0&&N!=null&&y(n,["labels"],N);const F=g(e,["cachedContent"]);n!==void 0&&F!=null&&y(n,["cachedContent"],Gi(t,F));const U=g(e,["responseModalities"]);U!=null&&y(s,["responseModalities"],U);const M=g(e,["mediaResolution"]);M!=null&&y(s,["mediaResolution"],M);const j=g(e,["speechConfig"]);j!=null&&y(s,["speechConfig"],sy(j));const he=g(e,["audioTimestamp"]);he!=null&&y(s,["audioTimestamp"],he);const Se=g(e,["thinkingConfig"]);Se!=null&&y(s,["thinkingConfig"],Se);const ie=g(e,["imageConfig"]);if(ie!=null&&y(s,["imageConfig"],SK(ie)),g(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const fe=g(e,["modelArmorConfig"]);return n!==void 0&&fe!=null&&y(n,["modelArmorConfig"],fe),s}function wA(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["contents"]);if(a!=null){let c=fa(a);Array.isArray(c)&&(c=c.map(u=>Zp(u))),y(r,["contents"],c)}const o=g(e,["config"]);return o!=null&&y(r,["generationConfig"],Wq(t,o,r)),r}function SA(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["contents"]);if(a!=null){let c=fa(a);Array.isArray(c)&&(c=c.map(u=>u)),y(r,["contents"],c)}const o=g(e,["config"]);return o!=null&&y(r,["generationConfig"],Zq(t,o,r)),r}function AA(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["candidates"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>yq(h))),y(n,["candidates"],d)}const a=g(t,["modelVersion"]);a!=null&&y(n,["modelVersion"],a);const o=g(t,["promptFeedback"]);o!=null&&y(n,["promptFeedback"],o);const c=g(t,["responseId"]);c!=null&&y(n,["responseId"],c);const u=g(t,["usageMetadata"]);return u!=null&&y(n,["usageMetadata"],u),n}function bA(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(x=>x)),y(n,["candidates"],h)}const a=g(t,["createTime"]);a!=null&&y(n,["createTime"],a);const o=g(t,["modelVersion"]);o!=null&&y(n,["modelVersion"],o);const c=g(t,["promptFeedback"]);c!=null&&y(n,["promptFeedback"],c);const u=g(t,["responseId"]);u!=null&&y(n,["responseId"],u);const d=g(t,["usageMetadata"]);return d!=null&&y(n,["usageMetadata"],d),n}function Xq(t,e,n){const r={};if(g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=g(t,["numberOfImages"]);e!==void 0&&s!=null&&y(e,["parameters","sampleCount"],s);const a=g(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const o=g(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const u=g(t,["personGeneration"]);e!==void 0&&u!=null&&y(e,["parameters","personGeneration"],u);const d=g(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const h=g(t,["includeRaiReason"]);e!==void 0&&h!=null&&y(e,["parameters","includeRaiReason"],h);const x=g(t,["language"]);e!==void 0&&x!=null&&y(e,["parameters","language"],x);const v=g(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=g(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),g(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=g(t,["imageSize"]);if(e!==void 0&&S!=null&&y(e,["parameters","sampleImageSize"],S),g(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function Qq(t,e,n){const r={},s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const a=g(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const o=g(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const c=g(t,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const u=g(t,["guidanceScale"]);e!==void 0&&u!=null&&y(e,["parameters","guidanceScale"],u);const d=g(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=g(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const x=g(t,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const v=g(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=g(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const S=g(t,["language"]);e!==void 0&&S!=null&&y(e,["parameters","language"],S);const A=g(t,["outputMimeType"]);e!==void 0&&A!=null&&y(e,["parameters","outputOptions","mimeType"],A);const b=g(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const R=g(t,["addWatermark"]);e!==void 0&&R!=null&&y(e,["parameters","addWatermark"],R);const B=g(t,["labels"]);e!==void 0&&B!=null&&y(e,["labels"],B);const D=g(t,["imageSize"]);e!==void 0&&D!=null&&y(e,["parameters","sampleImageSize"],D);const L=g(t,["enhancePrompt"]);return e!==void 0&&L!=null&&y(e,["parameters","enhancePrompt"],L),r}function eK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["prompt"]);a!=null&&y(r,["instances[0]","prompt"],a);const o=g(e,["config"]);return o!=null&&Xq(o,r),r}function tK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["prompt"]);a!=null&&y(r,["instances[0]","prompt"],a);const o=g(e,["config"]);return o!=null&&Qq(o,r),r}function nK(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>pK(c))),y(n,["generatedImages"],o)}const a=g(t,["positivePromptSafetyAttributes"]);return a!=null&&y(n,["positivePromptSafetyAttributes"],lk(a)),n}function rK(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>Xp(c))),y(n,["generatedImages"],o)}const a=g(t,["positivePromptSafetyAttributes"]);return a!=null&&y(n,["positivePromptSafetyAttributes"],ck(a)),n}function sK(t,e,n){const r={},s=g(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&y(e,["parameters","sampleCount"],s),g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=g(t,["durationSeconds"]);if(e!==void 0&&a!=null&&y(e,["parameters","durationSeconds"],a),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=g(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const c=g(t,["resolution"]);e!==void 0&&c!=null&&y(e,["parameters","resolution"],c);const u=g(t,["personGeneration"]);if(e!==void 0&&u!=null&&y(e,["parameters","personGeneration"],u),g(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=g(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const h=g(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&y(e,["parameters","enhancePrompt"],h),g(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=g(t,["lastFrame"]);e!==void 0&&x!=null&&y(e,["instances[0]","lastFrame"],Qp(x));const v=g(t,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>iJ(S))),y(e,["instances[0]","referenceImages"],T)}if(g(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function aK(t,e,n){const r={},s=g(t,["numberOfVideos"]);e!==void 0&&s!=null&&y(e,["parameters","sampleCount"],s);const a=g(t,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const o=g(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const c=g(t,["durationSeconds"]);e!==void 0&&c!=null&&y(e,["parameters","durationSeconds"],c);const u=g(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const d=g(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const h=g(t,["resolution"]);e!==void 0&&h!=null&&y(e,["parameters","resolution"],h);const x=g(t,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const v=g(t,["pubsubTopic"]);e!==void 0&&v!=null&&y(e,["parameters","pubsubTopic"],v);const T=g(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const S=g(t,["enhancePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","enhancePrompt"],S);const A=g(t,["generateAudio"]);e!==void 0&&A!=null&&y(e,["parameters","generateAudio"],A);const b=g(t,["lastFrame"]);e!==void 0&&b!=null&&y(e,["instances[0]","lastFrame"],La(b));const R=g(t,["referenceImages"]);if(e!==void 0&&R!=null){let L=R;Array.isArray(L)&&(L=L.map(z=>oJ(z))),y(e,["instances[0]","referenceImages"],L)}const B=g(t,["mask"]);e!==void 0&&B!=null&&y(e,["instances[0]","mask"],aJ(B));const D=g(t,["compressionQuality"]);return e!==void 0&&D!=null&&y(e,["parameters","compressionQuality"],D),r}function iK(t,e){const n={},r=g(t,["name"]);r!=null&&y(n,["name"],r);const s=g(t,["metadata"]);s!=null&&y(n,["metadata"],s);const a=g(t,["done"]);a!=null&&y(n,["done"],a);const o=g(t,["error"]);o!=null&&y(n,["error"],o);const c=g(t,["response","generateVideoResponse"]);return c!=null&&y(n,["response"],uK(c)),n}function oK(t,e){const n={},r=g(t,["name"]);r!=null&&y(n,["name"],r);const s=g(t,["metadata"]);s!=null&&y(n,["metadata"],s);const a=g(t,["done"]);a!=null&&y(n,["done"],a);const o=g(t,["error"]);o!=null&&y(n,["error"],o);const c=g(t,["response"]);return c!=null&&y(n,["response"],fK(c)),n}function lK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["prompt"]);a!=null&&y(r,["instances[0]","prompt"],a);const o=g(e,["image"]);o!=null&&y(r,["instances[0]","image"],Qp(o));const c=g(e,["video"]);c!=null&&y(r,["instances[0]","video"],fk(c));const u=g(e,["source"]);u!=null&&dK(u,r);const d=g(e,["config"]);return d!=null&&sK(d,r),r}function cK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["prompt"]);a!=null&&y(r,["instances[0]","prompt"],a);const o=g(e,["image"]);o!=null&&y(r,["instances[0]","image"],La(o));const c=g(e,["video"]);c!=null&&y(r,["instances[0]","video"],dk(c));const u=g(e,["source"]);u!=null&&hK(u,r);const d=g(e,["config"]);return d!=null&&aK(d,r),r}function uK(t,e){const n={},r=g(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>gK(c))),y(n,["generatedVideos"],o)}const s=g(t,["raiMediaFilteredCount"]);s!=null&&y(n,["raiMediaFilteredCount"],s);const a=g(t,["raiMediaFilteredReasons"]);return a!=null&&y(n,["raiMediaFilteredReasons"],a),n}function fK(t,e){const n={},r=g(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>xK(c))),y(n,["generatedVideos"],o)}const s=g(t,["raiMediaFilteredCount"]);s!=null&&y(n,["raiMediaFilteredCount"],s);const a=g(t,["raiMediaFilteredReasons"]);return a!=null&&y(n,["raiMediaFilteredReasons"],a),n}function dK(t,e,n){const r={},s=g(t,["prompt"]);e!==void 0&&s!=null&&y(e,["instances[0]","prompt"],s);const a=g(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],Qp(a));const o=g(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],fk(o)),r}function hK(t,e,n){const r={},s=g(t,["prompt"]);e!==void 0&&s!=null&&y(e,["instances[0]","prompt"],s);const a=g(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],La(a));const o=g(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],dk(o)),r}function pK(t,e){const n={},r=g(t,["_self"]);r!=null&&y(n,["image"],AK(r));const s=g(t,["raiFilteredReason"]);s!=null&&y(n,["raiFilteredReason"],s);const a=g(t,["_self"]);return a!=null&&y(n,["safetyAttributes"],lk(a)),n}function Xp(t,e){const n={},r=g(t,["_self"]);r!=null&&y(n,["image"],ok(r));const s=g(t,["raiFilteredReason"]);s!=null&&y(n,["raiFilteredReason"],s);const a=g(t,["_self"]);a!=null&&y(n,["safetyAttributes"],ck(a));const o=g(t,["prompt"]);return o!=null&&y(n,["enhancedPrompt"],o),n}function mK(t,e){const n={},r=g(t,["_self"]);r!=null&&y(n,["mask"],ok(r));const s=g(t,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(n,["labels"],a)}return n}function gK(t,e){const n={},r=g(t,["video"]);return r!=null&&y(n,["video"],rJ(r)),n}function xK(t,e){const n={},r=g(t,["_self"]);return r!=null&&y(n,["video"],sJ(r)),n}function vK(t,e){const n={},r=g(t,["modelSelectionConfig"]);r!=null&&y(n,["modelConfig"],r);const s=g(t,["responseJsonSchema"]);s!=null&&y(n,["responseJsonSchema"],s);const a=g(t,["audioTimestamp"]);a!=null&&y(n,["audioTimestamp"],a);const o=g(t,["candidateCount"]);o!=null&&y(n,["candidateCount"],o);const c=g(t,["enableAffectiveDialog"]);c!=null&&y(n,["enableAffectiveDialog"],c);const u=g(t,["frequencyPenalty"]);u!=null&&y(n,["frequencyPenalty"],u);const d=g(t,["logprobs"]);d!=null&&y(n,["logprobs"],d);const h=g(t,["maxOutputTokens"]);h!=null&&y(n,["maxOutputTokens"],h);const x=g(t,["mediaResolution"]);x!=null&&y(n,["mediaResolution"],x);const v=g(t,["presencePenalty"]);v!=null&&y(n,["presencePenalty"],v);const T=g(t,["responseLogprobs"]);T!=null&&y(n,["responseLogprobs"],T);const S=g(t,["responseMimeType"]);S!=null&&y(n,["responseMimeType"],S);const A=g(t,["responseModalities"]);A!=null&&y(n,["responseModalities"],A);const b=g(t,["responseSchema"]);b!=null&&y(n,["responseSchema"],b);const R=g(t,["routingConfig"]);R!=null&&y(n,["routingConfig"],R);const B=g(t,["seed"]);B!=null&&y(n,["seed"],B);const D=g(t,["speechConfig"]);D!=null&&y(n,["speechConfig"],D);const L=g(t,["stopSequences"]);L!=null&&y(n,["stopSequences"],L);const z=g(t,["temperature"]);z!=null&&y(n,["temperature"],z);const O=g(t,["thinkingConfig"]);O!=null&&y(n,["thinkingConfig"],O);const I=g(t,["topK"]);I!=null&&y(n,["topK"],I);const C=g(t,["topP"]);if(C!=null&&y(n,["topP"],C),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function yK(t,e,n){const r={},s=g(e,["model"]);return s!=null&&y(r,["_url","name"],an(t,s)),r}function _K(t,e,n){const r={},s=g(e,["model"]);return s!=null&&y(r,["_url","name"],an(t,s)),r}function EK(t,e){const n={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=g(t,["enableWidget"]);return r!=null&&y(n,["enableWidget"],r),n}function TK(t,e){const n={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=g(t,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],r),n}function wK(t,e){const n={},r=g(t,["aspectRatio"]);r!=null&&y(n,["aspectRatio"],r);const s=g(t,["imageSize"]);if(s!=null&&y(n,["imageSize"],s),g(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function SK(t,e){const n={},r=g(t,["aspectRatio"]);r!=null&&y(n,["aspectRatio"],r);const s=g(t,["imageSize"]);s!=null&&y(n,["imageSize"],s);const a=g(t,["personGeneration"]);a!=null&&y(n,["personGeneration"],a);const o=g(t,["outputMimeType"]);o!=null&&y(n,["imageOutputOptions","mimeType"],o);const c=g(t,["outputCompressionQuality"]);return c!=null&&y(n,["imageOutputOptions","compressionQuality"],c),n}function AK(t,e){const n={},r=g(t,["bytesBase64Encoded"]);r!=null&&y(n,["imageBytes"],Yo(r));const s=g(t,["mimeType"]);return s!=null&&y(n,["mimeType"],s),n}function ok(t,e){const n={},r=g(t,["gcsUri"]);r!=null&&y(n,["gcsUri"],r);const s=g(t,["bytesBase64Encoded"]);s!=null&&y(n,["imageBytes"],Yo(s));const a=g(t,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function Qp(t,e){const n={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(t,["imageBytes"]);r!=null&&y(n,["bytesBase64Encoded"],Yo(r));const s=g(t,["mimeType"]);return s!=null&&y(n,["mimeType"],s),n}function La(t,e){const n={},r=g(t,["gcsUri"]);r!=null&&y(n,["gcsUri"],r);const s=g(t,["imageBytes"]);s!=null&&y(n,["bytesBase64Encoded"],Yo(s));const a=g(t,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function bK(t,e,n,r){const s={},a=g(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const o=g(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const c=g(e,["filter"]);n!==void 0&&c!=null&&y(n,["_query","filter"],c);const u=g(e,["queryBase"]);return n!==void 0&&u!=null&&y(n,["_url","models_url"],ek(t,u)),s}function CK(t,e,n,r){const s={},a=g(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const o=g(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const c=g(e,["filter"]);n!==void 0&&c!=null&&y(n,["_query","filter"],c);const u=g(e,["queryBase"]);return n!==void 0&&u!=null&&y(n,["_url","models_url"],ek(t,u)),s}function NK(t,e,n){const r={},s=g(e,["config"]);return s!=null&&bK(t,s,r),r}function IK(t,e,n){const r={},s=g(e,["config"]);return s!=null&&CK(t,s,r),r}function kK(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=g(t,["_self"]);if(a!=null){let o=tk(a);Array.isArray(o)&&(o=o.map(c=>wv(c))),y(n,["models"],o)}return n}function RK(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=g(t,["_self"]);if(a!=null){let o=tk(a);Array.isArray(o)&&(o=o.map(c=>Sv(c))),y(n,["models"],o)}return n}function DK(t,e){const n={},r=g(t,["maskMode"]);r!=null&&y(n,["maskMode"],r);const s=g(t,["segmentationClasses"]);s!=null&&y(n,["maskClasses"],s);const a=g(t,["maskDilation"]);return a!=null&&y(n,["dilation"],a),n}function wv(t,e){const n={},r=g(t,["name"]);r!=null&&y(n,["name"],r);const s=g(t,["displayName"]);s!=null&&y(n,["displayName"],s);const a=g(t,["description"]);a!=null&&y(n,["description"],a);const o=g(t,["version"]);o!=null&&y(n,["version"],o);const c=g(t,["_self"]);c!=null&&y(n,["tunedModelInfo"],JK(c));const u=g(t,["inputTokenLimit"]);u!=null&&y(n,["inputTokenLimit"],u);const d=g(t,["outputTokenLimit"]);d!=null&&y(n,["outputTokenLimit"],d);const h=g(t,["supportedGenerationMethods"]);h!=null&&y(n,["supportedActions"],h);const x=g(t,["temperature"]);x!=null&&y(n,["temperature"],x);const v=g(t,["maxTemperature"]);v!=null&&y(n,["maxTemperature"],v);const T=g(t,["topP"]);T!=null&&y(n,["topP"],T);const S=g(t,["topK"]);S!=null&&y(n,["topK"],S);const A=g(t,["thinking"]);return A!=null&&y(n,["thinking"],A),n}function Sv(t,e){const n={},r=g(t,["name"]);r!=null&&y(n,["name"],r);const s=g(t,["displayName"]);s!=null&&y(n,["displayName"],s);const a=g(t,["description"]);a!=null&&y(n,["description"],a);const o=g(t,["versionId"]);o!=null&&y(n,["version"],o);const c=g(t,["deployedModels"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(T=>$q(T))),y(n,["endpoints"],v)}const u=g(t,["labels"]);u!=null&&y(n,["labels"],u);const d=g(t,["_self"]);d!=null&&y(n,["tunedModelInfo"],YK(d));const h=g(t,["defaultCheckpointId"]);h!=null&&y(n,["defaultCheckpointId"],h);const x=g(t,["checkpoints"]);if(x!=null){let v=x;Array.isArray(v)&&(v=v.map(T=>T)),y(n,["checkpoints"],v)}return n}function MK(t,e){const n={},r=g(t,["mediaResolution"]);r!=null&&y(n,["mediaResolution"],r);const s=g(t,["codeExecutionResult"]);s!=null&&y(n,["codeExecutionResult"],s);const a=g(t,["executableCode"]);a!=null&&y(n,["executableCode"],a);const o=g(t,["fileData"]);o!=null&&y(n,["fileData"],qq(o));const c=g(t,["functionCall"]);c!=null&&y(n,["functionCall"],Kq(c));const u=g(t,["functionResponse"]);u!=null&&y(n,["functionResponse"],u);const d=g(t,["inlineData"]);d!=null&&y(n,["inlineData"],vq(d));const h=g(t,["text"]);h!=null&&y(n,["text"],h);const x=g(t,["thought"]);x!=null&&y(n,["thought"],x);const v=g(t,["thoughtSignature"]);v!=null&&y(n,["thoughtSignature"],v);const T=g(t,["videoMetadata"]);return T!=null&&y(n,["videoMetadata"],T),n}function PK(t,e){const n={},r=g(t,["productImage"]);return r!=null&&y(n,["image"],La(r)),n}function FK(t,e,n){const r={},s=g(t,["numberOfImages"]);e!==void 0&&s!=null&&y(e,["parameters","sampleCount"],s);const a=g(t,["baseSteps"]);e!==void 0&&a!=null&&y(e,["parameters","baseSteps"],a);const o=g(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const c=g(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const u=g(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&y(e,["parameters","safetySetting"],u);const d=g(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=g(t,["addWatermark"]);e!==void 0&&h!=null&&y(e,["parameters","addWatermark"],h);const x=g(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const v=g(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v);const T=g(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const S=g(t,["labels"]);return e!==void 0&&S!=null&&y(e,["labels"],S),r}function OK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["source"]);a!=null&&UK(a,r);const o=g(e,["config"]);return o!=null&&FK(o,r),r}function LK(t,e){const n={},r=g(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Xp(a))),y(n,["generatedImages"],s)}return n}function UK(t,e,n){const r={},s=g(t,["prompt"]);e!==void 0&&s!=null&&y(e,["instances[0]","prompt"],s);const a=g(t,["personImage"]);e!==void 0&&a!=null&&y(e,["instances[0]","personImage","image"],La(a));const o=g(t,["productImages"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>PK(u))),y(e,["instances[0]","productImages"],c)}return r}function VK(t,e){const n={},r=g(t,["referenceImage"]);r!=null&&y(n,["referenceImage"],La(r));const s=g(t,["referenceId"]);s!=null&&y(n,["referenceId"],s);const a=g(t,["referenceType"]);a!=null&&y(n,["referenceType"],a);const o=g(t,["maskImageConfig"]);o!=null&&y(n,["maskImageConfig"],DK(o));const c=g(t,["controlImageConfig"]);c!=null&&y(n,["controlImageConfig"],Aq(c));const u=g(t,["styleImageConfig"]);u!=null&&y(n,["styleImageConfig"],u);const d=g(t,["subjectImageConfig"]);return d!=null&&y(n,["subjectImageConfig"],d),n}function lk(t,e){const n={},r=g(t,["safetyAttributes","categories"]);r!=null&&y(n,["categories"],r);const s=g(t,["safetyAttributes","scores"]);s!=null&&y(n,["scores"],s);const a=g(t,["contentType"]);return a!=null&&y(n,["contentType"],a),n}function ck(t,e){const n={},r=g(t,["safetyAttributes","categories"]);r!=null&&y(n,["categories"],r);const s=g(t,["safetyAttributes","scores"]);s!=null&&y(n,["scores"],s);const a=g(t,["contentType"]);return a!=null&&y(n,["contentType"],a),n}function BK(t,e){const n={},r=g(t,["category"]);if(r!=null&&y(n,["category"],r),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=g(t,["threshold"]);return s!=null&&y(n,["threshold"],s),n}function zK(t,e){const n={},r=g(t,["image"]);return r!=null&&y(n,["image"],La(r)),n}function jK(t,e,n){const r={},s=g(t,["mode"]);e!==void 0&&s!=null&&y(e,["parameters","mode"],s);const a=g(t,["maxPredictions"]);e!==void 0&&a!=null&&y(e,["parameters","maxPredictions"],a);const o=g(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const c=g(t,["maskDilation"]);e!==void 0&&c!=null&&y(e,["parameters","maskDilation"],c);const u=g(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&y(e,["parameters","binaryColorThreshold"],u);const d=g(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),r}function HK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["source"]);a!=null&&$K(a,r);const o=g(e,["config"]);return o!=null&&jK(o,r),r}function GK(t,e){const n={},r=g(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>mK(a))),y(n,["generatedMasks"],s)}return n}function $K(t,e,n){const r={},s=g(t,["prompt"]);e!==void 0&&s!=null&&y(e,["instances[0]","prompt"],s);const a=g(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],La(a));const o=g(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],zK(o)),r}function qK(t,e){const n={},r=g(t,["retrievalConfig"]);r!=null&&y(n,["retrievalConfig"],r);const s=g(t,["functionCallingConfig"]);return s!=null&&y(n,["functionCallingConfig"],Jq(s)),n}function KK(t,e){const n={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(t,["computerUse"]);r!=null&&y(n,["computerUse"],r);const s=g(t,["fileSearch"]);s!=null&&y(n,["fileSearch"],s);const a=g(t,["codeExecution"]);if(a!=null&&y(n,["codeExecution"],a),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=g(t,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(v=>v)),y(n,["functionDeclarations"],x)}const c=g(t,["googleMaps"]);c!=null&&y(n,["googleMaps"],EK(c));const u=g(t,["googleSearch"]);u!=null&&y(n,["googleSearch"],TK(u));const d=g(t,["googleSearchRetrieval"]);d!=null&&y(n,["googleSearchRetrieval"],d);const h=g(t,["urlContext"]);return h!=null&&y(n,["urlContext"],h),n}function uk(t,e){const n={},r=g(t,["retrieval"]);r!=null&&y(n,["retrieval"],r);const s=g(t,["computerUse"]);if(s!=null&&y(n,["computerUse"],s),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=g(t,["codeExecution"]);a!=null&&y(n,["codeExecution"],a);const o=g(t,["enterpriseWebSearch"]);o!=null&&y(n,["enterpriseWebSearch"],o);const c=g(t,["functionDeclarations"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(T=>Yq(T))),y(n,["functionDeclarations"],v)}const u=g(t,["googleMaps"]);u!=null&&y(n,["googleMaps"],u);const d=g(t,["googleSearch"]);d!=null&&y(n,["googleSearch"],d);const h=g(t,["googleSearchRetrieval"]);h!=null&&y(n,["googleSearchRetrieval"],h);const x=g(t,["urlContext"]);return x!=null&&y(n,["urlContext"],x),n}function JK(t,e){const n={},r=g(t,["baseModel"]);r!=null&&y(n,["baseModel"],r);const s=g(t,["createTime"]);s!=null&&y(n,["createTime"],s);const a=g(t,["updateTime"]);return a!=null&&y(n,["updateTime"],a),n}function YK(t,e){const n={},r=g(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&y(n,["baseModel"],r);const s=g(t,["createTime"]);s!=null&&y(n,["createTime"],s);const a=g(t,["updateTime"]);return a!=null&&y(n,["updateTime"],a),n}function WK(t,e,n){const r={},s=g(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const a=g(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const o=g(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),r}function ZK(t,e,n){const r={},s=g(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const a=g(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const o=g(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),r}function XK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","name"],an(t,s));const a=g(e,["config"]);return a!=null&&WK(a,r),r}function QK(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["config"]);return a!=null&&ZK(a,r),r}function eJ(t,e,n){const r={},s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const a=g(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const o=g(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const c=g(t,["includeRaiReason"]);e!==void 0&&c!=null&&y(e,["parameters","includeRaiReason"],c);const u=g(t,["outputMimeType"]);e!==void 0&&u!=null&&y(e,["parameters","outputOptions","mimeType"],u);const d=g(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const h=g(t,["enhanceInputImage"]);e!==void 0&&h!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],h);const x=g(t,["imagePreservationFactor"]);e!==void 0&&x!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],x);const v=g(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=g(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const S=g(t,["mode"]);return e!==void 0&&S!=null&&y(e,["parameters","mode"],S),r}function tJ(t,e,n){const r={},s=g(e,["model"]);s!=null&&y(r,["_url","model"],an(t,s));const a=g(e,["image"]);a!=null&&y(r,["instances[0]","image"],La(a));const o=g(e,["upscaleFactor"]);o!=null&&y(r,["parameters","upscaleConfig","upscaleFactor"],o);const c=g(e,["config"]);return c!=null&&eJ(c,r),r}function nJ(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Xp(o))),y(n,["generatedImages"],a)}return n}function rJ(t,e){const n={},r=g(t,["uri"]);r!=null&&y(n,["uri"],r);const s=g(t,["encodedVideo"]);s!=null&&y(n,["videoBytes"],Yo(s));const a=g(t,["encoding"]);return a!=null&&y(n,["mimeType"],a),n}function sJ(t,e){const n={},r=g(t,["gcsUri"]);r!=null&&y(n,["uri"],r);const s=g(t,["bytesBase64Encoded"]);s!=null&&y(n,["videoBytes"],Yo(s));const a=g(t,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function aJ(t,e){const n={},r=g(t,["image"]);r!=null&&y(n,["_self"],La(r));const s=g(t,["maskMode"]);return s!=null&&y(n,["maskMode"],s),n}function iJ(t,e){const n={},r=g(t,["image"]);r!=null&&y(n,["image"],Qp(r));const s=g(t,["referenceType"]);return s!=null&&y(n,["referenceType"],s),n}function oJ(t,e){const n={},r=g(t,["image"]);r!=null&&y(n,["image"],La(r));const s=g(t,["referenceType"]);return s!=null&&y(n,["referenceType"],s),n}function fk(t,e){const n={},r=g(t,["uri"]);r!=null&&y(n,["uri"],r);const s=g(t,["videoBytes"]);s!=null&&y(n,["encodedVideo"],Yo(s));const a=g(t,["mimeType"]);return a!=null&&y(n,["encoding"],a),n}function dk(t,e){const n={},r=g(t,["uri"]);r!=null&&y(n,["gcsUri"],r);const s=g(t,["videoBytes"]);s!=null&&y(n,["bytesBase64Encoded"],Yo(s));const a=g(t,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function lJ(t,e){const n={},r=g(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["displayName"],r),n}function cJ(t){const e={},n=g(t,["config"]);return n!=null&&lJ(n,e),e}function uJ(t,e){const n={},r=g(t,["force"]);return e!==void 0&&r!=null&&y(e,["_query","force"],r),n}function fJ(t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=g(t,["config"]);return r!=null&&uJ(r,e),e}function dJ(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function hJ(t,e){const n={},r=g(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["customMetadata"],a)}const s=g(t,["chunkingConfig"]);return e!==void 0&&s!=null&&y(e,["chunkingConfig"],s),n}function pJ(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=g(t,["done"]);s!=null&&y(e,["done"],s);const a=g(t,["error"]);a!=null&&y(e,["error"],a);const o=g(t,["response"]);return o!=null&&y(e,["response"],gJ(o)),e}function mJ(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const r=g(t,["fileName"]);r!=null&&y(e,["fileName"],r);const s=g(t,["config"]);return s!=null&&hJ(s,e),e}function gJ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&y(e,["parent"],r);const s=g(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function xJ(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function vJ(t){const e={},n=g(t,["config"]);return n!=null&&xJ(n,e),e}function yJ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=g(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["fileSearchStores"],a)}return e}function hk(t,e){const n={},r=g(t,["mimeType"]);e!==void 0&&r!=null&&y(e,["mimeType"],r);const s=g(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const a=g(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>u)),y(e,["customMetadata"],c)}const o=g(t,["chunkingConfig"]);return e!==void 0&&o!=null&&y(e,["chunkingConfig"],o),n}function _J(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const r=g(t,["config"]);return r!=null&&hk(r,e),e}function EJ(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}const TJ="Content-Type",wJ="X-Server-Timeout",SJ="User-Agent",Av="x-goog-api-client",AJ="1.40.0",bJ=`google-genai-sdk/${AJ}`,CJ="v1beta1",NJ="v1beta";class IJ{constructor(e){var n,r,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const c=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!c?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:CJ}else{if(!this.clientOptions.apiKey)throw new _d({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:NJ,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===yv.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,c]of Object.entries(e.queryParams))s.searchParams.append(o,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const a=new AbortController,o=a.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=o}return n&&n.extraBody!==null&&kJ(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await CA(s),new _v(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await CA(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Pa(this,arguments,function*(){var r;const s=(r=e?.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const c="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:h}=yield St(s.read());if(d){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const x=a.decode(h,{stream:!0});try{const S=JSON.parse(x);if("error"in S){const A=JSON.parse(JSON.stringify(S.error)),b=A.status,R=A.code,B=`got status: ${b}. ${JSON.stringify(S)}`;if(R>=400&&R<600)throw new _d({message:B,status:R})}}catch(S){if(S.name==="ApiError")throw S}o+=x;let v=-1,T=0;for(;;){v=-1,T=0;for(const b of u){const R=o.indexOf(b);R!==-1&&(v===-1||R<v)&&(v=R,T=b.length)}if(v===-1)break;const S=o.substring(0,v);o=o.substring(v+T);const A=S.trim();if(A.startsWith(c)){const b=A.substring(c.length).trim();try{const R=new Response(b,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield St(new _v(R))}catch(R){throw new Error(`exception parsing stream chunk ${b}. ${R}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=bJ+" "+this.clientOptions.userAgentExtra;return e[SJ]=n,e[Av]=n,e[TJ]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))r.append(s,a);e.timeout&&e.timeout>0&&r.append(wJ,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,o=await a.stat(e);s.sizeBytes=String(o.size);const c=(r=n?.mimeType)!==null&&r!==void 0?r:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const u={file:s},d=this.getFileName(e),h=Ze("upload/v1beta/files",u._url),x=await this.fetchUploadUrl(h,s.sizeBytes,s.mimeType,d,u,n?.httpOptions);return a.upload(e,x,this)}async uploadFileToFileSearchStore(e,n,r){var s;const a=this.clientOptions.uploader,o=await a.stat(n),c=String(o.size),u=(s=r?.mimeType)!==null&&s!==void 0?s:o.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),x={};r!=null&&hk(r,x);const v=await this.fetchUploadUrl(d,c,u,h,x,r?.httpOptions);return a.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,a,o){var c;let u={};o?u=o:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const d=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:u});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function CA(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new _d({message:s,status:n}):new Error(s)}}function kJ(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,o){const c=Object.assign({},a);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)){const d=o[u],h=c[u];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?c[u]=r(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),c[u]=d)}return c}const s=r(n,e);t.body=JSON.stringify(s)}const RJ="mcp_used/unknown";let DJ=!1;function pk(t){for(const e of t)if(MJ(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DJ}function mk(t){var e;const n=(e=t[Av])!==null&&e!==void 0?e:"";t[Av]=(n+` ${RJ}`).trimStart()}function MJ(t){return t!==null&&typeof t=="object"&&t instanceof iy}function PJ(t){return Pa(this,arguments,function*(n,r=100){let s,a=0;for(;a<r;){const o=yield St(n.listTools({cursor:s}));for(const c of o.tools)yield yield St(c),a++;if(!o.nextCursor)break;s=o.nextCursor}})}class iy{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new iy(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},o=[];for(const h of this.mcpClients)try{for(var c=!0,u=(n=void 0,Fa(PJ(h))),d;d=await u.next(),e=d.done,!e;c=!0){s=d.value,c=!1;const x=s;o.push(x);const v=x.name;if(a[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);a[v]=h}}catch(x){n={error:x}}finally{try{!c&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),cG(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}async function FJ(t,e,n){const r=new tG;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class OJ{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=VJ(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),u=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const h=new Promise(D=>{d=D}),x=e.callbacks,v=function(){d({})},T=this.apiClient,S={onopen:v,onmessage:D=>{FJ(T,x.onmessage,D)},onerror:(n=x?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=x?.onclose)!==null&&r!==void 0?r:function(D){}},A=this.webSocketFactory.create(u,UJ(o),S);A.connect(),await h;const B={setup:{model:an(this.apiClient,e.model)}};return A.send(JSON.stringify(B)),new LJ(A,this.apiClient)}}class LJ{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=lq(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=oq(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Jc.PLAY)}pause(){this.sendPlaybackControl(Jc.PAUSE)}stop(){this.sendPlaybackControl(Jc.STOP)}resetContext(){this.sendPlaybackControl(Jc.RESET_CONTEXT)}close(){this.conn.close()}}function UJ(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function VJ(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}const BJ="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zJ(t,e,n){const r=new eG;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const o=fq(a);Object.assign(r,o)}else Object.assign(r,a);e(r)}class jJ{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new OJ(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,o,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&pk(e.config.tools)&&mk(x);const v=qJ(x);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),F=this.apiClient.getLocation(),U=this.apiClient.getApiKey(),M=!!N&&!!F||!!U;this.apiClient.getCustomBaseUrl()&&!M?h=u:(h=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,h))}else{const N=this.apiClient.getApiKey();let F="BidiGenerateContent",U="key";N?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",U="access_token"),h=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${F}?${U}=${N}`}let T=()=>{};const S=new Promise(N=>{T=N}),A=e.callbacks,b=function(){var N;(N=A?.onopen)===null||N===void 0||N.call(A),T({})},R=this.apiClient,B={onopen:b,onmessage:N=>{zJ(R,A.onmessage,N)},onerror:(n=A?.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=A?.onclose)!==null&&r!==void 0?r:function(N){}},D=this.webSocketFactory.create(h,$J(v),B);D.connect(),await S;let L=an(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const N=this.apiClient.getProject(),F=this.apiClient.getLocation();N&&F&&(L=`projects/${N}/locations/${F}/`+L)}let z={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ep.AUDIO]}:e.config.responseModalities=[Ep.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(c=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[],I=[];for(const N of O)if(this.isCallableTool(N)){const F=N;I.push(await F.tool())}else I.push(N);I.length>0&&(e.config.tools=I);const C={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=iq(this.apiClient,C):z=aq(this.apiClient,C),delete z.config,D.send(JSON.stringify(z)),new GJ(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const HJ={turnComplete:!0};class GJ{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=fa(n.turns),e.isVertexAI()||(r=r.map(s=>Zp(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(BJ)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},HJ),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:uq(e)}:n={realtimeInput:cq(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function $J(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function qJ(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}const NA=10;function IA(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t?.tools)!==null&&n!==void 0?n:[])if(ru(o)){s=!0;break}if(!s)return!0;const a=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ru(t){return"callTool"in t&&typeof t.callTool=="function"}function KJ(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ru(s)))!==null&&r!==void 0?r:!1}function kA(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(ru(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function RA(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class JJ extends Hi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,o,c;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!KJ(n)||IA(n.config))return await this.generateContentInternal(u);const d=kA(n);if(d.length>0){const A=d.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let h,x;const v=fa(u.contents),T=(a=(s=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:NA;let S=0;for(;S<T&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const A=h.candidates[0].content,b=[];for(const R of(c=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[])if(ru(R)){const D=await R.callTool(h.functionCalls);b.push(...D)}S++,x={role:"user",parts:b},u.contents=fa(u.contents),u.contents.push(A),u.contents.push(x),RA(u.config)&&(v.push(A),v.push(x))}return RA(u.config)&&(h.automaticFunctionCallingHistory=v),h},this.generateContentStream=async n=>{var r,s,a,o,c;if(this.maybeMoveToResponseJsonSchem(n),IA(n.config)){const x=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(x)}const u=kA(n);if(u.length>0){const x=u.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(a=(s=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,h=(c=(o=n?.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const o=[];if(r?.generatedImages)for(const u of r.generatedImages)u&&u?.safetyAttributes&&((s=u?.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=u?.safetyAttributes:o.push(u);let c;return a?c={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Yl(Ui.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,a,o,c,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(a=n.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((u=(c=n.source)===null||c===void 0?void 0:c.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const o=await Promise.all(a.map(async u=>ru(u)?await u.tool():u)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(c.config.tools=o,e.config&&e.config.tools&&pk(e.config.tools)){const u=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),mk(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ru(o)){const c=o,u=await c.tool();for(const d of(s=u.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:NA;let o=!1,c=0;const u=await this.initAfcToolsMap(e);return(function(d,h,x){return Pa(this,arguments,function*(){for(var v,T,S,A,b,R;c<a;){o&&(c++,o=!1);const z=yield St(d.processParamsMaybeAddMcpUsage(x)),O=yield St(d.generateContentStreamInternal(z)),I=[],C=[];try{for(var B=!0,D=(T=void 0,Fa(O)),L;L=yield St(D.next()),v=L.done,!v;B=!0){A=L.value,B=!1;const N=A;if(yield yield St(N),N.candidates&&(!((b=N.candidates[0])===null||b===void 0)&&b.content)){C.push(N.candidates[0].content);for(const F of(R=N.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(c<a&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(F.functionCall.name)){const U=yield St(h.get(F.functionCall.name).callTool([F.functionCall]));I.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(N){T={error:N}}finally{try{!B&&!v&&(S=D.return)&&(yield St(S.call(D)))}finally{if(T)throw T.error}}if(I.length>0){o=!0;const N=new Ef;N.candidates=[{content:{role:"user",parts:I}}],yield yield St(N);const F=[];F.push(...C),F.push({role:"user",parts:I});const U=fa(x.contents).concat(F);x.contents=U}else break}})})(this,u,e)}async generateContentInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=SA(this.apiClient,e);return c=Ze("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=bA(h),v=new Ef;return Object.assign(v,x),v})}else{const d=wA(this.apiClient,e);return c=Ze("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=AA(h),v=new Ef;return Object.assign(v,x),v})}}async generateContentStreamInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=SA(this.apiClient,e);return c=Ze("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(x){return Pa(this,arguments,function*(){var v,T,S,A;try{for(var b=!0,R=Fa(x),B;B=yield St(R.next()),v=B.done,!v;b=!0){A=B.value,b=!1;const D=A,L=bA(yield St(D.json()),e);L.sdkHttpResponse={headers:D.headers};const z=new Ef;Object.assign(z,L),yield yield St(z)}}catch(D){T={error:D}}finally{try{!b&&!v&&(S=R.return)&&(yield St(S.call(R)))}finally{if(T)throw T.error}}})})}else{const d=wA(this.apiClient,e);return c=Ze("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(x){return Pa(this,arguments,function*(){var v,T,S,A;try{for(var b=!0,R=Fa(x),B;B=yield St(R.next()),v=B.done,!v;b=!0){A=B.value,b=!1;const D=A,L=AA(yield St(D.json()),e);L.sdkHttpResponse={headers:D.headers};const z=new Ef;Object.assign(z,L),yield yield St(z)}}catch(D){T={error:D}}finally{try{!b&&!v&&(S=R.return)&&(yield St(S.call(R)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=jq(this.apiClient,e);return c=Ze("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=Gq(h),v=new iA;return Object.assign(v,x),v})}else{const d=zq(this.apiClient,e);return c=Ze("{model}:batchEmbedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=Hq(h),v=new iA;return Object.assign(v,x),v})}}async generateImagesInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=tK(this.apiClient,e);return c=Ze("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=rK(h),v=new oA;return Object.assign(v,x),v})}else{const d=eK(this.apiClient,e);return c=Ze("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=nK(h),v=new oA;return Object.assign(v,x),v})}}async editImageInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=Lq(this.apiClient,e);return a=Ze("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const d=Uq(u),h=new jH;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=tJ(this.apiClient,e);return a=Ze("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const d=nJ(u),h=new HH;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=OK(this.apiClient,e);return a=Ze("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=LK(u),h=new GH;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=HK(this.apiClient,e);return a=Ze("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=GK(u),h=new $H;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=_K(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Sv(h))}else{const d=yK(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>wv(h))}}async listInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=IK(this.apiClient,e);return c=Ze("{models_url}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=RK(h),v=new lA;return Object.assign(v,x),v})}else{const d=NK(this.apiClient,e);return c=Ze("{models_url}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=kK(h),v=new lA;return Object.assign(v,x),v})}}async update(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=QK(this.apiClient,e);return c=Ze("{model}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Sv(h))}else{const d=XK(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>wv(h))}}async delete(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Mq(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=Fq(h),v=new cA;return Object.assign(v,x),v})}else{const d=Dq(this.apiClient,e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=Pq(h),v=new cA;return Object.assign(v,x),v})}}async countTokens(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Iq(this.apiClient,e);return c=Ze("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=Rq(h),v=new uA;return Object.assign(v,x),v})}else{const d=Nq(this.apiClient,e);return c=Ze("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=kq(h),v=new uA;return Object.assign(v,x),v})}}async computeTokens(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=Eq(this.apiClient,e);return a=Ze("{model}:computeTokens",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const d=Tq(u),h=new qH;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=cK(this.apiClient,e);return c=Ze("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const x=oK(h),v=new Tp;return Object.assign(v,x),v})}else{const d=lK(this.apiClient,e);return c=Ze("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const x=iK(h),v=new Tp;return Object.assign(v,x),v})}}}class YJ extends Hi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=OH(e);return c=Ze("{operationName}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else{const d=FH(e);return c=Ze("{operationName}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=NH(e);return a=Ze("{resourceName}:fetchPredictOperation",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}function WJ(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function ZJ(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>iY(a))),y(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function XJ(t,e,n){const r={},s=g(e,["expireTime"]);n!==void 0&&s!=null&&y(n,["expireTime"],s);const a=g(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&y(n,["newSessionExpireTime"],a);const o=g(e,["uses"]);n!==void 0&&o!=null&&y(n,["uses"],o);const c=g(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],aY(t,c));const u=g(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&y(n,["fieldMask"],u),r}function QJ(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],XJ(t,r,n)),n}function eY(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function tY(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const s=g(t,["name"]);if(s!=null&&y(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nY(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function rY(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function sY(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=g(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const o=g(t,["topP"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","topP"],o);const c=g(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const u=g(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const d=g(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const h=g(t,["seed"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","seed"],h);const x=g(t,["speechConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","speechConfig"],ay(x));const v=g(t,["thinkingConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","thinkingConfig"],v);const T=g(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],T);const S=g(t,["systemInstruction"]);e!==void 0&&S!=null&&y(e,["setup","systemInstruction"],ZJ(es(S)));const A=g(t,["tools"]);if(e!==void 0&&A!=null){let O=Tu(A);Array.isArray(O)&&(O=O.map(I=>lY(Eu(I)))),y(e,["setup","tools"],O)}const b=g(t,["sessionResumption"]);e!==void 0&&b!=null&&y(e,["setup","sessionResumption"],oY(b));const R=g(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","inputAudioTranscription"],R);const B=g(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&y(e,["setup","outputAudioTranscription"],B);const D=g(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&y(e,["setup","realtimeInputConfig"],D);const L=g(t,["contextWindowCompression"]);e!==void 0&&L!=null&&y(e,["setup","contextWindowCompression"],L);const z=g(t,["proactivity"]);if(e!==void 0&&z!=null&&y(e,["setup","proactivity"],z),g(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function aY(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],an(t,r));const s=g(e,["config"]);return s!=null&&y(n,["config"],sY(s,n)),n}function iY(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&y(e,["fileData"],eY(a));const o=g(t,["functionCall"]);o!=null&&y(e,["functionCall"],tY(o));const c=g(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const u=g(t,["inlineData"]);u!=null&&y(e,["inlineData"],WJ(u));const d=g(t,["text"]);d!=null&&y(e,["text"],d);const h=g(t,["thought"]);h!=null&&y(e,["thought"],h);const x=g(t,["thoughtSignature"]);x!=null&&y(e,["thoughtSignature"],x);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function oY(t){const e={},n=g(t,["handle"]);if(n!=null&&y(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lY(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const s=g(t,["codeExecution"]);if(s!=null&&y(e,["codeExecution"],s),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(x=>x)),y(e,["functionDeclarations"],h)}const o=g(t,["googleMaps"]);o!=null&&y(e,["googleMaps"],nY(o));const c=g(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],rY(c));const u=g(t,["googleSearchRetrieval"]);u!=null&&y(e,["googleSearchRetrieval"],u);const d=g(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function cY(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function uY(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=cY(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(d=>o.includes(d)?`generationConfig.${d}`:d));const u=[];a&&u.push(a),c.length>0&&u.push(...c),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class fY extends Hi{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=QJ(this.apiClient,e);a=Ze("auth_tokens",c._url),o=c._query,delete c.config,delete c._url,delete c._query;const u=uY(c,e.config);return s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}}function dY(t,e){const n={},r=g(t,["force"]);return e!==void 0&&r!=null&&y(e,["_query","force"],r),n}function hY(t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=g(t,["config"]);return r!=null&&dY(r,e),e}function pY(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function mY(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function gY(t){const e={},n=g(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const r=g(t,["config"]);return r!=null&&mY(r,e),e}function xY(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=g(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["documents"],a)}return e}class vY extends Hi{constructor(e){super(),this.apiClient=e,this.list=async n=>new Yl(Ui.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pY(e);return a=Ze("{name}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=hY(e);s=Ze("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=gY(e);return a=Ze("{parent}/documents",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=xY(u),h=new KH;return Object.assign(h,d),h})}}}class yY extends Hi{constructor(e,n=new vY(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Yl(Ui.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cJ(e);return a=Ze("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async get(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dJ(e);return a=Ze("{name}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=fJ(e);s=Ze("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vJ(e);return a=Ze("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=yJ(u),h=new JH;return Object.assign(h,d),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_J(e);return a=Ze("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=EJ(u),h=new YH;return Object.assign(h,d),h})}}async importFile(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mJ(e);return a=Ze("{file_search_store_name}:importFile",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const d=pJ(u),h=new ey;return Object.assign(h,d),h})}}}let gk=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return gk=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const _Y=()=>gk();function bv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Cv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class ha extends Error{}class xs extends ha{constructor(e,n,r,s){super(`${xs.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new em({message:r,cause:Cv(n)});const a=n;return e===400?new vk(e,a,r,s):e===401?new yk(e,a,r,s):e===403?new _k(e,a,r,s):e===404?new Ek(e,a,r,s):e===409?new Tk(e,a,r,s):e===422?new wk(e,a,r,s):e===429?new Sk(e,a,r,s):e>=500?new Ak(e,a,r,s):new xs(e,a,r,s)}}class Nv extends xs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class em extends xs{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xk extends em{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vk extends xs{}class yk extends xs{}class _k extends xs{}class Ek extends xs{}class Tk extends xs{}class wk extends xs{}class Sk extends xs{}class Ak extends xs{}const EY=/^[a-z][a-z0-9+.-]*:/i,TY=t=>EY.test(t);let Iv=t=>(Iv=Array.isArray,Iv(t));const wY=Iv;let SY=wY;const DA=SY;function AY(t){if(!t)return!0;for(const e in t)return!1;return!0}function bY(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const CY=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ha(`${t} must be an integer`);if(e<0)throw new ha(`${t} must be a positive integer`);return e},NY=t=>{try{return JSON.parse(t)}catch{return}};const IY=t=>new Promise(e=>setTimeout(e,t));const Bc="0.0.1";function kY(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const RY=()=>{var t,e,n,r,s;const a=kY();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bc,"X-Stainless-OS":PA(Deno.build.os),"X-Stainless-Arch":MA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bc,"X-Stainless-OS":PA((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":MA((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=DY();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DY(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${a}.${o}`}}}return null}const MA=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",PA=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _0;const MY=()=>_0??(_0=RY());function PY(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function FY(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bk({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Ck(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function OY(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}const LY=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const Nk=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ix(t,e,n){return Nk(),new File(t,e??"unknown_file",n)}function UY(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const VY=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const Ik=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",BY=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Ik(t),zY=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function jY(t,e,n){if(Nk(),t=await t,BY(t))return t instanceof File?t:Ix([await t.arrayBuffer()],t.name);if(zY(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ix(await kv(s),e,n)}const r=await kv(t);if(e||(e=UY(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Ix(r,e,n)}async function kv(t){var e,n,r,s,a;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(Ik(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(VY(t))try{for(var c=!0,u=Fa(t),d;d=await u.next(),e=d.done,!e;c=!0){s=d.value,c=!1;const h=s;o.push(...await kv(h))}}catch(h){n={error:h}}finally{try{!c&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const h=(a=t?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${HY(t)}`)}return o}function HY(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class kk{constructor(e){this._client=e}}kk._key=[];function Rk(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const FA=Object.freeze(Object.create(null)),GY=(t=Rk)=>(function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],o=n.reduce((h,x,v)=>{var T,S,A;/[?#]/.test(x)&&(s=!0);const b=r[v];let R=(s?encodeURIComponent:t)(""+b);return v!==r.length&&(b==null||typeof b=="object"&&b.toString===((A=Object.getPrototypeOf((S=Object.getPrototypeOf((T=b.hasOwnProperty)!==null&&T!==void 0?T:FA))!==null&&S!==void 0?S:FA))===null||A===void 0?void 0:A.toString))&&(R=b+"",a.push({start:h.length+x.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),h+x+(v===r.length?"":R)},""),c=o.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=u.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((h,x)=>h.start-x.start),a.length>0){let h=0;const x=a.reduce((v,T)=>{const S=" ".repeat(T.start-h),A="^".repeat(T.length);return h=T.start+T.length,v+S+A},"");throw new ha(`Path parameters result in path with invalid segments:
${a.map(v=>v.error).join(`
`)}
${o}
${x}`)}return o}),E0=GY(Rk);class Dk extends kk{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,a=Sp(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ha("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ha("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(E0`/${s}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(E0`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(E0`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const a=n??{},{api_version:o=this._client.apiVersion}=a,c=Sp(a,["api_version"]);return this._client.get(E0`/${o}/interactions/${e}`,Object.assign(Object.assign({query:c},r),{stream:(s=n?.stream)!==null&&s!==void 0?s:!1}))}}Dk._key=Object.freeze(["interactions"]);class Mk extends Dk{}function $Y(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let T0;function oy(t){let e;return(T0??(e=new globalThis.TextEncoder,T0=e.encode.bind(e)))(t)}let w0;function OA(t){let e;return(w0??(e=new globalThis.TextDecoder,w0=e.decode.bind(e)))(t)}class tm{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?oy(e):e;this.buffer=$Y([this.buffer,n]);const r=[];let s;for(;(s=qY(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(OA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=OA(this.buffer.subarray(0,a));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}tm.NEWLINE_CHARS=new Set([`
`,"\r"]);tm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qY(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function KY(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Ap={off:0,error:200,warn:300,info:400,debug:500},LA=(t,e,n)=>{if(t){if(bY(Ap,t))return t;fs(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ap))}`)}};function Of(){}function S0(t,e,n){return!e||Ap[t]>Ap[n]?Of:e[t].bind(e)}const JY={error:Of,warn:Of,info:Of,debug:Of};let UA=new WeakMap;function fs(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return JY;const s=UA.get(n);if(s&&s[0]===r)return s[1];const a={error:S0("error",n,r),warn:S0("warn",n,r),info:S0("info",n,r),debug:S0("debug",n,r)};return UA.set(n,[r,a]),a}const El=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class Yc{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const a=r?fs(r):console;function o(){return Pa(this,arguments,function*(){var u,d,h,x;if(s)throw new ha("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let v=!1;try{try{for(var T=!0,S=Fa(YY(e,n)),A;A=yield St(S.next()),u=A.done,!u;T=!0){x=A.value,T=!1;const b=x;if(!v)if(b.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield St(JSON.parse(b.data))}catch(R){throw a.error("Could not parse message into JSON:",b.data),a.error("From chunk:",b.raw),R}}}catch(b){d={error:b}}finally{try{!T&&!u&&(h=S.return)&&(yield St(h.call(S)))}finally{if(d)throw d.error}}v=!0}catch(b){if(bv(b))return yield St(void 0);throw b}finally{v||n.abort()}})}return new Yc(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function a(){return Pa(this,arguments,function*(){var u,d,h,x;const v=new tm,T=Ck(e);try{for(var S=!0,A=Fa(T),b;b=yield St(A.next()),u=b.done,!u;S=!0){x=b.value,S=!1;const R=x;for(const B of v.decode(R))yield yield St(B)}}catch(R){d={error:R}}finally{try{!S&&!u&&(h=A.return)&&(yield St(h.call(A)))}finally{if(d)throw d.error}}for(const R of v.flush())yield yield St(R)})}function o(){return Pa(this,arguments,function*(){var u,d,h,x;if(s)throw new ha("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let v=!1;try{try{for(var T=!0,S=Fa(a()),A;A=yield St(S.next()),u=A.done,!u;T=!0){x=A.value,T=!1;const b=x;v||b&&(yield yield St(JSON.parse(b)))}}catch(b){d={error:b}}finally{try{!T&&!u&&(h=S.return)&&(yield St(h.call(S)))}finally{if(d)throw d.error}}v=!0}catch(b){if(bv(b))return yield St(void 0);throw b}finally{v||n.abort()}})}return new Yc(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=r.next();e.push(o),n.push(o)}return a.shift()}});return[new Yc(()=>s(e),this.controller,this.client),new Yc(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return bk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const o=oy(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function YY(t,e){return Pa(this,arguments,function*(){var r,s,a,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ha("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ha("Attempted to iterate over a response with no body");const c=new ZY,u=new tm,d=Ck(t.body);try{for(var h=!0,x=Fa(WY(d)),v;v=yield St(x.next()),r=v.done,!r;h=!0){o=v.value,h=!1;const T=o;for(const S of u.decode(T)){const A=c.decode(S);A&&(yield yield St(A))}}}catch(T){s={error:T}}finally{try{!h&&!r&&(a=x.return)&&(yield St(a.call(x)))}finally{if(s)throw s.error}}for(const T of u.flush()){const S=c.decode(T);S&&(yield yield St(S))}})}function WY(t){return Pa(this,arguments,function*(){var n,r,s,a;let o=new Uint8Array;try{for(var c=!0,u=Fa(t),d;d=yield St(u.next()),n=d.done,!n;c=!0){a=d.value,c=!1;const h=a;if(h==null)continue;const x=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?oy(h):h;let v=new Uint8Array(o.length+x.length);v.set(o),v.set(x,o.length),o=v;let T;for(;(T=KY(o))!==-1;)yield yield St(o.slice(0,T)),o=o.slice(T)}}catch(h){r={error:h}}finally{try{!c&&!n&&(s=u.return)&&(yield St(s.call(u)))}finally{if(r)throw r.error}}o.length>0&&(yield yield St(o))})}class ZY{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=XY(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function XY(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function QY(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,o=await(async()=>{var c;if(e.options.stream)return fs(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Yc.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),d=(c=u?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return fs(t).debug(`[${r}] response parsed`,El({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-a})),o}class ly extends Promise{constructor(e,n,r=QY){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new ly(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const Pk=Symbol("brand.privateNullableHeaders");function*eW(t){if(!t)return;if(Pk in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():DA(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=DA(r[1])?r[1]:[r[1]];let o=!1;for(const c of a)c!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,c])}}const Tf=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,o]of eW(r)){const c=a.toLowerCase();s.has(c)||(e.delete(a),s.add(c)),o===null?(e.delete(a),n.add(c)):(e.append(a,o),n.delete(c))}}return{[Pk]:!0,values:e,nulls:n}};const kx=t=>{var e,n,r,s,a,o;if(typeof globalThis.process<"u")return(r=(n=(e=TH)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,t))===null||o===void 0?void 0:o.trim()};var Fk;class nm{constructor(e){var n,r,s,a,o,c,u,{baseURL:d=kx("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=kx("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:x="v1beta"}=e,v=Sp(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:h,apiVersion:x},v),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(r=T.timeout)!==null&&r!==void 0?r:nm.DEFAULT_TIMEOUT,this.logger=(s=T.logger)!==null&&s!==void 0?s:console;const S="warn";this.logLevel=S,this.logLevel=(o=(a=LA(T.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:LA(kx("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:S,this.fetchOptions=T.fetchOptions,this.maxRetries=(c=T.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(u=T.fetch)!==null&&u!==void 0?u:PY(),this.encoder=LY,this._options=T,this.apiKey=h,this.apiVersion=x,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Tf([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Tf([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Tf([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ha(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Bc}`}defaultIdempotencyKey(){return`stainless-node-retry-${_Y()}`}makeStatusError(e,n,r,s){return xs.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,a=TY(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return AY(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new ly(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,a,o;const c=await e,u=(s=c.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=u),await this.prepareOptions(c);const{req:d,url:h,timeout:x}=await this.buildRequest(c,{retryCount:u-n});await this.prepareRequest(d,{url:h,options:c});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=r===void 0?"":`, retryOf: ${r}`,S=Date.now();if(fs(this).debug(`[${v}] sending request`,El({retryOfRequestLogID:r,method:c.method,url:h,options:c,headers:d.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new Nv;const A=new AbortController,b=await this.fetchWithTimeout(h,d,x,A).catch(Cv),R=Date.now();if(b instanceof globalThis.Error){const D=`retrying, ${n} attempts remaining`;if(!((o=c.signal)===null||o===void 0)&&o.aborted)throw new Nv;const L=bv(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return fs(this).info(`[${v}] connection ${L?"timed out":"failed"} - ${D}`),fs(this).debug(`[${v}] connection ${L?"timed out":"failed"} (${D})`,El({retryOfRequestLogID:r,url:h,durationMs:R-S,message:b.message})),this.retryRequest(c,n,r??v);throw fs(this).info(`[${v}] connection ${L?"timed out":"failed"} - error; no more retries left`),fs(this).debug(`[${v}] connection ${L?"timed out":"failed"} (error; no more retries left)`,El({retryOfRequestLogID:r,url:h,durationMs:R-S,message:b.message})),L?new xk:new em({cause:b})}const B=`[${v}${T}] ${d.method} ${h} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${R-S}ms`;if(!b.ok){const D=await this.shouldRetry(b);if(n&&D){const N=`retrying, ${n} attempts remaining`;return await OY(b.body),fs(this).info(`${B} - ${N}`),fs(this).debug(`[${v}] response error (${N})`,El({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:R-S})),this.retryRequest(c,n,r??v,b.headers)}const L=D?"error; no more retries left":"error; not retryable";fs(this).info(`${B} - ${L}`);const z=await b.text().catch(N=>Cv(N).message),O=NY(z),I=O?void 0:z;throw fs(this).debug(`[${v}] response error (${L})`,El({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:I,durationMs:Date.now()-S})),this.makeStatusError(b.status,O,I,b.headers)}return fs(this).info(B),fs(this).debug(`[${v}] response start`,El({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:R-S})),{response:b,options:c,controller:A,requestLogID:v,retryOfRequestLogID:r,startTime:S}}async fetchWithTimeout(e,n,r,s){const a=n||{},{signal:o,method:c}=a,u=Sp(a,["signal","method"]),d=s.abort.bind(s);o&&o.addEventListener("abort",d,{once:!0});const h=setTimeout(d,r),x=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,v=Object.assign(Object.assign(Object.assign({signal:s.signal},x?{duplex:"half"}:{}),{method:"GET"}),u);c&&(v.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var a;let o;const c=s?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(o=d)}const u=s?.get("retry-after");if(u&&!o){const d=parseFloat(u);Number.isNaN(d)?o=Date.parse(u)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,d)}return await IY(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,o=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,a;const o=Object.assign({},e),{method:c,path:u,query:d,defaultBaseURL:h}=o,x=this.buildURL(u,d,h);"timeout"in o&&CY("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:v,body:T}=this.buildBody({options:o}),S=await this.buildHeaders({options:e,method:c,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:S},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=o.fetchOptions)!==null&&a!==void 0?a:{}),url:x,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let c=Tf([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),MY()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Tf([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:FY(e)}:this.encoder({body:e,headers:r})}}nm.DEFAULT_TIMEOUT=6e4;class Nr extends nm{constructor(){super(...arguments),this.interactions=new Mk(this)}}Fk=Nr;Nr.GeminiNextGenAPIClient=Fk;Nr.GeminiNextGenAPIClientError=ha;Nr.APIError=xs;Nr.APIConnectionError=em;Nr.APIConnectionTimeoutError=xk;Nr.APIUserAbortError=Nv;Nr.NotFoundError=Ek;Nr.ConflictError=Tk;Nr.RateLimitError=Sk;Nr.BadRequestError=vk;Nr.AuthenticationError=yk;Nr.InternalServerError=Ak;Nr.PermissionDeniedError=_k;Nr.UnprocessableEntityError=wk;Nr.toFile=jY;Nr.Interactions=Mk;function tW(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function nW(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function rW(t,e){const n={},r=g(t,["sdkHttpResponse"]);return r!=null&&y(n,["sdkHttpResponse"],r),n}function sW(t,e){const n={},r=g(t,["sdkHttpResponse"]);return r!=null&&y(n,["sdkHttpResponse"],r),n}function aW(t,e,n){const r={};if(g(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=g(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&y(e,["displayName"],s),g(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(t,["epochCount"]);e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","epochCount"],a);const o=g(t,["learningRateMultiplier"]);if(o!=null&&y(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),g(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(g(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(g(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const c=g(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const u=g(t,["learningRate"]);if(e!==void 0&&u!=null&&y(e,["tuningTask","hyperparameters","learningRate"],u),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(g(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(g(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(g(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(g(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function iW(t,e,n){const r={};let s=g(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const z=g(t,["validationDataset"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec"],Rx(z))}else if(s==="PREFERENCE_TUNING"){const z=g(t,["validationDataset"]);e!==void 0&&z!=null&&y(e,["preferenceOptimizationSpec"],Rx(z))}else if(s==="DISTILLATION"){const z=g(t,["validationDataset"]);e!==void 0&&z!=null&&y(e,["distillationSpec"],Rx(z))}const a=g(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&y(e,["tunedModelDisplayName"],a);const o=g(t,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);let c=g(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const z=g(t,["epochCount"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],z)}else if(c==="PREFERENCE_TUNING"){const z=g(t,["epochCount"]);e!==void 0&&z!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],z)}else if(c==="DISTILLATION"){const z=g(t,["epochCount"]);e!==void 0&&z!=null&&y(e,["distillationSpec","hyperParameters","epochCount"],z)}let u=g(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const z=g(t,["learningRateMultiplier"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],z)}else if(u==="PREFERENCE_TUNING"){const z=g(t,["learningRateMultiplier"]);e!==void 0&&z!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],z)}else if(u==="DISTILLATION"){const z=g(t,["learningRateMultiplier"]);e!==void 0&&z!=null&&y(e,["distillationSpec","hyperParameters","learningRateMultiplier"],z)}let d=g(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const z=g(t,["exportLastCheckpointOnly"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],z)}else if(d==="PREFERENCE_TUNING"){const z=g(t,["exportLastCheckpointOnly"]);e!==void 0&&z!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],z)}else if(d==="DISTILLATION"){const z=g(t,["exportLastCheckpointOnly"]);e!==void 0&&z!=null&&y(e,["distillationSpec","exportLastCheckpointOnly"],z)}let h=g(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const z=g(t,["adapterSize"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],z)}else if(h==="PREFERENCE_TUNING"){const z=g(t,["adapterSize"]);e!==void 0&&z!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],z)}else if(h==="DISTILLATION"){const z=g(t,["adapterSize"]);e!==void 0&&z!=null&&y(e,["distillationSpec","hyperParameters","adapterSize"],z)}let x=g(n,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const z=g(t,["tuningMode"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec","tuningMode"],z)}const v=g(t,["customBaseModel"]);e!==void 0&&v!=null&&y(e,["customBaseModel"],v);let T=g(n,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const z=g(t,["batchSize"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec","hyperParameters","batchSize"],z)}let S=g(n,["config","method"]);if(S===void 0&&(S="SUPERVISED_FINE_TUNING"),S==="SUPERVISED_FINE_TUNING"){const z=g(t,["learningRate"]);e!==void 0&&z!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRate"],z)}const A=g(t,["labels"]);e!==void 0&&A!=null&&y(e,["labels"],A);const b=g(t,["beta"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],b);const R=g(t,["baseTeacherModel"]);e!==void 0&&R!=null&&y(e,["distillationSpec","baseTeacherModel"],R);const B=g(t,["tunedTeacherModelSource"]);e!==void 0&&B!=null&&y(e,["distillationSpec","tunedTeacherModelSource"],B);const D=g(t,["sftLossWeightMultiplier"]);e!==void 0&&D!=null&&y(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],D);const L=g(t,["outputUri"]);return e!==void 0&&L!=null&&y(e,["outputUri"],L),r}function oW(t,e){const n={},r=g(t,["baseModel"]);r!=null&&y(n,["baseModel"],r);const s=g(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const a=g(t,["trainingDataset"]);a!=null&&vW(a);const o=g(t,["config"]);return o!=null&&aW(o,n),n}function lW(t,e){const n={},r=g(t,["baseModel"]);r!=null&&y(n,["baseModel"],r);const s=g(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const a=g(t,["trainingDataset"]);a!=null&&yW(a,n,e);const o=g(t,["config"]);return o!=null&&iW(o,n,e),n}function cW(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function uW(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function fW(t,e,n){const r={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const o=g(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),r}function dW(t,e,n){const r={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const o=g(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),r}function hW(t,e){const n={},r=g(t,["config"]);return r!=null&&fW(r,n),n}function pW(t,e){const n={},r=g(t,["config"]);return r!=null&&dW(r,n),n}function mW(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=g(t,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>Ok(c))),y(n,["tuningJobs"],o)}return n}function gW(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=g(t,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>Rv(c))),y(n,["tuningJobs"],o)}return n}function xW(t,e){const n={},r=g(t,["name"]);r!=null&&y(n,["model"],r);const s=g(t,["name"]);return s!=null&&y(n,["endpoint"],s),n}function vW(t,e){const n={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=g(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),y(n,["examples","examples"],s)}return n}function yW(t,e,n){const r={};let s=g(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=g(t,["gcsUri"]);e!==void 0&&o!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=g(t,["gcsUri"]);e!==void 0&&o!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(s==="DISTILLATION"){const o=g(t,["gcsUri"]);e!==void 0&&o!=null&&y(e,["distillationSpec","promptDatasetUri"],o)}let a=g(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=g(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=g(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(a==="DISTILLATION"){const o=g(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&y(e,["distillationSpec","promptDatasetUri"],o)}if(g(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Ok(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["name"]);s!=null&&y(n,["name"],s);const a=g(t,["state"]);a!=null&&y(n,["state"],XI(a));const o=g(t,["createTime"]);o!=null&&y(n,["createTime"],o);const c=g(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const u=g(t,["tuningTask","completeTime"]);u!=null&&y(n,["endTime"],u);const d=g(t,["updateTime"]);d!=null&&y(n,["updateTime"],d);const h=g(t,["description"]);h!=null&&y(n,["description"],h);const x=g(t,["baseModel"]);x!=null&&y(n,["baseModel"],x);const v=g(t,["_self"]);return v!=null&&y(n,["tunedModel"],xW(v)),n}function Rv(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["name"]);s!=null&&y(n,["name"],s);const a=g(t,["state"]);a!=null&&y(n,["state"],XI(a));const o=g(t,["createTime"]);o!=null&&y(n,["createTime"],o);const c=g(t,["startTime"]);c!=null&&y(n,["startTime"],c);const u=g(t,["endTime"]);u!=null&&y(n,["endTime"],u);const d=g(t,["updateTime"]);d!=null&&y(n,["updateTime"],d);const h=g(t,["error"]);h!=null&&y(n,["error"],h);const x=g(t,["description"]);x!=null&&y(n,["description"],x);const v=g(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const T=g(t,["tunedModel"]);T!=null&&y(n,["tunedModel"],T);const S=g(t,["preTunedModel"]);S!=null&&y(n,["preTunedModel"],S);const A=g(t,["supervisedTuningSpec"]);A!=null&&y(n,["supervisedTuningSpec"],A);const b=g(t,["preferenceOptimizationSpec"]);b!=null&&y(n,["preferenceOptimizationSpec"],b);const R=g(t,["distillationSpec"]);R!=null&&y(n,["distillationSpec"],R);const B=g(t,["tuningDataStats"]);B!=null&&y(n,["tuningDataStats"],B);const D=g(t,["encryptionSpec"]);D!=null&&y(n,["encryptionSpec"],D);const L=g(t,["partnerModelTuningSpec"]);L!=null&&y(n,["partnerModelTuningSpec"],L);const z=g(t,["customBaseModel"]);z!=null&&y(n,["customBaseModel"],z);const O=g(t,["experiment"]);O!=null&&y(n,["experiment"],O);const I=g(t,["labels"]);I!=null&&y(n,["labels"],I);const C=g(t,["outputUri"]);C!=null&&y(n,["outputUri"],C);const N=g(t,["pipelineJob"]);N!=null&&y(n,["pipelineJob"],N);const F=g(t,["serviceAccount"]);F!=null&&y(n,["serviceAccount"],F);const U=g(t,["tunedModelDisplayName"]);U!=null&&y(n,["tunedModelDisplayName"],U);const M=g(t,["veoTuningSpec"]);return M!=null&&y(n,["veoTuningSpec"],M),n}function _W(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=g(t,["name"]);s!=null&&y(n,["name"],s);const a=g(t,["metadata"]);a!=null&&y(n,["metadata"],a);const o=g(t,["done"]);o!=null&&y(n,["done"],o);const c=g(t,["error"]);return c!=null&&y(n,["error"],c),n}function Rx(t,e){const n={},r=g(t,["gcsUri"]);r!=null&&y(n,["validationDatasetUri"],r);const s=g(t,["vertexDatasetResource"]);return s!=null&&y(n,["validationDatasetUri"],s),n}class EW extends Hi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Yl(Ui.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:vv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=uW(e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>Rv(h))}else{const d=cW(e);return c=Ze("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>Ok(h))}}async listInternal(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=pW(e);return c=Ze("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=gW(h),v=new fA;return Object.assign(v,x),v})}else{const d=hW(e);return c=Ze("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=mW(h),v=new fA;return Object.assign(v,x),v})}}async cancel(e){var n,r,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=nW(e);return c=Ze("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=sW(h),v=new dA;return Object.assign(v,x),v})}else{const d=tW(e);return c=Ze("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(x=>{const v=x;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const x=rW(h),v=new dA;return Object.assign(v,x),v})}}async tuneInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=lW(e,e);return a=Ze("tuningJobs",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>Rv(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oW(e);return a=Ze("tunedModels",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>_W(u))}}}class TW{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const wW=1024*1024*8,SW=3,AW=1e3,bW=2,bp="x-goog-upload-status";async function CW(t,e,n){var r;const s=await Lk(t,e,n),a=await s?.json();if(((r=s?.headers)===null||r===void 0?void 0:r[bp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function NW(t,e,n){var r;const s=await Lk(t,e,n),a=await s?.json();if(((r=s?.headers)===null||r===void 0?void 0:r[bp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=qI(a),c=new ty;return Object.assign(c,o),c}async function Lk(t,e,n){var r,s;let a=0,o=0,c=new _v(new Response),u="upload";for(a=t.size;o<a;){const d=Math.min(wW,a-o),h=t.slice(o,o+d);o+d>=a&&(u+=", finalize");let x=0,v=AW;for(;x<SW&&(c=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[bp]));)x++,await kW(v),v=v*bW;if(o+=d,((s=c?.headers)===null||s===void 0?void 0:s[bp])!=="active")break;if(a<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function IW(t){return{size:t.size,type:t.type}}function kW(t){return new Promise(e=>setTimeout(e,t))}class RW{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CW(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NW(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IW(e)}}class DW{create(e,n,r){return new MW(e,n,r)}}class MW{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const VA="x-goog-api-key";class PW{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(VA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(VA,this.apiKey)}}}const FW="gl-node/";class Uk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Nr({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=bH(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new PW(this.apiKey);this.apiClient=new IJ({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:FW+"web",uploader:new RW,downloader:new TW}),this.models=new JJ(this.apiClient),this.live=new jJ(this.apiClient,s,new DW),this.batches=new n$(this.apiClient),this.chats=new L$(this.models,this.apiClient),this.caches=new P$(this.apiClient),this.files=new Y$(this.apiClient),this.operations=new YJ(this.apiClient),this.authTokens=new fY(this.apiClient),this.tunings=new EW(this.apiClient),this.fileSearchStores=new yY(this.apiClient)}}const Vk=async(t,e)=>{if(!t||!e)return console.warn("Geocoding aborted: Missing address or API key"),null;try{const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=${e}`,a=await(await fetch(r)).json();if(a.status==="OK"&&a.results&&a.results.length>0){const o=a.results[0],c=o.geometry.location;return{lat:c.lat,lng:c.lng,formattedAddress:o.formatted_address,locationType:o.geometry.location_type,addressComponents:o.address_components}}else return console.warn(`Geocoding failed for address "${t}":`,a.status,a.error_message),null}catch(n){return console.error(`Geocoding fetch error for address "${t}":`,n),null}},wf=async(t,e,n)=>{if(!t||!e||!n)return null;try{const r=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${e}&key=${n}`,a=await(await fetch(r)).json();return a.status==="OK"&&a.plus_code&&(a.plus_code.compound_code||a.plus_code.global_code)||null}catch(r){return console.error("Reverse geocoding error:",r),null}},Dv=()=>localStorage.getItem("cnpja_api_key")||"b62178c8-c43b-4e46-a68f-5b1b054c11d6-30fbc130-a06a-4023-bac8-c6dbaefa8326",Bk="https://api.cnpja.com",rm=async t=>{const e=t.replace(/[^\d]/g,"");if(e.length!==14)throw new Error("CNPJ deve ter 14 dgitos.");try{const n=await fetch(`${Bk}/office/${e}?geocoding=true`,{headers:{Authorization:Dv()}});if(!n.ok)throw n.status===404?new Error("CNPJ no encontrado."):n.status===401?new Error("Chave de API CNPJa invlida ou expirada."):new Error("Erro ao consultar CNPJa.");const r=await n.json(),s=r.address.street||"",a=r.address.number||"",o=r.address.district||"",c=r.address.city||"",u=r.address.state||"",d=r.address.type||"";return{cnpj:r.taxId,razao_social:r.company.name,nome_fantasia:r.alias||r.company.name,logradouro:d?`${d} ${s}`:s,numero:a,complemento:r.address.details,bairro:o,cep:r.address.zip,municipio:c,uf:u,ddd_telefone_1:r.phones?.[0]?`(${r.phones[0].area}) ${r.phones[0].number}`:void 0,cnae_fiscal:(r.mainActivity||r.main_activity)?.code?`${(r.mainActivity||r.main_activity).code} - ${(r.mainActivity||r.main_activity).text}`:(r.mainActivity||r.main_activity)?.text,cnae_descricao:(r.mainActivity||r.main_activity)?.text,cnaes_secundarios:(r.sideActivities||r.side_activities||r.secondary_activities)?.map(h=>({codigo:h.code,texto:h.text})),situacao_cadastral:r.registration?.status?.description||r.registration?.status,latitude:r.address.coordinates?.latitude||r.latitude,longitude:r.address.coordinates?.longitude||r.longitude}}catch(n){return console.error("Erro na consulta CNPJa Comercial:",n),LW(e)}},OW=async t=>{if(Dv()==="SUA_CHAVE_AQUI")return console.warn("Chave de API CNPJa no configurada."),[];try{const n=new URLSearchParams({q:t.filtros,...t.uf&&{state:t.uf},limit:"10"}),r=await fetch(`${Bk}/office?${n}`,{headers:{Authorization:Dv()}});return r.ok?(await r.json()).items||[]:[]}catch(n){return console.error("Erro na pesquisa por endereo:",n),[]}},LW=async t=>{try{const e=await fetch(`https://brasilapi.com.br/api/cnpj/v1/${t}`);if(!e.ok)return null;const n=await e.json();return{cnpj:n.cnpj,razao_social:n.razao_social,nome_fantasia:n.nome_fantasia,logradouro:n.logradouro,numero:n.numero,complemento:n.complemento,bairro:n.bairro,cep:n.cep,municipio:n.municipio,uf:n.uf,ddd_telefone_1:n.ddd_telefone_1,cnae_fiscal:n.cnae_fiscal?`${n.cnae_fiscal} - ${n.cnae_fiscal_descricao}`:n.cnae_fiscal_descricao,cnae_descricao:n.cnae_fiscal_descricao,cnaes_secundarios:n.cnaes_secundarios?.map(r=>({codigo:r.codigo,texto:r.descricao}))}}catch{return null}};class UW{value;next;constructor(e){this.value=e}}class VW{#e;#t;#n;constructor(){this.clear()}enqueue(e){const n=new UW(e);this.#e?(this.#t.next=n,this.#t=n):(this.#e=n,this.#t=n),this.#n++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#n--,this.#e||(this.#t=void 0),e.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#n=0}get size(){return this.#n}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}*drain(){for(;this.#e;)yield this.dequeue()}}function zk(t){let e=!1;if(typeof t=="object"&&({concurrency:t,rejectOnClear:e=!1}=t),BA(t),typeof e!="boolean")throw new TypeError("Expected `rejectOnClear` to be a boolean");const n=new VW;let r=0;const s=()=>{r<t&&n.size>0&&(r++,n.dequeue().run())},a=()=>{r--,s()},o=async(d,h,x)=>{const v=(async()=>d(...x))();h(v);try{await v}catch{}a()},c=(d,h,x,v)=>{const T={reject:x};new Promise(S=>{T.run=S,n.enqueue(T)}).then(o.bind(void 0,d,h,v)),r<t&&s()},u=(d,...h)=>new Promise((x,v)=>{c(d,x,v,h)});return Object.defineProperties(u,{activeCount:{get:()=>r},pendingCount:{get:()=>n.size},clearQueue:{value(){if(!e){n.clear();return}const d=AbortSignal.abort().reason;for(;n.size>0;)n.dequeue().reject(d)}},concurrency:{get:()=>t,set(d){BA(d),t=d,queueMicrotask(()=>{for(;r<t&&n.size>0;)s()})}},map:{async value(d,h){const x=Array.from(d,(v,T)=>this(h,v,T));return Promise.all(x)}}}),u}function BA(t){if(!((Number.isInteger(t)||t===Number.POSITIVE_INFINITY)&&t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}var jk={};const Mv=t=>new Promise(e=>setTimeout(e,t)),BW=t=>{const e=t.replace(/\D/g,"");if(e.length<5)return"Indefinido";const n=parseInt(e.substring(0,1)),r=parseInt(e.substring(0,2));return n===0||n===1||n===2||n===3?"Sudeste":n===8||n===9?"Sul":n===4||n===5?"Nordeste":n===6?r>=60&&r<=65?"Nordeste":"Norte":n===7?r===77||r===76?"Norte":"Centro-Oeste":"Indefinido"},Hk=t=>{const e=["MA","PI","CE","RN","PB","PE","AL","SE","BA"],n=["AC","AP","AM","PA","RO","RR","TO"],r=["GO","MT","MS","DF"],s=["ES","MG","RJ","SP"],a=["PR","SC","RS"],o=t.toUpperCase().trim();return e.includes(o)?"Nordeste":n.includes(o)?"Norte":r.includes(o)?"Centro-Oeste":s.includes(o)?"Sudeste":a.includes(o)?"Sul":"Indefinido"},zW=t=>{let e="Desconhecido",n="BR",r="Indefinido";if(Array.isArray(t)){const s=t.find(o=>o.types.includes("administrative_area_level_1"));s&&(n=s.short_name);const a=t.find(o=>o.types.includes("administrative_area_level_2")||o.types.includes("locality"));a&&(e=a.long_name),r=Hk(n)}return{city:e,state:n,region:r}},jW=async(t,e,n,r,s,a)=>{const o=new Uk({apiKey:n||jk.API_KEY}),c=zk(3),u=t.length;let d=0;const h=s.map(S=>`"${S}"`).join(" | "),x=async(S,A)=>{if(!S)return d++,a&&a(d,u),null;const b=`${e}-${Date.now()}-${A}`;let R=null;if(S.cnpj&&S.cnpj.replace(/\D/g,"").length===14)try{R=await rm(S.cnpj)}catch(ie){console.warn(`CNPJ enrichment failed for ${S.cnpj}`,ie)}let B=S.address||"";!B&&(S.street||S.city)&&(B=[S.street,S.number,S.district,S.city,S.state,S.zip,S.country].filter(Boolean).join(", ")),R?.logradouro&&(B=`${R.logradouro}, ${R.numero}${R.complemento?` - ${R.complemento}`:""}, ${R.bairro}, ${R.municipio} - ${R.uf}`);const D=lN(B),L=R?.nome_fantasia||R?.razao_social||S.companyName||"Empresa Desconhecida",z=S.ownerName||"",O=R?.ddd_telefone_1||S.phone||"",I=D.match(/\d{5}[-]?\d{3}/),C=R?.cep||(I?I[0]:"");if(!D&&L==="Empresa Desconhecida")return d++,a&&a(d,u),null;const N=`
      Atue como especialista em logstica e anlise de dados.
      
      TAREFA: 
      1. Pesquise no Google Maps a empresa "${L}" localizada EXATAMENTE em "${D}".
      2. Se no encontrar exatamente nesse local, procure nos arredores imediatos.
      3. Obtenha a localizao exata (latitude/longitude), o endereo formatado oficial, telefone oficial, website e o link do Maps.
      4. Classifique a empresa em uma destas opes: ${h} | "Outros".

      IMPORTANTE: Use o endereo "${D}" como ncora principal para a busca.
      ${R?`DADO ADICIONAL: O CNPJ da empresa  ${R.cnpj}.`:""}
      ${S.city?`DADO LOCALIDADE: Cidade: ${S.city}${S.state?`, Estado: ${S.state}`:""}`:""}

      Retorne APENAS um objeto JSON vlido com os dados encontrados:
      {
        "category": "Categoria Selecionada",
        "region": "Norte" | "Nordeste" | "Centro-Oeste" | "Sudeste" | "Sul" | "Indefinido",
        "state": "UF (Sigla)",
        "city": "Nome da Cidade",
        "lat": number,
        "lng": number,
        "cleanAddress": "Endereo completo oficial encontrado",
        "phone": "Telefone encontrado ou null",
        "website": "Website encontrado ou null"
      }
    `;let F=0;const U=5;let M=null,j=!1,he={},Se="";for(;!j&&F<=U;)try{const ie=await o.models.generateContent({model:"gemini-2.5-flash",contents:N,config:{tools:[{googleMaps:{}}]}});let fe=ie.text||"{}";fe=fe.replace(/```json/g,"").replace(/```/g,"").trim();try{he=JSON.parse(fe)}catch{const Ie=fe.match(/\{[\s\S]*\}/);if(Ie)try{he=JSON.parse(Ie[0])}catch{}}const ce=ie.candidates?.[0]?.groundingMetadata?.groundingChunks;if(ce&&Array.isArray(ce)){const K=ce.find(Ie=>Ie.maps?.uri);K&&(Se=K.maps.uri)}j=!0}catch(ie){const fe=ie.status===429||ie.code===429||ie.message&&(ie.message.includes("quota")||ie.message.includes("429")),ce=ie.status===503||ie.code===503;if((fe||ce)&&F<U){F++;const K=2e3*Math.pow(2,F);console.warn(`Retry ${F}/${U} for client ${A}`),await Mv(K)}else{console.error(`Failed to process client with AI ${A} (continuing to manual geocode)`,ie);break}}try{let ie=R?.latitude||S.latitude||(typeof he.lat=="number"?he.lat:0),fe=R?.longitude||S.longitude||(typeof he.lng=="number"?he.lng:0),ce=R?.logradouro?`${R.logradouro}, ${R.numero}, ${R.municipio} - ${R.uf}`:he.cleanAddress||D,K=R?.municipio||he.city||"Desconhecido",Ie=R?.uf||he.state||"BR",Y=(R?.uf?Hk(R.uf):null)||he.region||"Indefinido";const H=ie!==0&&fe!==0;if(!H||K==="Desconhecido"||Ie==="BR"){const le=B||ce;if(le&&le.length>5&&r)try{const ge=await Vk(le,r);if(ge){if(H||(ie=ge.lat,fe=ge.lng),ge.addressComponents){const Ne=zW(ge.addressComponents);K=Ne.city,Ie=Ne.state,Y=Ne.region}(!Y||Y==="Indefinido")&&C&&(Y=BW(C)),ge.formattedAddress&&(ce=ge.formattedAddress)}}catch(ge){console.warn(`Geocoding failed for ${L}`,ge)}}const te=le=>Array.isArray(le)?le:typeof le=="string"?[le]:["Outros"];let W=O;he.phone&&(W=W?`${W} | Maps: ${he.phone}`:he.phone),he.website&&(W=W?`${W} | Site: ${he.website}`:`Site: ${he.website}`),M={id:b,salespersonId:e,companyName:L,ownerName:z,contact:W,originalAddress:B,cleanAddress:ce,cnpj:R?.cnpj||S.cnpj,mainCnae:R?.cnae_fiscal,secondaryCnaes:R?.cnaes_secundarios?.map(le=>`${le.codigo} - ${le.texto}`),category:te(he.category),region:Y,state:Ie,city:K,lat:ie,lng:fe,whatsapp:S.whatsapp||he.phone||"",plusCode:he.plusCode||"",googleMapsUri:S.googleMapsLink||Se}}catch(ie){console.error("Critical error in client finalization",ie),M={id:b,salespersonId:e,companyName:L,ownerName:z,contact:O,originalAddress:B,cleanAddress:B,category:["Outros"],region:"Indefinido",state:"BR",city:"Erro Critico",lat:S.latitude||0,lng:S.longitude||0,whatsapp:S.whatsapp||"",googleMapsUri:S.googleMapsLink}}return d++,a&&a(d,u),await Mv(500),M},v=t.map((S,A)=>c(()=>x(S,A)));return(await Promise.all(v)).filter(S=>S!==null)},HW=async(t,e,n)=>{const r=new Uk({apiKey:e||jk.API_KEY}),s=10,a=t.length;let o=0;const c=[...t];for(let u=0;u<a;u+=s){const d=t.slice(u,u+s),x=`
      Atue como um especialista em categorizao de produtos de varejo.
      Analise a lista de produtos abaixo e atribua uma Categoria Curta e Padronizada para cada um (Ex: Eltrica, Hidrulica, Ferramentas, Pintura, Automotivo, Utilidades, etc).
      Se a marca for muito especfica (ex: TIGRE, TRAMONTINA), voc pode usar a marca como subcategoria se fizer sentido, mas prefira a categoria funcional.
      
      Lista de Produtos:
      ${d.map(v=>`- ID: ${v.sku} | Nome: ${v.name} | Marca: ${v.brand}`).join(`
`)}
      
      Retorne APENAS um JSON no formato de lista:
      [
        { "sku": "ID do produto", "category": "Categoria Sugerida" }
      ]
    `;try{let T=(await r.models.generateContent({model:"gemini-2.5-flash",contents:x})).text||"[]";T=T.replace(/```json/g,"").replace(/```/g,"").trim();let S=[];try{S=JSON.parse(T)}catch{console.error("Failed to parse AI response",T);const b=T.match(/\[.*\]/s);if(b)try{S=JSON.parse(b[0])}catch{}}Array.isArray(S)&&S.forEach(A=>{const b=c.findIndex(R=>String(R.sku)===String(A.sku));b!==-1&&(c[b]={...c[b],category:A.category})})}catch(v){console.error("Batch classification failed",v)}o+=d.length,n&&n(o,a),await Mv(1e3)}return c},GW=()=>{};var zA={};const Gk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},$W=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},$k={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,x=(a&3)<<4|c>>4;let v=(c&15)<<2|d>>6,T=d&63;u||(T=64,o||(v=64)),r.push(n[h],n[x],n[v],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$W(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const x=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||d==null||x==null)throw new qW;const v=a<<2|c>>4;if(r.push(v),d!==64){const T=c<<4&240|d>>2;if(r.push(T),x!==64){const S=d<<6&192|x;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KW=function(t){const e=Gk(t);return $k.encodeByteArray(e,!0)},Cp=function(t){return KW(t).replace(/\./g,"")},JW=function(t){try{return $k.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const WW=()=>YW().__FIREBASE_DEFAULTS__,ZW=()=>{if(typeof process>"u"||typeof zA>"u")return;const t=zA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XW=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&JW(t[1]);return e&&JSON.parse(e)},cy=()=>{try{return GW()||WW()||ZW()||XW()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QW=t=>cy()?.emulatorHosts?.[t],eZ=t=>{const e=QW(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qk=()=>cy()?.config;class tZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Bd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kk(t){return(await fetch(t,{credentials:"include"})).ok}function nZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Cp(JSON.stringify(n)),Cp(JSON.stringify(o)),""].join(".")}const Zf={};function rZ(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zf))Zf[e]?t.emulator.push(e):t.prod.push(e);return t}function sZ(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jA=!1;function aZ(t,e){if(typeof window>"u"||typeof document>"u"||!Bd(window.location.host)||Zf[t]===e||Zf[t]||jA)return;Zf[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=rZ().prod.length>0;function o(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function u(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{jA=!0,o()},v}function h(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function x(){const v=sZ(r),T=n("text"),S=document.getElementById(T)||document.createElement("span"),A=n("learnmore"),b=document.getElementById(A)||document.createElement("a"),R=n("preprendIcon"),B=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const D=v.element;c(D),h(b,A);const L=d();u(B,R),D.append(B,S,b,L),document.body.appendChild(D)}a?(S.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function iZ(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oZ(){const t=cy()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lZ(){return!oZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cZ(){try{return typeof indexedDB=="object"}catch{return!1}}function uZ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const fZ="FirebaseError";class Wl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fZ,Object.setPrototypeOf(this,Wl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jk.prototype.create)}}class Jk{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?dZ(a,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Wl(s,c,r)}}function dZ(t,e){return t.replace(hZ,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hZ=/\{\$([^}]+)}/g;function Np(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(HA(a)&&HA(o)){if(!Np(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function HA(t){return t!==null&&typeof t=="object"}function Vo(t){return t&&t._delegate?t._delegate:t}class uu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tl="[DEFAULT]";class pZ{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tZ;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gZ(e))try{this.getOrInitializeService({instanceIdentifier:Tl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tl){return this.instances.has(e)}getOptions(e=Tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mZ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tl){return this.component?this.component.multipleInstances?e:Tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mZ(t){return t===Tl?void 0:t}function gZ(t){return t.instantiationMode==="EAGER"}class xZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pZ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qt||(Qt={}));const vZ={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},yZ=Qt.INFO,_Z={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},EZ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=_Z[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yk{constructor(e){this.name=e,this._logLevel=yZ,this._logHandler=EZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const TZ=(t,e)=>e.some(n=>t instanceof n);let GA,$A;function wZ(){return GA||(GA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SZ(){return $A||($A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wk=new WeakMap,Pv=new WeakMap,Zk=new WeakMap,Dx=new WeakMap,uy=new WeakMap;function AZ(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Do(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wk.set(n,t)}).catch(()=>{}),uy.set(e,t),e}function bZ(t){if(Pv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Pv.set(t,e)}let Fv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Do(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CZ(t){Fv=t(Fv)}function NZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mx(this),e,...n);return Zk.set(r,e.sort?e.sort():[e]),Do(r)}:SZ().includes(t)?function(...e){return t.apply(Mx(this),e),Do(Wk.get(this))}:function(...e){return Do(t.apply(Mx(this),e))}}function IZ(t){return typeof t=="function"?NZ(t):(t instanceof IDBTransaction&&bZ(t),TZ(t,wZ())?new Proxy(t,Fv):t)}function Do(t){if(t instanceof IDBRequest)return AZ(t);if(Dx.has(t))return Dx.get(t);const e=IZ(t);return e!==t&&(Dx.set(t,e),uy.set(e,t)),e}const Mx=t=>uy.get(t);function kZ(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),c=Do(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Do(o.result),u.oldVersion,u.newVersion,Do(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const RZ=["get","getKey","getAll","getAllKeys","count"],DZ=["put","add","delete","clear"],Px=new Map;function qA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Px.get(e))return Px.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=DZ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||RZ.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Px.set(e,a),a}CZ(t=>({...t,get:(e,n,r)=>qA(e,n)||t.get(e,n,r),has:(e,n)=>!!qA(e,n)||t.has(e,n)}));class MZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PZ(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PZ(t){return t.getComponent()?.type==="VERSION"}const Ov="@firebase/app",KA="0.14.8";const Vi=new Yk("@firebase/app"),FZ="@firebase/app-compat",OZ="@firebase/analytics-compat",LZ="@firebase/analytics",UZ="@firebase/app-check-compat",VZ="@firebase/app-check",BZ="@firebase/auth",zZ="@firebase/auth-compat",jZ="@firebase/database",HZ="@firebase/data-connect",GZ="@firebase/database-compat",$Z="@firebase/functions",qZ="@firebase/functions-compat",KZ="@firebase/installations",JZ="@firebase/installations-compat",YZ="@firebase/messaging",WZ="@firebase/messaging-compat",ZZ="@firebase/performance",XZ="@firebase/performance-compat",QZ="@firebase/remote-config",eX="@firebase/remote-config-compat",tX="@firebase/storage",nX="@firebase/storage-compat",rX="@firebase/firestore",sX="@firebase/ai",aX="@firebase/firestore-compat",iX="firebase",oX="12.9.0";const Lv="[DEFAULT]",lX={[Ov]:"fire-core",[FZ]:"fire-core-compat",[LZ]:"fire-analytics",[OZ]:"fire-analytics-compat",[VZ]:"fire-app-check",[UZ]:"fire-app-check-compat",[BZ]:"fire-auth",[zZ]:"fire-auth-compat",[jZ]:"fire-rtdb",[HZ]:"fire-data-connect",[GZ]:"fire-rtdb-compat",[$Z]:"fire-fn",[qZ]:"fire-fn-compat",[KZ]:"fire-iid",[JZ]:"fire-iid-compat",[YZ]:"fire-fcm",[WZ]:"fire-fcm-compat",[ZZ]:"fire-perf",[XZ]:"fire-perf-compat",[QZ]:"fire-rc",[eX]:"fire-rc-compat",[tX]:"fire-gcs",[nX]:"fire-gcs-compat",[rX]:"fire-fst",[aX]:"fire-fst-compat",[sX]:"fire-vertex","fire-js":"fire-js",[iX]:"fire-js-all"};const Ed=new Map,cX=new Map,Uv=new Map;function JA(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Td(t){const e=t.name;if(Uv.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;Uv.set(e,t);for(const n of Ed.values())JA(n,t);for(const n of cX.values())JA(n,t);return!0}function Xk(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qk(t){return t==null?!1:t.settings!==void 0}const uX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mo=new Jk("app","Firebase",uX);class fX{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mo.create("app-deleted",{appName:this._name})}}const eR=oX;function tR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Lv,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Mo.create("bad-app-name",{appName:String(s)});if(n||(n=qk()),!n)throw Mo.create("no-options");const a=Ed.get(s);if(a){if(Np(n,a.options)&&Np(r,a.config))return a;throw Mo.create("duplicate-app",{appName:s})}const o=new xZ(s);for(const u of Uv.values())o.addComponent(u);const c=new fX(n,r,o);return Ed.set(s,c),c}function nR(t=Lv){const e=Ed.get(t);if(!e&&t===Lv&&qk())return tR();if(!e)throw Mo.create("no-app",{appName:t});return e}function dX(){return Array.from(Ed.values())}function Po(t,e,n){let r=lX[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(o.join(" "));return}Td(new uu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const hX="firebase-heartbeat-database",pX=1,wd="firebase-heartbeat-store";let Fx=null;function rR(){return Fx||(Fx=kZ(hX,pX,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mo.create("idb-open",{originalErrorMessage:t.message})})),Fx}async function mX(t){try{const n=(await rR()).transaction(wd),r=await n.objectStore(wd).get(sR(t));return await n.done,r}catch(e){if(e instanceof Wl)Vi.warn(e.message);else{const n=Mo.create("idb-get",{originalErrorMessage:e?.message});Vi.warn(n.message)}}}async function YA(t,e){try{const r=(await rR()).transaction(wd,"readwrite");await r.objectStore(wd).put(e,sR(t)),await r.done}catch(n){if(n instanceof Wl)Vi.warn(n.message);else{const r=Mo.create("idb-set",{originalErrorMessage:n?.message});Vi.warn(r.message)}}}function sR(t){return`${t.name}!${t.options.appId}`}const gX=1024,xX=30;class vX{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _X(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=WA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>xX){const s=EX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=WA(),{heartbeatsToSend:n,unsentEntries:r}=yX(this._heartbeatsCache.heartbeats),s=Cp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Vi.warn(e),""}}}function WA(){return new Date().toISOString().substring(0,10)}function yX(t,e=gX){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),ZA(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ZA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _X{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cZ()?uZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mX(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return YA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return YA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ZA(t){return Cp(JSON.stringify({version:2,heartbeats:t})).length}function EX(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function TX(t){Td(new uu("platform-logger",e=>new MZ(e),"PRIVATE")),Td(new uu("heartbeat",e=>new vX(e),"PRIVATE")),Po(Ov,KA,t),Po(Ov,KA,"esm2020"),Po("fire-js","")}TX("");var wX="firebase",SX="12.9.0";Po(wX,SX,"app");var XA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Fo,aR;(function(){var t;function e(I,C){function N(){}N.prototype=C.prototype,I.F=C.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(F,U,M){for(var j=Array(arguments.length-2),he=2;he<arguments.length;he++)j[he-2]=arguments[he];return C.prototype[U].apply(F,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,C,N){N||(N=0);const F=Array(16);if(typeof C=="string")for(var U=0;U<16;++U)F[U]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(U=0;U<16;++U)F[U]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=I.g[0],N=I.g[1],U=I.g[2];let M=I.g[3],j;j=C+(M^N&(U^M))+F[0]+3614090360&4294967295,C=N+(j<<7&4294967295|j>>>25),j=M+(U^C&(N^U))+F[1]+3905402710&4294967295,M=C+(j<<12&4294967295|j>>>20),j=U+(N^M&(C^N))+F[2]+606105819&4294967295,U=M+(j<<17&4294967295|j>>>15),j=N+(C^U&(M^C))+F[3]+3250441966&4294967295,N=U+(j<<22&4294967295|j>>>10),j=C+(M^N&(U^M))+F[4]+4118548399&4294967295,C=N+(j<<7&4294967295|j>>>25),j=M+(U^C&(N^U))+F[5]+1200080426&4294967295,M=C+(j<<12&4294967295|j>>>20),j=U+(N^M&(C^N))+F[6]+2821735955&4294967295,U=M+(j<<17&4294967295|j>>>15),j=N+(C^U&(M^C))+F[7]+4249261313&4294967295,N=U+(j<<22&4294967295|j>>>10),j=C+(M^N&(U^M))+F[8]+1770035416&4294967295,C=N+(j<<7&4294967295|j>>>25),j=M+(U^C&(N^U))+F[9]+2336552879&4294967295,M=C+(j<<12&4294967295|j>>>20),j=U+(N^M&(C^N))+F[10]+4294925233&4294967295,U=M+(j<<17&4294967295|j>>>15),j=N+(C^U&(M^C))+F[11]+2304563134&4294967295,N=U+(j<<22&4294967295|j>>>10),j=C+(M^N&(U^M))+F[12]+1804603682&4294967295,C=N+(j<<7&4294967295|j>>>25),j=M+(U^C&(N^U))+F[13]+4254626195&4294967295,M=C+(j<<12&4294967295|j>>>20),j=U+(N^M&(C^N))+F[14]+2792965006&4294967295,U=M+(j<<17&4294967295|j>>>15),j=N+(C^U&(M^C))+F[15]+1236535329&4294967295,N=U+(j<<22&4294967295|j>>>10),j=C+(U^M&(N^U))+F[1]+4129170786&4294967295,C=N+(j<<5&4294967295|j>>>27),j=M+(N^U&(C^N))+F[6]+3225465664&4294967295,M=C+(j<<9&4294967295|j>>>23),j=U+(C^N&(M^C))+F[11]+643717713&4294967295,U=M+(j<<14&4294967295|j>>>18),j=N+(M^C&(U^M))+F[0]+3921069994&4294967295,N=U+(j<<20&4294967295|j>>>12),j=C+(U^M&(N^U))+F[5]+3593408605&4294967295,C=N+(j<<5&4294967295|j>>>27),j=M+(N^U&(C^N))+F[10]+38016083&4294967295,M=C+(j<<9&4294967295|j>>>23),j=U+(C^N&(M^C))+F[15]+3634488961&4294967295,U=M+(j<<14&4294967295|j>>>18),j=N+(M^C&(U^M))+F[4]+3889429448&4294967295,N=U+(j<<20&4294967295|j>>>12),j=C+(U^M&(N^U))+F[9]+568446438&4294967295,C=N+(j<<5&4294967295|j>>>27),j=M+(N^U&(C^N))+F[14]+3275163606&4294967295,M=C+(j<<9&4294967295|j>>>23),j=U+(C^N&(M^C))+F[3]+4107603335&4294967295,U=M+(j<<14&4294967295|j>>>18),j=N+(M^C&(U^M))+F[8]+1163531501&4294967295,N=U+(j<<20&4294967295|j>>>12),j=C+(U^M&(N^U))+F[13]+2850285829&4294967295,C=N+(j<<5&4294967295|j>>>27),j=M+(N^U&(C^N))+F[2]+4243563512&4294967295,M=C+(j<<9&4294967295|j>>>23),j=U+(C^N&(M^C))+F[7]+1735328473&4294967295,U=M+(j<<14&4294967295|j>>>18),j=N+(M^C&(U^M))+F[12]+2368359562&4294967295,N=U+(j<<20&4294967295|j>>>12),j=C+(N^U^M)+F[5]+4294588738&4294967295,C=N+(j<<4&4294967295|j>>>28),j=M+(C^N^U)+F[8]+2272392833&4294967295,M=C+(j<<11&4294967295|j>>>21),j=U+(M^C^N)+F[11]+1839030562&4294967295,U=M+(j<<16&4294967295|j>>>16),j=N+(U^M^C)+F[14]+4259657740&4294967295,N=U+(j<<23&4294967295|j>>>9),j=C+(N^U^M)+F[1]+2763975236&4294967295,C=N+(j<<4&4294967295|j>>>28),j=M+(C^N^U)+F[4]+1272893353&4294967295,M=C+(j<<11&4294967295|j>>>21),j=U+(M^C^N)+F[7]+4139469664&4294967295,U=M+(j<<16&4294967295|j>>>16),j=N+(U^M^C)+F[10]+3200236656&4294967295,N=U+(j<<23&4294967295|j>>>9),j=C+(N^U^M)+F[13]+681279174&4294967295,C=N+(j<<4&4294967295|j>>>28),j=M+(C^N^U)+F[0]+3936430074&4294967295,M=C+(j<<11&4294967295|j>>>21),j=U+(M^C^N)+F[3]+3572445317&4294967295,U=M+(j<<16&4294967295|j>>>16),j=N+(U^M^C)+F[6]+76029189&4294967295,N=U+(j<<23&4294967295|j>>>9),j=C+(N^U^M)+F[9]+3654602809&4294967295,C=N+(j<<4&4294967295|j>>>28),j=M+(C^N^U)+F[12]+3873151461&4294967295,M=C+(j<<11&4294967295|j>>>21),j=U+(M^C^N)+F[15]+530742520&4294967295,U=M+(j<<16&4294967295|j>>>16),j=N+(U^M^C)+F[2]+3299628645&4294967295,N=U+(j<<23&4294967295|j>>>9),j=C+(U^(N|~M))+F[0]+4096336452&4294967295,C=N+(j<<6&4294967295|j>>>26),j=M+(N^(C|~U))+F[7]+1126891415&4294967295,M=C+(j<<10&4294967295|j>>>22),j=U+(C^(M|~N))+F[14]+2878612391&4294967295,U=M+(j<<15&4294967295|j>>>17),j=N+(M^(U|~C))+F[5]+4237533241&4294967295,N=U+(j<<21&4294967295|j>>>11),j=C+(U^(N|~M))+F[12]+1700485571&4294967295,C=N+(j<<6&4294967295|j>>>26),j=M+(N^(C|~U))+F[3]+2399980690&4294967295,M=C+(j<<10&4294967295|j>>>22),j=U+(C^(M|~N))+F[10]+4293915773&4294967295,U=M+(j<<15&4294967295|j>>>17),j=N+(M^(U|~C))+F[1]+2240044497&4294967295,N=U+(j<<21&4294967295|j>>>11),j=C+(U^(N|~M))+F[8]+1873313359&4294967295,C=N+(j<<6&4294967295|j>>>26),j=M+(N^(C|~U))+F[15]+4264355552&4294967295,M=C+(j<<10&4294967295|j>>>22),j=U+(C^(M|~N))+F[6]+2734768916&4294967295,U=M+(j<<15&4294967295|j>>>17),j=N+(M^(U|~C))+F[13]+1309151649&4294967295,N=U+(j<<21&4294967295|j>>>11),j=C+(U^(N|~M))+F[4]+4149444226&4294967295,C=N+(j<<6&4294967295|j>>>26),j=M+(N^(C|~U))+F[11]+3174756917&4294967295,M=C+(j<<10&4294967295|j>>>22),j=U+(C^(M|~N))+F[2]+718787259&4294967295,U=M+(j<<15&4294967295|j>>>17),j=N+(M^(U|~C))+F[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(U+(j<<21&4294967295|j>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+M&4294967295}r.prototype.v=function(I,C){C===void 0&&(C=I.length);const N=C-this.blockSize,F=this.C;let U=this.h,M=0;for(;M<C;){if(U==0)for(;M<=N;)s(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<C;)if(F[U++]=I.charCodeAt(M++),U==this.blockSize){s(this,F),U=0;break}}else for(;M<C;)if(F[U++]=I[M++],U==this.blockSize){s(this,F),U=0;break}}this.h=U,this.o+=C},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,N=0;N<4;++N)for(let F=0;F<32;F+=8)I[C++]=this.g[N]>>>F&255;return I};function a(I,C){var N=c;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=C(I)}function o(I,C){this.h=C;const N=[];let F=!0;for(let U=I.length-1;U>=0;U--){const M=I[U]|0;F&&M==C||(N[U]=M,F=!1)}this.g=N}var c={};function u(I){return-128<=I&&I<128?a(I,function(C){return new o([C|0],C<0?-1:0)}):new o([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return x;if(I<0)return b(d(-I));const C=[];let N=1;for(let F=0;I>=N;F++)C[F]=I/N|0,N*=4294967296;return new o(C,0)}function h(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return b(h(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(C,8));let F=x;for(let M=0;M<I.length;M+=8){var U=Math.min(8,I.length-M);const j=parseInt(I.substring(M,M+U),C);U<8?(U=d(Math.pow(C,U)),F=F.j(U).add(d(j))):(F=F.j(N),F=F.add(d(j)))}return F}var x=u(0),v=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-b(this).m();let I=0,C=1;for(let N=0;N<this.g.length;N++){const F=this.i(N);I+=(F>=0?F:4294967296+F)*C,C*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(A(this))return"-"+b(this).toString(I);const C=d(Math.pow(I,6));var N=this;let F="";for(;;){const U=L(N,C).g;N=R(N,U.j(C));let M=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=U,S(N))return M+F;for(;M.length<6;)M="0"+M;F=M+F}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function A(I){return I.h==-1}t.l=function(I){return I=R(this,I),A(I)?-1:S(I)?0:1};function b(I){const C=I.g.length,N=[];for(let F=0;F<C;F++)N[F]=~I.g[F];return new o(N,~I.h).add(v)}t.abs=function(){return A(this)?b(this):this},t.add=function(I){const C=Math.max(this.g.length,I.g.length),N=[];let F=0;for(let U=0;U<=C;U++){let M=F+(this.i(U)&65535)+(I.i(U)&65535),j=(M>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);F=j>>>16,M&=65535,j&=65535,N[U]=j<<16|M}return new o(N,N[N.length-1]&-2147483648?-1:0)};function R(I,C){return I.add(b(C))}t.j=function(I){if(S(this)||S(I))return x;if(A(this))return A(I)?b(this).j(b(I)):b(b(this).j(I));if(A(I))return b(this.j(b(I)));if(this.l(T)<0&&I.l(T)<0)return d(this.m()*I.m());const C=this.g.length+I.g.length,N=[];for(var F=0;F<2*C;F++)N[F]=0;for(F=0;F<this.g.length;F++)for(let U=0;U<I.g.length;U++){const M=this.i(F)>>>16,j=this.i(F)&65535,he=I.i(U)>>>16,Se=I.i(U)&65535;N[2*F+2*U]+=j*Se,B(N,2*F+2*U),N[2*F+2*U+1]+=M*Se,B(N,2*F+2*U+1),N[2*F+2*U+1]+=j*he,B(N,2*F+2*U+1),N[2*F+2*U+2]+=M*he,B(N,2*F+2*U+2)}for(I=0;I<C;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=C;I<2*C;I++)N[I]=0;return new o(N,0)};function B(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function D(I,C){this.g=I,this.h=C}function L(I,C){if(S(C))throw Error("division by zero");if(S(I))return new D(x,x);if(A(I))return C=L(b(I),C),new D(b(C.g),b(C.h));if(A(C))return C=L(I,b(C)),new D(b(C.g),C.h);if(I.g.length>30){if(A(I)||A(C))throw Error("slowDivide_ only works with positive integers.");for(var N=v,F=C;F.l(I)<=0;)N=z(N),F=z(F);var U=O(N,1),M=O(F,1);for(F=O(F,2),N=O(N,2);!S(F);){var j=M.add(F);j.l(I)<=0&&(U=U.add(N),M=j),F=O(F,1),N=O(N,1)}return C=R(I,U.j(C)),new D(U,C)}for(U=x;I.l(C)>=0;){for(N=Math.max(1,Math.floor(I.m()/C.m())),F=Math.ceil(Math.log(N)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),M=d(N),j=M.j(C);A(j)||j.l(I)>0;)N-=F,M=d(N),j=M.j(C);S(M)&&(M=v),U=U.add(M),I=R(I,j)}return new D(U,I)}t.B=function(I){return L(this,I).h},t.and=function(I){const C=Math.max(this.g.length,I.g.length),N=[];for(let F=0;F<C;F++)N[F]=this.i(F)&I.i(F);return new o(N,this.h&I.h)},t.or=function(I){const C=Math.max(this.g.length,I.g.length),N=[];for(let F=0;F<C;F++)N[F]=this.i(F)|I.i(F);return new o(N,this.h|I.h)},t.xor=function(I){const C=Math.max(this.g.length,I.g.length),N=[];for(let F=0;F<C;F++)N[F]=this.i(F)^I.i(F);return new o(N,this.h^I.h)};function z(I){const C=I.g.length+1,N=[];for(let F=0;F<C;F++)N[F]=I.i(F)<<1|I.i(F-1)>>>31;return new o(N,I.h)}function O(I,C){const N=C>>5;C%=32;const F=I.g.length-N,U=[];for(let M=0;M<F;M++)U[M]=C>0?I.i(M+N)>>>C|I.i(M+N+1)<<32-C:I.i(M+N);return new o(U,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,aR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Fo=o}).apply(typeof XA<"u"?XA:typeof self<"u"?self:typeof window<"u"?window:{});var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var iR,Lf,oR,B0,Vv,lR,cR,uR;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof A0=="object"&&A0];for(var k=0;k<_.length;++k){var V=_[k];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function s(_,k){if(k)e:{var V=r;_=_.split(".");for(var Z=0;Z<_.length-1;Z++){var me=_[Z];if(!(me in V))break e;V=V[me]}_=_[_.length-1],Z=V[_],k=k(Z),k!=Z&&k!=null&&e(V,_,{configurable:!0,writable:!0,value:k})}}s("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(_){return _||function(k){var V=[],Z;for(Z in k)Object.prototype.hasOwnProperty.call(k,Z)&&V.push([Z,k[Z]]);return V}});var a=a||{},o=this||self;function c(_){var k=typeof _;return k=="object"&&_!=null||k=="function"}function u(_,k,V){return _.call.apply(_.bind,arguments)}function d(_,k,V){return d=u,d.apply(null,arguments)}function h(_,k){var V=Array.prototype.slice.call(arguments,1);return function(){var Z=V.slice();return Z.push.apply(Z,arguments),_.apply(this,Z)}}function x(_,k){function V(){}V.prototype=k.prototype,_.Z=k.prototype,_.prototype=new V,_.prototype.constructor=_,_.Ob=function(Z,me,Ae){for(var Ke=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)Ke[kt-2]=arguments[kt];return k.prototype[me].apply(Z,Ke)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function T(_){const k=_.length;if(k>0){const V=Array(k);for(let Z=0;Z<k;Z++)V[Z]=_[Z];return V}return[]}function S(_,k){for(let Z=1;Z<arguments.length;Z++){const me=arguments[Z];var V=typeof me;if(V=V!="object"?V:me?Array.isArray(me)?"array":V:"null",V=="array"||V=="object"&&typeof me.length=="number"){V=_.length||0;const Ae=me.length||0;_.length=V+Ae;for(let Ke=0;Ke<Ae;Ke++)_[V+Ke]=me[Ke]}else _.push(me)}}class A{constructor(k,V){this.i=k,this.j=V,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function b(_){o.setTimeout(()=>{throw _},0)}function R(){var _=I;let k=null;return _.g&&(k=_.g,_.g=_.g.next,_.g||(_.h=null),k.next=null),k}class B{constructor(){this.h=this.g=null}add(k,V){const Z=D.get();Z.set(k,V),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var D=new A(()=>new L,_=>_.reset());class L{constructor(){this.next=this.g=this.h=null}set(k,V){this.h=k,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let z,O=!1,I=new B,C=()=>{const _=Promise.resolve(void 0);z=()=>{_.then(N)}};function N(){for(var _;_=R();){try{_.h.call(_.g)}catch(V){b(V)}var k=D;k.j(_),k.h<100&&(k.h++,_.next=k.g,k.g=_)}O=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(_,k){this.type=_,this.g=this.target=k,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var _=!1,k=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const V=()=>{};o.addEventListener("test",V,k),o.removeEventListener("test",V,k)}catch{}return _})();function j(_){return/^[\s\xa0]*$/.test(_)}function he(_,k){U.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,k)}x(he,U),he.prototype.init=function(_,k){const V=this.type=_.type,Z=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=k,k=_.relatedTarget,k||(V=="mouseover"?k=_.fromElement:V=="mouseout"&&(k=_.toElement)),this.relatedTarget=k,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),ie=0;function fe(_,k,V,Z,me){this.listener=_,this.proxy=null,this.src=k,this.type=V,this.capture=!!Z,this.ha=me,this.key=++ie,this.da=this.fa=!1}function ce(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function K(_,k,V){for(const Z in _)k.call(V,_[Z],Z,_)}function Ie(_,k){for(const V in _)k.call(void 0,_[V],V,_)}function Y(_){const k={};for(const V in _)k[V]=_[V];return k}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(_,k){let V,Z;for(let me=1;me<arguments.length;me++){Z=arguments[me];for(V in Z)_[V]=Z[V];for(let Ae=0;Ae<H.length;Ae++)V=H[Ae],Object.prototype.hasOwnProperty.call(Z,V)&&(_[V]=Z[V])}}function te(_){this.src=_,this.g={},this.h=0}te.prototype.add=function(_,k,V,Z,me){const Ae=_.toString();_=this.g[Ae],_||(_=this.g[Ae]=[],this.h++);const Ke=le(_,k,Z,me);return Ke>-1?(k=_[Ke],V||(k.fa=!1)):(k=new fe(k,this.src,Ae,!!Z,me),k.fa=V,_.push(k)),k};function W(_,k){const V=k.type;if(V in _.g){var Z=_.g[V],me=Array.prototype.indexOf.call(Z,k,void 0),Ae;(Ae=me>=0)&&Array.prototype.splice.call(Z,me,1),Ae&&(ce(k),_.g[V].length==0&&(delete _.g[V],_.h--))}}function le(_,k,V,Z){for(let me=0;me<_.length;++me){const Ae=_[me];if(!Ae.da&&Ae.listener==k&&Ae.capture==!!V&&Ae.ha==Z)return me}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Ne={};function be(_,k,V,Z,me){if(Array.isArray(k)){for(let Ae=0;Ae<k.length;Ae++)be(_,k[Ae],V,Z,me);return null}return V=st(V),_&&_[Se]?_.J(k,V,c(Z)?!!Z.capture:!1,me):ke(_,k,V,!1,Z,me)}function ke(_,k,V,Z,me,Ae){if(!k)throw Error("Invalid event type");const Ke=c(me)?!!me.capture:!!me;let kt=Ge(_);if(kt||(_[ge]=kt=new te(_)),V=kt.add(k,V,Z,Ke,Ae),V.proxy)return V;if(Z=$e(),V.proxy=Z,Z.src=_,Z.listener=V,_.addEventListener)M||(me=Ke),me===void 0&&(me=!1),_.addEventListener(k.toString(),Z,me);else if(_.attachEvent)_.attachEvent(Je(k.toString()),Z);else if(_.addListener&&_.removeListener)_.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return V}function $e(){function _(V){return k.call(_.src,_.listener,V)}const k=Qe;return _}function re(_,k,V,Z,me){if(Array.isArray(k))for(var Ae=0;Ae<k.length;Ae++)re(_,k[Ae],V,Z,me);else Z=c(Z)?!!Z.capture:!!Z,V=st(V),_&&_[Se]?(_=_.i,Ae=String(k).toString(),Ae in _.g&&(k=_.g[Ae],V=le(k,V,Z,me),V>-1&&(ce(k[V]),Array.prototype.splice.call(k,V,1),k.length==0&&(delete _.g[Ae],_.h--)))):_&&(_=Ge(_))&&(k=_.g[k.toString()],_=-1,k&&(_=le(k,V,Z,me)),(V=_>-1?k[_]:null)&&ft(V))}function ft(_){if(typeof _!="number"&&_&&!_.da){var k=_.src;if(k&&k[Se])W(k.i,_);else{var V=_.type,Z=_.proxy;k.removeEventListener?k.removeEventListener(V,Z,_.capture):k.detachEvent?k.detachEvent(Je(V),Z):k.addListener&&k.removeListener&&k.removeListener(Z),(V=Ge(k))?(W(V,_),V.h==0&&(V.src=null,k[ge]=null)):ce(_)}}}function Je(_){return _ in Ne?Ne[_]:Ne[_]="on"+_}function Qe(_,k){if(_.da)_=!0;else{k=new he(k,this);const V=_.listener,Z=_.ha||_.src;_.fa&&ft(_),_=V.call(Z,k)}return _}function Ge(_){return _=_[ge],_ instanceof te?_:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function st(_){return typeof _=="function"?_:(_[Ve]||(_[Ve]=function(k){return _.handleEvent(k)}),_[Ve])}function it(){F.call(this),this.i=new te(this),this.M=this,this.G=null}x(it,F),it.prototype[Se]=!0,it.prototype.removeEventListener=function(_,k,V,Z){re(this,_,k,V,Z)};function dt(_,k){var V,Z=_.G;if(Z)for(V=[];Z;Z=Z.G)V.push(Z);if(_=_.M,Z=k.type||k,typeof k=="string")k=new U(k,_);else if(k instanceof U)k.target=k.target||_;else{var me=k;k=new U(Z,_),Q(k,me)}me=!0;let Ae,Ke;if(V)for(Ke=V.length-1;Ke>=0;Ke--)Ae=k.g=V[Ke],me=et(Ae,Z,!0,k)&&me;if(Ae=k.g=_,me=et(Ae,Z,!0,k)&&me,me=et(Ae,Z,!1,k)&&me,V)for(Ke=0;Ke<V.length;Ke++)Ae=k.g=V[Ke],me=et(Ae,Z,!1,k)&&me}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var _=this.i;for(const k in _.g){const V=_.g[k];for(let Z=0;Z<V.length;Z++)ce(V[Z]);delete _.g[k],_.h--}}this.G=null},it.prototype.J=function(_,k,V,Z){return this.i.add(String(_),k,!1,V,Z)},it.prototype.K=function(_,k,V,Z){return this.i.add(String(_),k,!0,V,Z)};function et(_,k,V,Z){if(k=_.i.g[String(k)],!k)return!0;k=k.concat();let me=!0;for(let Ae=0;Ae<k.length;++Ae){const Ke=k[Ae];if(Ke&&!Ke.da&&Ke.capture==V){const kt=Ke.listener,Wn=Ke.ha||Ke.src;Ke.fa&&W(_.i,Ke),me=kt.call(Wn,Z)!==!1&&me}}return me&&!Z.defaultPrevented}function _t(_,k){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=d(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:o.setTimeout(_,k||0)}function kn(_){_.g=_t(()=>{_.g=null,_.i&&(_.i=!1,kn(_))},_.l);const k=_.h;_.h=null,_.m.apply(null,k)}class vt extends F{constructor(k,V){super(),this.m=k,this.l=V,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:kn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(_){F.call(this),this.h=_,this.g={}}x(Lt,F);var Kt=[];function yn(_){K(_.g,function(k,V){this.g.hasOwnProperty(V)&&ft(k)},_),_.g={}}Lt.prototype.N=function(){Lt.Z.N.call(this),yn(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=o.JSON.stringify,Mt=o.JSON.parse,gt=class{stringify(_){return o.JSON.stringify(_,void 0)}parse(_){return o.JSON.parse(_,void 0)}};function Zt(){}function fn(){}var Ot={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hn(){U.call(this,"d")}x(hn,U);function kr(){U.call(this,"c")}x(kr,U);var Rn={},Wo=null;function Ua(){return Wo=Wo||new it}Rn.Ia="serverreachability";function li(_){U.call(this,Rn.Ia,_)}x(li,U);function Rr(_){const k=Ua();dt(k,new li(k))}Rn.STAT_EVENT="statevent";function ga(_,k){U.call(this,Rn.STAT_EVENT,_),this.stat=k}x(ga,U);function Cn(_){const k=Ua();dt(k,new ga(k,_))}Rn.Ja="timingevent";function Dr(_,k){U.call(this,Rn.Ja,_),this.size=k}x(Dr,U);function rr(_,k){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){_()},k)}function Mr(){this.g=!0}Mr.prototype.ua=function(){this.g=!1};function vs(_,k,V,Z,me,Ae){_.info(function(){if(_.g)if(Ae){var Ke="",kt=Ae.split("&");for(let cn=0;cn<kt.length;cn++){var Wn=kt[cn].split("=");if(Wn.length>1){const On=Wn[0];Wn=Wn[1];const Ws=On.split("_");Ke=Ws.length>=2&&Ws[1]=="type"?Ke+(On+"="+Wn+"&"):Ke+(On+"=redacted&")}}}else Ke=null;else Ke=Ae;return"XMLHTTP REQ ("+Z+") [attempt "+me+"]: "+k+`
`+V+`
`+Ke})}function qs(_,k,V,Z,me,Ae,Ke){_.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+me+"]: "+k+`
`+V+`
`+Ae+" "+Ke})}function Yn(_,k,V,Z){_.info(function(){return"XMLHTTP TEXT ("+k+"): "+tc(_,V)+(Z?" "+Z:"")})}function qr(_,k){_.info(function(){return"TIMEOUT: "+k})}Mr.prototype.info=function(){};function tc(_,k){if(!_.g)return k;if(!k)return null;try{const Ae=JSON.parse(k);if(Ae){for(_=0;_<Ae.length;_++)if(Array.isArray(Ae[_])){var V=Ae[_];if(!(V.length<2)){var Z=V[1];if(Array.isArray(Z)&&!(Z.length<1)){var me=Z[0];if(me!="noop"&&me!="stop"&&me!="close")for(let Ke=1;Ke<Z.length;Ke++)Z[Ke]=""}}}}return jt(Ae)}catch{return k}}var xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ks={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sr;function va(){}x(va,Zt),va.prototype.g=function(){return new XMLHttpRequest},sr=new va;function ys(_){return encodeURIComponent(String(_))}function G(_){var k=1;_=_.split(":");const V=[];for(;k>0&&_.length;)V.push(_.shift()),k--;return _.length&&V.push(_.join(":")),V}function ne(_,k,V,Z){this.j=_,this.i=k,this.l=V,this.S=Z||1,this.V=new Lt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var X={},ee={};function ae(_,k,V){_.M=1,_.A=ut(Ue(k)),_.u=V,_.R=!0,xe(_,null)}function xe(_,k){_.F=Date.now(),_e(_),_.B=Ue(_.A);var V=_.B,Z=_.S;Array.isArray(Z)||(Z=[String(Z)]),nc(V.i,"t",Z),_.C=0,V=_.j.L,_.h=new J,_.g=th(_.j,V?k:null,!_.u),_.P>0&&(_.O=new vt(d(_.Y,_,_.g),_.P)),k=_.V,V=_.g,Z=_.ba;var me="readystatechange";Array.isArray(me)||(me&&(Kt[0]=me.toString()),me=Kt);for(let Ae=0;Ae<me.length;Ae++){const Ke=be(V,me[Ae],Z||k.handleEvent,!1,k.h||k);if(!Ke)break;k.g[Ke.key]=Ke}k=_.J?Y(_.J):{},_.u?(_.v||(_.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,k)):(_.v="GET",_.g.ea(_.B,_.v,null,k)),Rr(),vs(_.i,_.v,_.B,_.l,_.S,_.u)}ne.prototype.ba=function(_){_=_.target;const k=this.O;k&&Ea(_)==3?k.j():this.Y(_)},ne.prototype.Y=function(_){try{if(_==this.g)e:{const kt=Ea(this.g),Wn=this.g.ya(),cn=this.g.ca();if(!(kt<3)&&(kt!=3||this.g&&(this.h.h||this.g.la()||Pr(this.g)))){this.K||kt!=4||Wn==7||(Wn==8||cn<=0?Rr(3):Rr(2)),He(this);var k=this.g.ca();this.X=k;var V=Re(this);if(this.o=k==200,qs(this.i,this.v,this.B,this.l,this.S,kt,k),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,me=this.g;if((Z=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Z)){var Ae=Z;break t}}Ae=null}if(_=Ae)Yn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,_);else{this.o=!1,this.m=3,Cn(12),Be(this),Ye(this);break e}}if(this.R){_=!0;let On;for(;!this.K&&this.C<V.length;)if(On=Te(this,V),On==ee){kt==4&&(this.m=4,Cn(14),_=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(On==X){this.m=4,Cn(15),Yn(this.i,this.l,V,"[Invalid Chunk]"),_=!1;break}else Yn(this.i,this.l,On,null),qe(this,On);if(ve(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||V.length!=0||this.h.h||(this.m=1,Cn(16),_=!1),this.o=this.o&&_,!_)Yn(this.i,this.l,V,"[Invalid Chunked Response]"),Be(this),Ye(this);else if(V.length>0&&!this.W){this.W=!0;var Ke=this.j;Ke.g==this&&Ke.aa&&!Ke.P&&(Ke.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Fu(Ke),Ke.P=!0,Cn(11))}}else Yn(this.i,this.l,V,null),qe(this,V);kt==4&&Be(this),this.o&&!this.K&&(kt==4?Zd(this.j,this):(this.o=!1,_e(this)))}else fi(this.g),k==400&&V.indexOf("Unknown SID")>0?(this.m=3,Cn(12)):(this.m=0,Cn(13)),Be(this),Ye(this)}}}catch{}};function Re(_){if(!ve(_))return _.g.la();const k=Pr(_.g);if(k==="")return"";let V="";const Z=k.length,me=Ea(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Be(_),Ye(_),"";_.h.i=new o.TextDecoder}for(let Ae=0;Ae<Z;Ae++)_.h.h=!0,V+=_.h.i.decode(k[Ae],{stream:!(me&&Ae==Z-1)});return k.length=0,_.h.g+=V,_.C=0,_.h.g}function ve(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function Te(_,k){var V=_.C,Z=k.indexOf(`
`,V);return Z==-1?ee:(V=Number(k.substring(V,Z)),isNaN(V)?X:(Z+=1,Z+V>k.length?ee:(k=k.slice(Z,Z+V),_.C=Z+V,k)))}ne.prototype.cancel=function(){this.K=!0,Be(this)};function _e(_){_.T=Date.now()+_.H,je(_,_.H)}function je(_,k){if(_.D!=null)throw Error("WatchDog timer not null");_.D=rr(d(_.aa,_),k)}function He(_){_.D&&(o.clearTimeout(_.D),_.D=null)}ne.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(qr(this.i,this.B),this.M!=2&&(Rr(),Cn(17)),Be(this),this.m=2,Ye(this)):je(this,this.T-_)};function Ye(_){_.j.I==0||_.K||Zd(_.j,_)}function Be(_){He(_);var k=_.O;k&&typeof k.dispose=="function"&&k.dispose(),_.O=null,yn(_.V),_.g&&(k=_.g,_.g=null,k.abort(),k.dispose())}function qe(_,k){try{var V=_.j;if(V.I!=0&&(V.g==_||Tr(V.h,_))){if(!_.L&&Tr(V.h,_)&&V.I==3){try{var Z=V.Ba.g.parse(k)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var me=Z;if(me[0]==0){e:if(!V.v){if(V.g)if(V.g.F+3e3<_.F)oc(V),Yi(V);else break e;rl(V),Cn(18)}}else V.xa=me[1],0<V.xa-V.K&&me[2]<37500&&V.F&&V.A==0&&!V.C&&(V.C=rr(d(V.Va,V),6e3));pn(V.h)<=1&&V.ta&&(V.ta=void 0)}else Ha(V,11)}else if((_.L||V.g==_)&&oc(V),!j(k))for(me=V.Ba.g.parse(k),k=0;k<me.length;k++){let cn=me[k];const On=cn[0];if(!(On<=V.K))if(V.K=On,cn=cn[1],V.I==2)if(cn[0]=="c"){V.M=cn[1],V.ba=cn[2];const Ws=cn[3];Ws!=null&&(V.ka=Ws,V.j.info("VER="+V.ka));const Ga=cn[4];Ga!=null&&(V.za=Ga,V.j.info("SVER="+V.za));const Ta=cn[5];Ta!=null&&typeof Ta=="number"&&Ta>0&&(Z=1.5*Ta,V.O=Z,V.j.info("backChannelRequestTimeoutMs_="+Z)),Z=V;const wa=_.g;if(wa){const sl=wa.g?wa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sl){var Ae=Z.h;Ae.g||sl.indexOf("spdy")==-1&&sl.indexOf("quic")==-1&&sl.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(as(Ae,Ae.h),Ae.h=null))}if(Z.G){const lc=wa.g?wa.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(Z.wa=lc,Xe(Z.J,Z.G,lc))}}V.I=3,V.l&&V.l.ra(),V.aa&&(V.T=Date.now()-_.F,V.j.info("Handshake RTT: "+V.T+"ms")),Z=V;var Ke=_;if(Z.na=eh(Z,Z.L?Z.ba:null,Z.W),Ke.L){_n(Z.h,Ke);var kt=Ke,Wn=Z.O;Wn&&(kt.H=Wn),kt.D&&(He(kt),_e(kt)),Z.g=Ke}else Yd(Z);V.i.length>0&&ja(V)}else cn[0]!="stop"&&cn[0]!="close"||Ha(V,7);else V.I==3&&(cn[0]=="stop"||cn[0]=="close"?cn[0]=="stop"?Ha(V,7):Mu(V):cn[0]!="noop"&&V.l&&V.l.qa(cn),V.A=0)}}Rr(4)}catch{}}var nt=class{constructor(_,k){this.g=_,this.map=k}};function on(_){this.l=_||10,o.PerformanceNavigationTiming?(_=o.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ln(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function pn(_){return _.h?1:_.g?_.g.size:0}function Tr(_,k){return _.h?_.h==k:_.g?_.g.has(k):!1}function as(_,k){_.g?_.g.add(k):_.h=k}function _n(_,k){_.h&&_.h==k?_.h=null:_.g&&_.g.has(k)&&_.g.delete(k)}on.prototype.cancel=function(){if(this.i=Pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Pt(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let k=_.i;for(const V of _.g.values())k=k.concat(V.G);return k}return T(_.i)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function se(_,k){if(_){_=_.split("&");for(let V=0;V<_.length;V++){const Z=_[V].indexOf("=");let me,Ae=null;Z>=0?(me=_[V].substring(0,Z),Ae=_[V].substring(Z+1)):me=_[V],k(me,Ae?decodeURIComponent(Ae.replace(/\+/g," ")):"")}}}function De(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;_ instanceof De?(this.l=_.l,We(this,_.j),this.o=_.o,this.g=_.g,ct(this,_.u),this.h=_.h,It(this,Kd(_.i)),this.m=_.m):_&&(k=String(_).match(Rs))?(this.l=!1,We(this,k[1]||"",!0),this.o=Tt(k[2]||""),this.g=Tt(k[3]||"",!0),ct(this,k[4]),this.h=Tt(k[5]||"",!0),It(this,k[6]||"",!0),this.m=Tt(k[7]||"")):(this.l=!1,this.i=new mn(null,this.l))}De.prototype.toString=function(){const _=[];var k=this.j;k&&_.push(Ut(k,Vt,!0),":");var V=this.g;return(V||k=="file")&&(_.push("//"),(k=this.o)&&_.push(Ut(k,Vt,!0),"@"),_.push(ys(V).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.u,V!=null&&_.push(":",String(V))),(V=this.h)&&(this.g&&V.charAt(0)!="/"&&_.push("/"),_.push(Ut(V,V.charAt(0)=="/"?Jt:pr,!0))),(V=this.i.toString())&&_.push("?",V),(V=this.m)&&_.push("#",Ut(V,is)),_.join("")},De.prototype.resolve=function(_){const k=Ue(this);let V=!!_.j;V?We(k,_.j):V=!!_.o,V?k.o=_.o:V=!!_.g,V?k.g=_.g:V=_.u!=null;var Z=_.h;if(V)ct(k,_.u);else if(V=!!_.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var me=k.h.lastIndexOf("/");me!=-1&&(Z=k.h.slice(0,me+1)+Z)}if(me=Z,me==".."||me==".")Z="";else if(me.indexOf("./")!=-1||me.indexOf("/.")!=-1){Z=me.lastIndexOf("/",0)==0,me=me.split("/");const Ae=[];for(let Ke=0;Ke<me.length;){const kt=me[Ke++];kt=="."?Z&&Ke==me.length&&Ae.push(""):kt==".."?((Ae.length>1||Ae.length==1&&Ae[0]!="")&&Ae.pop(),Z&&Ke==me.length&&Ae.push("")):(Ae.push(kt),Z=!0)}Z=Ae.join("/")}else Z=me}return V?k.h=Z:V=_.i.toString()!=="",V?It(k,Kd(_.i)):V=!!_.m,V&&(k.m=_.m),k};function Ue(_){return new De(_)}function We(_,k,V){_.j=V?Tt(k,!0):k,_.j&&(_.j=_.j.replace(/:$/,""))}function ct(_,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);_.u=k}else _.u=null}function It(_,k,V){k instanceof mn?(_.i=k,rc(_.i,_.l)):(V||(k=Ut(k,mr)),_.i=new mn(k,_.l))}function Xe(_,k,V){_.i.set(k,V)}function ut(_){return Xe(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Tt(_,k){return _?k?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Ut(_,k,V){return typeof _=="string"?(_=encodeURI(_).replace(k,wt),V&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function wt(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Vt=/[#\/\?@]/g,pr=/[#\?:]/g,Jt=/[#\?]/g,mr=/[#\?@]/g,is=/#/g;function mn(_,k){this.h=this.g=null,this.i=_||null,this.j=!!k}function Nn(_){_.g||(_.g=new Map,_.h=0,_.i&&se(_.i,function(k,V){_.add(decodeURIComponent(k.replace(/\+/g," ")),V)}))}t=mn.prototype,t.add=function(_,k){Nn(this),this.i=null,_=$i(this,_);let V=this.g.get(_);return V||this.g.set(_,V=[]),V.push(k),this.h+=1,this};function Zo(_,k){Nn(_),k=$i(_,k),_.g.has(k)&&(_.i=null,_.h-=_.g.get(k).length,_.g.delete(k))}function ci(_,k){return Nn(_),k=$i(_,k),_.g.has(k)}t.forEach=function(_,k){Nn(this),this.g.forEach(function(V,Z){V.forEach(function(me){_.call(k,me,Z,this)},this)},this)};function Iu(_,k){Nn(_);let V=[];if(typeof k=="string")ci(_,k)&&(V=V.concat(_.g.get($i(_,k))));else for(_=Array.from(_.g.values()),k=0;k<_.length;k++)V=V.concat(_[k]);return V}t.set=function(_,k){return Nn(this),this.i=null,_=$i(this,_),ci(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[k]),this.h+=1,this},t.get=function(_,k){return _?(_=Iu(this,_),_.length>0?String(_[0]):k):k};function nc(_,k,V){Zo(_,k),V.length>0&&(_.i=null,_.g.set($i(_,k),T(V)),_.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],k=Array.from(this.g.keys());for(let Z=0;Z<k.length;Z++){var V=k[Z];const me=ys(V);V=Iu(this,V);for(let Ae=0;Ae<V.length;Ae++){let Ke=me;V[Ae]!==""&&(Ke+="="+ys(V[Ae])),_.push(Ke)}}return this.i=_.join("&")};function Kd(_){const k=new mn;return k.i=_.i,_.g&&(k.g=new Map(_.g),k.h=_.h),k}function $i(_,k){return k=String(k),_.j&&(k=k.toLowerCase()),k}function rc(_,k){k&&!_.j&&(Nn(_),_.i=null,_.g.forEach(function(V,Z){const me=Z.toLowerCase();Z!=me&&(Zo(this,Z),nc(this,me,V))},_)),_.j=k}function ya(_,k){const V=new Mr;if(o.Image){const Z=new Image;Z.onload=h(Js,V,"TestLoadImage: loaded",!0,k,Z),Z.onerror=h(Js,V,"TestLoadImage: error",!1,k,Z),Z.onabort=h(Js,V,"TestLoadImage: abort",!1,k,Z),Z.ontimeout=h(Js,V,"TestLoadImage: timeout",!1,k,Z),o.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=_}else k(!1)}function ku(_,k){const V=new Mr,Z=new AbortController,me=setTimeout(()=>{Z.abort(),Js(V,"TestPingServer: timeout",!1,k)},1e4);fetch(_,{signal:Z.signal}).then(Ae=>{clearTimeout(me),Ae.ok?Js(V,"TestPingServer: ok",!0,k):Js(V,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(me),Js(V,"TestPingServer: error",!1,k)})}function Js(_,k,V,Z,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),Z(V)}catch{}}function qi(){this.g=new gt}function Va(_){this.i=_.Sb||null,this.h=_.ab||!1}x(Va,Zt),Va.prototype.g=function(){return new Xo(this.i,this.h)};function Xo(_,k){it.call(this),this.H=_,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Xo,it),t=Xo.prototype,t.open=function(_,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=k,this.readyState=1,_a(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(k.body=_),(this.H||o).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ki(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sc(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function sc(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var k=_.value?_.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!_.done}))&&(this.response=this.responseText+=k)}_.done?Ki(this):_a(this),this.readyState==3&&sc(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,Ki(this))},t.Na=function(_){this.g&&(this.response=_,Ki(this))},t.ga=function(){this.g&&Ki(this)};function Ki(_){_.readyState=4,_.l=null,_.j=null,_.B=null,_a(_)}t.setRequestHeader=function(_,k){this.A.append(_,k)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],k=this.h.entries();for(var V=k.next();!V.done;)V=V.value,_.push(V[0]+": "+V[1]),V=k.next();return _.join(`\r
`)};function _a(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Ys(_){let k="";return K(_,function(V,Z){k+=Z,k+=":",k+=V,k+=`\r
`}),k}function Qo(_,k,V){e:{for(Z in V){var Z=!1;break e}Z=!0}Z||(V=Ys(V),typeof _=="string"?V!=null&&ys(V):Xe(_,k,V))}function En(_){it.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(En,it);var Ba=/^https?$/i,Ru=["POST","PUT"];t=En.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,k,V,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);k=k?k.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sr.g(),this.g.onreadystatechange=v(d(this.Ca,this));try{this.B=!0,this.g.open(k,String(_),!0),this.B=!1}catch(Ae){el(this,Ae);return}if(_=V||"",V=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var me in Z)V.set(me,Z[me]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Ae of Z.keys())V.set(Ae,Z.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(V.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),me=o.FormData&&_ instanceof o.FormData,!(Array.prototype.indexOf.call(Ru,k,void 0)>=0)||Z||me||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,Ke]of V)this.g.setRequestHeader(Ae,Ke);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(Ae){el(this,Ae)}};function el(_,k){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=k,_.o=5,Du(_),ui(_)}function Du(_){_.A||(_.A=!0,dt(_,"complete"),dt(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,dt(this,"complete"),dt(this,"abort"),ui(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),En.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tl(this):this.Xa())},t.Xa=function(){tl(this)};function tl(_){if(_.h&&typeof a<"u"){if(_.v&&Ea(_)==4)setTimeout(_.Ca.bind(_),0);else if(dt(_,"readystatechange"),Ea(_)==4){_.h=!1;try{const Ae=_.ca();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var V;if(!(V=k)){var Z;if(Z=Ae===0){let Ke=String(_.D).match(Rs)[1]||null;!Ke&&o.self&&o.self.location&&(Ke=o.self.location.protocol.slice(0,-1)),Z=!Ba.test(Ke?Ke.toLowerCase():"")}V=Z}if(V)dt(_,"complete"),dt(_,"success");else{_.o=6;try{var me=Ea(_)>2?_.g.statusText:""}catch{me=""}_.l=me+" ["+_.ca()+"]",Du(_)}}finally{ui(_)}}}}function ui(_,k){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const V=_.g;_.g=null,k||dt(_,"ready");try{V.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ea(_){return _.g?_.g.readyState:0}t.ca=function(){try{return Ea(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var k=this.g.responseText;return _&&k.indexOf(_)==0&&(k=k.substring(_.length)),Mt(k)}};function Pr(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function fi(_){const k={};_=(_.g&&Ea(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<_.length;Z++){if(j(_[Z]))continue;var V=G(_[Z]);const me=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ae=k[me]||[];k[me]=Ae,Ae.push(V)}Ie(k,function(Z){return Z.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(_,k,V){return V&&V.internalChannelParams&&V.internalChannelParams[_]||k}function Ji(_){this.za=0,this.i=[],this.j=new Mr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=za("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=za("baseRetryDelayMs",5e3,_),this.Za=za("retryDelaySeedMs",1e4,_),this.Ta=za("forwardChannelMaxRetries",2,_),this.va=za("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new on(_&&_.concurrentRequestLimit),this.Ba=new qi,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ji.prototype,t.ka=8,t.I=1,t.connect=function(_,k,V,Z){Cn(0),this.W=_,this.H=k||{},V&&Z!==void 0&&(this.H.OSID=V,this.H.OAID=Z),this.F=this.X,this.J=eh(this,null,this.W),ja(this)};function Mu(_){if(ac(_),_.I==3){var k=_.V++,V=Ue(_.J);if(Xe(V,"SID",_.M),Xe(V,"RID",k),Xe(V,"TYPE","terminate"),nl(_,V),k=new ne(_,_.j,k),k.M=2,k.A=ut(Ue(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(k.A.toString(),"")}catch{}!V&&o.Image&&(new Image().src=k.A,V=!0),V||(k.g=th(k.j,null),k.g.ea(k.A)),k.F=Date.now(),_e(k)}Qd(_)}function Yi(_){_.g&&(Fu(_),_.g.cancel(),_.g=null)}function ac(_){Yi(_),_.v&&(o.clearTimeout(_.v),_.v=null),oc(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&o.clearTimeout(_.m),_.m=null)}function ja(_){if(!ln(_.h)&&!_.m){_.m=!0;var k=_.Ea;z||C(),O||(z(),O=!0),I.add(k,_),_.D=0}}function ic(_,k){return pn(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=k.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=rr(d(_.Ea,_,k),Xd(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const me=new ne(this,this.j,_);let Ae=this.o;if(this.U&&(Ae?(Ae=Y(Ae),Q(Ae,this.U)):Ae=this.U),this.u!==null||this.R||(me.J=Ae,Ae=null),this.S)e:{for(var k=0,V=0;V<this.i.length;V++){t:{var Z=this.i[V];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(k+=Z,k>4096){k=V;break e}if(k===4096||V===this.i.length-1){k=V+1;break e}}k=1e3}else k=1e3;k=Jd(this,me,k),V=Ue(this.J),Xe(V,"RID",_),Xe(V,"CVER",22),this.G&&Xe(V,"X-HTTP-Session-Id",this.G),nl(this,V),Ae&&(this.R?k="headers="+ys(Ys(Ae))+"&"+k:this.u&&Qo(V,this.u,Ae)),as(this.h,me),this.Ra&&Xe(V,"TYPE","init"),this.S?(Xe(V,"$req",k),Xe(V,"SID","null"),me.U=!0,ae(me,V,null)):ae(me,V,k),this.I=2}}else this.I==3&&(_?Pu(this,_):this.i.length==0||ln(this.h)||Pu(this))};function Pu(_,k){var V;k?V=k.l:V=_.V++;const Z=Ue(_.J);Xe(Z,"SID",_.M),Xe(Z,"RID",V),Xe(Z,"AID",_.K),nl(_,Z),_.u&&_.o&&Qo(Z,_.u,_.o),V=new ne(_,_.j,V,_.D+1),_.u===null&&(V.J=_.o),k&&(_.i=k.G.concat(_.i)),k=Jd(_,V,1e3),V.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),as(_.h,V),ae(V,Z,k)}function nl(_,k){_.H&&K(_.H,function(V,Z){Xe(k,Z,V)}),_.l&&K({},function(V,Z){Xe(k,Z,V)})}function Jd(_,k,V){V=Math.min(_.i.length,V);const Z=_.l?d(_.l.Ka,_.l,_):null;e:{var me=_.i;let kt=-1;for(;;){const Wn=["count="+V];kt==-1?V>0?(kt=me[0].g,Wn.push("ofs="+kt)):kt=0:Wn.push("ofs="+kt);let cn=!0;for(let On=0;On<V;On++){var Ae=me[On].g;const Ws=me[On].map;if(Ae-=kt,Ae<0)kt=Math.max(0,me[On].g-100),cn=!1;else try{Ae="req"+Ae+"_"||"";try{var Ke=Ws instanceof Map?Ws:Object.entries(Ws);for(const[Ga,Ta]of Ke){let wa=Ta;c(Ta)&&(wa=jt(Ta)),Wn.push(Ae+Ga+"="+encodeURIComponent(wa))}}catch(Ga){throw Wn.push(Ae+"type="+encodeURIComponent("_badmap")),Ga}}catch{Z&&Z(Ws)}}if(cn){Ke=Wn.join("&");break e}}Ke=void 0}return _=_.i.splice(0,V),k.G=_,Ke}function Yd(_){if(!_.g&&!_.v){_.Y=1;var k=_.Da;z||C(),O||(z(),O=!0),I.add(k,_),_.A=0}}function rl(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=rr(d(_.Da,_),Xd(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,Wd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=rr(d(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Cn(10),Yi(this),Wd(this))};function Fu(_){_.B!=null&&(o.clearTimeout(_.B),_.B=null)}function Wd(_){_.g=new ne(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var k=Ue(_.na);Xe(k,"RID","rpc"),Xe(k,"SID",_.M),Xe(k,"AID",_.K),Xe(k,"CI",_.F?"0":"1"),!_.F&&_.ia&&Xe(k,"TO",_.ia),Xe(k,"TYPE","xmlhttp"),nl(_,k),_.u&&_.o&&Qo(k,_.u,_.o),_.O&&(_.g.H=_.O);var V=_.g;_=_.ba,V.M=1,V.A=ut(Ue(k)),V.u=null,V.R=!0,xe(V,_)}t.Va=function(){this.C!=null&&(this.C=null,Yi(this),rl(this),Cn(19))};function oc(_){_.C!=null&&(o.clearTimeout(_.C),_.C=null)}function Zd(_,k){var V=null;if(_.g==k){oc(_),Fu(_),_.g=null;var Z=2}else if(Tr(_.h,k))V=k.G,_n(_.h,k),Z=1;else return;if(_.I!=0){if(k.o)if(Z==1){V=k.u?k.u.length:0,k=Date.now()-k.F;var me=_.D;Z=Ua(),dt(Z,new Dr(Z,V)),ja(_)}else Yd(_);else if(me=k.m,me==3||me==0&&k.X>0||!(Z==1&&ic(_,k)||Z==2&&rl(_)))switch(V&&V.length>0&&(k=_.h,k.i=k.i.concat(V)),me){case 1:Ha(_,5);break;case 4:Ha(_,10);break;case 3:Ha(_,6);break;default:Ha(_,2)}}}function Xd(_,k){let V=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(V*=2),V*k}function Ha(_,k){if(_.j.info("Error code "+k),k==2){var V=d(_.bb,_),Z=_.Ua;const me=!Z;Z=new De(Z||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||We(Z,"https"),ut(Z),me?ya(Z.toString(),V):ku(Z.toString(),V)}else Cn(2);_.I=0,_.l&&_.l.pa(k),Qd(_),ac(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Cn(2)):(this.j.info("Failed to ping google.com"),Cn(1))};function Qd(_){if(_.I=0,_.ja=[],_.l){const k=Pt(_.h);(k.length!=0||_.i.length!=0)&&(S(_.ja,k),S(_.ja,_.i),_.h.i.length=0,T(_.i),_.i.length=0),_.l.oa()}}function eh(_,k,V){var Z=V instanceof De?Ue(V):new De(V);if(Z.g!="")k&&(Z.g=k+"."+Z.g),ct(Z,Z.u);else{var me=o.location;Z=me.protocol,k=k?k+"."+me.hostname:me.hostname,me=+me.port;const Ae=new De(null);Z&&We(Ae,Z),k&&(Ae.g=k),me&&ct(Ae,me),V&&(Ae.h=V),Z=Ae}return V=_.G,k=_.wa,V&&k&&Xe(Z,V,k),Xe(Z,"VER",_.ka),nl(_,Z),Z}function th(_,k,V){if(k&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=_.Aa&&!_.ma?new En(new Va({ab:V})):new En(_.ma),k.Fa(_.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}t=nh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wi(){}Wi.prototype.g=function(_,k){return new os(_,k)};function os(_,k){it.call(this),this.g=new Ji(k),this.l=_,this.h=k&&k.messageUrlParams||null,_=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(_?_["X-WebChannel-Content-Type"]=k.messageContentType:_={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(_?_["X-WebChannel-Client-Profile"]=k.sa:_={"X-WebChannel-Client-Profile":k.sa}),this.g.U=_,(_=k&&k.Qb)&&!j(_)&&(this.g.u=_),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!j(k)&&(this.g.G=k,_=this.h,_!==null&&k in _&&(_=this.h,k in _&&delete _[k])),this.j=new di(this)}x(os,it),os.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},os.prototype.close=function(){Mu(this.g)},os.prototype.o=function(_){var k=this.g;if(typeof _=="string"){var V={};V.__data__=_,_=V}else this.v&&(V={},V.__data__=jt(_),_=V);k.i.push(new nt(k.Ya++,_)),k.I==3&&ja(k)},os.prototype.N=function(){this.g.l=null,delete this.j,Mu(this.g),delete this.g,os.Z.N.call(this)};function rh(_){hn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var k=_.__sm__;if(k){e:{for(const V in k){_=V;break e}_=void 0}(this.i=_)&&(_=this.i,k=k!==null&&_ in k?k[_]:void 0),this.data=k}else this.data=_}x(rh,hn);function sh(){kr.call(this),this.status=1}x(sh,kr);function di(_){this.g=_}x(di,nh),di.prototype.ra=function(){dt(this.g,"a")},di.prototype.qa=function(_){dt(this.g,new rh(_))},di.prototype.pa=function(_){dt(this.g,new sh)},di.prototype.oa=function(){dt(this.g,"b")},Wi.prototype.createWebChannel=Wi.prototype.g,os.prototype.send=os.prototype.o,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,uR=function(){return new Wi},cR=function(){return Ua()},lR=Rn,Vv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,B0=xa,Ks.COMPLETE="complete",oR=Ks,fn.EventType=Ot,Ot.OPEN="a",Ot.CLOSE="b",Ot.ERROR="c",Ot.MESSAGE="d",it.prototype.listen=it.prototype.J,Lf=fn,En.prototype.listenOnce=En.prototype.K,En.prototype.getLastError=En.prototype.Ha,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.ca,En.prototype.getResponseJson=En.prototype.La,En.prototype.getResponseText=En.prototype.la,En.prototype.send=En.prototype.ea,En.prototype.setWithCredentials=En.prototype.Fa,iR=En}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});class bs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bs.UNAUTHENTICATED=new bs(null),bs.GOOGLE_CREDENTIALS=new bs("google-credentials-uid"),bs.FIRST_PARTY=new bs("first-party-uid"),bs.MOCK_USER=new bs("mock-user");let Su="12.9.0";function AX(t){Su=t}const Ul=new Yk("@firebase/firestore");function zc(){return Ul.logLevel}function tt(t,...e){if(Ul.logLevel<=Qt.DEBUG){const n=e.map(fy);Ul.debug(`Firestore (${Su}): ${t}`,...n)}}function Bi(t,...e){if(Ul.logLevel<=Qt.ERROR){const n=e.map(fy);Ul.error(`Firestore (${Su}): ${t}`,...n)}}function fu(t,...e){if(Ul.logLevel<=Qt.WARN){const n=e.map(fy);Ul.warn(`Firestore (${Su}): ${t}`,...n)}}function fy(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function yt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fR(t,r,n)}function fR(t,e,n){let r=`FIRESTORE (${Su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Bi(r),new Error(r)}function dn(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||fR(e,s,r)}function Nt(t,e){return t}const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Wl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class bX{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(bs.UNAUTHENTICATED)))}shutdown(){}}class NX{constructor(e){this.t=e,this.currentUser=bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dn(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Oo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Oo,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},c=u=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Oo)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dn(typeof r.accessToken=="string",31837,{l:r}),new bX(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dn(e===null||typeof e=="string",2055,{h:e}),new bs(e)}}class IX{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class kX{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new IX(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(bs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class QA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RX{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qk(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dn(this.o===void 0,3512);const r=a=>{a.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,tt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new QA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(dn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new QA(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function DX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class dy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=DX(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function $t(t,e){return t<e?-1:t>e?1:0}function Bv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Ox(s)===Ox(a)?$t(s,a):Ox(s)?1:-1}return $t(t.length,e.length)}const MX=55296,PX=57343;function Ox(t){const e=t.charCodeAt(0);return e>=MX&&e<=PX}function du(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const eb="__name__";class Za{constructor(e,n,r){n===void 0?n=0:n>e.length&&yt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&yt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Za.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Za.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return $t(e.length,n.length)}static compareSegments(e,n){const r=Za.isNumericId(e),s=Za.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Za.extractNumericId(e).compare(Za.extractNumericId(n)):Bv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fo.fromString(e.substring(4,e.length-2))}}class Bn extends Za{construct(e,n,r){return new Bn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new lt(ze.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Bn(n)}static emptyPath(){return new Bn([])}}const FX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends Za{construct(e,n,r){return new zr(e,n,r)}static isValidIdentifier(e){return FX.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eb}static keyField(){return new zr([eb])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new lt(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new lt(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new lt(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(a(),s++)}if(a(),o)throw new lt(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(n)}static emptyPath(){return new zr([])}}class mt{constructor(e){this.path=e}static fromPath(e){return new mt(Bn.fromString(e))}static fromName(e){return new mt(Bn.fromString(e).popFirst(5))}static empty(){return new mt(Bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Bn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new Bn(e.slice()))}}function OX(t,e,n){if(!n)throw new lt(ze.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LX(t,e,n,r){if(e===!0&&r===!0)throw new lt(ze.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tb(t){if(!mt.isDocumentKey(t))throw new lt(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function hy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yt(12329,{type:typeof t})}function Ip(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new lt(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hy(t);throw new lt(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hr(t,e){const n={typeString:t};return e&&(n.value=e),n}function zd(t,e){if(!dR(t))throw new lt(ze.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new lt(ze.INVALID_ARGUMENT,n);return!0}const nb=-62135596800,rb=1e6;class Fn{static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rb);return new Fn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new lt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nb)throw new lt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rb}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zd(e,Fn._jsonSchema))return new Fn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fn._jsonSchemaVersion="firestore/timestamp/1.0",Fn._jsonSchema={type:hr("string",Fn._jsonSchemaVersion),seconds:hr("number"),nanoseconds:hr("number")};class At{static fromTimestamp(e){return new At(e)}static min(){return new At(new Fn(0,0))}static max(){return new At(new Fn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Sd=-1;function UX(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=At.fromTimestamp(r===1e9?new Fn(n+1,0):new Fn(n,r));return new Bo(s,mt.empty(),e)}function VX(t){return new Bo(t.readTime,t.key,Sd)}class Bo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bo(At.min(),mt.empty(),Sd)}static max(){return new Bo(At.max(),mt.empty(),Sd)}}function BX(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=mt.comparator(t.documentKey,e.documentKey),n!==0?n:$t(t.largestBatchId,e.largestBatchId))}const zX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Au(t){if(t.code!==ze.FAILED_PRECONDITION||t.message!==zX)throw t;tt("LocalStore","Unexpectedly lost primary lease")}class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Le(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Le?n:Le.resolve(n)}catch(n){return Le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Le.reject(n)}static resolve(e){return new Le(((n,r)=>{n(e)}))}static reject(e){return new Le(((n,r)=>{r(e)}))}static waitFor(e){return new Le(((n,r)=>{let s=0,a=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++a,o&&a===s&&n()}),(u=>r(u)))})),o=!0,a===s&&n()}))}static or(e){let n=Le.resolve(!1);for(const r of e)n=n.next((s=>s?Le.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new Le(((r,s)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new Le(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function HX(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bu(t){return t.name==="IndexedDbTransactionError"}class sm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sm.ce=-1;const py=-1;function am(t){return t==null}function kp(t){return t===0&&1/t==-1/0}function GX(t){return typeof t=="number"&&Number.isInteger(t)&&!kp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const hR="";function $X(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sb(e)),e=qX(t.get(n),e);return sb(e)}function qX(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case hR:n+="";break;default:n+=a}}return n}function sb(t){return t+hR+""}function ab(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class zn{constructor(e,n){this.comparator=e,this.root=n||Vr.EMPTY}insert(e,n){return new zn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new b0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new b0(this.root,e,this.comparator,!1)}getReverseIterator(){return new b0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new b0(this.root,e,this.comparator,!0)}}class b0{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Vr.RED,this.left=s??Vr.EMPTY,this.right=a??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Vr(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Vr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1;Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Vr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Er{constructor(e){this.comparator=e,this.data=new zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ib(this.data.getIterator())}getIteratorFrom(e){return new ib(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Er)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Er(this.comparator);return n.data=e,n}}class ib{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Da{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new Da([])}unionWith(e){let n=new Er(zr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Da(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return du(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class mR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new mR("Invalid base64 string: "+a):a}})(e);return new $r(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a})(e);return new $r(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const KX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(t){if(dn(!!t,39018),typeof t=="string"){let e=0;const n=KX.exec(t);if(dn(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(t.seconds),nanos:er(t.nanos)}}function er(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jo(t){return typeof t=="string"?$r.fromBase64String(t):$r.fromUint8Array(t)}const gR="server_timestamp",xR="__type__",vR="__previous_value__",yR="__local_write_time__";function my(t){return(t?.mapValue?.fields||{})[xR]?.stringValue===gR}function im(t){const e=t.mapValue.fields[vR];return my(e)?im(e):e}function Ad(t){const e=zo(t.mapValue.fields[yR].timestampValue);return new Fn(e.seconds,e.nanos)}class JX{constructor(e,n,r,s,a,o,c,u,d,h,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=x}}const Rp="(default)";class bd{constructor(e,n){this.projectId=e,this.database=n||Rp}static empty(){return new bd("","")}get isDefaultDatabase(){return this.database===Rp}isEqual(e){return e instanceof bd&&e.projectId===this.projectId&&e.database===this.database}}function YX(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new lt(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bd(t.options.projectId,e)}const _R="__type__",WX="__max__",C0={mapValue:{}},ER="__vector__",Dp="value";function Ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?my(t)?4:XX(t)?9007199254740991:ZX(t)?10:11:yt(28295,{value:t})}function si(t,e){if(t===e)return!0;const n=Ho(t);if(n!==Ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ad(t).isEqual(Ad(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=zo(s.timestampValue),c=zo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return jo(s.bytesValue).isEqual(jo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return er(s.geoPointValue.latitude)===er(a.geoPointValue.latitude)&&er(s.geoPointValue.longitude)===er(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return er(s.integerValue)===er(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=er(s.doubleValue),c=er(a.doubleValue);return o===c?kp(o)===kp(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return du(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return(function(s,a){const o=s.mapValue.fields||{},c=a.mapValue.fields||{};if(ab(o)!==ab(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!si(o[u],c[u])))return!1;return!0})(t,e);default:return yt(52216,{left:t})}}function Cd(t,e){return(t.values||[]).find((n=>si(n,e)))!==void 0}function hu(t,e){if(t===e)return 0;const n=Ho(t),r=Ho(e);if(n!==r)return $t(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $t(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=er(a.integerValue||a.doubleValue),u=er(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return ob(t.timestampValue,e.timestampValue);case 4:return ob(Ad(t),Ad(e));case 5:return Bv(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=jo(a),u=jo(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=$t(c[d],u[d]);if(h!==0)return h}return $t(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=$t(er(a.latitude),er(o.latitude));return c!==0?c:$t(er(a.longitude),er(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return lb(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[Dp]?.arrayValue,h=u[Dp]?.arrayValue,x=$t(d?.values?.length||0,h?.values?.length||0);return x!==0?x:lb(d,h)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===C0.mapValue&&o===C0.mapValue)return 0;if(a===C0.mapValue)return 1;if(o===C0.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let x=0;x<u.length&&x<h.length;++x){const v=Bv(u[x],h[x]);if(v!==0)return v;const T=hu(c[u[x]],d[h[x]]);if(T!==0)return T}return $t(u.length,h.length)})(t.mapValue,e.mapValue);default:throw yt(23264,{he:n})}}function ob(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $t(t,e);const n=zo(t),r=zo(e),s=$t(n.seconds,r.seconds);return s!==0?s:$t(n.nanos,r.nanos)}function lb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=hu(n[s],r[s]);if(a)return a}return $t(n.length,r.length)}function pu(t){return zv(t)}function zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=zo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return jo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return mt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=zv(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${zv(n.fields[o])}`;return s+"}"})(t.mapValue):yt(61005,{value:t})}function z0(t){switch(Ho(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=im(t);return e?16+z0(e):16;case 5:return 2*t.stringValue.length;case 6:return jo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+z0(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Zl(r.fields,((a,o)=>{s+=a.length+z0(o)})),s})(t.mapValue);default:throw yt(13486,{value:t})}}function jv(t){return!!t&&"integerValue"in t}function gy(t){return!!t&&"arrayValue"in t}function cb(t){return!!t&&"nullValue"in t}function ub(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function j0(t){return!!t&&"mapValue"in t}function ZX(t){return(t?.mapValue?.fields||{})[_R]?.stringValue===ER}function Xf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zl(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Xf(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xf(t.arrayValue.values[n]);return e}return{...t}}function XX(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WX}class ca{constructor(e){this.value=e}static empty(){return new ca({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!j0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xf(n)}setAll(e){let n=zr.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Xf(o):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());j0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];j0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zl(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new ca(Xf(this.value))}}function TR(t){const e=[];return Zl(t.fields,((n,r)=>{const s=new zr([n]);if(j0(r)){const a=TR(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)})),new Da(e)}class Zr{constructor(e,n,r,s,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Zr(e,0,At.min(),At.min(),At.min(),ca.empty(),0)}static newFoundDocument(e,n,r,s){return new Zr(e,1,n,At.min(),r,s,0)}static newNoDocument(e,n){return new Zr(e,2,n,At.min(),At.min(),ca.empty(),0)}static newUnknownDocument(e,n){return new Zr(e,3,n,At.min(),At.min(),ca.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ca.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ca.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mp{constructor(e,n){this.position=e,this.inclusive=n}}function fb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=mt.comparator(mt.fromName(o.referenceValue),n.key):r=hu(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function db(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}class Pp{constructor(e,n="asc"){this.field=e,this.dir=n}}function QX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class wR{}class vr extends wR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tQ(e,n,r):n==="array-contains"?new sQ(e,r):n==="in"?new aQ(e,r):n==="not-in"?new iQ(e,r):n==="array-contains-any"?new oQ(e,r):new vr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nQ(e,r):new rQ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hu(n,this.value)):n!==null&&Ho(this.value)===Ho(n)&&this.matchesComparison(hu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends wR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ai(e,n)}matches(e){return SR(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SR(t){return t.op==="and"}function AR(t){return eQ(t)&&SR(t)}function eQ(t){for(const e of t.filters)if(e instanceof ai)return!1;return!0}function Hv(t){if(t instanceof vr)return t.field.canonicalString()+t.op.toString()+pu(t.value);if(AR(t))return t.filters.map((e=>Hv(e))).join(",");{const e=t.filters.map((n=>Hv(n))).join(",");return`${t.op}(${e})`}}function bR(t,e){return t instanceof vr?(function(r,s){return s instanceof vr&&r.op===s.op&&r.field.isEqual(s.field)&&si(r.value,s.value)})(t,e):t instanceof ai?(function(r,s){return s instanceof ai&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,o,c)=>a&&bR(o,s.filters[c])),!0):!1})(t,e):void yt(19439)}function CR(t){return t instanceof vr?(function(n){return`${n.field.canonicalString()} ${n.op} ${pu(n.value)}`})(t):t instanceof ai?(function(n){return n.op.toString()+" {"+n.getFilters().map(CR).join(" ,")+"}"})(t):"Filter"}class tQ extends vr{constructor(e,n,r){super(e,n,r),this.key=mt.fromName(r.referenceValue)}matches(e){const n=mt.comparator(e.key,this.key);return this.matchesComparison(n)}}class nQ extends vr{constructor(e,n){super(e,"in",n),this.keys=NR("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class rQ extends vr{constructor(e,n){super(e,"not-in",n),this.keys=NR("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function NR(t,e){return(e.arrayValue?.values||[]).map((n=>mt.fromName(n.referenceValue)))}class sQ extends vr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gy(n)&&Cd(n.arrayValue,this.value)}}class aQ extends vr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cd(this.value.arrayValue,n)}}class iQ extends vr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cd(this.value.arrayValue,n)}}class oQ extends vr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Cd(this.value.arrayValue,r)))}}class lQ{constructor(e,n=null,r=[],s=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function hb(t,e=null,n=[],r=[],s=null,a=null,o=null){return new lQ(t,e,n,r,s,a,o)}function xy(t){const e=Nt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Hv(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>pu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>pu(r))).join(",")),e.Te=n}return e.Te}function vy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!db(t.startAt,e.startAt)&&db(t.endAt,e.endAt)}function Gv(t){return mt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class om{constructor(e,n=null,r=[],s=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cQ(t,e,n,r,s,a,o,c){return new om(t,e,n,r,s,a,o,c)}function yy(t){return new om(t)}function pb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uQ(t){return mt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fQ(t){return t.collectionGroup!==null}function Qf(t){const e=Nt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Er(zr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Pp(a,r))})),n.has(zr.keyField().canonicalString())||e.Ie.push(new Pp(zr.keyField(),r))}return e.Ie}function ei(t){const e=Nt(t);return e.Ee||(e.Ee=dQ(e,Qf(t))),e.Ee}function dQ(t,e){if(t.limitType==="F")return hb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Pp(s.field,a)}));const n=t.endAt?new Mp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mp(t.startAt.position,t.startAt.inclusive):null;return hb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $v(t,e,n){return new om(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lm(t,e){return vy(ei(t),ei(e))&&t.limitType===e.limitType}function IR(t){return`${xy(ei(t))}|lt:${t.limitType}`}function jc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>CR(s))).join(", ")}]`),am(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>pu(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>pu(s))).join(",")),`Target(${r})`})(ei(t))}; limitType=${t.limitType})`}function cm(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):mt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of Qf(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,u){const d=fb(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,Qf(r),s)||r.endAt&&!(function(o,c,u){const d=fb(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,Qf(r),s))})(t,e)}function hQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kR(t){return(e,n)=>{let r=!1;for(const s of Qf(t)){const a=pQ(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function pQ(t,e,n){const r=t.field.isKeyField()?mt.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?hu(u,d):yt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return yt(19790,{direction:t.dir})}}class Xl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}const mQ=new zn(mt.comparator);function zi(){return mQ}const RR=new zn(mt.comparator);function Uf(...t){let e=RR;for(const n of t)e=e.insert(n.key,n);return e}function DR(t){let e=RR;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function bl(){return ed()}function MR(){return ed()}function ed(){return new Xl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const gQ=new zn(mt.comparator),xQ=new Er(mt.comparator);function qt(...t){let e=xQ;for(const n of t)e=e.add(n);return e}const vQ=new Er($t);function yQ(){return vQ}function _y(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(e)?"-0":e}}function PR(t){return{integerValue:""+t}}function _Q(t,e){return GX(e)?PR(e):_y(t,e)}class um{constructor(){this._=void 0}}function EQ(t,e,n){return t instanceof Fp?(function(s,a){const o={fields:{[xR]:{stringValue:gR},[yR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&my(a)&&(a=im(a)),a&&(o.fields[vR]=a),{mapValue:o}})(n,e):t instanceof Nd?OR(t,e):t instanceof Id?LR(t,e):(function(s,a){const o=FR(s,a),c=mb(o)+mb(s.Ae);return jv(o)&&jv(s.Ae)?PR(c):_y(s.serializer,c)})(t,e)}function TQ(t,e,n){return t instanceof Nd?OR(t,e):t instanceof Id?LR(t,e):n}function FR(t,e){return t instanceof Op?(function(r){return jv(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Fp extends um{}class Nd extends um{constructor(e){super(),this.elements=e}}function OR(t,e){const n=UR(e);for(const r of t.elements)n.some((s=>si(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Id extends um{constructor(e){super(),this.elements=e}}function LR(t,e){let n=UR(e);for(const r of t.elements)n=n.filter((s=>!si(s,r)));return{arrayValue:{values:n}}}class Op extends um{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mb(t){return er(t.integerValue||t.doubleValue)}function UR(t){return gy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wQ(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Nd&&s instanceof Nd||r instanceof Id&&s instanceof Id?du(r.elements,s.elements,si):r instanceof Op&&s instanceof Op?si(r.Ae,s.Ae):r instanceof Fp&&s instanceof Fp})(t.transform,e.transform)}class SQ{constructor(e,n){this.version=e,this.transformResults=n}}class Fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function H0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fm{}function VR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zR(t.key,Fi.none()):new jd(t.key,t.data,Fi.none());{const n=t.data,r=ca.empty();let s=new Er(zr.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Ql(t.key,r,new Da(s.toArray()),Fi.none())}}function AQ(t,e,n){t instanceof jd?(function(s,a,o){const c=s.value.clone(),u=xb(s.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Ql?(function(s,a,o){if(!H0(s.precondition,a))return void a.convertToUnknownDocument(o.version);const c=xb(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(BR(s)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function td(t,e,n,r){return t instanceof jd?(function(a,o,c,u){if(!H0(a.precondition,o))return c;const d=a.value.clone(),h=vb(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ql?(function(a,o,c,u){if(!H0(a.precondition,o))return c;const d=vb(a.fieldTransforms,u,o),h=o.data;return h.setAll(BR(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((x=>x.field)))})(t,e,n,r):(function(a,o,c){return H0(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function bQ(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=FR(r.transform,s||null);a!=null&&(n===null&&(n=ca.empty()),n.set(r.field,a))}return n||null}function gb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&du(r,s,((a,o)=>wQ(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jd extends fm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ql extends fm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function BR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function xb(t,e,n){const r=new Map;dn(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,c=e.data.field(a.field);r.set(a.field,TQ(o,c,n[s]))}return r}function vb(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,EQ(a,o,e))}return r}class zR extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CQ extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NQ{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&AQ(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=td(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=td(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=MR();return this.mutations.forEach((s=>{const a=e.get(s.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(s.key)?null:c;const u=VR(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(At.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qt())}isEqual(e){return this.batchId===e.batchId&&du(this.mutations,e.mutations,((n,r)=>gb(n,r)))&&du(this.baseMutations,e.baseMutations,((n,r)=>gb(n,r)))}}class Ey{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){dn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return gQ})();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Ey(e,n,r,s)}}class IQ{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kQ{constructor(e,n){this.count=e,this.unchangedNames=n}}var ur,Xt;function RQ(t){switch(t){case ze.OK:return yt(64938);case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0;default:return yt(15467,{code:t})}}function jR(t){if(t===void 0)return Bi("GRPC error has no .code"),ze.UNKNOWN;switch(t){case ur.OK:return ze.OK;case ur.CANCELLED:return ze.CANCELLED;case ur.UNKNOWN:return ze.UNKNOWN;case ur.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case ur.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case ur.INTERNAL:return ze.INTERNAL;case ur.UNAVAILABLE:return ze.UNAVAILABLE;case ur.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case ur.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case ur.NOT_FOUND:return ze.NOT_FOUND;case ur.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case ur.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case ur.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case ur.ABORTED:return ze.ABORTED;case ur.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case ur.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case ur.DATA_LOSS:return ze.DATA_LOSS;default:return yt(39323,{code:t})}}(Xt=ur||(ur={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";function DQ(){return new TextEncoder}const MQ=new Fo([4294967295,4294967295],0);function yb(t){const e=DQ().encode(t),n=new aR;return n.update(e),new Uint8Array(n.digest())}function _b(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Fo([n,r],0),new Fo([s,a],0)]}class Ty{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vf(`Invalid padding: ${n}`);if(r<0)throw new Vf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fo.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Fo.fromNumber(r)));return s.compare(MQ)===1&&(s=new Fo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=yb(e),[r,s]=_b(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Ty(a,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=yb(e),[r,s]=_b(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dm{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dm(At.min(),s,new zn($t),zi(),qt())}}class Hd{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hd(r,n,qt(),qt(),qt())}}class G0{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class HR{constructor(e,n){this.targetId=e,this.Ce=n}}class GR{constructor(e,n,r=$r.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Eb{constructor(){this.ve=0,this.Fe=Tb(),this.Me=$r.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qt(),n=qt(),r=qt();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:yt(38017,{changeType:a})}})),new Hd(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Tb()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,dn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class PQ{constructor(e){this.Ge=e,this.ze=new Map,this.je=zi(),this.He=N0(),this.Je=N0(),this.Ze=new zn($t)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:yt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(Gv(a))if(r===0){const o=new mt(a.path);this.et(n,o,Zr.newNoDocument(o,At.min()))}else dn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,c;try{o=jo(r).toUint8Array()}catch(u){if(u instanceof mR)return fu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ty(o,s,a)}catch(u){return fu(u instanceof Vf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Gv(c.target)){const u=new mt(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Zr.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.Ke())}}));let r=qt();this.Je.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const s=new dm(e,n,this.Ze,this.je,r);return this.je=zi(),this.He=N0(),this.Je=N0(),this.Ze=new zn($t),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Eb,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Er($t),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Er($t),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||tt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Eb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function N0(){return new zn(mt.comparator)}function Tb(){return new zn(mt.comparator)}const FQ={asc:"ASCENDING",desc:"DESCENDING"},OQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LQ={and:"AND",or:"OR"};class UQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qv(t,e){return t.useProto3Json||am(e)?e:{value:e}}function Lp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $R(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VQ(t,e){return Lp(t,e.toTimestamp())}function ti(t){return dn(!!t,49232),At.fromTimestamp((function(n){const r=zo(n);return new Fn(r.seconds,r.nanos)})(t))}function wy(t,e){return Kv(t,e).canonicalString()}function Kv(t,e){const n=(function(s){return new Bn(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function qR(t){const e=Bn.fromString(t);return dn(ZR(e),10190,{key:e.toString()}),e}function Jv(t,e){return wy(t.databaseId,e.path)}function Lx(t,e){const n=qR(e);if(n.get(1)!==t.databaseId.projectId)throw new lt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new lt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new mt(JR(n))}function KR(t,e){return wy(t.databaseId,e)}function BQ(t){const e=qR(t);return e.length===4?Bn.emptyPath():JR(e)}function Yv(t){return new Bn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JR(t){return dn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wb(t,e,n){return{name:Jv(t,e),fields:n.value.mapValue.fields}}function zQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:yt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(dn(h===void 0||typeof h=="string",58123),$r.fromBase64String(h||"")):(dn(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),$r.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?ze.UNKNOWN:jR(d.code);return new lt(h,d.message||"")})(o);n=new GR(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lx(t,r.document.name),a=ti(r.document.updateTime),o=r.document.createTime?ti(r.document.createTime):At.min(),c=new ca({mapValue:{fields:r.document.fields}}),u=Zr.newFoundDocument(s,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new G0(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lx(t,r.document),a=r.readTime?ti(r.readTime):At.min(),o=Zr.newNoDocument(s,a),c=r.removedTargetIds||[];n=new G0([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lx(t,r.document),a=r.removedTargetIds||[];n=new G0([],a,s,null)}else{if(!("filter"in e))return yt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new kQ(s,a),c=r.targetId;n=new HR(c,o)}}return n}function jQ(t,e){let n;if(e instanceof jd)n={update:wb(t,e.key,e.value)};else if(e instanceof zR)n={delete:Jv(t,e.key)};else if(e instanceof Ql)n={update:wb(t,e.key,e.data),updateMask:ZQ(e.fieldMask)};else{if(!(e instanceof CQ))return yt(16599,{dt:e.type});n={verify:Jv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Fp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Nd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Id)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Op)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw yt(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:VQ(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:yt(27497)})(t,e.precondition)),n}function HQ(t,e){return t&&t.length>0?(dn(e!==void 0,14353),t.map((n=>(function(s,a){let o=s.updateTime?ti(s.updateTime):ti(a);return o.isEqual(At.min())&&(o=ti(a)),new SQ(o,s.transformResults||[])})(n,e)))):[]}function GQ(t,e){return{documents:[KR(t,e.path)]}}function $Q(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KR(t,s);const a=(function(d){if(d.length!==0)return WR(ai.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(v){return{field:Hc(v.field),direction:JQ(v.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=qv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:s}}function qQ(t){let e=BQ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){dn(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(x){const v=YR(x);return v instanceof ai&&AR(v)?v.getFilters():[v]})(n.where));let o=[];n.orderBy&&(o=(function(x){return x.map((v=>(function(S){return new Pp(Gc(S.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(v)))})(n.orderBy));let c=null;n.limit&&(c=(function(x){let v;return v=typeof x=="object"?x.value:x,am(v)?null:v})(n.limit));let u=null;n.startAt&&(u=(function(x){const v=!!x.before,T=x.values||[];return new Mp(T,v)})(n.startAt));let d=null;return n.endAt&&(d=(function(x){const v=!x.before,T=x.values||[];return new Mp(T,v)})(n.endAt)),cQ(e,s,o,a,c,"F",u,d)}function KQ(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gc(n.unaryFilter.field);return vr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gc(n.unaryFilter.field);return vr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Gc(n.unaryFilter.field);return vr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gc(n.unaryFilter.field);return vr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return vr.create(Gc(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ai.create(n.compositeFilter.filters.map((r=>YR(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(n.compositeFilter.op))})(t):yt(30097,{filter:t})}function JQ(t){return FQ[t]}function YQ(t){return OQ[t]}function WQ(t){return LQ[t]}function Hc(t){return{fieldPath:t.canonicalString()}}function Gc(t){return zr.fromServerFormat(t.fieldPath)}function WR(t){return t instanceof vr?(function(n){if(n.op==="=="){if(ub(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NAN"}};if(cb(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ub(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NAN"}};if(cb(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(n.field),op:YQ(n.op),value:n.value}}})(t):t instanceof ai?(function(n){const r=n.getFilters().map((s=>WR(s)));return r.length===1?r[0]:{compositeFilter:{op:WQ(n.op),filters:r}}})(t):yt(54877,{filter:t})}function ZQ(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ZR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function XR(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class No{constructor(e,n,r,s,a=At.min(),o=At.min(),c=$r.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new No(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XQ{constructor(e){this.yt=e}}function QQ(t){const e=qQ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$v(e,e.limit,"L"):e}class eee{constructor(){this.Sn=new tee}addToCollectionParentIndex(e,n){return this.Sn.add(n),Le.resolve()}getCollectionParents(e,n){return Le.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Le.resolve()}deleteFieldIndex(e,n){return Le.resolve()}deleteAllFieldIndexes(e){return Le.resolve()}createTargetIndexes(e,n){return Le.resolve()}getDocumentsMatchingTarget(e,n){return Le.resolve(null)}getIndexType(e,n){return Le.resolve(0)}getFieldIndexes(e,n){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}getMinOffset(e,n){return Le.resolve(Bo.min())}getMinOffsetFromCollectionGroup(e,n){return Le.resolve(Bo.min())}updateCollectionGroup(e,n,r){return Le.resolve()}updateIndexEntries(e,n){return Le.resolve()}}class tee{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Er(Bn.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Er(Bn.comparator)).toArray()}}const Sb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QR=41943040;class Cs{static withCacheSize(e){return new Cs(e,Cs.DEFAULT_COLLECTION_PERCENTILE,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Cs.DEFAULT_COLLECTION_PERCENTILE=10,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cs.DEFAULT=new Cs(QR,Cs.DEFAULT_COLLECTION_PERCENTILE,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cs.DISABLED=new Cs(-1,0,0);class mu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new mu(0)}static ar(){return new mu(-1)}}const Ab="LruGarbageCollector",e4=1048576;function bb([t,e],[n,r]){const s=$t(t,n);return s===0?$t(e,r):s}class nee{constructor(e){this.Pr=e,this.buffer=new Er(bb),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ree{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){tt(Ab,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bu(n)?tt(Ab,"Ignoring IndexedDB error during garbage collection: ",n):await Au(n)}await this.Ar(3e5)}))}}class see{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Le.resolve(sm.ce);const r=new nee(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(Sb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sb):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,o=Date.now(),this.nthSequenceNumber(e,s)))).next((x=>(r=x,c=Date.now(),this.removeTargets(e,r,n)))).next((x=>(a=x,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(d=Date.now(),zc()<=Qt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${x} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:x}))))}}function aee(t,e){return new see(t,e)}class iee{constructor(){this.changes=new Xl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oee{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class lee{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&td(r.mutation,s,Da.empty(),Fn.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,qt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=qt()){const s=bl();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let o=Uf();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=bl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,qt())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let a=zi();const o=ed(),c=(function(){return ed()})();return n.forEach(((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Ql)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),td(h.mutation,d,h.mutation.getFieldMask(),Fn.now())):o.set(d.key,Da.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new oee(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=ed();let s=new zn(((o,c)=>o-c)),a=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Da.empty();h=c.applyToLocalView(d,h),r.set(u,h);const x=(s.get(c.batchId)||qt()).add(u);s=s.insert(c.batchId,x)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,x=MR();h.forEach((v=>{if(!a.has(v)){const T=VR(n.get(v),r.get(v));T!==null&&x.set(v,T),a=a.add(v)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,x))}return Le.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return uQ(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fQ(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Le.resolve(bl());let c=Sd,u=a;return o.next((d=>Le.forEach(d,((h,x)=>(c<x.largestBatchId&&(c=x.largestBatchId),a.get(h)?Le.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{u=u.insert(h,v)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,qt()))).next((h=>({batchId:c,changes:DR(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new mt(n)).next((r=>{let s=Uf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Uf();return this.indexManager.getCollectionParents(e,a).next((c=>Le.forEach(c,(u=>{const d=(function(x,v){return new om(v,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next((h=>{h.forEach(((x,v)=>{o=o.insert(x,v)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Zr.newInvalidDocument(h)))}));let c=Uf();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&td(h.mutation,d,Da.empty(),Fn.now()),cm(n,d)&&(c=c.insert(u,d))})),c}))}}class cee{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Le.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:ti(s.createTime)}})(n)),Le.resolve()}getNamedQuery(e,n){return Le.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:QQ(s.bundledQuery),readTime:ti(s.readTime)}})(n)),Le.resolve()}}class uee{constructor(){this.overlays=new zn(mt.comparator),this.Lr=new Map}getOverlay(e,n){return Le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bl();return Le.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.bt(e,n,a)})),Le.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Le.resolve()}getOverlaysForCollection(e,n,r){const s=bl(),a=n.length+1,o=new mt(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return Le.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new zn(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=bl(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=bl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=s)););return Le.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IQ(n,r));let a=this.Lr.get(n);a===void 0&&(a=qt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class fee{constructor(){this.sessionToken=$r.EMPTY_BYTE_STRING}getSessionToken(e){return Le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Le.resolve()}}class Sy{constructor(){this.kr=new Er(Ar.Kr),this.qr=new Er(Ar.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ar(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Ar(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new mt(new Bn([])),r=new Ar(n,e),s=new Ar(n,e+1),a=[];return this.qr.forEachInRange([r,s],(o=>{this.Wr(o),a.push(o.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new mt(new Bn([])),r=new Ar(n,e),s=new Ar(n,e+1);let a=qt();return this.qr.forEachInRange([r,s],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new Ar(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ar{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return mt.comparator(e.key,n.key)||$t(e.Hr,n.Hr)}static Ur(e,n){return $t(e.Hr,n.Hr)||mt.comparator(e.key,n.key)}}class dee{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Er(Ar.Kr)}checkEmpty(e){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new NQ(a,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Jr=this.Jr.add(new Ar(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Le.resolve(o)}lookupMutationBatch(e,n){return Le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return Le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?py:this.Yn-1)}getAllMutationBatches(e){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ar(n,0),s=new Ar(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(o=>{const c=this.Zr(o.Hr);a.push(c)})),Le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Er($t);return n.forEach((s=>{const a=new Ar(s,0),o=new Ar(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,o],(c=>{r=r.add(c.Hr)}))})),Le.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;mt.isDocumentKey(a)||(a=a.child(""));const o=new Ar(new mt(a),0);let c=new Er($t);return this.Jr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)}),o),Le.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){dn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Le.forEach(n.mutations,(s=>{const a=new Ar(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Ar(n,0),s=this.Jr.firstAfterOrEqual(r);return Le.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Le.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class hee{constructor(e){this.ti=e,this.docs=(function(){return new zn(mt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Le.resolve(r?r.document.mutableCopy():Zr.newInvalidDocument(n))}getEntries(e,n){let r=zi();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Zr.newInvalidDocument(s))})),Le.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=zi();const o=n.path,c=new mt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||BX(VX(h),r)<=0||(s.has(h.key)||cm(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Le.resolve(a)}getAllFromCollectionGroup(e,n,r,s){yt(9500)}ni(e,n){return Le.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new pee(this)}getSize(e){return Le.resolve(this.size)}}class pee extends iee{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),Le.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class mee{constructor(e){this.persistence=e,this.ri=new Xl((n=>xy(n)),vy),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.ii=0,this.si=new Sy,this.targetCount=0,this.oi=mu._r()}forEachTarget(e,n){return this.ri.forEach(((r,s)=>n(s))),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Le.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new mu(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Le.resolve()}updateTargetData(e,n){return this.lr(n),Le.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ri.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),Le.waitFor(a).next((()=>s))}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Le.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Le.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((o=>{a.push(s.markPotentiallyOrphaned(e,o))})),Le.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Le.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Le.resolve(r)}containsKey(e,n){return Le.resolve(this.si.containsKey(n))}}class t4{constructor(e,n){this._i={},this.overlays={},this.ai=new sm(0),this.ui=!1,this.ui=!0,this.ci=new fee,this.referenceDelegate=e(this),this.li=new mee(this),this.indexManager=new eee,this.remoteDocumentCache=(function(s){return new hee(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new XQ(n),this.Pi=new cee(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uee,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new dee(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){tt("MemoryPersistence","Starting transaction:",e);const s=new gee(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,n){return Le.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class gee extends jX{constructor(e){super(),this.currentSequenceNumber=e}}class Ay{constructor(e){this.persistence=e,this.Ri=new Sy,this.Ai=null}static Vi(e){return new Ay(e)}get di(){if(this.Ai)return this.Ai;throw yt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Le.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Le.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Le.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.di,(r=>{const s=mt.fromPath(r);return this.mi(e,s).next((a=>{a||n.removeEntry(s,At.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Le.or([()=>Le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Up{constructor(e,n){this.persistence=e,this.fi=new Xl((r=>$X(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=aee(this,n)}static Vi(e,n){return new Up(e,n)}Ti(){}Ii(e){return Le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return Le.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?Le.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(o=>this.wr(e,o,n).next((c=>{c||(r++,a.removeEntry(o,At.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Le.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Le.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Le.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Le.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=z0(e.data.value)),n}wr(e,n,r){return Le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return Le.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class by{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=qt(),s=qt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new by(e,n.fromCache,r,s)}}class xee{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class vee{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return lZ()?8:HX(iZ())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.gs(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ps(e,n,s,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new xee;return this.ys(e,n,o).next((c=>{if(a.result=c,this.As)return this.ws(e,n,o,c.size)}))})).next((()=>a.result))}ws(e,n,r,s){return r.documentReadCount<this.Vs?(zc()<=Qt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",jc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Le.resolve()):(zc()<=Qt.DEBUG&&tt("QueryEngine","Query:",jc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(zc()<=Qt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",jc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):Le.resolve())}gs(e,n){if(pb(n))return Le.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$v(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=qt(...a);return this.fs.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.bs(n,c);return this.Ss(n,d,o,u.readTime)?this.gs(e,$v(n,null,"F")):this.Ds(e,d,n,u)}))))})))))}ps(e,n,r,s){return pb(n)||s.isEqual(At.min())?Le.resolve(null):this.fs.getDocuments(e,r).next((a=>{const o=this.bs(n,a);return this.Ss(n,o,r,s)?Le.resolve(null):(zc()<=Qt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jc(n)),this.Ds(e,o,n,UX(s,Sd)).next((c=>c)))}))}bs(e,n){let r=new Er(kR(e));return n.forEach(((s,a)=>{cm(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,n,r){return zc()<=Qt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",jc(n)),this.fs.getDocumentsMatchingQuery(e,n,Bo.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const Cy="LocalStore",yee=3e8;class _ee{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new zn($t),this.Fs=new Xl((a=>xy(a)),vy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lee(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function Eee(t,e,n,r){return new _ee(t,e,n,r)}async function n4(t,e){const n=Nt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=qt();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ns:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function Tee(t,e){const n=Nt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const x=d.batch,v=x.keys();let T=Le.resolve();return v.forEach((S=>{T=T.next((()=>h.getEntry(u,S))).next((A=>{const b=d.docVersions.get(S);dn(b!==null,48541),A.version.compareTo(b)<0&&(x.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))}))})),T.next((()=>c.mutationQueue.removeMutationBatch(u,x)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=qt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function r4(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function wee(t,e){const n=Nt(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const c=[];e.targetChanges.forEach(((h,x)=>{const v=s.get(x);if(!v)return;c.push(n.li.removeMatchingKeys(a,h.removedDocuments,x).next((()=>n.li.addMatchingKeys(a,h.addedDocuments,x))));let T=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(x)!==null?T=T.withResumeToken($r.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),s=s.insert(x,T),(function(A,b,R){return A.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=yee?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(v,T,h)&&c.push(n.li.updateTargetData(a,T))}));let u=zi(),d=qt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(See(a,o,e.documentUpdates).next((h=>{u=h.Bs,d=h.Ls}))),!r.isEqual(At.min())){const h=n.li.getLastRemoteSnapshotVersion(a).next((x=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return Le.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.vs=s,a)))}function See(t,e,n){let r=qt(),s=qt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=zi();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(At.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):tt(Cy,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{Bs:o,Ls:s}}))}function Aee(t,e){const n=Nt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=py),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function bee(t,e){const n=Nt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.li.getTargetData(r,e).next((a=>a?(s=a,Le.resolve(s)):n.li.allocateTargetId(r).next((o=>(s=new No(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Wv(t,e,n){const r=Nt(t),s=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!bu(o))throw o;tt(Cy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Cb(t,e,n){const r=Nt(t);let s=At.min(),a=qt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const x=Nt(u),v=x.Fs.get(h);return v!==void 0?Le.resolve(x.vs.get(v)):x.li.getTargetData(d,h)})(r,o,ei(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:At.min(),n?a:qt()))).next((c=>(Cee(r,hQ(e),c),{documents:c,ks:a})))))}function Cee(t,e,n){let r=t.Ms.get(e)||At.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}class Nb{constructor(){this.activeTargetIds=yQ()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nee{constructor(){this.vo=new Nb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Nb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Iee{Mo(e){}shutdown(){}}const Ib="ConnectivityMonitor";class kb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){tt(Ib,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){tt(Ib,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let I0=null;function Zv(){return I0===null?I0=(function(){return 268435456+Math.round(2147483648*Math.random())})():I0++,"0x"+I0.toString(16)}const Ux="RestConnection",kee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ree{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Rp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const o=Zv(),c=this.Qo(e,n.toUriEncodedString());tt(Ux,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,a);const{host:d}=new URL(c),h=Bd(d);return this.zo(e,c,u,r,h).then((x=>(tt(Ux,`Received RPC '${e}' ${o}: `,x),x)),(x=>{throw fu(Ux,`RPC '${e}' ${o} failed with error: `,x,"url: ",c,"request:",r),x}))}jo(e,n,r,s,a,o){return this.Wo(e,n,r,s,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Su})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,n){const r=kee[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class Dee{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Yr="WebChannelConnection",Sf=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class su extends Ree{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!su.c_){const e=cR();Sf(e,lR.STAT_EVENT,(n=>{n.stat===Vv.PROXY?tt(Yr,"STAT_EVENT: detected buffering proxy"):n.stat===Vv.NOPROXY&&tt(Yr,"STAT_EVENT: detected no buffering proxy")})),su.c_=!0}}zo(e,n,r,s,a){const o=Zv();return new Promise(((c,u)=>{const d=new iR;d.setWithCredentials(!0),d.listenOnce(oR.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case B0.NO_ERROR:const x=d.getResponseJson();tt(Yr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(x)),c(x);break;case B0.TIMEOUT:tt(Yr,`RPC '${e}' ${o} timed out`),u(new lt(ze.DEADLINE_EXCEEDED,"Request time out"));break;case B0.HTTP_ERROR:const v=d.getStatus();if(tt(Yr,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const A=(function(R){const B=R.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(B)>=0?B:ze.UNKNOWN})(S.status);u(new lt(A,S.message))}else u(new lt(ze.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new lt(ze.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{tt(Yr,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);tt(Yr,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=Zv(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=a.join("");tt(Yr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=o.createWebChannel(d,c);this.I_(h);let x=!1,v=!1;const T=new Dee({Ho:S=>{v?tt(Yr,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(x||(tt(Yr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),x=!0),tt(Yr,`RPC '${e}' stream ${s} sending:`,S),h.send(S))},Jo:()=>h.close()});return Sf(h,Lf.EventType.OPEN,(()=>{v||(tt(Yr,`RPC '${e}' stream ${s} transport opened.`),T.i_())})),Sf(h,Lf.EventType.CLOSE,(()=>{v||(v=!0,tt(Yr,`RPC '${e}' stream ${s} transport closed`),T.o_(),this.E_(h))})),Sf(h,Lf.EventType.ERROR,(S=>{v||(v=!0,fu(Yr,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),T.o_(new lt(ze.UNAVAILABLE,"The operation could not be completed")))})),Sf(h,Lf.EventType.MESSAGE,(S=>{if(!v){const A=S.data[0];dn(!!A,16349);const b=A,R=b?.error||b[0]?.error;if(R){tt(Yr,`RPC '${e}' stream ${s} received error:`,R);const B=R.status;let D=(function(O){const I=ur[O];if(I!==void 0)return jR(I)})(B),L=R.message;B==="NOT_FOUND"&&L.includes("database")&&L.includes("does not exist")&&L.includes(this.databaseId.database)&&fu(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),D===void 0&&(D=ze.INTERNAL,L="Unknown error status: "+B+" with message "+R.message),v=!0,T.o_(new lt(D,L)),h.close()}else tt(Yr,`RPC '${e}' stream ${s} received:`,A),T.__(A)}})),su.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return uR()}}function Mee(t){return new su(t)}function Vx(){return typeof document<"u"?document:null}function hm(t){return new UQ(t,!0)}su.c_=!1;class s4{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&tt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Rb="PersistentStream";class a4{constructor(e,n,r,s,a,o,c,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new s4(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ze.RESOURCE_EXHAUSTED?(Bi(n.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ze.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new lt(ze.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return tt(Rb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(tt(Rb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pee extends a4{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zQ(this.serializer,e),r=(function(a){if(!("targetChange"in a))return At.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?At.min():o.readTime?ti(o.readTime):At.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Yv(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=Gv(u)?{documents:GQ(a,u)}:{query:$Q(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=$R(a,o.resumeToken);const d=qv(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(At.min())>0){c.readTime=Lp(a,o.snapshotVersion.toTimestamp());const d=qv(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=KQ(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Yv(this.serializer),n.removeTarget=e,this.K_(n)}}class Fee extends a4{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return dn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HQ(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Yv(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>jQ(this.serializer,r)))};this.K_(n)}}class Oee{}class Lee extends Oee{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new lt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Wo(e,Kv(n,r),s,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new lt(ze.UNKNOWN,a.toString())}))}jo(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.jo(e,Kv(n,r),s,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new lt(ze.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Uee(t,e,n,r){return new Lee(t,e,n,r)}class Vee{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bi(n),this.aa=!1):tt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vl="RemoteStore";class Bee{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((o=>{r.enqueueAndForget((async()=>{ec(this)&&(tt(Vl,"Restarting streams for network reachability change."),await(async function(u){const d=Nt(u);d.Ea.add(4),await Gd(d),d.Va.set("Unknown"),d.Ea.delete(4),await pm(d)})(this))}))})),this.Va=new Vee(r,s)}}async function pm(t){if(ec(t))for(const e of t.Ra)await e(!0)}async function Gd(t){for(const e of t.Ra)await e(!1)}function i4(t,e){const n=Nt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ry(n)?ky(n):Cu(n).O_()&&Iy(n,e))}function Ny(t,e){const n=Nt(t),r=Cu(n);n.Ia.delete(e),r.O_()&&o4(n,e),n.Ia.size===0&&(r.O_()?r.L_():ec(n)&&n.Va.set("Unknown"))}function Iy(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cu(t).Z_(e)}function o4(t,e){t.da.$e(e),Cu(t).X_(e)}function ky(t){t.da=new PQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Cu(t).start(),t.Va.ua()}function Ry(t){return ec(t)&&!Cu(t).x_()&&t.Ia.size>0}function ec(t){return Nt(t).Ea.size===0}function l4(t){t.da=void 0}async function zee(t){t.Va.set("Online")}async function jee(t){t.Ia.forEach(((e,n)=>{Iy(t,e)}))}async function Hee(t,e){l4(t),Ry(t)?(t.Va.ha(e),ky(t)):t.Va.set("Unknown")}async function Gee(t,e,n){if(t.Va.set("Online"),e instanceof GR&&e.state===2&&e.cause)try{await(async function(s,a){const o=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.da.removeTarget(c))})(t,e)}catch(r){tt(Vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vp(t,r)}else if(e instanceof G0?t.da.Xe(e):e instanceof HR?t.da.st(e):t.da.tt(e),!n.isEqual(At.min()))try{const r=await r4(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.da.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken($r.EMPTY_BYTE_STRING,h.snapshotVersion)),o4(a,u);const x=new No(h.target,u,d,h.sequenceNumber);Iy(a,x)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){tt(Vl,"Failed to raise snapshot:",r),await Vp(t,r)}}async function Vp(t,e,n){if(!bu(e))throw e;t.Ea.add(1),await Gd(t),t.Va.set("Offline"),n||(n=()=>r4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{tt(Vl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pm(t)}))}function c4(t,e){return e().catch((n=>Vp(t,n,e)))}async function mm(t){const e=Nt(t),n=Go(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:py;for(;$ee(e);)try{const s=await Aee(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,qee(e,s)}catch(s){await Vp(e,s)}u4(e)&&f4(e)}function $ee(t){return ec(t)&&t.Ta.length<10}function qee(t,e){t.Ta.push(e);const n=Go(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function u4(t){return ec(t)&&!Go(t).x_()&&t.Ta.length>0}function f4(t){Go(t).start()}async function Kee(t){Go(t).ra()}async function Jee(t){const e=Go(t);for(const n of t.Ta)e.ea(n.mutations)}async function Yee(t,e,n){const r=t.Ta.shift(),s=Ey.from(r,e,n);await c4(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await mm(t)}async function Wee(t,e){e&&Go(t).Y_&&await(async function(r,s){if((function(o){return RQ(o)&&o!==ze.ABORTED})(s.code)){const a=r.Ta.shift();Go(r).B_(),await c4(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await mm(r)}})(t,e),u4(t)&&f4(t)}async function Db(t,e){const n=Nt(t);n.asyncQueue.verifyOperationInProgress(),tt(Vl,"RemoteStore received new credentials");const r=ec(n);n.Ea.add(3),await Gd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pm(n)}async function Zee(t,e){const n=Nt(t);e?(n.Ea.delete(2),await pm(n)):e||(n.Ea.add(2),await Gd(n),n.Va.set("Unknown"))}function Cu(t){return t.ma||(t.ma=(function(n,r,s){const a=Nt(n);return a.sa(),new Pee(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:zee.bind(null,t),Yo:jee.bind(null,t),t_:Hee.bind(null,t),J_:Gee.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Ry(t)?ky(t):t.Va.set("Unknown")):(await t.ma.stop(),l4(t))}))),t.ma}function Go(t){return t.fa||(t.fa=(function(n,r,s){const a=Nt(n);return a.sa(),new Fee(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Kee.bind(null,t),t_:Wee.bind(null,t),ta:Jee.bind(null,t),na:Yee.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await mm(t)):(await t.fa.stop(),t.Ta.length>0&&(tt(Vl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Dy{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,c=new Dy(e,n,o,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(t,e){if(Bi("AsyncQueue",`${e}: ${t}`),bu(t))return new lt(ze.UNAVAILABLE,`${e}: ${t}`);throw t}class au{static emptySet(e){return new au(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||mt.comparator(n.key,r.key):(n,r)=>mt.comparator(n.key,r.key),this.keyedMap=Uf(),this.sortedSet=new zn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof au)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new au;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Mb{constructor(){this.ga=new zn(mt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):yt(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class gu{constructor(e,n,r,s,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new gu(e,n,au.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class Xee{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Qee{constructor(){this.queries=Pb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Nt(n),a=s.queries;s.queries=Pb(),a.forEach(((o,c)=>{for(const u of c.ba)u.onError(r)}))})(this,new lt(ze.ABORTED,"Firestore shutting down"))}}function Pb(){return new Xl((t=>IR(t)),lm)}async function ete(t,e){const n=Nt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new Xee,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=My(o,`Initialization of query '${jc(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Py(n)}async function tte(t,e){const n=Nt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.ba.indexOf(e);o>=0&&(a.ba.splice(o,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nte(t,e){const n=Nt(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const c of o.ba)c.Fa(s)&&(r=!0);o.wa=s}}r&&Py(n)}function rte(t,e,n){const r=Nt(t),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(n);r.queries.delete(e)}function Py(t){t.Ca.forEach((e=>{e.next()}))}var Xv,Fb;(Fb=Xv||(Xv={})).Ma="default",Fb.Cache="cache";class ste{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xv.Cache}}class d4{constructor(e){this.key=e}}class h4{constructor(e){this.key=e}}class ate{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qt(),this.mutatedKeys=qt(),this.eu=kR(e),this.tu=new au(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Mb,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,x)=>{const v=s.get(h),T=cm(this.query,x)?x:null,S=!!v&&this.mutatedKeys.has(v.key),A=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let b=!1;v&&T?v.data.isEqual(T.data)?S!==A&&(r.track({type:3,doc:T}),b=!0):this.su(v,T)||(r.track({type:2,doc:T}),b=!0,(u&&this.eu(T,u)>0||d&&this.eu(T,d)<0)&&(c=!0)):!v&&T?(r.track({type:0,doc:T}),b=!0):v&&!T&&(r.track({type:1,doc:v}),b=!0,(u||d)&&(c=!0)),b&&(T?(o=o.add(T),a=A?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,x)=>(function(T,S){const A=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Vt:b})}};return A(T)-A(S)})(h.type,x.type)||this.eu(h.doc,x.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,o.length!==0||d?{snapshot:new gu(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=qt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new h4(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new d4(r))})),n}cu(e){this.Za=e.ks,this.Ya=qt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Fy="SyncEngine";class ite{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ote{constructor(e){this.key=e,this.hu=!1}}class lte{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xl((c=>IR(c)),lm),this.Iu=new Map,this.Eu=new Set,this.Ru=new zn(mt.comparator),this.Au=new Map,this.Vu=new Sy,this.du={},this.mu=new Map,this.fu=mu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cte(t,e,n=!0){const r=y4(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await p4(r,e,n,!0),s}async function ute(t,e){const n=y4(t);await p4(n,e,!0,!1)}async function p4(t,e,n,r){const s=await bee(t.localStore,ei(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await fte(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&i4(t.remoteStore,s),c}async function fte(t,e,n,r,s){t.pu=(x,v,T)=>(async function(A,b,R,B){let D=b.view.ru(R);D.Ss&&(D=await Cb(A.localStore,b.query,!1).then((({documents:I})=>b.view.ru(I,D))));const L=B&&B.targetChanges.get(b.targetId),z=B&&B.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(D,A.isPrimaryClient,L,z);return Lb(A,b.targetId,O.au),O.snapshot})(t,x,v,T);const a=await Cb(t.localStore,e,!0),o=new ate(e,a.ks),c=o.ru(a.documents),u=Hd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Lb(t,n,d.au);const h=new ite(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function dte(t,e,n){const r=Nt(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((o=>!lm(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wv(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ny(r.remoteStore,s.targetId),Qv(r,s.targetId)})).catch(Au)):(Qv(r,s.targetId),await Wv(r.localStore,s.targetId,!0))}async function hte(t,e){const n=Nt(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ny(n.remoteStore,r.targetId))}async function pte(t,e,n){const r=Ete(t);try{const s=await(function(o,c){const u=Nt(o),d=Fn.now(),h=c.reduce(((T,S)=>T.add(S.key)),qt());let x,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let S=zi(),A=qt();return u.xs.getEntries(T,h).next((b=>{S=b,S.forEach(((R,B)=>{B.isValidDocument()||(A=A.add(R))}))})).next((()=>u.localDocuments.getOverlayedDocuments(T,S))).next((b=>{x=b;const R=[];for(const B of c){const D=bQ(B,x.get(B.key).overlayedDocument);D!=null&&R.push(new Ql(B.key,D,TR(D.value.mapValue),Fi.exists(!0)))}return u.mutationQueue.addMutationBatch(T,d,R,c)})).next((b=>{v=b;const R=b.applyToLocalDocumentSet(x,A);return u.documentOverlayCache.saveOverlays(T,b.batchId,R)}))})).then((()=>({batchId:v.batchId,changes:DR(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,u){let d=o.du[o.currentUser.toKey()];d||(d=new zn($t)),d=d.insert(c,u),o.du[o.currentUser.toKey()]=d})(r,s.batchId,n),await $d(r,s.changes),await mm(r.remoteStore)}catch(s){const a=My(s,"Failed to persist write");n.reject(a)}}async function m4(t,e){const n=Nt(t);try{const r=await wee(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const o=n.Au.get(a);o&&(dn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?dn(o.hu,14607):s.removedDocuments.size>0&&(dn(o.hu,42227),o.hu=!1))})),await $d(n,r,e)}catch(r){await Au(r)}}function Ob(t,e,n){const r=Nt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const u=Nt(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,x)=>{for(const v of x.ba)v.va(c)&&(d=!0)})),d&&Py(u)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mte(t,e,n){const r=Nt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new zn(mt.comparator);o=o.insert(a,Zr.newNoDocument(a,At.min()));const c=qt().add(a),u=new dm(At.min(),new Map,new zn($t),o,c);await m4(r,u),r.Ru=r.Ru.remove(a),r.Au.delete(e),Oy(r)}else await Wv(r.localStore,e,!1).then((()=>Qv(r,e,n))).catch(Au)}async function gte(t,e){const n=Nt(t),r=e.batch.batchId;try{const s=await Tee(n.localStore,e);x4(n,r,null),g4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $d(n,s)}catch(s){await Au(s)}}async function xte(t,e,n){const r=Nt(t);try{const s=await(function(o,c){const u=Nt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((x=>(dn(x!==null,37113),h=x.keys(),u.mutationQueue.removeMutationBatch(d,x)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);x4(r,e,n),g4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $d(r,s)}catch(s){await Au(s)}}function g4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function x4(t,e,n){const r=Nt(t);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Qv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||v4(t,r)}))}function v4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Ny(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Oy(t))}function Lb(t,e,n){for(const r of n)r instanceof d4?(t.Vu.addReference(r.key,e),vte(t,r)):r instanceof h4?(tt(Fy,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||v4(t,r.key)):yt(19791,{wu:r})}function vte(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(tt(Fy,"New document in limbo: "+n),t.Eu.add(r),Oy(t))}function Oy(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new mt(Bn.fromString(e)),r=t.fu.next();t.Au.set(r,new ote(n)),t.Ru=t.Ru.insert(n,r),i4(t.remoteStore,new No(ei(yy(n.path)),r,"TargetPurposeLimboResolution",sm.ce))}}async function $d(t,e,n){const r=Nt(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){s.push(d);const h=by.Es(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.J_(s),await(async function(u,d){const h=Nt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>Le.forEach(d,(v=>Le.forEach(v.Ts,(T=>h.persistence.referenceDelegate.addReference(x,v.targetId,T))).next((()=>Le.forEach(v.Is,(T=>h.persistence.referenceDelegate.removeReference(x,v.targetId,T)))))))))}catch(x){if(!bu(x))throw x;tt(Cy,"Failed to update sequence numbers: "+x)}for(const x of d){const v=x.targetId;if(!x.fromCache){const T=h.vs.get(v),S=T.snapshotVersion,A=T.withLastLimboFreeSnapshotVersion(S);h.vs=h.vs.insert(v,A)}}})(r.localStore,a))}async function yte(t,e){const n=Nt(t);if(!n.currentUser.isEqual(e)){tt(Fy,"User change. New user:",e.toKey());const r=await n4(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new lt(ze.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $d(n,r.Ns)}}function _te(t,e){const n=Nt(t),r=n.Au.get(e);if(r&&r.hu)return qt().add(r.key);{let s=qt();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function y4(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=m4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_te.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mte.bind(null,e),e.Pu.J_=nte.bind(null,e.eventManager),e.Pu.yu=rte.bind(null,e.eventManager),e}function Ete(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gte.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xte.bind(null,e),e}class Bp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Eee(this.persistence,new vee,e.initialUser,this.serializer)}Cu(e){return new t4(Ay.Vi,this.serializer)}Du(e){return new Nee}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bp.provider={build:()=>new Bp};class Tte extends Bp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){dn(this.persistence.referenceDelegate instanceof Up,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ree(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cs.withCacheSize(this.cacheSizeBytes):Cs.DEFAULT;return new t4((r=>Up.Vi(r,n)),this.serializer)}}class e1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ob(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yte.bind(null,this.syncEngine),await Zee(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Qee})()}createDatastore(e){const n=hm(e.databaseInfo.databaseId),r=Mee(e.databaseInfo);return Uee(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,o,c){return new Bee(r,s,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ob(this.syncEngine,n,0)),(function(){return kb.v()?new kb:new Iee})())}createSyncEngine(e,n){return(function(s,a,o,c,u,d,h){const x=new lte(s,a,o,c,u,d);return h&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Nt(n);tt(Vl,"RemoteStore shutting down."),r.Ea.add(5),await Gd(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}e1.provider={build:()=>new e1};class wte{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const $o="FirestoreClient";class Ste{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=bs.UNAUTHENTICATED,this.clientId=dy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{tt($o,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(tt($o,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=My(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Bx(t,e){t.asyncQueue.verifyOperationInProgress(),tt($o,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await n4(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ub(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ate(t);tt($o,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Db(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Db(e.remoteStore,s))),t._onlineComponents=e}async function Ate(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){tt($o,"Using user provided OfflineComponentProvider");try{await Bx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ze.FAILED_PRECONDITION||s.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;fu("Error using user provided cache. Falling back to memory cache: "+n),await Bx(t,new Bp)}}else tt($o,"Using default OfflineComponentProvider"),await Bx(t,new Tte(void 0));return t._offlineComponents}async function _4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(tt($o,"Using user provided OnlineComponentProvider"),await Ub(t,t._uninitializedComponentsProvider._online)):(tt($o,"Using default OnlineComponentProvider"),await Ub(t,new e1))),t._onlineComponents}function bte(t){return _4(t).then((e=>e.syncEngine))}async function Cte(t){const e=await _4(t),n=e.eventManager;return n.onListen=cte.bind(null,e.syncEngine),n.onUnlisten=dte.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ute.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hte.bind(null,e.syncEngine),n}function Nte(t,e,n={}){const r=new Oo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new wte({next:v=>{h.Nu(),o.enqueueAndForget((()=>tte(a,x)));const T=v.docs.has(c);!T&&v.fromCache?d.reject(new lt(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&u&&u.source==="server"?d.reject(new lt(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),x=new ste(yy(c.path),h,{includeMetadataChanges:!0,Ka:!0});return ete(a,x)})(await Cte(t),t.asyncQueue,e,n,r))),r.promise}function Ite(t,e){const n=new Oo;return t.asyncQueue.enqueueAndForget((async()=>pte(await bte(t),e,n))),n.promise}function E4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const kte="ComponentProvider",Vb=new Map;function Rte(t,e,n,r,s){return new JX(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,E4(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const Dte="firestore.googleapis.com",Bb=!0;class zb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new lt(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dte,this.ssl=Bb}else this.host=e.host,this.ssl=e.ssl??Bb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e4)throw new lt(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new lt(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new lt(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new lt(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class T4{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CX;switch(r.type){case"firstParty":return new kX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new lt(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Vb.get(n);r&&(tt(kte,"Removing Datastore"),Vb.delete(n),r.terminate())})(this),Promise.resolve()}}class Ly{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ly(this.firestore,e,this._query)}}class br{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}toJSON(){return{type:br._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zd(n,br._jsonSchema))return new br(e,r||null,new mt(Bn.fromString(n.referencePath)))}}br._jsonSchemaVersion="firestore/documentReference/1.0",br._jsonSchema={type:hr("string",br._jsonSchemaVersion),referencePath:hr("string")};class kd extends Ly{constructor(e,n,r){super(e,n,yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new mt(e))}withConverter(e){return new kd(this.firestore,e,this._path)}}function w4(t,e,...n){if(t=Vo(t),arguments.length===1&&(e=dy.newId()),OX("doc","path",e),t instanceof T4){const r=Bn.fromString(e,...n);return tb(r),new br(t,null,new mt(r))}{if(!(t instanceof br||t instanceof kd))throw new lt(ze.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bn.fromString(e,...n));return tb(r),new br(t.firestore,t instanceof kd?t.converter:null,new mt(r))}}const jb="AsyncQueue";class Hb{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new s4(this,"async_queue_retry"),this._c=()=>{const r=Vx();r&&tt(jb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Oo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!bu(e))throw e;tt(jb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Bi("INTERNAL UNHANDLED ERROR: ",Gb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Dy.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&yt(47125,{Pc:Gb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Gb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Uy extends T4{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Hb,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hb(e),this._firestoreClient=void 0,await e}}}function Mte(t,e,n){n||(n=Rp);const r=Xk(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Np(a,e))return s;throw new lt(ze.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new lt(ze.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e4)throw new lt(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Bd(e.host)&&Kk(e.host),r.initialize({options:e,instanceIdentifier:n})}function S4(t){if(t._terminated)throw new lt(ze.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Pte(t),t._firestoreClient}function Pte(t){const e=t._freezeSettings(),n=Rte(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ste(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(t._componentsProvider))}class ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ua($r.fromBase64String(e))}catch(n){throw new lt(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ua($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ua._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zd(e,ua._jsonSchema))return ua.fromBase64String(e.bytes)}}ua._jsonSchemaVersion="firestore/bytes/1.0",ua._jsonSchema={type:hr("string",ua._jsonSchemaVersion),bytes:hr("string")};class A4{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new lt(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class b4{constructor(e){this._methodName=e}}class ni{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new lt(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new lt(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ni._jsonSchemaVersion}}static fromJSON(e){if(zd(e,ni._jsonSchema))return new ni(e.latitude,e.longitude)}}ni._jsonSchemaVersion="firestore/geoPoint/1.0",ni._jsonSchema={type:hr("string",ni._jsonSchemaVersion),latitude:hr("number"),longitude:hr("number")};class Oa{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Oa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zd(e,Oa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Oa(e.vectorValues);throw new lt(ze.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Oa._jsonSchemaVersion="firestore/vectorValue/1.0",Oa._jsonSchema={type:hr("string",Oa._jsonSchemaVersion),vectorValues:hr("object")};const Fte=/^__.*__$/;class Ote{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ql(e,this.data,this.fieldMask,n,this.fieldTransforms):new jd(e,this.data,n,this.fieldTransforms)}}function C4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{dataSource:t})}}class Vy{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Vy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return zp(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(C4(this.dataSource)&&Fte.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Lte{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hm(e)}createContext(e,n,r,s=!1){return new Vy({dataSource:e,methodName:n,targetDoc:r,path:zr.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ute(t){const e=t._freezeSettings(),n=hm(t._databaseId);return new Lte(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vte(t,e,n,r,s,a={}){const o=t.createContext(a.merge||a.mergeFields?2:0,e,n,s);R4("Data must be an object, but it was:",o,r);const c=I4(r,o);let u,d;if(a.merge)u=new Da(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const x of a.mergeFields){const v=By(e,x,n);if(!o.contains(v))throw new lt(ze.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);jte(h,v)||h.push(v)}u=new Da(h),d=o.fieldTransforms.filter((x=>u.covers(x.field)))}else u=null,d=o.fieldTransforms;return new Ote(new ca(c),u,d)}function N4(t,e){if(k4(t=Vo(t)))return R4("Unsupported field value:",e,t),I4(t,e);if(t instanceof b4)return(function(r,s){if(!C4(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let o=0;for(const c of r){let u=N4(c,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=Vo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _Q(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Fn.fromDate(r);return{timestampValue:Lp(s.serializer,a)}}if(r instanceof Fn){const a=new Fn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lp(s.serializer,a)}}if(r instanceof ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ua)return{bytesValue:$R(s.serializer,r._byteString)};if(r instanceof br){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:wy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Oa)return(function(o,c){const u=o instanceof Oa?o.toArray():o;return{mapValue:{fields:{[_R]:{stringValue:ER},[Dp]:{arrayValue:{values:u.map((h=>{if(typeof h!="number")throw c.createError("VectorValues must only contain numeric values.");return _y(c.serializer,h)}))}}}}}})(r,s);if(XR(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${hy(r)}`)})(t,e)}function I4(t,e){const n={};return pR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(t,((r,s)=>{const a=N4(s,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function k4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fn||t instanceof ni||t instanceof ua||t instanceof br||t instanceof b4||t instanceof Oa||XR(t))}function R4(t,e,n){if(!k4(n)||!dR(n)){const r=hy(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function By(t,e,n){if((e=Vo(e))instanceof A4)return e._internalPath;if(typeof e=="string")return zte(t,e);throw zp("Field path arguments must be of type string or ",t,!1,void 0,n)}const Bte=new RegExp("[~\\*/\\[\\]]");function zte(t,e,n){if(e.search(Bte)>=0)throw zp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new A4(...e.split("."))._internalPath}catch{throw zp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zp(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new lt(ze.INVALID_ARGUMENT,c+t+u)}function jte(t,e){return t.some((n=>n.isEqual(e)))}class Hte{convertValue(e,n="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zl(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[Dp].arrayValue?.values?.map((r=>er(r.doubleValue)));return new Oa(n)}convertGeoPoint(e){return new ni(er(e.latitude),er(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=im(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ad(e));default:return null}}convertTimestamp(e){const n=zo(e);return new Fn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Bn.fromString(e);dn(ZR(r),9688,{name:e});const s=new bd(r.get(1),r.get(3)),a=new mt(r.popFirst(5));return s.isEqual(n)||Bi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class Gte extends Hte{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,n)}}const $b="@firebase/firestore",qb="4.11.0";class D4{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $te(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(By("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $te extends D4{data(){return super.data()}}function qte(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Bf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kl extends D4{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(By("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(ze.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kl._jsonSchemaVersion="firestore/documentSnapshot/1.0",kl._jsonSchema={type:hr("string",kl._jsonSchemaVersion),bundleSource:hr("string","DocumentSnapshot"),bundleName:hr("string"),bundle:hr("string")};class $0 extends kl{data(e={}){return super.data(e)}}class nd{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new $0(this._firestore,this._userDataWriter,r.key,r,new Bf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new lt(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const u=new $0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Bf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new $0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Bf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:Kte(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(ze.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Kte(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:t})}}nd._jsonSchemaVersion="firestore/querySnapshot/1.0",nd._jsonSchema={type:hr("string",nd._jsonSchemaVersion),bundleSource:hr("string","QuerySnapshot"),bundleName:hr("string"),bundle:hr("string")};function Jte(t){t=Ip(t,br);const e=Ip(t.firestore,Uy),n=S4(e);return Nte(n,t._key).then((r=>Zte(e,t,r)))}function Yte(t,e,n){t=Ip(t,br);const r=Ip(t.firestore,Uy),s=qte(t.converter,e),a=Ute(r);return Wte(r,[Vte(a,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Fi.none())])}function Wte(t,e){const n=S4(t);return Ite(n,e)}function Zte(t,e,n){const r=n.docs.get(e._key),s=new Gte(t);return new kl(t,s,e._key,r,new Bf(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){AX(eR),Td(new uu("firestore",((r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Uy(new NX(r.getProvider("auth-internal")),new RX(o,r.getProvider("app-check-internal")),YX(o,s),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Po($b,qb,e),Po($b,qb,"esm2020")})();const M4="firebasestorage.googleapis.com",P4="storageBucket",Xte=120*1e3,Qte=600*1e3;class Jn extends Wl{constructor(e,n,r=0){super(zx(e),`Firebase Storage: ${n} (${zx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function zx(t){return"storage/"+t}function zy(){const t="An unknown error occurred, please check the error payload for server response.";return new Jn(Kn.UNKNOWN,t)}function ene(t){return new Jn(Kn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function tne(t){return new Jn(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nne(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jn(Kn.UNAUTHENTICATED,t)}function rne(){return new Jn(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sne(t){return new Jn(Kn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ane(){return new Jn(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ine(){return new Jn(Kn.CANCELED,"User canceled the upload/download.")}function one(t){return new Jn(Kn.INVALID_URL,"Invalid URL '"+t+"'.")}function lne(t){return new Jn(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cne(){return new Jn(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+P4+"' property when initializing the app?")}function une(){return new Jn(Kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fne(){return new Jn(Kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dne(t){return new Jn(Kn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function t1(t){return new Jn(Kn.INVALID_ARGUMENT,t)}function F4(){return new Jn(Kn.APP_DELETED,"The Firebase app was deleted.")}function hne(t){return new Jn(Kn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rd(t,e){return new Jn(Kn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Af(t){throw new Jn(Kn.INTERNAL_ERROR,"Internal error: "+t)}class Hs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Hs.makeFromUrl(e,n)}catch{return new Hs(e,"")}if(r.path==="")return r;throw lne(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(L){L.path_=decodeURIComponent(L.path)}const h="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",T=new RegExp(`^https?://${x}/${h}/b/${s}/o${v}`,"i"),S={bucket:1,path:3},A=n===M4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",R=new RegExp(`^https?://${A}/${s}/${b}`,"i"),D=[{regex:c,indices:u,postModify:a},{regex:T,indices:S,postModify:d},{regex:R,indices:{bucket:1,path:2},postModify:d}];for(let L=0;L<D.length;L++){const z=D[L],O=z.regex.exec(e);if(O){const I=O[z.indices.bucket];let C=O[z.indices.path];C||(C=""),r=new Hs(I,C),z.postModify(r);break}}if(r==null)throw one(e);return r}}class pne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function mne(t,e,n){let r=1,s=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function h(...b){d||(d=!0,e.apply(null,b))}function x(b){s=setTimeout(()=>{s=null,t(T,u())},b)}function v(){a&&clearTimeout(a)}function T(b,...R){if(d){v();return}if(b){v(),h.call(null,b,...R);return}if(u()||o){v(),h.call(null,b,...R);return}r<64&&(r*=2);let D;c===1?(c=2,D=0):D=(r+Math.random())*1e3,x(D)}let S=!1;function A(b){S||(S=!0,v(),!d&&(s!==null?(b||(c=2),clearTimeout(s),x(0)):b||(c=1)))}return x(0),a=setTimeout(()=>{o=!0,A(!0)},n),A}function gne(t){t(!1)}function xne(t){return t!==void 0}function vne(t){return typeof t=="object"&&!Array.isArray(t)}function jy(t){return typeof t=="string"||t instanceof String}function Kb(t){return Hy()&&t instanceof Blob}function Hy(){return typeof Blob<"u"}function Jb(t,e,n,r){if(r<e)throw t1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw t1(`Invalid value for '${t}'. Expected ${n} or less.`)}function Gy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function O4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Rl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rl||(Rl={}));function yne(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}class _ne{constructor(e,n,r,s,a,o,c,u,d,h,x,v=!0,T=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=x,this.retry=v,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,A)=>{this.resolve_=S,this.reject_=A,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new k0(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===Rl.NO_ERROR,u=a.getStatus();if(!c||yne(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Rl.ABORT;r(!1,new k0(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new k0(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());xne(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=zy();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?F4():ine();o(u)}else{const u=ane();o(u)}};this.canceled_?n(!1,new k0(!1,null,!0)):this.backoffId_=mne(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class k0{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ene(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Tne(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wne(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sne(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ane(t,e,n,r,s,a,o=!0,c=!1){const u=O4(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return wne(h,e),Ene(h,n),Tne(h,a),Sne(h,r),new _ne(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}function bne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Cne(...t){const e=bne();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Hy())return new Blob(t);throw new Jn(Kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Nne(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function Ine(t){if(typeof atob>"u")throw dne("base-64");return atob(t)}const Qa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jx{constructor(e,n){this.data=e,this.contentType=n||null}}function kne(t,e){switch(t){case Qa.RAW:return new jx(L4(e));case Qa.BASE64:case Qa.BASE64URL:return new jx(U4(t,e));case Qa.DATA_URL:return new jx(Dne(e),Mne(e))}throw zy()}function L4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Rne(t){let e;try{e=decodeURIComponent(t)}catch{throw rd(Qa.DATA_URL,"Malformed data URL.")}return L4(e)}function U4(t,e){switch(t){case Qa.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw rd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Qa.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw rd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ine(e)}catch(s){throw s.message.includes("polyfill")?s:rd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class V4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw rd(Qa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Pne(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Dne(t){const e=new V4(t);return e.base64?U4(Qa.BASE64,e.rest):Rne(e.rest)}function Mne(t){return new V4(t).contentType}function Pne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class So{constructor(e,n){let r=0,s="";Kb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Kb(this.data_)){const r=this.data_,s=Nne(r,e,n);return s===null?null:new So(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new So(r,!0)}}static getBlob(...e){if(Hy()){const n=e.map(r=>r instanceof So?r.data_:r);return new So(Cne.apply(null,n))}else{const n=e.map(o=>jy(o)?kne(Qa.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[a++]=o[c]}),new So(s,!0)}}uploadData(){return this.data_}}function B4(t){let e;try{e=JSON.parse(t)}catch{return null}return vne(e)?e:null}function Fne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function One(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function z4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function Lne(t,e){return e}class cs{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Lne}}let R0=null;function Une(t){return!jy(t)||t.length<2?t:z4(t)}function j4(){if(R0)return R0;const t=[];t.push(new cs("bucket")),t.push(new cs("generation")),t.push(new cs("metageneration")),t.push(new cs("name","fullPath",!0));function e(a,o){return Une(o)}const n=new cs("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new cs("size");return s.xform=r,t.push(s),t.push(new cs("timeCreated")),t.push(new cs("updated")),t.push(new cs("md5Hash",null,!0)),t.push(new cs("cacheControl",null,!0)),t.push(new cs("contentDisposition",null,!0)),t.push(new cs("contentEncoding",null,!0)),t.push(new cs("contentLanguage",null,!0)),t.push(new cs("contentType",null,!0)),t.push(new cs("metadata","customMetadata",!0)),R0=t,R0}function Vne(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new Hs(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function Bne(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return Vne(r,t),r}function H4(t,e,n){const r=B4(e);return r===null?null:Bne(t,r,n)}function zne(t,e,n,r){const s=B4(e);if(s===null||!jy(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,x=t.fullPath,v="/b/"+o(h)+"/o/"+o(x),T=Gy(v,n,r),S=O4({alt:"media",token:d});return T+S})[0]}function jne(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class G4{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $4(t){if(!t)throw zy()}function Hne(t,e){function n(r,s){const a=H4(t,s,e);return $4(a!==null),a}return n}function Gne(t,e){function n(r,s){const a=H4(t,s,e);return $4(a!==null),zne(a,s,t.host,t._protocol)}return n}function q4(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=rne():s=nne():n.getStatus()===402?s=tne(t.bucket):n.getStatus()===403?s=sne(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function $ne(t){const e=q4(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=ene(t.path)),a.serverResponse=s.serverResponse,a}return n}function qne(t,e,n){const r=e.fullServerUrl(),s=Gy(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new G4(s,a,Gne(t,n),o);return c.errorHandler=$ne(e),c}function Kne(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Jne(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Kne(null,e)),r}function Yne(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let D="";for(let L=0;L<2;L++)D=D+Math.random().toString().slice(2);return D}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=Jne(e,r,s),h=jne(d,n),x="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,v=`\r
--`+u+"--",T=So.getBlob(x,r,v);if(T===null)throw une();const S={name:d.fullPath},A=Gy(a,t.host,t._protocol),b="POST",R=t.maxUploadRetryTime,B=new G4(A,b,Hne(t,n),R);return B.urlParams=S,B.headers=o,B.body=T.uploadData(),B.errorHandler=q4(e),B}class Wne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,a){if(this.sent_)throw Af("cannot .send() more than once");if(Bd(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Af("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Af("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Af("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Af("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Zne extends Wne{initXhr(){this.xhr_.responseType="text"}}function K4(){return new Zne}class Bl{constructor(e,n){this._service=e,n instanceof Hs?this._location=n:this._location=Hs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bl(e,n)}get root(){const e=new Hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return z4(this._location.path)}get storage(){return this._service}get parent(){const e=Fne(this._location.path);if(e===null)return null;const n=new Hs(this._location.bucket,e);return new Bl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw hne(e)}}function Xne(t,e,n){t._throwIfRoot("uploadBytes");const r=Yne(t.storage,t._location,j4(),new So(e,!0),n);return t.storage.makeRequestWithTokens(r,K4).then(s=>({metadata:s,ref:t}))}function Qne(t){t._throwIfRoot("getDownloadURL");const e=qne(t.storage,t._location,j4());return t.storage.makeRequestWithTokens(e,K4).then(n=>{if(n===null)throw fne();return n})}function ere(t,e){const n=One(t._location.path,e),r=new Hs(t._location.bucket,n);return new Bl(t.storage,r)}function tre(t){return/^[A-Za-z]+:\/\//.test(t)}function nre(t,e){return new Bl(t,e)}function J4(t,e){if(t instanceof $y){const n=t;if(n._bucket==null)throw cne();const r=new Bl(n,n._bucket);return e!=null?J4(r,e):r}else return e!==void 0?ere(t,e):t}function rre(t,e){if(e&&tre(e)){if(t instanceof $y)return nre(t,e);throw t1("To use ref(service, url), the first argument must be a Storage instance.")}else return J4(t,e)}function Yb(t,e){const n=e?.[P4];return n==null?null:Hs.makeFromBucketSpec(n,t)}function sre(t,e,n,r={}){t.host=`${e}:${n}`;const s=Bd(e);s&&(Kk(`https://${t.host}/b`),aZ("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:nZ(a,t.app.options.projectId))}class $y{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=M4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Xte,this._maxUploadRetryTime=Qte,this._requests=new Set,s!=null?this._bucket=Hs.makeFromBucketSpec(s,this._host):this._bucket=Yb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hs.makeFromBucketSpec(this._url,e):this._bucket=Yb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Qk(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bl(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new pne(F4());{const o=Ane(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Wb="@firebase/storage",Zb="0.14.0";const Y4="storage";function are(t,e,n){return t=Vo(t),Xne(t,e,n)}function ire(t){return t=Vo(t),Qne(t)}function ore(t,e){return t=Vo(t),rre(t,e)}function lre(t=nR(),e){t=Vo(t);const r=Xk(t,Y4).getImmediate({identifier:e}),s=eZ("storage");return s&&cre(r,...s),r}function cre(t,e,n,r={}){sre(t,e,n,r)}function ure(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new $y(n,r,s,e,eR)}function fre(){Td(new uu(Y4,ure,"PUBLIC").setMultipleInstances(!0)),Po(Wb,Zb,""),Po(Wb,Zb,"esm2020")}fre();const W4=()=>{const t=localStorage.getItem("firebase_config");if(t)return JSON.parse(t);const e={apiKey:"AIzaSyAenb2sXL1h-y9uChCwjaZoU4I_rHzBd2w",authDomain:"gen-lang-client-0586123917.firebaseapp.com",projectId:"gen-lang-client-0586123917",storageBucket:"gen-lang-client-0586123917.firebasestorage.app",messagingSenderId:"66816750674",appId:"1:66816750674:web:a2ec5f3735ae90f821db8b"};return console.log("[FIREBASE] Environment Config Check:"),console.log("- API Key:",e.apiKey?`FOUND (${e.apiKey.substring(0,5)}...)`:"MISSING "),console.log("- Project ID:",e.projectId?`FOUND (${e.projectId})`:"MISSING "),e},dre=t=>{localStorage.setItem("firebase_config",JSON.stringify(t))},hre=()=>{localStorage.removeItem("firebase_config")};let D0,Rd,q0;const qy=async t=>{try{const e=t||W4();return e?(dX().length>0?D0=nR():D0=tR(e),Rd=Mte(D0,{}),q0=lre(D0),!0):!1}catch(e){return console.error("Error initializing Firebase:",e),!1}},Sl=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Sl);if(typeof t!="object")return t;const e={};for(const n in t){const r=t[n];r===void 0?e[n]=null:r!==null&&typeof r=="object"?e[n]=Sl(r):e[n]=r}return e},n1=async(t,e,n,r,s=[])=>{if(Rd)try{const a={clients:Sl(t),products:Sl(e),categories:Sl(n),users:Sl(r),uploadedFiles:Sl(s),lastUpdated:new Date().toISOString(),updatedBy:"App Sync"};await Yte(w4(Rd,"rota-vendas","master-data"),a),console.log(" Data saved to cloud successfully")}catch(a){throw console.error("Error saving to cloud:",a),a}},pre=async()=>{if(!Rd)return null;try{const t=w4(Rd,"rota-vendas","master-data"),e=await Jte(t);return e.exists()?e.data():null}catch(t){return console.error("Error loading from cloud:",t),null}},Hx=async(t,e)=>{if(!q0&&(!await qy()||!q0))return null;try{const n=ore(q0,e),r=await are(n,t),s=await ire(r.ref);return console.log(` File uploaded to ${e}:`,s),s}catch(n){return console.error("Error uploading file to storage:",n),null}};var r1=gC(),Gx,Xb;function mre(){return Xb||(Xb=1,Gx=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var o=a[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),Gx}var gre=mre();const s1=Hp(gre);function xre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vre(t){var e=xre(t,"string");return typeof e=="symbol"?e:String(e)}function Oi(){return Oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oi.apply(this,arguments)}function zl(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const Ni={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},yre="https://maps.googleapis.com/maps/api/js";class Dd{static async load(e,n){var r;const s=e.libraries?e.libraries.split(","):[],a=this.serializeParams(e);this.listeners.push(n),(r=window.google)!=null&&(r=r.maps)!=null&&r.importLibrary?(this.serializedApiParams||(this.loadingStatus=Ni.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=a,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==a&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const o=["maps",...s];await Promise.all(o.map(c=>google.maps.importLibrary(c)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const r=()=>n||(n=new Promise((s,a)=>{var o;const c=document.createElement("script"),u=new URLSearchParams;for(const[d,h]of Object.entries(e)){const x=d.replace(/[A-Z]/g,v=>"_"+v[0].toLowerCase());u.set(x,h)}u.set("loading","async"),u.set("callback","__googleMapsCallback__"),c.async=!0,c.src=yre+"?"+u.toString(),c.nonce=((o=document.querySelector("script[nonce]"))==null?void 0:o.nonce)||"",c.onerror=()=>{this.loadingStatus=Ni.FAILED,this.notifyLoadingStatusListeners(),a(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=Ni.LOADED,this.notifyLoadingStatusListeners(),s()},window.gm_authFailure=()=>{this.loadingStatus=Ni.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=Ni.LOADING,this.notifyLoadingStatusListeners(),document.head.append(c)}),n);google.maps.importLibrary=s=>r().then(()=>google.maps.importLibrary(s))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}Dd.loadingStatus=Ni.NOT_LOADED;Dd.serializedApiParams=void 0;Dd.listeners=[];const _re=["onLoad","apiKey","version","libraries"],Ere=["children"],Tre="GMP_visgl_rgmlibrary_v1_default",qd=bn.createContext(null);function wre(){const[t,e]=ue.useState({});return{mapInstances:t,addMapInstance:(a,o="default")=>{e(c=>Oi({},c,{[o]:a}))},removeMapInstance:(a="default")=>{e(o=>zl(o,[a].map(vre)))},clearMapInstances:()=>{e({})}}}function Sre(t){const{onLoad:e,apiKey:n,version:r,libraries:s=[]}=t,a=zl(t,_re),[o,c]=ue.useState(Dd.loadingStatus),[u,d]=ue.useReducer((T,S)=>Oi({},T,{[S.name]:S.value}),{}),h=ue.useMemo(()=>s?.join(","),[s]),x=ue.useMemo(()=>JSON.stringify(Oi({apiKey:n,version:r},a)),[n,r,a]),v=ue.useCallback(async T=>{var S;if(u[T])return u[T];if(!((S=google)!=null&&(S=S.maps)!=null&&S.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const A=await window.google.maps.importLibrary(T);return d({name:T,value:A}),A},[u]);return ue.useEffect(()=>{(async()=>{try{const T=Oi({key:n},a);r&&(T.v=r),h?.length>0&&(T.libraries=h),T.solutionChannel===void 0?T.solutionChannel=Tre:T.solutionChannel===""&&delete T.solutionChannel,await Dd.load(T,S=>c(S));for(const S of["core","maps",...s])await v(S);e&&e()}catch(T){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",T)}})()},[n,h,x]),{status:o,loadedLibraries:u,importLibrary:v}}const Are=t=>{const{children:e}=t,n=zl(t,Ere),{mapInstances:r,addMapInstance:s,removeMapInstance:a,clearMapInstances:o}=wre(),{status:c,loadedLibraries:u,importLibrary:d}=Sre(n),h=ue.useMemo(()=>({mapInstances:r,addMapInstance:s,removeMapInstance:a,clearMapInstances:o,status:c,loadedLibraries:u,importLibrary:d}),[r,s,a,o,c,u,d]);return bn.createElement(qd.Provider,{value:h},e)};function bre(t,e){for(const n of kre){const r=e[n],s=Z4[n];ue.useEffect(()=>{if(!t||!r)return;const a=google.maps.event.addListener(t,s,o=>{r(Cre(s,t,o))});return()=>a.remove()},[t,s,r])}}function Cre(t,e,n){const r={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(Nre.includes(t)){const a=r,o=e.getCenter(),c=e.getZoom(),u=e.getHeading()||0,d=e.getTilt()||0,h=e.getBounds();return(!o||!h||!Number.isFinite(c))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),a.detail={center:o?.toJSON()||{lat:0,lng:0},zoom:c||0,heading:u,tilt:d,bounds:h?.toJSON()||{north:90,east:180,south:-90,west:-180}},a}else if(Ire.includes(t)){var s;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const a=r;return a.domEvent=n.domEvent,a.stoppable=!0,a.stop=()=>n.stop(),a.detail={latLng:((s=n.latLng)==null?void 0:s.toJSON())||null,placeId:n.placeId},a}return r}const Z4={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Nre=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Ire=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],kre=Object.keys(Z4);function X4(t,e){const n=ue.useRef(void 0);(!n.current||!s1(e,n.current))&&(n.current=e),ue.useEffect(t,n.current)}const Rre=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","zoomControl","zoomControlOptions"]);function Dre(t,e){const n={},r=Object.keys(e);for(const s of r)Rre.has(s)&&(n[s]=e[s]);X4(()=>{t&&t.setOptions(n)},[n])}function Q4(){var t;return((t=ue.useContext(qd))==null?void 0:t.status)||Ni.NOT_LOADED}function Mre(t,e){const{viewport:n,viewState:r}=e,s=!!n;return ue.useLayoutEffect(()=>{if(!t||!r)return;const{latitude:a,longitude:o,bearing:c,pitch:u,zoom:d}=r;t.moveCamera({center:{lat:a,lng:o},heading:c,tilt:u,zoom:d+1})},[t,r]),s}function Pre(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function e3(t){return Pre(t)?t:t.toJSON()}function Fre(t,e,n){const r=n.center?e3(n.center):null;let s=null,a=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(s=r.lat,a=r.lng);const o=Number.isFinite(n.zoom)?n.zoom:null,c=Number.isFinite(n.heading)?n.heading:null,u=Number.isFinite(n.tilt)?n.tilt:null;ue.useLayoutEffect(()=>{if(!t)return;const d={};let h=!1;s!==null&&a!==null&&(e.current.center.lat!==s||e.current.center.lng!==a)&&(d.center={lat:s,lng:a},h=!0),o!==null&&e.current.zoom!==o&&(d.zoom=o,h=!0),c!==null&&e.current.heading!==c&&(d.heading=c,h=!0),u!==null&&e.current.tilt!==u&&(d.tilt=u,h=!0),h&&t.moveCamera(d)})}const Ore=()=>{const t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return bn.createElement("div",{style:t},bn.createElement("h2",null,"Error: AuthFailure"),bn.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",bn.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function Lre(){const[t,e]=ue.useState(null),n=ue.useCallback(r=>e(r),[e]);return[t,n]}function t3(){return Q4()===Ni.LOADED}function Ure(){const[,t]=ue.useReducer(e=>e+1,0);return t}function Vre(t,e){const n=t.getCenter(),r=t.getZoom(),s=t.getHeading()||0,a=t.getTilt()||0,o=t.getBounds();(!n||!o||!Number.isFinite(r))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:n?.toJSON()||{lat:0,lng:0},zoom:r||0,heading:s,tilt:a})}function Bre(t){const e=Ure(),n=ue.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return ue.useEffect(()=>{if(!t)return;const r=google.maps.event.addListener(t,"bounds_changed",()=>{Vre(t,n),e()});return()=>r.remove()},[t,e]),n}const zre=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps"],jre=["padding"];class K0{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,n){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(n)}}K0.entries={};function Hre(t,e){const n=t3(),[r,s]=ue.useState(null),[a,o]=Lre(),c=Bre(r),{id:u,defaultBounds:d,defaultCenter:h,defaultZoom:x,defaultHeading:v,defaultTilt:T,reuseMaps:S}=t,A=zl(t,zre),b=t.zoom!==void 0||t.defaultZoom!==void 0,R=t.center!==void 0||t.defaultCenter!==void 0;!d&&(!b||!R)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!A.center&&h&&(A.center=h),!A.zoom&&Number.isFinite(x)&&(A.zoom=x),!A.heading&&Number.isFinite(v)&&(A.heading=v),!A.tilt&&Number.isFinite(T)&&(A.tilt=T);for(const D of Object.keys(A))A[D]===void 0&&delete A[D];const B=ue.useRef();return ue.useEffect(()=>{if(!a||!n)return;const{addMapInstance:D,removeMapInstance:L}=e,z=t.mapId,O=z||"default";let I,C;if(S&&K0.has(O)?(C=K0.pop(O),I=C.getDiv(),a.appendChild(I),C.setOptions(A),setTimeout(()=>C.setCenter(C.getCenter()),0)):(I=document.createElement("div"),I.style.height="100%",a.appendChild(I),C=new google.maps.Map(I,A)),s(C),D(C,u),d){const{padding:N}=d,F=zl(d,jre);C.fitBounds(F,N)}else(!b||!R)&&C.fitBounds({east:180,west:-180,south:-90,north:90});if(B.current){const{mapId:N,cameraState:F}=B.current;N!==z&&C.setOptions(F)}return()=>{B.current={mapId:z,cameraState:c.current},I.remove(),S?K0.push(O,C):google.maps.event.clearInstanceListeners(C),s(null),L(u)}},[a,n,u,t.mapId]),[r,o,c]}const n3=bn.createContext(null),r3=t=>{const{children:e,id:n,className:r,style:s}=t,a=ue.useContext(qd),o=Q4();if(!a)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[c,u,d]=Hre(t,a);Fre(c,d,t),bre(c,t),Dre(c,t);const h=Mre(c,t),x=!!t.controlled;ue.useEffect(()=>{if(c)return h&&c.setOptions({disableDefaultUI:!0}),(h||x)&&c.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{c.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[c,h,x,t.gestureHandling,t.keyboardShortcuts]);const v=t.center?e3(t.center):null;let T=null,S=null;v&&Number.isFinite(v.lat)&&Number.isFinite(v.lng)&&(T=v.lat,S=v.lng);const A=ue.useMemo(()=>{var B,D,L,z,O;return{center:{lat:(B=T)!=null?B:0,lng:(D=S)!=null?D:0},zoom:(L=t.zoom)!=null?L:0,heading:(z=t.heading)!=null?z:0,tilt:(O=t.tilt)!=null?O:0}},[T,S,t.zoom,t.heading,t.tilt]);ue.useLayoutEffect(()=>{if(!c||!x)return;c.moveCamera(A);const B=c.addListener("bounds_changed",()=>{c.moveCamera(A)});return()=>B.remove()},[c,x,A]);const b=ue.useMemo(()=>Oi({width:"100%",height:"100%",position:"relative",zIndex:h?-1:0},s),[s,h]),R=ue.useMemo(()=>({map:c}),[c]);return o===Ni.AUTH_FAILURE?bn.createElement("div",{style:Oi({position:"relative"},r?{}:b),className:r},bn.createElement(Ore,null)):bn.createElement("div",Oi({ref:u,"data-testid":"map",style:r?void 0:b,className:r},n?{id:n}:{}),c?bn.createElement(n3.Provider,{value:R},e):null)};r3.deckGLViewProps=!0;const Qb=new Set;function Gre(...t){const e=JSON.stringify(t);Qb.has(e)||(Qb.add(e),console.error(...t))}const Nu=(t=null)=>{const e=ue.useContext(qd),{map:n}=ue.useContext(n3)||{};if(e===null)return Gre("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=e;return t!==null?r[t]||null:n||r.default||null};function s3(t){const e=t3(),n=ue.useContext(qd);return ue.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),n?.loadedLibraries[t]||null}function a3(t,e,n){if(e!=null&&typeof e!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const r=t.style;if(n==null){if(e==null)return;for(const s in e)e.hasOwnProperty(s)&&eC(r,s,e[s]);return}for(const s in n)n.hasOwnProperty(s)&&(e==null||!e.hasOwnProperty(s))&&(s.indexOf("--")===0?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="");if(e!=null)for(const s in e){const a=e[s];e.hasOwnProperty(s)&&n[s]!==a&&eC(r,s,a)}}function eC(t,e,n){const r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n=="number"&&n!==0&&!qre(e)?t[e]=n+"px":e==="float"?t.cssFloat=n:t[e]=(""+n).trim()}const $re=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function qre(t){return $re.has(t)}function Wc(t,e,n){ue.useEffect(()=>{if(!t||!e||!n)return;const r=google.maps.event.addListener(t,e,n);return()=>r.remove()},[t,e,n])}function bf(t,e,n){ue.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}const Kre=bn.createContext(null);function Jre(t){const[e,n]=ue.useState(null),[r,s]=ue.useState(null),a=ue.useRef(null),o=Nu(),c=s3("marker"),{children:u,className:d,style:h,onClick:x,onDrag:v,onDragStart:T,onDragEnd:S,collisionBehavior:A,clickable:b,draggable:R,position:B,title:D,zIndex:L}=t,z=ue.Children.count(u);return ue.useEffect(()=>{if(!o||!c)return;const O=new c.AdvancedMarkerElement;O.map=o,n(O);let I=null;return z>0&&(I=document.createElement("div"),O.content=I,s(I)),()=>{var C;O.map=null,(C=I)==null||C.remove(),n(null),s(null)}},[o,c,z]),ue.useEffect(()=>{!e||!e.content||(e.content.className=d||"")},[e,d]),bf(r,"className",d??""),ue.useEffect(()=>{r&&(a3(r,h||null,a.current),a.current=h||null)},[r,d,h]),bf(e,"position",B),bf(e,"title",D??""),bf(e,"zIndex",L),bf(e,"collisionBehavior",A),ue.useEffect(()=>{e&&(R!==void 0?e.gmpDraggable=R:v||T||S?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,R,v,S,T]),ue.useEffect(()=>{e&&(b!==void 0?e.gmpClickable=b:x?e.gmpClickable=!0:e.gmpClickable=!1)},[e,b,x]),Wc(e,"click",x),Wc(e,"drag",v),Wc(e,"dragstart",T),Wc(e,"dragend",S),[e,r]}ue.forwardRef((t,e)=>{const{children:n}=t,[r,s]=Jre(t),a=ue.useMemo(()=>r?{marker:r}:null,[r]);return ue.useImperativeHandle(e,()=>r,[r]),s?bn.createElement(Kre.Provider,{value:a},r1.createPortal(n,s)):null});const Yre=["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"],Wre=t=>{const{children:e,headerContent:n,style:r,className:s,pixelOffset:a,anchor:o,shouldFocus:c,onClose:u,onCloseClick:d}=t,h=zl(t,Yre),x=s3("maps"),[v,T]=ue.useState(null),S=ue.useRef(null),A=ue.useRef(null);ue.useEffect(()=>{if(!x)return;S.current=document.createElement("div"),A.current=document.createElement("div");const B=h;a&&(B.pixelOffset=new google.maps.Size(a[0],a[1])),n&&(B.headerContent=typeof n=="string"?n:A.current);const D=new google.maps.InfoWindow(h);return D.setContent(S.current),T(D),()=>{var L,z;D.setContent(null),(L=S.current)==null||L.remove(),(z=A.current)==null||z.remove(),S.current=null,A.current=null,T(null)}},[x]);const b=ue.useRef(null);ue.useEffect(()=>{!v||!S.current||(a3(S.current,r||null,b.current),b.current=r||null,s!==S.current.className&&(S.current.className=s||""))},[v,s,r]),X4(()=>{if(!v)return;const B=h;a?B.pixelOffset=new google.maps.Size(a[0],a[1]):B.pixelOffset=null,n?B.headerContent=typeof n=="string"?n:A.current:B.headerContent=null,v.setOptions(h)},[h,a,n]),Wc(v,"close",u),Wc(v,"closeclick",d);const R=Nu();return ue.useEffect(()=>{if(!R||!v||o===null)return;const B=!!o,D={map:R};return o&&(D.anchor=o),c!==void 0&&(D.shouldFocus=c),v.open(D),()=>{B&&v.set("anchor",null),v.close()}},[v,o,R,c]),bn.createElement(bn.Fragment,null,S.current&&r1.createPortal(e,S.current),A.current!==null&&r1.createPortal(n,A.current))},Zre=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];function Xre(t){const[e,n]=ue.useState(null),r=Nu(),{onClick:s,onDrag:a,onDragStart:o,onDragEnd:c,onMouseOver:u,onMouseOut:d}=t,h=zl(t,Zre),{position:x,draggable:v}=h;return ue.useEffect(()=>{if(!r){r===void 0&&console.error("<Marker> has to be inside a Map component.");return}const T=new google.maps.Marker(h);return T.setMap(r),n(T),()=>{T.setMap(null),n(null)}},[r]),ue.useEffect(()=>{if(!e)return;const T=e,S=google.maps.event;return s&&S.addListener(T,"click",s),a&&S.addListener(T,"drag",a),o&&S.addListener(T,"dragstart",o),c&&S.addListener(T,"dragend",c),u&&S.addListener(T,"mouseover",u),d&&S.addListener(T,"mouseout",d),e.setDraggable(!!v),()=>{S.clearInstanceListeners(T)}},[e,v,s,a,o,c,u,d]),ue.useEffect(()=>{e&&h&&e.setOptions(h)},[e,h]),ue.useEffect(()=>{v||!x||!e||e.setPosition(x)},[v,x,e]),e}ue.forwardRef((t,e)=>{const n=Xre(t);return ue.useImperativeHandle(e,()=>n,[n]),bn.createElement(bn.Fragment,null)});const tC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],$x=1,Cf=8;class Ky{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,r]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const s=r>>4;if(s!==$x)throw new Error(`Got v${s} data when expected v${$x}.`);const a=tC[r&15];if(!a)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[c]=new Uint32Array(e,4,1);return new Ky(c,o,a,e)}constructor(e,n=64,r=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const a=tC.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,c=e*this.IndexArrayType.BYTES_PER_ELEMENT,u=(8-c%8)%8;if(a<0)throw new Error(`Unexpected typed array class: ${r}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,Cf,e),this.coords=new this.ArrayType(this.data,Cf+c+u,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Cf+o+c+u),this.ids=new this.IndexArrayType(this.data,Cf,e),this.coords=new this.ArrayType(this.data,Cf+c+u,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,($x<<4)+a]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=n,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return a1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,r,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:a,coords:o,nodeSize:c}=this,u=[0,a.length-1,0],d=[];for(;u.length;){const h=u.pop()||0,x=u.pop()||0,v=u.pop()||0;if(x-v<=c){for(let b=v;b<=x;b++){const R=o[2*b],B=o[2*b+1];R>=e&&R<=r&&B>=n&&B<=s&&d.push(a[b])}continue}const T=v+x>>1,S=o[2*T],A=o[2*T+1];S>=e&&S<=r&&A>=n&&A<=s&&d.push(a[T]),(h===0?e<=S:n<=A)&&(u.push(v),u.push(T-1),u.push(1-h)),(h===0?r>=S:s>=A)&&(u.push(T+1),u.push(x),u.push(1-h))}return d}within(e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:a,nodeSize:o}=this,c=[0,s.length-1,0],u=[],d=r*r;for(;c.length;){const h=c.pop()||0,x=c.pop()||0,v=c.pop()||0;if(x-v<=o){for(let b=v;b<=x;b++)nC(a[2*b],a[2*b+1],e,n)<=d&&u.push(s[b]);continue}const T=v+x>>1,S=a[2*T],A=a[2*T+1];nC(S,A,e,n)<=d&&u.push(s[T]),(h===0?e-r<=S:n-r<=A)&&(c.push(v),c.push(T-1),c.push(1-h)),(h===0?e+r>=S:n+r>=A)&&(c.push(T+1),c.push(x),c.push(1-h))}return u}}function a1(t,e,n,r,s,a){if(s-r<=n)return;const o=r+s>>1;i3(t,e,o,r,s,a),a1(t,e,n,r,o-1,1-a),a1(t,e,n,o+1,s,1-a)}function i3(t,e,n,r,s,a){for(;s>r;){if(s-r>600){const d=s-r+1,h=n-r+1,x=Math.log(d),v=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*v*(d-v)/d)*(h-d/2<0?-1:1),S=Math.max(r,Math.floor(n-h*v/d+T)),A=Math.min(s,Math.floor(n+(d-h)*v/d+T));i3(t,e,n,S,A,a)}const o=e[2*n+a];let c=r,u=s;for(Nf(t,e,r,n),e[2*s+a]>o&&Nf(t,e,r,s);c<u;){for(Nf(t,e,c,u),c++,u--;e[2*c+a]<o;)c++;for(;e[2*u+a]>o;)u--}e[2*r+a]===o?Nf(t,e,r,u):(u++,Nf(t,e,u,s)),u<=n&&(r=u+1),n<=u&&(s=u-1)}}function Nf(t,e,n,r){qx(t,n,r),qx(e,2*n,2*r),qx(e,2*n+1,2*r+1)}function qx(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function nC(t,e,n,r){const s=t-n,a=e-r;return s*s+a*a}const Qre={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},rC=Math.fround||(t=>(e=>(t[0]=+e,t[0])))(new Float32Array(1)),_l=2,To=3,Kx=4,Eo=5,o3=6;class ese{constructor(e){this.options=Object.assign(Object.create(Qre),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:n,minZoom:r,maxZoom:s}=this.options;n&&console.time("total time");const a=`prepare ${e.length} points`;n&&console.time(a),this.points=e;const o=[];for(let u=0;u<e.length;u++){const d=e[u];if(!d.geometry)continue;const[h,x]=d.geometry.coordinates,v=rC(M0(h)),T=rC(P0(x));o.push(v,T,1/0,u,-1,1),this.options.reduce&&o.push(0)}let c=this.trees[s+1]=this._createTree(o);n&&console.timeEnd(a);for(let u=s;u>=r;u--){const d=+Date.now();c=this.trees[u]=this._createTree(this._cluster(c,u)),n&&console.log("z%d: %d clusters in %dms",u,c.numItems,+Date.now()-d)}return n&&console.timeEnd("total time"),this}getClusters(e,n){let r=((e[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[1]));let a=e[2]===180?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,a=180;else if(r>a){const x=this.getClusters([r,s,180,o],n),v=this.getClusters([-180,s,a,o],n);return x.concat(v)}const c=this.trees[this._limitZoom(n)],u=c.range(M0(r),P0(o),M0(a),P0(s)),d=c.data,h=[];for(const x of u){const v=this.stride*x;h.push(d[v+Eo]>1?sC(d,v,this.clusterProps):this.points[d[v+To]])}return h}getChildren(e){const n=this._getOriginId(e),r=this._getOriginZoom(e),s="No cluster with the specified id.",a=this.trees[r];if(!a)throw new Error(s);const o=a.data;if(n*this.stride>=o.length)throw new Error(s);const c=this.options.radius/(this.options.extent*Math.pow(2,r-1)),u=o[n*this.stride],d=o[n*this.stride+1],h=a.within(u,d,c),x=[];for(const v of h){const T=v*this.stride;o[T+Kx]===e&&x.push(o[T+Eo]>1?sC(o,T,this.clusterProps):this.points[o[T+To]])}if(x.length===0)throw new Error(s);return x}getLeaves(e,n,r){n=n||10,r=r||0;const s=[];return this._appendLeaves(s,e,n,r,0),s}getTile(e,n,r){const s=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:o,radius:c}=this.options,u=c/o,d=(r-u)/a,h=(r+1+u)/a,x={features:[]};return this._addTileFeatures(s.range((n-u)/a,d,(n+1+u)/a,h),s.data,n,r,a,x),n===0&&this._addTileFeatures(s.range(1-u/a,d,1,h),s.data,a,r,a,x),n===a-1&&this._addTileFeatures(s.range(0,d,u/a,h),s.data,-1,r,a,x),x.features.length?x:null}getClusterExpansionZoom(e){let n=this._getOriginZoom(e)-1;for(;n<=this.options.maxZoom;){const r=this.getChildren(e);if(n++,r.length!==1)break;e=r[0].properties.cluster_id}return n}_appendLeaves(e,n,r,s,a){const o=this.getChildren(n);for(const c of o){const u=c.properties;if(u&&u.cluster?a+u.point_count<=s?a+=u.point_count:a=this._appendLeaves(e,u.cluster_id,r,s,a):a<s?a++:e.push(c),e.length===r)break}return a}_createTree(e){const n=new Ky(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let r=0;r<e.length;r+=this.stride)n.add(e[r],e[r+1]);return n.finish(),n.data=e,n}_addTileFeatures(e,n,r,s,a,o){for(const c of e){const u=c*this.stride,d=n[u+Eo]>1;let h,x,v;if(d)h=l3(n,u,this.clusterProps),x=n[u],v=n[u+1];else{const A=this.points[n[u+To]];h=A.properties;const[b,R]=A.geometry.coordinates;x=M0(b),v=P0(R)}const T={type:1,geometry:[[Math.round(this.options.extent*(x*a-r)),Math.round(this.options.extent*(v*a-s))]],tags:h};let S;d||this.options.generateId?S=n[u+To]:S=this.points[n[u+To]].id,S!==void 0&&(T.id=S),o.features.push(T)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,n){const{radius:r,extent:s,reduce:a,minPoints:o}=this.options,c=r/(s*Math.pow(2,n)),u=e.data,d=[],h=this.stride;for(let x=0;x<u.length;x+=h){if(u[x+_l]<=n)continue;u[x+_l]=n;const v=u[x],T=u[x+1],S=e.within(u[x],u[x+1],c),A=u[x+Eo];let b=A;for(const R of S){const B=R*h;u[B+_l]>n&&(b+=u[B+Eo])}if(b>A&&b>=o){let R=v*A,B=T*A,D,L=-1;const z=((x/h|0)<<5)+(n+1)+this.points.length;for(const O of S){const I=O*h;if(u[I+_l]<=n)continue;u[I+_l]=n;const C=u[I+Eo];R+=u[I]*C,B+=u[I+1]*C,u[I+Kx]=z,a&&(D||(D=this._map(u,x,!0),L=this.clusterProps.length,this.clusterProps.push(D)),a(D,this._map(u,I)))}u[x+Kx]=z,d.push(R/b,B/b,1/0,z,-1,b),a&&d.push(L)}else{for(let R=0;R<h;R++)d.push(u[x+R]);if(b>1)for(const R of S){const B=R*h;if(!(u[B+_l]<=n)){u[B+_l]=n;for(let D=0;D<h;D++)d.push(u[B+D])}}}}return d}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n,r){if(e[n+Eo]>1){const o=this.clusterProps[e[n+o3]];return r?Object.assign({},o):o}const s=this.points[e[n+To]].properties,a=this.options.map(s);return r&&a===s?Object.assign({},a):a}}function sC(t,e,n){return{type:"Feature",id:t[e+To],properties:l3(t,e,n),geometry:{type:"Point",coordinates:[tse(t[e]),nse(t[e+1])]}}}function l3(t,e,n){const r=t[e+Eo],s=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?`${Math.round(r/100)/10}k`:r,a=t[e+o3],o=a===-1?{}:Object.assign({},n[a]);return Object.assign(o,{cluster:!0,cluster_id:t[e+To],point_count:r,point_count_abbreviated:s})}function M0(t){return t/360+.5}function P0(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function tse(t){return(t-.5)*360}function nse(t){const e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function rse(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}class zs{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,n){this.isAdvancedMarker(e)?e.map=n:e.setMap(n)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class i1{constructor({markers:e,position:n}){this.markers=e,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const n of this.markers)e.extend(zs.getPosition(n));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>zs.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(zs.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class sse{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return ase(e)}}const ase=t=>t.map(n=>new i1({position:zs.getPosition(n),markers:[n]}));class ise extends sse{constructor(e){var{maxZoom:n,radius:r=60}=e,s=rse(e,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new ese(Object.assign({maxZoom:this.maxZoom,radius:r},s))}calculate(e){let n=!1;const r={zoom:e.map.getZoom()};if(!s1(e.markers,this.markers)){n=!0,this.markers=[...e.markers];const s=this.markers.map(a=>{const o=zs.getPosition(a);return{type:"Feature",geometry:{type:"Point",coordinates:[o.lng(),o.lat()]},properties:{marker:a}}});this.superCluster.load(s)}return n||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(n=!s1(this.state,r)),this.state=r,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(n=>this.transformCluster(n))}transformCluster({geometry:{coordinates:[e,n]},properties:r}){if(r.cluster)return new i1({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(a=>a.properties.marker),position:{lat:n,lng:e}});const s=r.marker;return new i1({markers:[s],position:zs.getPosition(s)})}}class ose{constructor(e,n){this.markers={sum:e.length};const r=n.map(a=>a.count),s=r.reduce((a,o)=>a+o,0);this.clusters={count:n.length,markers:{mean:s/n.length,sum:s,min:Math.min(...r),max:Math.max(...r)}}}}class lse{render({count:e,position:n},r,s){const o=`<svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,c=`Cluster of ${e} markers`,u=Number(google.maps.Marker.MAX_ZINDEX)+e;if(zs.isAdvancedMarkerAvailable(s)){const x=new DOMParser().parseFromString(o,"image/svg+xml").documentElement;x.setAttribute("transform","translate(0 25)");const v={map:s,position:n,zIndex:u,title:c,content:x};return new google.maps.marker.AdvancedMarkerElement(v)}const d={position:n,zIndex:u,title:c,icon:{url:`data:image/svg+xml;base64,${btoa(o)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(d)}}function cse(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}class Jy{constructor(){cse(Jy,google.maps.OverlayView)}}var sd;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(sd||(sd={}));const use=(t,e,n)=>{n.fitBounds(e.bounds)};class fse extends Jy{constructor({map:e,markers:n=[],algorithmOptions:r={},algorithm:s=new ise(r),renderer:a=new lse,onClusterClick:o=use}){super(),this.markers=[...n],this.clusters=[],this.algorithm=s,this.renderer=a,this.onClusterClick=o,e&&this.setMap(e)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(r=>{this.addMarker(r,!0)}),n||this.render()}removeMarker(e,n){const r=this.markers.indexOf(e);return r===-1?!1:(zs.setMap(e,null),this.markers.splice(r,1),n||this.render(),!0)}removeMarkers(e,n){let r=!1;return e.forEach(s=>{r=this.removeMarker(s,!0)||r}),r&&!n&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,sd.CLUSTERING_BEGIN,this);const{clusters:n,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){const s=new Set;for(const o of n)o.markers.length==1&&s.add(o.markers[0]);const a=[];for(const o of this.clusters)o.marker!=null&&(o.markers.length==1?s.has(o.marker)||zs.setMap(o.marker,null):a.push(o.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>a.forEach(o=>zs.setMap(o,null)))}google.maps.event.trigger(this,sd.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>zs.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new ose(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,n),r.markers.forEach(s=>zs.setMap(s,null)),this.onClusterClick&&r.marker.addListener("click",s=>{google.maps.event.trigger(this,sd.CLUSTER_CLICK,r),this.onClusterClick(s,r,n)})),zs.setMap(r.marker,n)})}}const dse=({clients:t})=>{const e=Nu(),n=ue.useRef(0);return ue.useEffect(()=>{if(!e||!window.google||t.length===0)return;if(Math.abs(t.length-n.current)>0){const s=new google.maps.LatLngBounds;let a=!1;if(t.forEach(o=>{o.lat&&o.lng&&(s.extend({lat:o.lat,lng:o.lng}),a=!0)}),a){e.fitBounds(s);const o=google.maps.event.addListenerOnce(e,"idle",()=>{e.getZoom()>16&&e.setZoom(16)});return n.current=t.length,()=>google.maps.event.removeListener(o)}}},[e,t]),null},hse=()=>{const t=Nu();return t?m.jsxs("div",{className:"absolute bottom-[75px] right-4 flex flex-row gap-2 z-10",children:[m.jsx("button",{onClick:()=>t.setZoom((t.getZoom()||0)+1),className:"bg-white p-2.5 rounded-xl border border-outline-variant shadow-elevation-2 text-on-surface hover:bg-primary-container hover:text-primary transition-all active:scale-95 focus:outline-none",title:"Aproximar (Zoom In)","aria-label":"Aproximar zoom",children:m.jsx(m1,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>t.setZoom((t.getZoom()||0)-1),className:"bg-white p-2.5 rounded-xl border border-outline-variant shadow-elevation-2 text-on-surface hover:bg-primary-container hover:text-primary transition-all active:scale-95 focus:outline-none",title:"Afastar (Zoom Out)","aria-label":"Afastar zoom",children:m.jsx(aP,{className:"w-5 h-5"})})]}):null},pse=t=>{switch(t){case"Norte":return{bg:"#10B981",border:"#047857",glyph:"#fff"};case"Nordeste":return{bg:"#F97316",border:"#C2410C",glyph:"#fff"};case"Centro-Oeste":return{bg:"#EAB308",border:"#A16207",glyph:"#fff"};case"Sudeste":return{bg:"#3B82F6",border:"#1D4ED8",glyph:"#fff"};case"Sul":return{bg:"#8B5CF6",border:"#5B21B6",glyph:"#fff"};default:return{bg:"#6B7280",border:"#374151",glyph:"#fff"}}},aC=t=>{let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=(e&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-n.length)+n},mse=`
<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
  <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/>
  <path d="M3 6h18"/>
  <path d="M16 10a4 4 0 0 1-8 0"/>
</svg>
`,gse=({clients:t,onClientSelect:e,productFilterActive:n,users:r,isClusteringEnabled:s})=>{const a=Nu(),o=ue.useRef(null),c=ue.useRef([]),u=ue.useMemo(()=>{const h=document.createElement("div");return h.innerHTML=mse,h.style.display="flex",h.style.alignItems="center",h.style.justifyContent="center",h},[]),d=ue.useMemo(()=>{const h=new Map;return r&&r.forEach(x=>{let v={bg:"#6B7280",border:"#374151",glyph:"#fff"};x.color?v={bg:x.color,border:"black",glyph:"#fff"}:v={bg:aC(x.id+x.name),border:"black",glyph:"#fff"},h.set(x.id,v)}),h},[r]);return ue.useEffect(()=>{if(!a)return;if(!google.maps.marker){console.warn("Google Maps Marker library not loaded. Likely an invalid API Key.");return}o.current&&(o.current.clearMarkers(),o.current.setMap(null)),c.current.forEach(S=>{S.map=null,google.maps.event.clearInstanceListeners(S)}),c.current=[],s?o.current=new fse({map:a,markers:[]}):o.current=null;let h=!0,x=0;const v=200,T=()=>{if(!h||!google.maps.marker)return;const S=t.slice(x,x+v);if(S.length===0)return;const A=S.filter(b=>{const R=Number(b.lat),B=Number(b.lng);return!isNaN(R)&&!isNaN(B)&&R!==0&&B!==0}).map(b=>{let R={bg:"#6B7280",border:"#374151",glyph:"#fff"};if(n)R={bg:"#F43F5E",border:"#BE123C",glyph:"#fff"};else{const O=d.get(b.salespersonId);O?R=O:b.ownerName?R={bg:aC(b.ownerName),border:"black",glyph:"#fff"}:R=pse(b.region)}let B=null;n&&(B=u.cloneNode(!0),B.style.color=R.glyph);const D={background:R.bg,borderColor:R.border,glyphColor:R.glyph,scale:1};B&&(D.glyph=B);const L=new google.maps.marker.PinElement(D),z=new google.maps.marker.AdvancedMarkerElement({position:{lat:b.lat,lng:b.lng},content:L.element,map:s?null:a,title:b.companyName});return z.addListener("click",()=>{e(b.id)}),z});h&&(s&&o.current&&o.current.addMarkers(A),c.current.push(...A)),x+=v,x<t.length&&requestAnimationFrame(T)};return T(),()=>{h=!1,o.current&&(o.current.clearMarkers(),o.current.setMap(null)),c.current.forEach(S=>{S.map=null})}},[a,t,n,e,u,d,s]),m.jsx(dse,{clients:t})},xse=({clients:t,apiKey:e,onInvalidKey:n,productFilterActive:r,highlightProductTerm:s,activeProductCategory:a,users:o,filterContent:c})=>{const u={lat:-14.235,lng:-51.9253},[d,h]=ue.useState(null),[x,v]=ue.useState(!1),[T,S]=ue.useState(!1),[A,b]=ue.useState(!0),R=t.find(z=>z.id===d);ue.useEffect(()=>(e&&v(!1),window.gm_authFailure=()=>{console.error("Google Maps Auth Failure detected via gm_authFailure."),v(!0)},()=>{window.gm_authFailure=()=>{};const z=document.getElementsByTagName("script");for(let O=z.length-1;O>=0;O--){const I=z[O];I.src&&I.src.includes("maps.googleapis.com/maps/api/js")&&I.parentNode?.removeChild(I)}}),[e]);const B=ue.useMemo(()=>{if(!R?.purchasedProducts)return[];const z=!!s,O=a&&a!=="Todos";if(!z&&!O)return R.purchasedProducts;const I=(s||"").toLowerCase(),C=a||"";return[...R.purchasedProducts].sort((N,F)=>{let U=0,M=0;return O&&N.category===C&&(U+=2),O&&F.category===C&&(M+=2),z&&(((N.name||"").toLowerCase().includes(I)||(N.sku||"").toLowerCase().includes(I)||(N.brand||"").toLowerCase().includes(I)||(N.factoryCode||"").toLowerCase().includes(I))&&(U+=1),((F.name||"").toLowerCase().includes(I)||(F.sku||"").toLowerCase().includes(I)||(F.brand||"").toLowerCase().includes(I)||(F.factoryCode||"").toLowerCase().includes(I))&&(M+=1)),M-U})},[R,s,a]),D=()=>{S(!T)};if(!e)return m.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gray-50 rounded-xl border border-blue-200 p-8 text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mb-4",children:m.jsx(Zc,{className:"w-8 h-8"})}),m.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Configurar API Key"}),m.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[m.jsx(Zc,{className:"w-4 h-4"})," Selecionar API Key"]})]});if(x)return m.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gray-50 rounded-xl border border-red-200 p-8 text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4",children:m.jsx(ts,{className:"w-8 h-8"})}),m.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erro de Autenticao do Mapa"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-xs",children:'A chave de API atual  invlida para o Google Maps. Certifique-se de que a API "Maps JavaScript" est habilitada no console do Google Cloud.'}),m.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors shadow-md",children:[m.jsx(Zc,{className:"w-4 h-4"})," Trocar API Key"]})]});const L=T?"fixed inset-0 z-50 bg-white h-screen w-screen":"h-full w-full rounded-lg overflow-hidden shadow-sm border border-gray-200 relative z-0";return m.jsx("div",{className:L,children:m.jsx(Are,{apiKey:e,libraries:["marker"],onLoad:()=>console.log("Maps API loaded"),children:m.jsxs(r3,{defaultCenter:u,defaultZoom:4,mapId:"DEMO_MAP_ID",style:{width:"100%",height:"100%"},gestureHandling:"greedy",disableDefaultUI:!0,reuseMaps:!0,children:[m.jsx(gse,{clients:t,onClientSelect:h,productFilterActive:r,users:o,isClusteringEnabled:A}),m.jsx(hse,{}),T&&c&&m.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 bg-white/95 backdrop-blur-sm shadow-md border-b border-gray-200",children:[c,m.jsxs("div",{className:"flex justify-end gap-2 px-3 py-1.5 border-t border-gray-100 bg-gray-50/80",children:[m.jsx("button",{onClick:()=>b(!A),className:`p-1.5 px-3 rounded-lg border text-gray-600 transition-colors shadow-sm focus:outline-none flex items-center gap-2 text-xs font-bold ${A?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-200 hover:bg-gray-50"}`,title:A?"Desativar Agrupamento":"Ativar Agrupamento",children:A?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex -space-x-1",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500/50"})]}),"Agrupado"]}):m.jsxs(m.Fragment,{children:[m.jsx(Ii,{className:"w-3 h-3"}),"Solto"]})}),m.jsxs("button",{onClick:D,className:"bg-white p-1.5 px-3 rounded-lg border border-gray-200 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors shadow-sm focus:outline-none flex items-center gap-2 text-xs font-bold",title:"Sair da Tela Cheia",children:[m.jsx(Nw,{className:"w-4 h-4"}),"Sair"]})]})]}),!T&&m.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:[m.jsx("button",{onClick:()=>b(!A),className:`p-2 rounded-lg border text-gray-600 transition-colors shadow-sm focus:outline-none flex items-center gap-2 text-xs font-bold ${A?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-200 hover:bg-gray-50"}`,title:A?"Desativar Agrupamento":"Ativar Agrupamento",children:A?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex -space-x-1",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500/50"})]}),"Agrupado"]}):m.jsxs(m.Fragment,{children:[m.jsx(Ii,{className:"w-3 h-3"}),"Solto"]})}),m.jsx("button",{onClick:D,className:"bg-white p-2 rounded-lg border border-gray-200 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors shadow-sm focus:outline-none",title:"Tela Cheia",children:m.jsx(eP,{className:"w-5 h-5"})})]}),T&&!c&&m.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:[m.jsx("button",{onClick:()=>b(!A),className:`p-2 rounded-lg border text-gray-600 transition-colors shadow-sm focus:outline-none flex items-center gap-2 text-xs font-bold ${A?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-200 hover:bg-gray-50"}`,title:A?"Desativar Agrupamento":"Ativar Agrupamento",children:A?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex -space-x-1",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500/50"})]}),"Agrupado"]}):m.jsxs(m.Fragment,{children:[m.jsx(Ii,{className:"w-3 h-3"}),"Solto"]})}),m.jsx("button",{onClick:D,className:"bg-white p-2 rounded-lg border border-gray-200 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors shadow-sm focus:outline-none",title:"Sair da Tela Cheia",children:m.jsx(Nw,{className:"w-5 h-5"})})]}),R&&m.jsx(Wre,{position:{lat:R.lat,lng:R.lng},onCloseClick:()=>h(null),headerContent:m.jsxs("div",{className:"font-bold text-gray-800 text-sm flex items-center gap-2 pr-4",children:[m.jsx(ad,{className:"w-4 h-4 text-blue-600"}),R.companyName]}),children:m.jsx("div",{className:"min-w-[200px] max-w-[280px] p-1",children:m.jsxs("div",{className:"space-y-2 text-xs text-gray-600 mt-1",children:[m.jsxs("div",{className:"flex items-center gap-1 text-[10px] uppercase font-bold text-gray-400",children:[m.jsx(rp,{className:"w-3 h-3"}),R.city," - ",R.state," (",R.region,")"]}),m.jsxs("p",{className:"flex items-center gap-2",children:[m.jsx(Is,{className:"w-3 h-3 text-gray-400"}),m.jsx("span",{className:"font-medium text-gray-700",children:R.ownerName||"No informado"})]}),m.jsxs("p",{className:"flex items-center gap-2",children:[m.jsx(bC,{className:"w-3 h-3 text-gray-400"}),m.jsx("span",{className:"font-medium text-gray-700",children:R.contact||"Sem contato"})]}),R.purchasedProducts&&R.purchasedProducts.length>0&&m.jsxs("div",{className:"flex items-center gap-2 mt-1 mb-1 text-[10px] font-medium text-gray-600 bg-gray-50 px-2 py-1 rounded border border-gray-100 w-fit",children:[m.jsxs("span",{className:"flex items-center gap-1",title:"Total de itens comprados",children:[m.jsx("span",{className:"font-bold text-gray-800",children:R.purchasedProducts.length})," Prod."]}),m.jsx("div",{className:"h-3 w-px bg-gray-300"}),m.jsxs("span",{className:"flex items-center gap-1",title:"Quantidade de SKUs nicos",children:[m.jsx("span",{className:"font-bold text-gray-800",children:new Set(R.purchasedProducts.map(z=>z.sku)).size})," SKUs"]})]}),m.jsxs("p",{className:"flex items-start gap-2",children:[m.jsx(Ii,{className:"w-3 h-3 mt-0.5 text-gray-400 flex-shrink-0"}),m.jsx("span",{className:"leading-tight",children:R.cleanAddress})]}),r&&B.length>0&&m.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[m.jsxs("p",{className:"text-[10px] uppercase font-bold text-rose-600 mb-1 flex items-center gap-1",children:[m.jsx(Ri,{className:"w-3 h-3"}),"Produtos Vendidos (Filtro)"]}),m.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1 pr-1 custom-scrollbar",children:[B.slice(0,3).map((z,O)=>{const I=s?.toLowerCase()||"",C=I&&((z.name||"").toLowerCase().includes(I)||(z.sku||"").toLowerCase().includes(I)||(z.brand||"").toLowerCase().includes(I)||(z.factoryCode||"").toLowerCase().includes(I));return m.jsxs("div",{className:`${C?"bg-rose-100 border-rose-300":"bg-rose-50 border-rose-100"} p-1.5 rounded border flex justify-between items-center transition-colors`,children:[m.jsxs("div",{className:"flex flex-col overflow-hidden max-w-[120px]",children:[m.jsx("span",{className:`truncate font-medium ${C?"text-rose-950 font-bold":"text-rose-900"}`,title:z.name,children:z.name}),m.jsxs("span",{className:"text-[9px] text-gray-500 truncate",children:[z.sku,"  ",z.brand]})]}),m.jsx("span",{className:"text-rose-700 font-bold",children:z.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},O)}),B.length>3&&m.jsxs("p",{className:"text-[10px] text-center text-gray-400 italic",children:["e mais ",B.length-3," itens..."]})]})]}),m.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 flex justify-between items-center",children:[m.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-gray-100 text-gray-600",children:[m.jsx(g1,{className:"w-3 h-3 mr-1"}),R.category.join(", ")]}),R.mainCnae&&m.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-purple-50 text-purple-700 border border-purple-100 ml-1 truncate max-w-[120px]",title:R.mainCnae,children:R.mainCnae}),m.jsx("a",{href:R.googleMapsUri||`https://www.google.com/maps/dir/?api=1&destination=${R.lat},${R.lng}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-medium",children:"Rota"})]})]})})})]})})})},vse=({client:t,isOpen:e,onClose:n,onSave:r,users:s=[],uploadedFiles:a=[],onCNPJAuthError:o})=>{const[c,u]=ue.useState(()=>({...t,cnpj:t.cnpj||"",category:Array.isArray(t.category)?t.category:typeof t.category=="string"?[t.category]:["Outros"]})),[d,h]=ue.useState(!1),[x,v]=ue.useState("idle");if(bn.useEffect(()=>{u({...t,category:Array.isArray(t.category)?t.category:typeof t.category=="string"?[t.category]:["Outros"]})},[t]),!e)return null;const T=s.find(z=>z.id===t.salespersonId),S=T?.name||"No atribudo",A=T?.role==="sales_internal"?"Interno":T?.role==="sales_external"||T?.role==="salesperson"?"Externo":T?.role?"Equipe":"",b=T?.salesCategory||"",R=a.find(z=>z.id===t.sourceFileId),B=z=>{z.preventDefault(),r(c),n()},D=async()=>{const z=c.cnpj?.replace(/\D/g,"");if(!z||z.length!==14){alert("Por favor, informe um CNPJ vlido com 14 dgitos para atualizar.");return}h(!0),v("idle");try{const O=await rm(z);if(O){const I=O.logradouro&&O.numero;u(C=>({...C,companyName:O.nome_fantasia||O.razao_social||C.companyName,originalAddress:I?`${O.logradouro}, ${O.numero}${O.complemento?` - ${O.complemento}`:""}, ${O.bairro}, ${O.municipio} - ${O.uf}`:C.originalAddress,cleanAddress:I?`${O.logradouro}, ${O.numero}, ${O.municipio} - ${O.uf}`:C.cleanAddress,city:O.municipio||C.city,state:O.uf||C.state,district:O.bairro||C.district,region:O.uf?ld(O.uf):C.region,lat:O.latitude||C.lat,lng:O.longitude||C.lng,contact:O.ddd_telefone_1||C.contact,mainCnae:O.cnae_fiscal||C.mainCnae,secondaryCnaes:O.cnaes_secundarios?.map(N=>`${N.codigo} - ${N.texto}`)||C.secondaryCnaes})),v("success"),setTimeout(()=>v("idle"),3e3)}else v("error"),alert("CNPJ no encontrado na base de dados.")}catch(O){console.error(O),v("error"),O.message&&(O.message.includes("401")||O.message.toLowerCase().includes("chave de api cnpja invlida"))?o?o():alert("Chave de API CNPJa invlida ou expirada. Configure-a nas opes do sistema."):alert("Erro ao consultar CNPJ. Verifique sua chave de API.")}finally{h(!1)}},L=z=>{const{name:O,value:I}=z.target;u(C=>{const N={[O]:I};return O==="state"&&(N.region=ld(I)),{...C,...N}})};return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[28px] shadow-elevation-3 overflow-hidden animate-scale-in flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"p-6 pb-2 flex justify-between items-start shrink-0",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(ad,{className:"w-5 h-5 text-primary"}),m.jsx("span",{className:"text-xs font-bold text-primary uppercase tracking-wider",children:"Editando"})]}),m.jsx("h2",{className:"text-2xl font-normal text-on-surface",children:"Dados do Cliente"}),m.jsx("p",{className:"text-xs text-on-surface-variant mt-1 font-mono",children:t.id})]}),m.jsx("button",{onClick:n,className:"p-2 text-on-surface-variant hover:bg-surface-variant/30 rounded-full transition-colors",title:"Fechar modal",children:m.jsx(Gs,{className:"w-6 h-6"})})]}),m.jsxs("div",{className:"mx-6 mb-2 flex flex-wrap items-center gap-3 px-4 py-2.5 bg-purple-50 border border-purple-200 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Is,{className:"w-4 h-4 text-purple-600"}),m.jsx("span",{className:"text-xs font-bold text-purple-800",children:"Vendedor Responsvel:"}),m.jsx("span",{className:"text-sm font-semibold text-purple-900",children:S})]}),A&&m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full ${A==="Interno"?"bg-blue-100 text-blue-700":A==="Externo"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:A}),b&&b!=="N/A"&&m.jsxs("span",{className:"text-[10px] font-medium uppercase tracking-wider px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:[m.jsx(Xa,{className:"w-3 h-3 inline mr-1"}),b]}),R&&m.jsxs("div",{className:"flex items-center gap-1.5 ml-auto",children:[m.jsx(O0,{className:"w-3.5 h-3.5 text-gray-500"}),m.jsxs("span",{className:"text-[10px] text-gray-600 font-medium",children:["Origem: ",m.jsx("span",{className:"font-bold",children:R.fileName})]})]})]}),m.jsxs("form",{onSubmit:B,className:"px-6 py-4 space-y-6 overflow-y-auto custom-scrollbar flex-1",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1",children:"Razo Social"}),m.jsx("input",{type:"text",name:"companyName",value:c.companyName,onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all",required:!0,title:"Razo Social",placeholder:"Razo Social"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1",children:"Proprietrio"}),m.jsx("input",{type:"text",name:"ownerName",value:c.ownerName,onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all",required:!0,title:"Responsvel / Proprietrio",placeholder:"Responsvel / Proprietrio"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1",children:"Telefone Comercial"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",name:"contact",value:c.contact,onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 pl-10 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all",title:"Telefone Comercial",placeholder:"(00) 0000-0000"}),m.jsx(bC,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-on-surface-variant"})]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1",children:"WhatsApp"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",name:"whatsapp",value:c.whatsapp||"",onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 pl-10 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all",title:"WhatsApp",placeholder:"(00) 00000-0000"}),m.jsx(rp,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-on-surface-variant"})]})]}),m.jsxs("div",{className:"md:col-span-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1 mb-2 block",children:"Segmento(s)"}),m.jsx("div",{className:"flex flex-wrap gap-2 p-3 border border-outline-variant rounded-xl bg-surface-container-low max-h-32 overflow-y-auto custom-scrollbar",children:od.filter(z=>z!=="Todos").map(z=>{const O=c.category.includes(z);return m.jsx("button",{type:"button",onClick:()=>{u(I=>{const C=I.category||[];return C.includes(z)?C.length===1?I:{...I,category:C.filter(N=>N!==z)}:{...I,category:[...C,z]}})},className:`px-3 py-1 text-xs font-medium rounded-lg transition-all border ${O?"bg-secondary-container text-on-secondary-container border-secondary-container":"bg-surface text-on-surface-variant border-outline-variant hover:border-outline"}`,title:`Selecionar/desselecionar segmento: ${z}`,children:z},z)})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1",children:"Regio"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{name:"region",value:c.region,onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all appearance-none",title:"Regio",children:[m.jsx("option",{value:"Indefinido",children:"Indefinido"}),id.map(z=>m.jsx("option",{value:z,children:z},z))]}),m.jsx(rp,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-on-surface-variant pointer-events-none"})]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1 font-bold",children:"Bairro"}),m.jsx("input",{type:"text",name:"district",value:c.district||"",onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary outline-none transition-all",title:"Bairro",placeholder:"Bairro"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1 font-bold",children:"Cidade"}),m.jsx("input",{type:"text",name:"city",value:c.city,onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary outline-none transition-all",title:"Municpio / Cidade",placeholder:"Cidade"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1 font-bold",children:"Estado (UF)"}),m.jsx("input",{type:"text",name:"state",value:c.state,onChange:L,maxLength:2,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary outline-none transition-all uppercase",title:"Estado (UF)",placeholder:"UF"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1 font-bold",children:"CEP"}),m.jsx("input",{type:"text",name:"zip",value:c.zip||"",onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary outline-none transition-all",placeholder:"00000-000",title:"CEP / Cdigo Postal"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1 font-bold",children:"Pas"}),m.jsx("input",{type:"text",value:"Brasil",readOnly:!0,title:"Pas (Padro: Brasil)",className:"w-full bg-surface-container-highest/50 border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface-variant outline-none"})]})]})]}),m.jsxs("div",{className:"space-y-1 pt-2",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1",children:"Endereo Completo"}),m.jsx("div",{className:"flex gap-2",children:m.jsx("input",{type:"text",name:"cleanAddress",value:c.cleanAddress,onChange:L,className:"flex-1 bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all",title:"Endereo Limpo"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-medium text-on-surface-variant ml-1",children:"CNPJ"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",name:"cnpj",value:c.cnpj||"",onChange:L,className:`flex-1 bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all ${x==="success"?"border-green-500":""}`,placeholder:"00.000.000/0000-00",title:"CNPJ do Cliente"}),m.jsxs("button",{type:"button",onClick:D,disabled:d,className:`px-4 flex items-center gap-2 rounded-xl text-xs font-bold transition-all shadow-sm ${x==="success"?"bg-green-100 text-green-700":"bg-primary text-white hover:bg-primary/90"}`,title:"Atualizar todos os dados a partir deste CNPJ",children:[d?m.jsx(Io,{className:"w-4 h-4 animate-spin"}):m.jsx(ki,{className:"w-4 h-4"}),x==="success"?"Dados Atualizados!":"Atualizar Dados"]})]})]}),m.jsxs("div",{className:"bg-surface-container-highest/50 p-4 rounded-2xl border border-outline-variant space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-2 pb-1 border-b border-outline-variant/30",children:[m.jsx(Xa,{className:"w-4 h-4 text-primary"}),m.jsx("h3",{className:"text-[10px] font-bold text-primary uppercase tracking-widest",children:"Atividade Econmica (CNAE)"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] font-bold text-on-surface-variant uppercase tracking-widest block mb-1",children:"Principal"}),m.jsx("p",{className:"text-sm text-on-surface flex items-start gap-2",children:c.mainCnae||(c.cnpj?"Aguardando consulta...":"No informado")})]}),c.secondaryCnaes&&c.secondaryCnaes.length>0?m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] font-bold text-on-surface-variant uppercase tracking-widest block mb-1",children:"Secundrias"}),m.jsx("ul",{className:"space-y-1.5",children:c.secondaryCnaes.map((z,O)=>m.jsxs("li",{className:"text-xs text-on-surface-variant flex items-start gap-2",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline-variant mt-1.5 shrink-0"}),z]},O))})]}):c.cnpj&&m.jsx("p",{className:"text-[10px] text-on-surface-variant italic",children:"Nenhuma atividade secundria registrada."})]})]}),m.jsxs("div",{className:"space-y-1 pt-2",children:[m.jsxs("label",{className:"text-xs font-medium text-on-surface-variant ml-1 flex items-center gap-1",children:["Plus Code (Google Maps)",m.jsx("span",{className:"text-[10px] bg-primary/10 text-primary px-1.5 rounded-full",children:"Localizao Exata"})]}),m.jsx("input",{type:"text",name:"plusCode",value:c.plusCode||"",onChange:L,className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-all",placeholder:"Ex: C6PH+9J Fortaleza, CE",title:"Google Plus Code"}),m.jsx("p",{className:"text-[10px] text-on-surface-variant mt-1 ml-1",children:"Use para locais sem endereo formal ou para maior preciso nos pinos."})]})]}),m.jsxs("div",{className:"p-6 pt-2 flex justify-end gap-2 shrink-0",children:[m.jsx("button",{type:"button",onClick:n,className:"px-6 py-2.5 text-primary font-medium hover:bg-primary-container/30 rounded-full transition-colors text-sm",children:"Cancelar"}),m.jsxs("button",{type:"submit",onClick:B,className:"px-6 py-2.5 bg-primary text-on-primary font-medium rounded-full hover:bg-primary/90 transition-colors flex items-center gap-2 shadow-elevation-1 hover:shadow-elevation-2 text-sm",children:[m.jsx(Md,{className:"w-4 h-4"})," Salvar Alteraes"]})]})]})})},yse=({isOpen:t,onClose:e,onAdd:n,salespersonId:r,ownerName:s,users:a=[],isFirebaseConnected:o=!1,onCNPJAuthError:c})=>{const[u,d]=ue.useState(r),[h,x]=ue.useState({companyName:"",cnpj:"",ownerName:"",contact:"",whatsapp:"",category:["Outros"],region:"Nordeste",state:"CE",city:"Fortaleza",district:"",originalAddress:"",cleanAddress:"",plusCode:"",zip:"",country:"Brasil",lat:0,lng:0,mainCnae:"",secondaryCnaes:[]}),[v,T]=ue.useState(!1),[S,A]=ue.useState(""),[b,R]=ue.useState(!1);if(ue.useEffect(()=>{t&&(x({companyName:"",cnpj:"",ownerName:"",contact:"",whatsapp:"",category:["Outros"],region:"Nordeste",state:"CE",city:"Fortaleza",district:"",originalAddress:"",cleanAddress:"",plusCode:"",zip:"",country:"Brasil",lat:0,lng:0,mainCnae:"",secondaryCnaes:[]}),d(r),A(""),navigator.geolocation&&navigator.geolocation.getCurrentPosition(async O=>{},O=>{console.warn("Location access denied or error:",O)}))},[t]),!t)return null;const B=(O,I)=>{x(C=>{const N={[O]:I};return O==="state"&&(N.region=ld(I)),{...C,...N}}),S&&A("")},D=O=>{x(I=>{const C=I.category;return C.includes(O)?C.length===1?I:{...I,category:C.filter(N=>N!==O)}:{...I,category:[...C,O]}})},L=async()=>{if(!h.cnpj||h.cnpj.replace(/\D/g,"").length!==14){A("Por favor, informe um CNPJ vlido com 14 dgitos.");return}T(!0),A("");try{const O=await rm(h.cnpj);if(O){const I=O.logradouro&&O.numero;x(C=>({...C,companyName:O.nome_fantasia||O.razao_social,originalAddress:I?`${O.logradouro}, ${O.numero}${O.complemento?` - ${O.complemento}`:""}, ${O.bairro}`:C.originalAddress,city:O.municipio||C.city,state:O.uf||C.state,district:O.bairro||C.district,region:O.uf?ld(O.uf):C.region,contact:O.ddd_telefone_1||C.contact,whatsapp:O.ddd_telefone_1||C.whatsapp,lat:O.latitude||0,lng:O.longitude||0,cleanAddress:I?`${O.logradouro}, ${O.numero}, ${O.municipio} - ${O.uf}`:C.cleanAddress,mainCnae:O.cnae_fiscal||C.mainCnae,secondaryCnaes:O.cnaes_secundarios?.map(N=>`${N.codigo} - ${N.texto}`)||C.secondaryCnaes}))}}catch(O){O.message&&(O.message.includes("401")||O.message.toLowerCase().includes("chave de api cnpja invlida"))?c?c():A("Chave de API CNPJa invlida ou expirada. Configure-a nas opes do sistema."):A(O.message||"Erro ao consultar CNPJ. Verifique a chave da API.")}finally{T(!1)}},z=O=>{if(O.preventDefault(),!h.companyName||!h.originalAddress||!h.city||!h.state||!h.contact){A("Por favor, preencha todos os campos obrigatrios (*).");return}R(!0);const I=`${h.originalAddress}, ${h.city} - ${h.state}`;n({companyName:h.companyName,ownerName:h.ownerName||"No Informado",contact:h.contact,whatsapp:h.whatsapp,category:h.category,region:h.region,state:h.state,city:h.city,originalAddress:I,cleanAddress:h.cleanAddress||I,plusCode:h.plusCode,salespersonId:u,googleMapsUri:"",lat:h.lat,lng:h.lng,mainCnae:h.mainCnae,secondaryCnaes:h.secondaryCnaes,zip:h.zip,country:"Brasil"}),R(!1),e()};return m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-[28px] shadow-elevation-3 w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"p-6 pb-2 flex justify-between items-start shrink-0",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(ad,{className:"w-5 h-5 text-primary"}),m.jsx("span",{className:"text-xs font-bold text-primary uppercase tracking-wider",children:"Novo Cliente"})]}),m.jsx("h2",{className:"text-2xl font-normal text-on-surface",children:"Adicionar Cliente"})]}),m.jsx("button",{onClick:e,className:"p-2 text-on-surface-variant hover:bg-surface-variant/30 rounded-full transition-colors",title:"Fechar",children:m.jsx(Gs,{className:"w-6 h-6"})})]}),m.jsx("div",{className:"px-6 py-4 overflow-y-auto custom-scrollbar flex-1",children:m.jsxs("form",{id:"add-client-form",onSubmit:z,className:"space-y-6",children:[m.jsxs("div",{className:"bg-surface-container-low p-4 rounded-2xl border border-outline-variant",children:[m.jsx("label",{className:"block text-xs font-semibold text-primary mb-2 ml-1 uppercase tracking-wider",children:"Consulta Rpida por CNPJ (Comercial)"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"relative flex-1",children:m.jsx("input",{type:"text",value:h.cnpj,onChange:O=>B("cnpj",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary outline-none transition-colors",placeholder:"00.000.000/0000-00",title:"CNPJ do Cliente"})}),m.jsxs("button",{type:"button",onClick:L,disabled:v,className:`px-4 py-2 rounded-xl transition-colors flex items-center gap-2 disabled:opacity-50 ${h.lat!==0?"bg-green-100 text-green-700":"bg-primary text-on-primary hover:bg-primary/90"}`,children:[v?m.jsx(Io,{className:"w-4 h-4 animate-spin"}):m.jsx(ki,{className:"w-4 h-4"}),m.jsx("span",{className:"hidden sm:inline",children:h.lat!==0?"Dados Atualizados":"Atualizar Dados"})]})]}),h.cnpj.replace(/\D/g,"").length===14&&m.jsxs("div",{className:"bg-surface-container-highest/50 p-4 rounded-2xl border border-outline-variant space-y-4 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 pb-1 border-b border-outline-variant/30",children:[m.jsx(Xa,{className:"w-4 h-4 text-primary"}),m.jsx("h3",{className:"text-[10px] font-bold text-primary uppercase tracking-widest",children:"Atividade Econmica (CNAE)"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] font-bold text-on-surface-variant uppercase tracking-widest block mb-1",children:"Principal"}),m.jsx("p",{className:"text-sm text-on-surface flex items-start gap-2",children:h.mainCnae||(v?"Buscando...":"Aguardando consulta comercial...")})]}),h.secondaryCnaes&&h.secondaryCnaes.length>0&&m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] font-bold text-on-surface-variant uppercase tracking-widest block mb-1",children:"Secundrias"}),m.jsx("ul",{className:"space-y-1.5",children:h.secondaryCnaes.map((O,I)=>m.jsxs("li",{className:"text-xs text-on-surface-variant flex items-start gap-2",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline-variant mt-1.5 shrink-0"}),O]},I))})]})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Razo Social *"}),m.jsx("input",{type:"text",required:!0,value:h.companyName,onChange:O=>B("companyName",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Nome do estabelecimento"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Proprietrio"}),m.jsx("input",{type:"text",value:h.ownerName,onChange:O=>B("ownerName",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Nome do responsvel"})]}),a.length>0&&m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:[m.jsx(Is,{className:"w-3 h-3 inline mr-1"}),"Vendedor Responsvel"]}),m.jsx("select",{value:u,onChange:O=>d(O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none appearance-none",title:"Vendedor Responsvel",children:a.filter(O=>O.role==="salesperson"||O.role==="sales_external"||O.role==="sales_internal").map(O=>m.jsxs("option",{value:O.id,children:[O.name,O.salesCategory?` (${O.salesCategory})`:""]},O.id))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Contato *"}),m.jsx("input",{type:"text",required:!0,value:h.contact,onChange:O=>B("contact",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"(00) 00000-0000",title:"Contato"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Segmento(s)"}),m.jsx("div",{className:"flex flex-wrap gap-2 p-3 border border-outline-variant rounded-xl bg-surface-container-low max-h-32 overflow-y-auto custom-scrollbar",children:od.filter(O=>O!=="Todos").map(O=>{const I=h.category.includes(O);return m.jsx("button",{type:"button",onClick:()=>D(O),className:`px-3 py-1 text-xs font-medium rounded-lg transition-all border ${I?"bg-secondary-container text-on-secondary-container border-secondary-container":"bg-surface text-on-surface-variant border-outline-variant hover:border-outline"}`,children:O},O)})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Regio"}),m.jsxs("div",{className:"relative",children:[m.jsx("select",{value:h.region,onChange:O=>B("region",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none appearance-none",title:"Regio",children:id.map(O=>m.jsx("option",{value:O,children:O},O))}),m.jsx(rp,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-on-surface-variant pointer-events-none"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Bairro *"}),m.jsx("input",{type:"text",required:!0,value:h.district||"",onChange:O=>B("district",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Ex: Aldeota",title:"Bairro"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Municpio *"}),m.jsx("input",{type:"text",required:!0,value:h.city,onChange:O=>B("city",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Ex: Fortaleza"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"UF *"}),m.jsxs("div",{className:"relative",children:[m.jsx("select",{required:!0,value:h.state,onChange:O=>B("state",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none appearance-none",title:"UF",children:["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"].map(O=>m.jsx("option",{value:O,children:O},O))}),m.jsx(Ii,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-on-surface-variant pointer-events-none"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Endereo Completo *"}),m.jsx("textarea",{rows:2,required:!0,value:h.originalAddress,onChange:O=>B("originalAddress",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors resize-none",placeholder:"Rua, Nmero, Bairro, CEP...",title:"Endereo Completo"}),m.jsx("p",{className:"text-[10px] text-on-surface-variant mt-1 ml-1",children:"* Importante para localizarmos no mapa."})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1 flex items-center gap-1",children:["Plus Code (Google Maps)",m.jsx("span",{className:"text-[10px] bg-primary/10 text-primary px-1.5 rounded-full",children:"Localizao Exata"})]}),m.jsx("input",{type:"text",value:h.plusCode,onChange:O=>B("plusCode",O.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Ex: C6PH+9J Fortaleza, CE",title:"Google Plus Code"}),m.jsx("p",{className:"text-[10px] text-on-surface-variant mt-1 ml-1",children:"Use para locais sem endereo formal ou para maior preciso."})]}),m.jsx("div",{className:"bg-secondary-container/50 p-4 rounded-xl border border-secondary-container",children:m.jsxs("p",{className:"text-xs text-on-secondary-container flex gap-2",children:[m.jsx(Ii,{className:"w-4 h-4 shrink-0"}),m.jsx("span",{children:"Ao salvar, o sistema tentar localizar automaticamente as coordenadas deste cliente para exibir no mapa e na lista."})]})}),S&&m.jsxs("div",{className:"bg-error-container text-on-error-container p-4 rounded-xl text-sm flex items-center gap-3",children:[m.jsx(ts,{className:"w-5 h-5"}),S]})]})}),m.jsxs("div",{className:"p-6 pt-2 flex justify-end gap-2 shrink-0",children:[m.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 text-primary font-medium hover:bg-primary-container/30 rounded-full transition-colors text-sm",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:b,form:"add-client-form",className:"px-6 py-2.5 bg-primary text-on-primary font-medium rounded-full hover:bg-primary/90 transition-colors flex items-center gap-2 shadow-elevation-1 hover:shadow-elevation-2 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:b?"Salvando...":m.jsxs(m.Fragment,{children:[m.jsx(Md,{className:"w-4 h-4"}),"Salvar"]})})]})]})})},_se=({isOpen:t,onClose:e,client:n,products:r,onSave:s,productCategories:a})=>{const[o,c]=ue.useState(""),[u,d]=ue.useState("Todos"),[h,x]=ue.useState([]),[v,T]=ue.useState(!1);bn.useEffect(()=>{n&&n.purchasedProducts?x(n.purchasedProducts.map(R=>R.sku)):x([])},[n]);const S=ue.useMemo(()=>r.filter(R=>{const B=(R.name||"").toLowerCase().includes(o.toLowerCase())||(R.sku||"").toLowerCase().includes(o.toLowerCase())||(R.brand||"").toLowerCase().includes(o.toLowerCase()),D=u==="Todos"||R.category===u,L=h.includes(R.sku);return B&&D&&(!v||L)}),[r,o,u,v,h]),A=R=>{x(B=>B.includes(R)?B.filter(D=>D!==R):[...B,R])},b=()=>{if(!n)return;const R=r.filter(B=>h.includes(B.sku));s(n.id,R),e()};return!t||!n?null:m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden animate-scale-in",children:[m.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between bg-gray-50",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[m.jsx(Ri,{className:"w-5 h-5 text-blue-600"}),"Atribuir Produtos"]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Cliente: ",m.jsx("span",{className:"font-semibold text-gray-700",children:n.companyName})]})]}),m.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",title:"Fechar modal",children:m.jsx(Gs,{className:"w-5 h-5 text-gray-500"})})]}),m.jsxs("div",{className:"p-4 border-b border-gray-100 flex flex-col sm:flex-row gap-3 bg-white z-10",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(ki,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",placeholder:"Buscar por nome, SKU, marca...",value:o,onChange:R=>c(R.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),m.jsxs("select",{value:u,onChange:R=>d(R.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white",title:"Filtrar por Departamento",children:[m.jsx("option",{value:"Todos",children:"Todos os Departamentos"}),a.map(R=>m.jsx("option",{value:R,children:R},R))]})]}),m.jsxs("div",{className:"p-4 bg-gray-50 flex items-center justify-center gap-3 border-b border-gray-100",children:[m.jsx("button",{onClick:()=>T(!1),className:`
              flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold transition-all whitespace-nowrap
              ${v?"bg-white text-gray-600 border border-gray-200 hover:border-blue-300":"bg-blue-600 text-white shadow-sm"}
            `,children:"Ver Todos os Produtos"}),m.jsxs("button",{onClick:()=>T(!0),className:`
              flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold transition-all whitespace-nowrap
              ${v?"bg-green-600 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200 hover:border-green-300"}
            `,children:[m.jsx(Ri,{className:"w-3 h-3"}),"Produtos Comprados"]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-gray-50/50",children:S.length===0?m.jsx("div",{className:"flex flex-col items-center justify-center h-40 text-gray-400",children:m.jsx("p",{children:"Nenhum produto encontrado."})}):m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:S.map(R=>{const B=h.includes(R.sku);return m.jsx("div",{onClick:()=>A(R.sku),className:`
                      relative p-3 rounded-xl border cursor-pointer transition-all duration-200 group
                      ${B?"bg-blue-50 border-blue-500 shadow-sm":"bg-white border-gray-200 hover:border-blue-300 hover:shadow-sm"}
                    `,children:m.jsxs("div",{className:"flex justify-between items-start gap-2",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:`text-sm font-medium truncate ${B?"text-blue-800":"text-gray-800"}`,children:R.name}),m.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase truncate",children:R.brand}),m.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["SKU: ",R.sku]}),m.jsx("p",{className:"text-xs font-bold text-gray-700 mt-1",children:R.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),m.jsx("div",{className:`
                        w-5 h-5 rounded-full border flex items-center justify-center transition-colors
                        ${B?"bg-blue-500 border-blue-500":"border-gray-300 group-hover:border-blue-400"}
                      `,children:B&&m.jsx(Cl,{className:"w-3.5 h-3.5 text-white"})})]})},R.sku)})})}),m.jsxs("div",{className:"p-4 border-t border-gray-100 bg-white flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm text-gray-600",children:[m.jsx("span",{className:"font-bold text-blue-600",children:h.length})," produtos selecionados"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),m.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md transition-transform active:scale-95",children:[m.jsx(Md,{className:"w-4 h-4"}),"Salvar Atribuio"]})]})]})]})})},Ese=({clients:t,onUpdateClient:e,onAddClient:n,currentUserRole:r,currentUserId:s,currentUserName:a,products:o=[],productCategories:c=[],users:u=[],uploadedFiles:d=[],onGeneratePlusCodes:h,onCNPJAuthError:x})=>{const[v,T]=ue.useState(""),[S,A]=ue.useState("Todos"),[b,R]=ue.useState("Todos"),[B,D]=ue.useState(null),[L,z]=ue.useState(!1),[O,I]=ue.useState(!1),[C,N]=ue.useState(!1),[F,U]=ue.useState(null),M=ue.useMemo(()=>t.filter(K=>{const Ie=(K.companyName||"").toLowerCase().includes(v.toLowerCase())||(K.ownerName||"").toLowerCase().includes(v.toLowerCase()),Y=S==="Todos"||K.region===S,H=b==="Todos"||Array.isArray(K.category)&&K.category.some(Q=>Q.trim()===b.trim());return Ie&&Y&&H}),[t,v,S,b]),j=()=>{const K=["ID","Razo Social","Proprietrio","Contato","Endereo","Cidade","UF","Regio","Segmento","CNAE","Produtos Comprados","Link Maps"],Ie=M.map(le=>[le.id,le.companyName,le.ownerName,le.contact,le.cleanAddress,le.city,le.state,le.region,le.category.join("; "),le.mainCnae||"",le.purchasedProducts?le.purchasedProducts.map(ge=>ge.sku).join("; "):"",le.googleMapsUri||`https://www.google.com/maps/dir/?api=1&destination=${le.lat},${le.lng}`]),Y=le=>{if(le==null)return"";const ge=String(le);return ge.includes('"')||ge.includes(",")||ge.includes(`
`)?`"${ge.replace(/"/g,'""')}"`:ge},H=[K.join(","),...Ie.map(le=>le.map(Y).join(","))].join(`
`),Q=new Blob([`\uFEFF${H}`],{type:"text/csv;charset=utf-8;"}),te=URL.createObjectURL(Q),W=document.createElement("a");W.setAttribute("href",te),W.setAttribute("download",`clientes_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(W),W.click(),document.body.removeChild(W)},he=K=>{D(K),z(!0)},Se=K=>{U(K),N(!0)},ie=(K,Ie)=>{const Y=t.find(H=>H.id===K);if(Y){const H={...Y,purchasedProducts:Ie};e(H)}},fe=({client:K,style:Ie})=>m.jsx("div",{style:Ie,className:"p-1",children:m.jsxs("div",{className:"h-full bg-surface-container-low border border-outline-variant/30 rounded-lg p-3 hover:shadow-elevation-2 transition-shadow group relative overflow-hidden flex flex-col",children:[m.jsx("div",{className:"absolute top-0 right-0 p-0",children:m.jsx("span",{className:`px-3 py-1 rounded-bl-lg text-[10px] font-bold uppercase tracking-wider
                        ${K.region==="Nordeste"?"bg-orange-100 text-orange-800":K.region==="Sudeste"?"bg-blue-100 text-blue-800":K.region==="Sul"?"bg-purple-100 text-purple-800":K.region==="Norte"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}
                      `,children:K.region})}),m.jsxs("div",{className:"flex items-start gap-4 pr-12 mb-2",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-container text-on-primary-container flex items-center justify-center font-bold text-lg shrink-0",children:K.companyName.charAt(0).toUpperCase()}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsx("h3",{className:"font-bold text-on-surface truncate pr-2",title:K.companyName,children:K.companyName}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-0.5",children:[m.jsxs("div",{className:"flex items-center gap-1 text-xs text-on-surface-variant",children:[m.jsx(g1,{className:"w-3 h-3"}),m.jsx("span",{className:"truncate",children:K.category.join(", ")})]}),K.mainCnae&&m.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-purple-50 text-purple-700 border border-purple-100 truncate max-w-[150px]",title:K.mainCnae,children:[m.jsx(Xa,{className:"w-2.5 h-2.5 mr-1"}),K.mainCnae]})]}),K.purchasedProducts&&K.purchasedProducts.length>0&&m.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] font-medium text-gray-600 bg-gray-50 px-2 py-1 rounded-md border border-gray-100 w-fit",children:[m.jsxs("span",{className:"flex items-center gap-1",title:"Total de itens comprados",children:[" ",m.jsx("span",{className:"font-bold text-gray-800",children:K.purchasedProducts.length})," Prod."]}),m.jsx("div",{className:"h-3 w-px bg-gray-300"}),m.jsxs("span",{className:"flex items-center gap-1",title:"Quantidade de SKUs nicos",children:[" ",m.jsx("span",{className:"font-bold text-gray-800",children:new Set(K.purchasedProducts.map(Y=>Y.sku)).size})," SKUs"]})]}),K.purchasedProducts&&K.purchasedProducts.length>0&&m.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[K.purchasedProducts.slice(0,2).map((Y,H)=>m.jsx("span",{className:"text-[9px] px-1 rounded bg-green-50 text-green-700 border border-green-200 truncate max-w-[100px]",title:Y.name,children:Y.sku},H)),K.purchasedProducts.length>2&&m.jsxs("span",{className:"text-[9px] px-1 rounded bg-gray-100 text-gray-500 border border-gray-200",children:["+",K.purchasedProducts.length-2]})]})]})]}),m.jsxs("div",{className:"space-y-2 flex-grow",children:[m.jsxs("div",{className:"flex items-center gap-2 text-sm text-on-surface-variant",children:[m.jsx(ad,{className:"w-4 h-4 shrink-0"}),m.jsx("span",{className:"truncate",children:K.ownerName})]}),m.jsxs("div",{className:"flex items-start gap-2 text-sm text-on-surface-variant group/link",children:[m.jsx(Ii,{className:"w-4 h-4 shrink-0 mt-0.5"}),m.jsx("span",{className:"line-clamp-2",children:K.cleanAddress})]})]}),m.jsxs("div",{className:"mt-4 pt-3 border-t border-outline-variant/30 flex items-center justify-between",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>Se(K),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Atribuir Produtos",children:m.jsx(Ri,{className:"w-4 h-4"})}),m.jsx("a",{title:`Abrir localizao de ${K.companyName} no Google Maps`,href:K.googleMapsUri||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(K.companyName+" "+K.cleanAddress)}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",onClick:Y=>Y.stopPropagation(),children:m.jsx(Zx,{className:"w-4 h-4"})})]}),m.jsxs("button",{onClick:()=>he(K),className:"flex items-center gap-1.5 text-xs font-bold text-primary hover:text-primary/80 transition-colors px-3 py-1.5 rounded-lg active:bg-surface-container-highest",title:`Editar cliente ${K.companyName}`,children:[m.jsx(uP,{className:"w-3 h-3"})," Editar"]})]})]})}),ce=({client:K})=>m.jsxs("div",{className:"p-4 border-b border-gray-100 last:border-0 bg-white",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-900",children:K.companyName}),m.jsx("p",{className:"text-xs text-gray-500",children:K.category.join(", ")}),K.mainCnae&&m.jsxs("p",{className:"text-[10px] text-purple-600 font-medium flex items-center gap-1 mt-0.5",children:[m.jsx(Xa,{className:"w-3 h-3"})," ",K.mainCnae]}),K.purchasedProducts&&K.purchasedProducts.length>0&&m.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[K.purchasedProducts.slice(0,3).map((Ie,Y)=>m.jsx("span",{className:"text-[9px] px-1 rounded bg-green-50 text-green-700 border border-green-200 truncate max-w-[100px]",title:Ie.name,children:Ie.sku},Y)),K.purchasedProducts.length>3&&m.jsxs("span",{className:"text-[9px] px-1 rounded bg-gray-100 text-gray-500 border border-gray-200",children:["+",K.purchasedProducts.length-3]})]})]}),m.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase
              ${K.region==="Nordeste"?"bg-orange-100 text-orange-800":K.region==="Sudeste"?"bg-blue-100 text-blue-800":K.region==="Sul"?"bg-purple-100 text-purple-800":K.region==="Norte"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}
           `,children:K.region})]}),m.jsxs("div",{className:"space-y-1 mb-3",children:[m.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600",children:[m.jsx(ad,{className:"w-4 h-4 text-gray-400"})," ",K.ownerName]}),m.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600",children:[m.jsx(Ii,{className:"w-4 h-4 text-gray-400"})," ",m.jsx("span",{className:"truncate",children:K.cleanAddress})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>he(K),className:"flex-1 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg text-center",title:`Editar cliente ${K.companyName}`,children:"Editar"}),m.jsxs("button",{onClick:()=>Se(K),className:"flex-1 py-2 text-sm font-medium text-green-600 bg-green-50 rounded-lg text-center flex items-center justify-center gap-1",title:"Atribuir Produtos",children:[m.jsx(Ri,{className:"w-4 h-4"})," Produtos"]}),m.jsx("a",{href:K.googleMapsUri||`https://www.google.com/maps/dir/?api=1&destination=${K.lat},${K.lng}`,target:"_blank",className:"flex-none p-2 text-gray-600 bg-gray-100 rounded-lg flex items-center justify-center",title:"Ver rota no Google Maps",children:m.jsx(Zx,{className:"w-5 h-5"})})]})]});return m.jsxs("div",{className:"flex flex-col h-full bg-white relative",children:[m.jsxs("div",{className:"px-3 py-2.5 border-b border-gray-200 flex flex-col md:flex-row gap-3 items-center justify-between bg-white z-10 sticky top-0 md:relative shadow-sm md:shadow-none",children:[m.jsxs("div",{className:"relative w-full md:max-w-xs group",children:[m.jsx(ki,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 group-focus-within:text-primary transition-colors"}),m.jsx("input",{type:"text",placeholder:"Razo Social ou Proprietrio...",className:"w-full pl-10 pr-4 py-1.5 bg-surface-container-highest border-none rounded-lg text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all placeholder:text-on-surface-variant/50",value:v,onChange:K=>T(K.target.value),title:"Buscar por razo social ou proprietrio"})]}),m.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0 hide-scrollbar",children:[m.jsxs("select",{value:S,onChange:K=>A(K.target.value),className:"px-2 py-1.5 bg-surface-container-highest border-none rounded-lg text-xs font-medium text-on-surface-variant focus:ring-2 focus:ring-primary/20 outline-none cursor-pointer whitespace-nowrap",title:"Filtrar por Regio",children:[m.jsx("option",{value:"Todos",children:"Todas Regies"}),id.map(K=>m.jsx("option",{value:K,children:K},K))]}),m.jsxs("select",{value:b,onChange:K=>R(K.target.value),className:"px-2 py-1.5 bg-surface-container-highest border-none rounded-lg text-xs font-medium text-on-surface-variant focus:ring-2 focus:ring-primary/20 outline-none cursor-pointer whitespace-nowrap",title:"Filtrar por Categoria",children:[m.jsx("option",{value:"Todos",children:"Todos Segmentos"}),od.filter(K=>K!=="Todos").map(K=>m.jsx("option",{value:K,children:K},K))]}),m.jsxs("div",{className:"md:ml-auto flex items-center gap-2 pl-2 border-l border-gray-200",children:[r&&$c(r)&&n&&m.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white text-xs font-bold rounded-lg hover:bg-blue-700 transition-all shadow-md shadow-blue-200 hover:shadow-lg active:scale-95 whitespace-nowrap",children:[m.jsx(m1,{className:"w-4 h-4"})," Novo"]}),m.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-outline-variant/30 text-on-surface hover:bg-surface-container-highest rounded-lg text-xs font-bold transition-colors shadow-sm whitespace-nowrap",children:[m.jsx(RM,{className:"w-4 h-4"})," Exportar"]}),h&&r&&tv(r)&&m.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-1.5 bg-tertiary text-white text-xs font-bold rounded-lg hover:bg-tertiary/90 transition-all shadow-md shadow-tertiary/20 active:scale-95 whitespace-nowrap",title:"Gerar Plus Codes para clientes sem localizao exata",children:[m.jsx(Ii,{className:"w-4 h-4"})," Plus Code"]})]})]})]}),m.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 border-b border-gray-200 text-xs text-gray-500",children:["Exibindo ",M.length," de ",t.length," clientes"]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar bg-gray-50",children:[m.jsx("div",{className:"md:hidden flex flex-col gap-0 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:M.map(K=>m.jsx(ce,{client:K},K.id))}),m.jsx("div",{className:"hidden md:grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-2",children:M.map(K=>m.jsx(fe,{client:K,style:{}},K.id))}),M.length===0&&m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[m.jsx(wC,{className:"w-12 h-12 mb-2 opacity-20"}),m.jsx("p",{className:"text-lg font-medium",children:"Nenhum cliente encontrado"}),m.jsx("p",{className:"text-sm",children:"Tente ajustar seus filtros de busca"})]})]}),B&&L&&m.jsx(vse,{isOpen:L,onClose:()=>z(!1),client:B,onSave:e,users:u,uploadedFiles:d,onCNPJAuthError:x}),O&&s&&m.jsx(yse,{isOpen:O,onClose:()=>I(!1),onAdd:n||(()=>{}),salespersonId:s,ownerName:a||"",users:u,onCNPJAuthError:x}),m.jsx(_se,{isOpen:C,onClose:()=>N(!1),client:F,products:o,productCategories:c,onSave:ie})]})},Tse="modulepreload",wse=function(t){return"/Rota-de-Vendas/"+t},iC={},o1=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var o=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");s=d(n.map(h=>{if(h=wse(h),h in iC)return;iC[h]=!0;const x=h.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":Tse,x||(T.as="script"),T.crossOrigin="",T.href=h,u&&T.setAttribute("nonce",u),document.head.appendChild(T),x)return new Promise((S,A)=>{T.addEventListener("load",S),T.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var l1=function(){return l1=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},l1.apply(this,arguments)},c1,Sse=function(t){var e;t?(function(n){if(n)for(;n.lastChild;)n.lastChild.remove()})(typeof t=="string"?document.getElementById(t):t):(e=document.querySelector(".grecaptcha-badge"))&&e.parentNode&&document.body.removeChild(e.parentNode)},Ase=function(t,e){Sse(e),window.___grecaptcha_cfg=void 0;var n=document.querySelector("#"+t);n&&n.remove(),(function(){var r=document.querySelector('script[src^="https://www.gstatic.com/recaptcha/releases"]');r&&r.remove()})()},bse=function(t){var e=t.render,n=t.onLoadCallbackName,r=t.language,s=t.onLoad,a=t.useRecaptchaNet,o=t.useEnterprise,c=t.scriptProps,u=c===void 0?{}:c,d=u.nonce,h=d===void 0?"":d,x=u.defer,v=x!==void 0&&x,T=u.async,S=T!==void 0&&T,A=u.id,b=A===void 0?"":A,R=u.appendTo,B=b||"google-recaptcha-v3";if((function(z){return!!document.querySelector("#"+z)})(B))s();else{var D=(function(z){return"https://www."+(z.useRecaptchaNet?"recaptcha.net":"google.com")+"/recaptcha/"+(z.useEnterprise?"enterprise.js":"api.js")})({useEnterprise:o,useRecaptchaNet:a}),L=document.createElement("script");L.id=B,L.src=D+"?render="+e+(e==="explicit"?"&onload="+n:"")+(r?"&hl="+r:""),h&&(L.nonce=h),L.defer=!!v,L.async=!!S,L.onload=s,(R==="body"?document.body:document.getElementsByTagName("head")[0]).appendChild(L)}},oC=function(t){console.warn(t)};(function(t){t.SCRIPT_NOT_AVAILABLE="Recaptcha script is not available"})(c1||(c1={}));var Yy=ue.createContext({executeRecaptcha:function(){throw Error("GoogleReCaptcha Context has not yet been implemented, if you are using useGoogleReCaptcha hook, make sure the hook is called inside component wrapped by GoogleRecaptchaProvider")}});Yy.Consumer;function lC(t){var e=t.reCaptchaKey,n=t.useEnterprise,r=n!==void 0&&n,s=t.useRecaptchaNet,a=s!==void 0&&s,o=t.scriptProps,c=t.language,u=t.container,d=t.children,h=ue.useState(null),x=h[0],v=h[1],T=ue.useRef(e),S=JSON.stringify(o),A=JSON.stringify(u?.parameters);ue.useEffect((function(){if(e){var B=o?.id||"google-recaptcha-v3",D=o?.onLoadCallbackName||"onRecaptchaLoadCallback";return window[D]=function(){var L=r?window.grecaptcha.enterprise:window.grecaptcha,z=l1({badge:"inline",size:"invisible",sitekey:e},u?.parameters||{});T.current=L.render(u?.element,z)},bse({render:u?.element?"explicit":e,onLoadCallbackName:D,useEnterprise:r,useRecaptchaNet:a,scriptProps:o,language:c,onLoad:function(){if(window&&window.grecaptcha){var L=r?window.grecaptcha.enterprise:window.grecaptcha;L.ready((function(){v(L)}))}else oC("<GoogleRecaptchaProvider /> "+c1.SCRIPT_NOT_AVAILABLE)}}),function(){Ase(B,u?.element)}}oC("<GoogleReCaptchaProvider /> recaptcha key not provided")}),[r,a,S,A,c,e,u?.element]);var b=ue.useCallback((function(B){if(!x||!x.execute)throw new Error("<GoogleReCaptchaProvider /> Google Recaptcha has not been loaded");return x.execute(T.current,{action:B})}),[x,T]),R=ue.useMemo((function(){return{executeRecaptcha:x?b:void 0,container:u?.element}}),[b,x,u?.element]);return bn.createElement(Yy.Provider,{value:R},d)}var Cse=function(){return ue.useContext(Yy)};function c3(t,e){return t(e={exports:{}},e.exports),e.exports;}var Ir=typeof Symbol=="function"&&Symbol.for,u1=Ir?Symbol.for("react.element"):60103,f1=Ir?Symbol.for("react.portal"):60106,J0=Ir?Symbol.for("react.fragment"):60107,Y0=Ir?Symbol.for("react.strict_mode"):60108,W0=Ir?Symbol.for("react.profiler"):60114,Z0=Ir?Symbol.for("react.provider"):60109,X0=Ir?Symbol.for("react.context"):60110,d1=Ir?Symbol.for("react.async_mode"):60111,jp=Ir?Symbol.for("react.concurrent_mode"):60111,Q0=Ir?Symbol.for("react.forward_ref"):60112,ep=Ir?Symbol.for("react.suspense"):60113,Nse=Ir?Symbol.for("react.suspense_list"):60120,tp=Ir?Symbol.for("react.memo"):60115,np=Ir?Symbol.for("react.lazy"):60116,Ise=Ir?Symbol.for("react.block"):60121,kse=Ir?Symbol.for("react.fundamental"):60117,Rse=Ir?Symbol.for("react.responder"):60118,Dse=Ir?Symbol.for("react.scope"):60119;function Vs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case u1:switch(t=t.type){case d1:case jp:case J0:case W0:case Y0:case ep:return t;default:switch(t=t&&t.$$typeof){case X0:case Q0:case np:case tp:case Z0:return t;default:return e}}case f1:return e}}}function cC(t){return Vs(t)===jp}var Mse={AsyncMode:d1,ConcurrentMode:jp,ContextConsumer:X0,ContextProvider:Z0,Element:u1,ForwardRef:Q0,Fragment:J0,Lazy:np,Memo:tp,Portal:f1,Profiler:W0,StrictMode:Y0,Suspense:ep,isAsyncMode:function(t){return cC(t)||Vs(t)===d1},isConcurrentMode:cC,isContextConsumer:function(t){return Vs(t)===X0},isContextProvider:function(t){return Vs(t)===Z0},isElement:function(t){return typeof t=="object"&&t!==null&&t.$$typeof===u1},isForwardRef:function(t){return Vs(t)===Q0},isFragment:function(t){return Vs(t)===J0},isLazy:function(t){return Vs(t)===np},isMemo:function(t){return Vs(t)===tp},isPortal:function(t){return Vs(t)===f1},isProfiler:function(t){return Vs(t)===W0},isStrictMode:function(t){return Vs(t)===Y0},isSuspense:function(t){return Vs(t)===ep},isValidElementType:function(t){return typeof t=="string"||typeof t=="function"||t===J0||t===jp||t===W0||t===Y0||t===ep||t===Nse||typeof t=="object"&&t!==null&&(t.$$typeof===np||t.$$typeof===tp||t.$$typeof===Z0||t.$$typeof===X0||t.$$typeof===Q0||t.$$typeof===kse||t.$$typeof===Rse||t.$$typeof===Dse||t.$$typeof===Ise)},typeOf:Vs},An=c3((function(t,e){})),uC=(An.AsyncMode,An.ConcurrentMode,An.ContextConsumer,An.ContextProvider,An.Element,An.ForwardRef,An.Fragment,An.Lazy,An.Memo,An.Portal,An.Profiler,An.StrictMode,An.Suspense,An.isAsyncMode,An.isConcurrentMode,An.isContextConsumer,An.isContextProvider,An.isElement,An.isForwardRef,An.isFragment,An.isLazy,An.isMemo,An.isPortal,An.isProfiler,An.isStrictMode,An.isSuspense,An.isValidElementType,An.typeOf,c3((function(t){t.exports=Mse}))),Pse={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fC={};fC[uC.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fC[uC.Memo]=Pse;const Fse=({users:t,onLogin:e})=>{const[n,r]=ue.useState("login"),[s,a]=ue.useState(""),[o,c]=ue.useState(""),[u,d]=ue.useState(""),[h,x]=ue.useState(""),[v,T]=ue.useState(""),[S,A]=ue.useState(""),[b,R]=ue.useState(!1),{executeRecaptcha:B}=Cse(),[D,L]=ue.useState(!1),z=async F=>{if(F.preventDefault(),d(""),console.log("[CAPTCHA] Key configured:","MISSING"),console.log("[CAPTCHA] executeRecaptcha available:",!!B),!B){console.error("[CAPTCHA] executeRecaptcha not available - Provider may not be loaded"),d(" Sistema de segurana no carregado. Recarregue a pgina.");return}L(!0);try{console.log("[CAPTCHA] Executing reCAPTCHA verification...");const U=await B("login");if(console.log("[CAPTCHA] Token received:",U?"Success ":"Failed "),console.log("[CAPTCHA] Token length:",U?.length||0),!U)throw new Error("reCAPTCHA token is empty");console.log("[AUTH] CAPTCHA passed, validating credentials...");let M=t;if(!M||M.length===0){console.log("[AUTH] Prop users is empty, loading INITIAL_USERS as fallback");const{INITIAL_USERS:he}=await o1(async()=>{const{INITIAL_USERS:Se}=await Promise.resolve().then(()=>h1);return{INITIAL_USERS:Se}},void 0);M=If(he)}const j=M.find(he=>he.username.toLowerCase()===s.toLowerCase());j&&j.password===o?(console.log("[AUTH] Login successful "),e(j)):(console.warn("[AUTH] Invalid credentials"),d(" Credenciais invlidas. Verifique usurio e senha."))}catch(U){console.error("[CAPTCHA] Error details:",{message:U?.message,name:U?.name,stack:U?.stack,error:U}),U?.message?.includes("Invalid site key")?d(" Erro de configurao: Chave reCAPTCHA invlida. Contate o administrador."):U?.message?.includes("network")?d(" Erro de rede. Verifique sua conexo e tente novamente."):d(` Falha na verificao de segurana: ${U?.message||"Erro desconhecido"}. Tente novamente.`)}finally{L(!1)}},O=()=>{d(""),A(""),x(""),T("")},I=F=>{O(),r(F)},C=async F=>{F.preventDefault(),d(""),R(!0),await new Promise(M=>setTimeout(M,1500));const U=t.find(M=>M.email?.toLowerCase()===h.toLowerCase());A(U?`Seu usurio foi enviado para: ${h}`:"Se este e-mail estiver cadastrado, voc receber seu usurio em breve."),R(!1)},N=async F=>{F.preventDefault(),d(""),R(!0),await new Promise(M=>setTimeout(M,1500));const U=t.find(M=>M.username.toLowerCase()===v.toLowerCase()||M.email?.toLowerCase()===v.toLowerCase());U&&U.email?A(`Instrues de redefinio enviadas para: ${U.email}`):A("Se os dados estiverem corretos, enviamos as instrues para o seu e-mail de cadastro."),R(!1)};return m.jsxs("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4 bg-[url('https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center",children:[m.jsx("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-sm"}),m.jsxs("div",{className:"bg-white relative z-10 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden transition-all duration-300",children:[m.jsxs("div",{className:"bg-slate-800 p-8 text-center border-b border-slate-700 relative",children:[n!=="login"&&m.jsx("button",{onClick:()=>I("login"),className:"absolute left-4 top-8 text-white/50 hover:text-white transition-colors",title:"Voltar",children:m.jsx(iM,{className:"w-6 h-6"})}),m.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center mb-4 shadow-lg shadow-blue-900/50",children:m.jsx(CC,{className:"w-7 h-7 text-white"})}),m.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Portal Corporativo"}),m.jsx("p",{className:"text-slate-400 text-sm",children:"Gesto de Rotas & Vendas"})]}),m.jsxs("div",{className:"p-8 space-y-6",children:[n==="login"&&m.jsxs("form",{onSubmit:z,className:"space-y-6 pt-2 animate-fade-in",children:[m.jsx("div",{className:"text-center pb-2",children:m.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Acesse sua conta para continuar"})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1",children:"Usurio"}),m.jsxs("div",{className:"relative",children:[m.jsx(Is,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"text",value:s,onChange:F=>a(F.target.value),placeholder:"Digite seu usurio",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),m.jsx("div",{className:"text-right mt-1",children:m.jsx("button",{type:"button",onClick:()=>I("forgot_user"),className:"text-[10px] text-blue-500 hover:text-blue-700 font-medium",children:"Esqueci o usurio"})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1",children:"Senha"}),m.jsxs("div",{className:"relative",children:[m.jsx(Xx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"password",value:o,onChange:F=>c(F.target.value),placeholder:"",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),m.jsx("div",{className:"text-right mt-1",children:m.jsx("button",{type:"button",onClick:()=>I("forgot_pass"),className:"text-[10px] text-blue-500 hover:text-blue-700 font-medium",children:"Esqueci a senha"})})]})]}),u&&m.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 p-3 rounded border border-red-100",children:[m.jsx(ts,{className:"w-4 h-4 flex-shrink-0"}),u]}),m.jsx("button",{type:"submit",disabled:D,className:"w-full bg-slate-800 hover:bg-slate-900 disabled:bg-slate-400 disabled:cursor-wait text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-md",children:D?m.jsxs(m.Fragment,{children:[m.jsx(Qx,{className:"w-4 h-4 animate-pulse"}),"Verificando segurana..."]}):m.jsxs(m.Fragment,{children:["Entrar ",m.jsx(lM,{className:"w-4 h-4"})]})})]}),n==="forgot_user"&&m.jsxs("div",{className:"animate-fade-in space-y-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"bg-blue-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Is,{className:"w-8 h-8 text-blue-600"})}),m.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Recuperar Usurio"}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Informe seu e-mail cadastrado. Enviaremos seu nome de usurio para ele."})]}),S?m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center animate-fade-in",children:[m.jsx(iu,{className:"w-10 h-10 text-green-500 mx-auto mb-3"}),m.jsx("h4",{className:"text-green-800 font-bold mb-2",children:"E-mail Enviado!"}),m.jsx("p",{className:"text-sm text-green-700",children:S}),m.jsx("button",{onClick:()=>I("login"),className:"mt-4 text-sm font-bold text-green-700 hover:text-green-900 underline",children:"Voltar para o Login"})]}):m.jsxs("form",{onSubmit:C,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1",children:"E-mail Cadastrado"}),m.jsxs("div",{className:"relative",children:[m.jsx(YM,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"email",required:!0,value:h,onChange:F=>x(F.target.value),placeholder:"exemplo@empresa.com",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),m.jsxs("button",{type:"submit",disabled:b,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-md disabled:opacity-70 disabled:cursor-wait",children:[b?"Enviando...":"Recuperar Usurio",!b&&m.jsx(Iw,{className:"w-4 h-4"})]})]})]}),n==="forgot_pass"&&m.jsxs("div",{className:"animate-fade-in space-y-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"bg-orange-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Xx,{className:"w-8 h-8 text-orange-600"})}),m.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Redefinir Senha"}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Informe seu usurio ou e-mail. Enviaremos as instrues de redefinio."})]}),S?m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center animate-fade-in",children:[m.jsx(iu,{className:"w-10 h-10 text-green-500 mx-auto mb-3"}),m.jsx("h4",{className:"text-green-800 font-bold mb-2",children:"Sucesso!"}),m.jsx("p",{className:"text-sm text-green-700",children:S}),m.jsx("button",{onClick:()=>I("login"),className:"mt-4 text-sm font-bold text-green-700 hover:text-green-900 underline",children:"Voltar para o Login"})]}):m.jsxs("form",{onSubmit:N,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1",children:"Usurio ou E-mail"}),m.jsxs("div",{className:"relative",children:[m.jsx(Is,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"text",required:!0,value:v,onChange:F=>T(F.target.value),placeholder:"Digite seu usurio ou email",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),m.jsxs("button",{type:"submit",disabled:b,className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-md disabled:opacity-70 disabled:cursor-wait",children:[b?"Enviando...":"Enviar Instrues",!b&&m.jsx(Iw,{className:"w-4 h-4"})]})]})]})]})]})]})},Ose=({startDate:t,endDate:e,onRangeChange:n,label:r="Perodo"})=>{const[s,a]=ue.useState(!1),[o,c]=ue.useState(new Date),u=ue.useRef(null);ue.useEffect(()=>{const D=L=>{u.current&&!u.current.contains(L.target)&&a(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const d=D=>D.toISOString().split("T")[0],h=D=>{const L=d(D);!t||t&&e?n(L,""):L<t?n(L,t):n(t,L)},x=D=>{D.stopPropagation(),n("","")},v=()=>{const D=o.getFullYear(),L=o.getMonth(),z=new Date(D,L,1),O=new Date(D,L+1,0),I=new Date(z);I.setDate(I.getDate()-z.getDay());const C=new Date(O);C.setDate(C.getDate()+(6-O.getDay()));const N=[];let F=new Date(I);for(;F<=C;)N.push(new Date(F)),F.setDate(F.getDate()+1);return N},T=D=>{const L=d(D);return L===t||L===e},S=D=>{if(!t||!e)return!1;const L=d(D);return L>t&&L<e},A=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],b=D=>{const L=new Date(o);L.setMonth(L.getMonth()+D),c(L)},R=()=>{const D=new Date;c(D),n(d(D),d(D))},B=()=>t?e?`${t.split("-").reverse().join("/")} - ${e.split("-").reverse().join("/")}`:`${t.split("-").reverse().join("/")} - ...`:"Selecionar data";return m.jsxs("div",{className:"relative inline-block",ref:u,children:[m.jsxs("button",{type:"button",onClick:()=>a(!s),className:`flex items-center gap-2 h-8 px-3 rounded-md border transition-all duration-200 outline-none
          ${s?"bg-primary-container border-primary text-on-primary-container shadow-sm":t?"bg-secondary-container border-outline text-on-secondary-container":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[m.jsx(vC,{className:`w-3.5 h-3.5 ${t?"text-primary":"text-gray-400"}`}),m.jsx("span",{className:"text-[11px] font-bold uppercase tracking-tight mr-1",children:r}),m.jsx("span",{className:"text-[11px] font-medium",children:B()}),t&&m.jsx(Gs,{className:"w-3 h-3 ml-1 hover:text-error transition-colors",onClick:x})]}),s&&m.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 bg-white border border-outline-variant rounded-2xl shadow-elevation-3 p-4 min-w-[320px] animate-in fade-in slide-in-from-top-2 duration-200",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("h3",{className:"text-sm font-bold text-on-surface ml-2",children:[A[o.getMonth()]," de ",o.getFullYear()]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:()=>b(-1),className:"p-2 hover:bg-surface-container-highest rounded-full transition-colors","aria-label":"Ms anterior",children:m.jsx(xM,{className:"w-5 h-5 text-on-surface-variant"})}),m.jsx("button",{onClick:()=>b(1),className:"p-2 hover:bg-surface-container-highest rounded-full transition-colors","aria-label":"Prximo ms",children:m.jsx(yC,{className:"w-5 h-5 text-on-surface-variant"})})]})]}),m.jsxs("div",{className:"grid grid-cols-7 gap-y-1 mb-4",children:[["D","S","T","Q","Q","S","S"].map((D,L)=>m.jsx("div",{className:"text-center text-[11px] font-bold text-on-surface-variant h-8 flex items-center justify-center",children:D},L)),v().map((D,L)=>{const z=T(D),O=S(D),I=d(D)===d(new Date),C=D.getMonth()===o.getMonth();return m.jsx("div",{className:`relative flex items-center justify-center h-10 w-full cursor-pointer
                    ${O?"bg-primary-container":""}
                    ${z&&t&&e&&d(D)===t?"rounded-l-full":""}
                    ${z&&t&&e&&d(D)===e?"rounded-r-full":""}
                    ${z&&(!t||!e||t===e)?"rounded-full":""}
                  `,onClick:()=>h(D),children:m.jsx("div",{className:`
                    w-8 h-8 flex items-center justify-center text-[12px] font-medium transition-all duration-200
                    ${z?"bg-primary text-on-primary rounded-full shadow-sm z-10":I?"border border-primary text-primary rounded-full":C?"text-on-surface":"text-gray-300"}
                    ${!z&&!O&&C?"hover:bg-surface-variant rounded-full":""}
                  `,children:D.getDate()})},L)})]}),m.jsxs("div",{className:"flex items-center justify-between border-t border-outline-variant pt-3 px-2",children:[m.jsx("button",{onClick:R,className:"text-xs font-bold text-primary hover:bg-primary/5 px-3 py-1.5 rounded-full transition-colors",children:"Hoje"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:x,className:"text-xs font-bold text-error hover:bg-error/5 px-3 py-1.5 rounded-full transition-colors",children:"Limpar"}),m.jsx("button",{onClick:()=>a(!1),className:"text-xs font-bold text-primary bg-primary/10 hover:bg-primary/20 px-4 py-1.5 rounded-full transition-colors",children:"Concluir"})]})]})]})]})},Lse=(t,e=200,n=200,r=.7)=>new Promise((s,a)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=c=>{const u=new Image;u.src=c.target?.result,u.onload=()=>{const d=document.createElement("canvas");let h=u.width,x=u.height;h>x?h>e&&(x=Math.round(x*=e/h),h=e):x>n&&(h=Math.round(h*=n/x),x=n),d.width=h,d.height=x;const v=d.getContext("2d");if(!v){a(new Error("Could not get canvas context"));return}v.drawImage(u,0,0,h,x);const T=d.toDataURL("image/jpeg",r);s(T)},u.onerror=d=>a(d)},o.onerror=c=>a(c)}),Use=({currentUser:t,users:e,onAddUser:n,onUpdateUser:r,onDeleteUser:s,onCleanupDuplicates:a,totalClients:o})=>{const[c,u]=ue.useState(null),[d,h]=ue.useState(""),[x,v]=ue.useState(""),[T,S]=ue.useState(""),A=MP(t.role),b=A.includes("sales_external")?"sales_external":A[0],[R,B]=ue.useState(b),[D,L]=ue.useState("Externo"),[z,O]=ue.useState("#3B82F6"),[I,C]=ue.useState(void 0),N=ue.useRef(null),[F,U]=ue.useState("Todos"),M=()=>{u(null),h(""),v(""),S(""),B(b),L("Externo"),O("#3B82F6"),C(void 0),N.current&&(N.current.value="")},j=ce=>{if(!gx(t.role,ce.role)){alert("Voc no tem permisso para editar este usurio (Nvel Hierrquico Superior ou Igual).");return}u(ce.id),h(ce.name),v(ce.username),S(ce.password||""),B(DP(ce.role)),L(ce.salesCategory||"N/A"),O(ce.color||"#3B82F6"),C(ce.photoURL),window.scrollTo({top:0,behavior:"smooth"})},he=async ce=>{const K=ce.target.files?.[0];if(K){if(!["image/jpeg","image/png"].includes(K.type)){alert("Apenas imagens JPEG ou PNG so permitidas.");return}if(K.size>2*1024*1024){alert("A imagem deve ter no mximo 2MB.");return}try{const Ie=await Lse(K);C(Ie)}catch(Ie){console.error("Erro ao processar imagem:",Ie),alert("Erro ao processar a imagem. Tente novamente.")}}},Se=ce=>{if(ce.preventDefault(),!d||!x||!T)return;const K=Ns[R]>=4,Ie={id:c||Date.now().toString(),name:d,username:x,role:R,password:T,salesCategory:K?D:"N/A",color:K?z:void 0,photoURL:I};c?r(Ie):n(Ie),M()},ie=e.filter(ce=>F==="Todos"||F==="N/A"&&Ns[ce.role]<=2?!0:ce.salesCategory===F),fe=["Todos","Externo","Interno","Mercado Livre"];return m.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8 animate-fade-in pb-20",children:[m.jsxs("div",{className:`bg-white rounded-[28px] shadow-elevation-1 p-6 transition-all border ${c?"border-primary ring-2 ring-primary/20":"border-transparent"}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("h2",{className:`text-xl font-normal flex items-center gap-2 ${c?"text-primary":"text-on-surface"}`,children:[c?m.jsx(mx,{className:"w-5 h-5"}):m.jsx(Rw,{className:"w-5 h-5 text-primary"}),c?"Editar Usurio":"Cadastrar Novo Usurio"]}),c&&m.jsxs("button",{onClick:M,className:"text-sm text-on-surface-variant hover:text-on-surface flex items-center gap-1",children:[m.jsx(Gs,{className:"w-4 h-4"})," Cancelar Edio"]})]}),m.jsxs("form",{onSubmit:Se,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-3 flex justify-center mb-4",children:[m.jsxs("div",{className:"relative group",children:[m.jsx("div",{className:`w-24 h-24 rounded-full overflow-hidden border-2 flex items-center justify-center bg-surface-container-highest ${I?"border-primary":"border-dashed border-outline-variant"}`,children:I?m.jsx("img",{src:I,alt:"Profile",className:"w-full h-full object-cover"}):m.jsx(Is,{className:"w-10 h-10 text-on-surface-variant/50"})}),m.jsxs("label",{htmlFor:"photo-upload",className:"absolute bottom-0 right-0 p-1.5 bg-primary text-on-primary rounded-full shadow-md cursor-pointer hover:bg-primary/90 transition-colors",title:"Alterar foto",children:[m.jsx(pM,{className:"w-4 h-4"}),m.jsx("input",{id:"photo-upload",type:"file",accept:"image/jpeg, image/png",onChange:he,className:"hidden",ref:N})]}),I&&m.jsx("button",{type:"button",onClick:()=>{C(void 0),N.current&&(N.current.value="")},className:"absolute -top-1 -right-1 p-1 bg-error text-white rounded-full shadow-md hover:bg-error/90 transition-colors",title:"Remover foto",children:m.jsx(Gs,{className:"w-3 h-3"})})]}),m.jsxs("div",{className:"ml-4 flex flex-col justify-center",children:[m.jsx("span",{className:"text-sm font-medium text-on-surface",children:"Foto de Perfil"}),m.jsx("span",{className:"text-xs text-on-surface-variant",children:"JPG ou PNG at 2MB."})]})]}),m.jsxs("div",{className:"lg:col-span-2",children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Nome Completo"}),m.jsx("input",{type:"text",value:d,onChange:ce=>h(ce.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Ex: Carlos Oliveira"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Usurio de Login"}),m.jsx("input",{type:"text",value:x,onChange:ce=>v(ce.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Ex: vendedor_carlos"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Senha"}),m.jsx("input",{type:"text",value:T,onChange:ce=>S(ce.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors",placeholder:"Senha de acesso"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Perfil de Acesso"}),m.jsx("select",{value:R,onChange:ce=>B(ce.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none appearance-none cursor-pointer",children:A.map(ce=>m.jsx("option",{value:ce,children:NC[ce]||ce},ce))}),m.jsx("p",{className:"text-[10px] text-on-surface-variant mt-1 pl-1",children:"* Voc s pode criar nveis abaixo do seu."})]}),Ns[R]>=4&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"animate-fade-in",children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Categoria de Venda"}),m.jsxs("select",{value:D,onChange:ce=>L(ce.target.value),className:"w-full bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2.5 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none appearance-none cursor-pointer",children:[m.jsx("option",{value:"Externo",children:"Externo"}),m.jsx("option",{value:"Interno",children:"Interno"}),m.jsx("option",{value:"Mercado Livre",children:"Mercado Livre"})]})]}),m.jsxs("div",{className:"animate-fade-in",children:[m.jsx("label",{className:"block text-xs font-medium text-on-surface-variant mb-1 ml-1",children:"Cor do Vendedor (Mapa)"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"color",value:z,onChange:ce=>O(ce.target.value),className:"h-10 w-16 p-0 border-0 rounded overflow-hidden cursor-pointer",title:"Escolher cor"}),m.jsx("input",{type:"text",value:z,onChange:ce=>O(ce.target.value),className:"flex-1 bg-surface-container-highest border-b border-outline-variant rounded-t-lg px-4 py-2 text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors uppercase",placeholder:"#000000",maxLength:7})]})]})]}),m.jsx("div",{className:"lg:col-span-3 pt-2 flex justify-end",children:m.jsxs("button",{type:"submit",disabled:!d||!x||!T,className:`px-6 py-2.5 rounded-full font-medium transition-all shadow-elevation-1 hover:shadow-elevation-2 flex items-center gap-2 ${c?"bg-primary-container text-on-primary-container hover:bg-primary-container/80":"bg-primary text-on-primary hover:bg-primary/90"} disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none`,children:[c?m.jsx(Md,{className:"w-4 h-4"}):m.jsx(Rw,{className:"w-4 h-4"}),c?"Salvar Alteraes":"Criar Acesso"]})})]})]}),m.jsxs("div",{className:"bg-white rounded-[28px] shadow-elevation-1 overflow-hidden",children:[m.jsxs("div",{className:"bg-white rounded-[28px] shadow-elevation-1 p-6 space-y-4",children:[m.jsxs("h2",{className:"text-xl font-normal flex items-center gap-2 text-on-surface",children:[m.jsx(Is,{className:"w-5 h-5 text-primary"}),"Usurios Cadastrados (",ie.length,")"]}),m.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-4 flex items-start justify-between",children:[m.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[m.jsx(ts,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Manuteno do Sistema"}),m.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["Total de clientes no sistema: ",m.jsx("strong",{children:o}),o>143&&m.jsx("span",{className:"text-red-600",children:"  Possveis duplicatas detectadas"})]})]})]}),m.jsxs("button",{onClick:a,className:"px-4 py-2 bg-yellow-600 text-white rounded-full text-sm font-medium hover:bg-yellow-700 transition-colors flex items-center gap-2 whitespace-nowrap",children:[m.jsx(ts,{className:"w-4 h-4"}),"Limpar Duplicatas"]})]}),m.jsx("div",{className:"flex bg-surface-container-highest p-1 rounded-full",children:fe.map(ce=>m.jsx("button",{onClick:()=>U(ce),className:`px-4 py-1.5 text-xs font-medium rounded-full transition-all ${F===ce?"bg-white text-on-surface shadow-sm":"text-on-surface-variant hover:text-on-surface"}`,children:ce},ce))})]}),m.jsx("div",{className:"hidden md:block overflow-x-auto",children:m.jsxs("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-on-surface-variant uppercase bg-surface-container-highest/50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 font-medium",children:"Nome"}),m.jsx("th",{className:"px-6 py-4 font-medium",children:"Usurio"}),m.jsx("th",{className:"px-6 py-4 font-medium",children:"Funo"}),m.jsx("th",{className:"px-6 py-4 font-medium",children:"Categoria"}),m.jsx("th",{className:"px-6 py-4 font-medium",children:"Cor"}),m.jsx("th",{className:"px-6 py-4 font-medium text-right",children:"Aes"})]})}),m.jsxs("tbody",{className:"divide-y divide-outline-variant/30",children:[ie.map(ce=>m.jsxs("tr",{className:`hover:bg-surface-container-highest/30 transition-colors ${c===ce.id?"bg-primary-container/30":""}`,children:[m.jsx("td",{className:"px-6 py-4 font-medium text-on-surface",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center overflow-hidden border border-outline-variant/30",children:ce.photoURL?m.jsx("img",{src:ce.photoURL,alt:ce.name,className:"w-full h-full object-cover"}):m.jsx(Is,{className:"w-4 h-4 text-primary"})}),ce.name]})}),m.jsx("td",{className:"px-6 py-4 text-on-surface-variant",children:ce.username}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border ${Ns[ce.role]<=2?"bg-tertiary-container text-on-tertiary-container border-tertiary-container":"bg-secondary-container text-on-secondary-container border-secondary-container"}`,children:Dw(ce.role)})}),m.jsx("td",{className:"px-6 py-4",children:Ns[ce.role]>=4?m.jsxs("span",{className:"flex items-center gap-1 text-xs text-on-surface-variant",children:[m.jsx(Xa,{className:"w-3.5 h-3.5"}),ce.salesCategory||"N/A"]}):m.jsx("span",{className:"text-outline-variant",children:"-"})}),m.jsx("td",{className:"px-6 py-4",children:Ns[ce.role]>=4&&ce.color?m.jsx("div",{className:"flex items-center gap-2",title:ce.color,children:m.jsx("div",{className:"w-6 h-6 rounded-full border border-gray-200 shadow-sm",style:{backgroundColor:ce.color}})}):m.jsx("span",{className:"text-outline-variant",children:"-"})}),m.jsx("td",{className:"px-6 py-4 text-right",children:m.jsx("div",{className:"flex items-center justify-end gap-2",children:gx(t.role,ce.role)?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>j(ce),className:"p-2 text-primary hover:bg-primary-container/30 rounded-full transition-colors",title:"Editar",children:m.jsx(mx,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>s(ce.id),className:"p-2 text-error hover:bg-error-container/30 rounded-full transition-colors",title:"Remover",children:m.jsx(Dl,{className:"w-4 h-4"})})]}):m.jsx("div",{className:"flex items-center gap-2 opacity-30 cursor-not-allowed",children:m.jsx("span",{className:"text-xs italic",children:"Sem permisso"})})})})]},ce.id)),ie.length===0&&m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-on-surface-variant",children:"Nenhum usurio encontrado para este filtro."})})]})]})}),m.jsxs("div",{className:"md:hidden space-y-4 p-4",children:[ie.map(ce=>m.jsxs("div",{className:`bg-surface-container-highest/30 rounded-xl p-4 border border-outline-variant/30 ${c===ce.id?"bg-primary-container/30 border-primary/30":""}`,children:[m.jsxs("div",{className:"flex justify-between items-start mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center overflow-hidden border border-outline-variant/30 flex-shrink-0",children:ce.photoURL?m.jsx("img",{src:ce.photoURL,alt:ce.name,className:"w-full h-full object-cover"}):m.jsx(Is,{className:"w-5 h-5 text-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-on-surface",children:ce.name}),m.jsxs("p",{className:"text-xs text-on-surface-variant",children:["@",ce.username]})]})]}),m.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border ${Ns[ce.role]<=2?"bg-tertiary-container text-on-tertiary-container border-tertiary-container":"bg-secondary-container text-on-secondary-container border-secondary-container"}`,children:Dw(ce.role)})]}),m.jsxs("div",{className:"space-y-2 text-sm text-on-surface-variant mb-4",children:[m.jsxs("div",{className:"flex justify-between border-b border-outline-variant/20 pb-1",children:[m.jsx("span",{children:"Categoria:"}),m.jsx("span",{className:"font-medium text-on-surface",children:ce.salesCategory||"-"})]}),m.jsxs("div",{className:"flex justify-between border-b border-outline-variant/20 pb-1",children:[m.jsx("span",{children:"Senha:"}),m.jsx("span",{className:"font-mono",children:ce.password||"***"})]})]}),m.jsx("div",{className:"flex justify-end gap-2 pt-2",children:gx(t.role,ce.role)&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>j(ce),className:"px-3 py-1.5 bg-primary/10 text-primary rounded-lg text-xs font-medium flex items-center gap-1 hover:bg-primary/20 transition-colors",children:[m.jsx(mx,{className:"w-3.5 h-3.5"})," Editar"]}),m.jsxs("button",{onClick:()=>s(ce.id),className:"px-3 py-1.5 bg-error/10 text-error rounded-lg text-xs font-medium flex items-center gap-1 hover:bg-error/20 transition-colors",children:[m.jsx(Dl,{className:"w-3.5 h-3.5"})," Remover"]})]})})]},ce.id)),ie.length===0&&m.jsx("p",{className:"text-center text-on-surface-variant py-8 text-sm",children:"Nenhum usurio encontrado."})]})]})]})},Vse=({categories:t,onAddCategory:e,onDeleteCategory:n})=>{const[r,s]=ue.useState(""),a=o=>{o.preventDefault(),r.trim()&&(e(r.trim()),s(""))};return m.jsx("div",{className:"p-6 max-w-4xl mx-auto space-y-6 animate-fade-in pb-20",children:m.jsxs("div",{className:"bg-white rounded-[28px] shadow-elevation-1 p-6 border border-transparent",children:[m.jsxs("h2",{className:"text-xl font-normal text-on-surface mb-2 flex items-center gap-2",children:[m.jsx(AC,{className:"w-5 h-5 text-primary"}),"Gerenciar Categorias de Produtos"]}),m.jsx("p",{className:"text-sm text-on-surface-variant mb-6",children:"Defina as categorias que a Inteligncia Artificial utilizar para classificar os novos clientes importados."}),m.jsxs("form",{onSubmit:a,className:"flex gap-3 mb-8",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(g1,{className:"absolute left-3 top-3 h-5 w-5 text-on-surface-variant"}),m.jsx("input",{type:"text",value:r,onChange:o=>s(o.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-surface-container-highest border-b border-outline-variant rounded-t-lg text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors placeholder:text-on-surface-variant/50",placeholder:"Nova Categoria (ex: Auto Eltrica)"})]}),m.jsxs("button",{type:"submit",disabled:!r.trim(),className:"bg-primary text-on-primary font-medium px-6 py-2.5 rounded-full hover:bg-primary/90 disabled:bg-on-surface/12 disabled:text-on-surface/38 disabled:cursor-not-allowed transition-all shadow-elevation-1 hover:shadow-elevation-2 flex items-center gap-2",children:[m.jsx(m1,{className:"w-4 h-4"})," Adicionar"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[t.map(o=>m.jsxs("div",{className:"flex items-center justify-between p-3 pl-4 bg-surface-container-highest/50 rounded-xl border border-outline-variant/50 group hover:border-primary/50 transition-colors",children:[m.jsxs("span",{className:"font-medium text-on-surface flex items-center gap-2",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),o]}),m.jsx("button",{onClick:()=>n(o),className:"text-on-surface-variant hover:text-error p-2 rounded-full hover:bg-error-container/30 transition-all opacity-0 group-hover:opacity-100",title:"Remover Categoria",children:m.jsx(Dl,{className:"w-4 h-4"})})]},o)),t.length===0&&m.jsx("div",{className:"col-span-full py-12 text-center text-on-surface-variant bg-surface-container-low rounded-[16px] border border-dashed border-outline-variant/50",children:"Nenhuma categoria definida. Adicione categorias acima."})]})]})})},Bse=({products:t,onUploadProducts:e,onClearProducts:n,onSaveProducts:r,apiKey:s})=>{const[a,o]=ue.useState(!1),[c,u]=ue.useState(""),[d,h]=ue.useState(!1),[x,v]=ue.useState({current:0,total:0}),[T,S]=ue.useState([]),[A,b]=ue.useState(null),[R,B]=ue.useState(!1);ue.useEffect(()=>{S(t),B(!1)},[t]);const D=async M=>{const j=M.target.files?.[0];if(j){o(!0);try{let he=[];const Se=j.name.toLowerCase();if(Se.endsWith(".csv"))he=await cN(j);else if(Se.endsWith(".xlsx")||Se.endsWith(".xls"))he=await $I(j);else throw new Error("Formato no suportado. Use .csv, .xlsx ou .xls");e(he),M.target.value=""}catch(he){console.error("Error parsing products:",he),alert("Erro ao processar arquivo de produtos. Verifique o formato.")}finally{o(!1)}}},L=()=>{r&&(r(T),B(!1),alert("Alteraes salvas com sucesso!"))},z=async()=>{if(!s){alert("Configure sua API Key do Google Gemini nas configuraes de Admin.");return}if(T.length===0){alert("Nenhum produto para categorizar.");return}if(window.confirm(`Deseja usar a IA para categorizar ${T.length} produtos?

Isso pode consumir crditos da API e levar alguns minutos.`)){h(!0),v({current:0,total:T.length});try{const M=await HW(T,s,(j,he)=>{v({current:j,total:he})});S(M),B(!0),alert(` ${M.length} produtos foram categorizados pela IA!`)}catch(M){console.error("AI Categorization failed",M),alert(`Erro ao categorizar produtos: ${M.message||"Erro desconhecido"}`)}finally{h(!1),v({current:0,total:0})}}},O=(M,j,he)=>{const Se=[...T];Se[M]={...Se[M],[j]:he},S(Se),B(!0)},I=M=>{let j="asc";A&&A.key===M&&A.direction==="asc"&&(j="desc"),b({key:M,direction:j})},C=M=>A?[...M].sort((j,he)=>{let Se=j[A.key],ie=he[A.key];return A.key==="price"||A.key==="discount"?(Se=Number(Se||0),ie=Number(ie||0)):(Se=String(Se||"").toLowerCase(),ie=String(ie||"").toLowerCase()),Se<ie?A.direction==="asc"?-1:1:Se>ie?A.direction==="asc"?1:-1:0}):M,N=T.map((M,j)=>({...M,originalIndex:j})).filter(M=>(M.name||"").toLowerCase().includes(c.toLowerCase())||(M.sku||"").toLowerCase().includes(c.toLowerCase())||(M.brand||"").toLowerCase().includes(c.toLowerCase())||(M.category||"").toLowerCase().includes(c.toLowerCase())||(M.factoryCode||"").toLowerCase().includes(c.toLowerCase())),F=C(N),U=({column:M})=>A?.key!==M?m.jsx("div",{className:"w-4 h-4 ml-1 inline-block opacity-0 group-hover:opacity-30",children:""}):A.direction==="asc"?m.jsx(uM,{className:"w-3 h-3 ml-1 inline-block text-primary"}):m.jsx(sM,{className:"w-3 h-3 ml-1 inline-block text-primary"});return m.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6 animate-fade-in h-full flex flex-col pb-20",children:[m.jsxs("div",{className:"bg-white rounded-[28px] shadow-elevation-1 p-6 flex flex-col h-full overflow-hidden",children:[m.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 shrink-0",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-xl font-normal text-on-surface flex items-center gap-2",children:[m.jsx(ko,{className:"w-5 h-5 text-primary"}),"Catlogo de Produtos"]}),m.jsx("p",{className:"text-sm text-on-surface-variant mt-1",children:"Gerencie preos, descontos e categorias."})]}),m.jsxs("div",{className:"flex gap-3 items-center flex-wrap",children:[R&&m.jsxs("button",{onClick:L,className:"px-6 py-2 bg-tertiary-container text-on-tertiary-container hover:bg-tertiary-container/80 rounded-full text-sm font-medium flex items-center gap-2 transition-all shadow-elevation-1 animate-pulse",children:[m.jsx(Md,{className:"w-4 h-4"})," Salvar Alteraes"]}),t.length>0&&m.jsxs("button",{onClick:z,disabled:d,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 rounded-full text-sm font-medium flex items-center gap-2 transition-all shadow-elevation-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[d?m.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):m.jsx(kw,{className:"w-4 h-4"}),d?"Processando...":"IA Classificar"]}),t.length>0&&m.jsxs("button",{onClick:n,className:"px-6 py-2 border border-error/50 text-error hover:bg-error-container/30 rounded-full text-sm font-medium flex items-center gap-2 transition-colors",children:[m.jsx(Dl,{className:"w-4 h-4"})," Limpar"]}),m.jsxs("label",{className:`px-6 py-2 bg-primary text-on-primary rounded-full hover:bg-primary/90 text-sm font-medium flex items-center gap-2 cursor-pointer transition-all shadow-elevation-1 hover:shadow-elevation-2 ${a?"opacity-50 pointer-events-none":""}`,children:[a?m.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-on-primary border-t-transparent rounded-full"}):m.jsx(CP,{className:"w-4 h-4"}),a?"Processando...":"Importar CSV",m.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:D})]})]})]}),t.length===0?m.jsxs("div",{className:"border border-dashed border-outline-variant rounded-[16px] p-12 text-center bg-surface-container-low flex-1 flex flex-col items-center justify-center",children:[m.jsx("div",{className:"w-16 h-16 bg-surface-container-highest rounded-full flex items-center justify-center mb-4",children:m.jsx(F0,{className:"w-8 h-8 text-outline"})}),m.jsx("p",{className:"text-on-surface font-medium",children:"Nenhum produto cadastrado."}),m.jsx("p",{className:"text-sm text-on-surface-variant mt-1",children:"Carregue um arquivo CSV para comear."})]}):m.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[m.jsxs("div",{className:"mb-4 relative flex-shrink-0",children:[m.jsx(ki,{className:"absolute left-3 top-2.5 w-4 h-4 text-on-surface-variant"}),m.jsx("input",{type:"text",value:c,onChange:M=>u(M.target.value),placeholder:"Filtrar por SKU, Marca, Departamento, Nome...",className:"w-full pl-10 pr-4 py-2 bg-surface-container-highest border-b border-outline-variant rounded-t-lg text-on-surface focus:border-primary focus:bg-surface-container-highest outline-none transition-colors text-sm"})]}),m.jsx("div",{className:"hidden md:block flex-1 overflow-auto border border-outline-variant/30 rounded-xl shadow-inner scrollbar-thin scrollbar-thumb-outline-variant scrollbar-track-surface-container-low",children:m.jsxs("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-on-surface-variant uppercase bg-surface-container-highest/80 sticky top-0 z-10 backdrop-blur-sm",children:m.jsxs("tr",{children:[m.jsxs("th",{className:"px-4 py-3 cursor-pointer hover:bg-surface-container-highest group select-none w-24",onClick:()=>I("sku"),children:["SKU ",m.jsx(U,{column:"sku"})]}),m.jsxs("th",{className:"px-4 py-3 cursor-pointer hover:bg-surface-container-highest group select-none w-32",onClick:()=>I("brand"),children:["Marca ",m.jsx(U,{column:"brand"})]}),m.jsxs("th",{className:"px-4 py-3 cursor-pointer hover:bg-surface-container-highest group select-none min-w-[200px]",onClick:()=>I("name"),children:["Produto ",m.jsx(U,{column:"name"})]}),m.jsxs("th",{className:"px-4 py-3 cursor-pointer hover:bg-surface-container-highest group select-none w-40",onClick:()=>I("category"),children:["Departamento ",m.jsx(U,{column:"category"})]}),m.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:bg-surface-container-highest group select-none w-32",onClick:()=>I("price"),children:["Preo (R$) ",m.jsx(U,{column:"price"})]}),m.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:bg-surface-container-highest group select-none w-28",onClick:()=>I("discount"),children:["Desc. (%) ",m.jsx(U,{column:"discount"})]})]})}),m.jsx("tbody",{className:"divide-y divide-outline-variant/30 bg-surface",children:F.map(M=>m.jsxs("tr",{className:"hover:bg-surface-container-highest/30 transition-colors group",children:[m.jsx("td",{className:"px-4 py-2 font-mono text-on-surface-variant text-xs",children:M.sku}),m.jsx("td",{className:"px-4 py-2 font-bold text-primary text-xs uppercase",children:M.brand}),m.jsx("td",{className:"px-4 py-2 font-medium text-on-surface text-xs truncate max-w-xs",title:M.name,children:M.name}),m.jsx("td",{className:"px-2 py-2",children:m.jsx("input",{type:"text",className:"w-full text-xs text-on-surface border-transparent bg-transparent hover:bg-surface-container-highest/50 focus:bg-surface-container-highest focus:border-primary focus:ring-0 border-b focus:border-b-2 rounded-t transition-all px-2 py-1 outline-none",value:M.category,onChange:j=>O(M.originalIndex,"category",j.target.value),title:"Editar Categoria",placeholder:"Categoria"})}),m.jsx("td",{className:"px-2 py-2 text-right",children:m.jsx("input",{type:"number",step:"0.01",className:"w-full text-xs text-right font-bold text-primary border-transparent bg-transparent hover:bg-surface-container-highest/50 focus:bg-surface-container-highest focus:border-primary focus:ring-0 border-b focus:border-b-2 rounded-t transition-all px-2 py-1 outline-none",value:M.price,onChange:j=>O(M.originalIndex,"price",parseFloat(j.target.value)||0),title:"Editar Preo",placeholder:"0,00"})}),m.jsx("td",{className:"px-2 py-2 text-right",children:m.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",className:"w-full text-xs text-right text-tertiary border-transparent bg-transparent hover:bg-surface-container-highest/50 focus:bg-surface-container-highest focus:border-tertiary focus:ring-0 border-b focus:border-b-2 rounded-t transition-all px-2 py-1 outline-none",value:M.discount||0,onChange:j=>O(M.originalIndex,"discount",parseFloat(j.target.value)||0),title:"Editar Desconto",placeholder:"0.0"})})]},`${M.sku}-${M.originalIndex}`))})]})}),m.jsxs("div",{className:"md:hidden space-y-4 pb-4",children:[F.map(M=>m.jsxs("div",{className:"bg-surface-container-highest/30 p-4 rounded-xl border border-outline-variant/30 space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-xs font-mono text-on-surface-variant mb-1",children:M.sku}),m.jsx("h3",{className:"font-bold text-sm text-on-surface line-clamp-2 leading-tight",children:M.name}),m.jsx("p",{className:"text-xs text-primary mt-1 font-medium",children:M.brand})]}),m.jsx("div",{className:"text-right",children:m.jsx("span",{className:"text-[10px] bg-surface-container-high px-2 py-1 rounded text-on-surface-variant font-mono block mb-1",children:M.factoryCode})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-outline-variant/20",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] uppercase text-on-surface-variant font-bold",children:"Departamento"}),m.jsx("input",{type:"text",className:"w-full text-xs bg-surface-container-highest/50 border-b border-outline-variant rounded-t px-2 py-1.5 focus:border-primary outline-none",value:M.category,onChange:j=>O(M.originalIndex,"category",j.target.value),title:"Editar Departamento",placeholder:"Departamento"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] uppercase text-on-surface-variant font-bold",children:"Desconto (%)"}),m.jsx("input",{type:"number",className:"w-full text-xs bg-surface-container-highest/50 border-b border-outline-variant rounded-t px-2 py-1.5 focus:border-tertiary outline-none text-tertiary font-bold",value:M.discount||0,onChange:j=>O(M.originalIndex,"discount",parseFloat(j.target.value)||0),title:"Editar Desconto",placeholder:"0"})]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] uppercase text-on-surface-variant font-bold",children:"Preo de Venda (R$)"}),m.jsx("input",{type:"number",className:"w-full text-sm bg-surface-container-highest/50 border-b border-outline-variant rounded-t px-2 py-2 focus:border-primary outline-none text-primary font-bold",value:M.price,onChange:j=>O(M.originalIndex,"price",parseFloat(j.target.value)||0),title:"Editar Preo",placeholder:"0,00"})]})]},`${M.sku}-${M.originalIndex}`)),F.length===0&&m.jsx("p",{className:"text-center text-on-surface-variant text-sm py-4",children:"Nenhum produto encontrado."})]}),m.jsxs("div",{className:"mt-4 text-xs text-on-surface-variant flex justify-between px-2",children:[m.jsxs("span",{children:["Total de Produtos: ",m.jsx("strong",{children:T.length})]}),m.jsxs("span",{children:["Exibindo: ",m.jsx("strong",{children:F.length})]})]})]})]}),d&&m.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-surface rounded-[24px] shadow-elevation-5 p-6 max-w-md w-full animate-scale-in",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("h3",{className:"text-lg font-bold text-on-surface flex items-center gap-2",children:[m.jsx(kw,{className:"w-5 h-5 text-purple-500"}),"Categorizando com IA"]}),m.jsx("button",{onClick:()=>{window.confirm("Deseja realmente cancelar a categorizao?")&&h(!1)},className:"text-on-surface-variant hover:text-on-surface",title:"Cancelar categorizao IA",children:m.jsx(Gs,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between text-sm text-on-surface-variant",children:[m.jsx("span",{children:"Processando produtos..."}),m.jsxs("span",{className:"font-mono font-bold text-primary",children:[x.current," / ",x.total]})]}),m.jsx("div",{className:"h-2 bg-surface-container-highest rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300",style:{width:`${x.current/x.total*100}%`}})}),m.jsx("p",{className:"text-xs text-on-surface-variant",children:"A IA est analisando cada produto e atribuindo categorias automaticamente."})]})]})})]})},zse=({isOpen:t,onClose:e,onSaveToCloud:n,onClearDatabase:r,isFirebaseConnected:s=!1})=>{const[a,o]=ue.useState({apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}),[c,u]=ue.useState("idle"),[d,h]=ue.useState("");ue.useEffect(()=>{if(t){const S=W4();S&&(o(S),u("success"),h("Configurao salva encontrada."))}},[t]);const x=S=>{o({...a,[S.target.name]:S.target.value}),u("idle"),h("")},v=async()=>{if(u("testing"),h("Testando conexo..."),!a.apiKey||!a.projectId){u("error"),h("Campos obrigatrios faltando.");return}try{await qy(a)?(dre(a),u("success"),h("Conexo bem sucedida! Configurao salva."),setTimeout(()=>{window.location.reload()},1500)):(u("error"),h("Falha ao conectar. Verifique as credenciais."))}catch(S){u("error"),h("Erro: "+S.message)}},T=()=>{confirm("Remover configurao de nuvem? O app voltar a operar apenas localmente.")&&(hre(),o({apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}),u("idle"),h("Configurao removida."),setTimeout(()=>{window.location.reload()},1e3))};return t?m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all animate-scale-in border border-white",children:[m.jsxs("div",{className:"bg-slate-800 p-8 flex justify-between items-center text-white relative",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-purple-600 rounded-2xl shadow-lg ring-4 ring-purple-500/20",children:m.jsx(Yx,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Cloud Sync"}),m.jsx("p",{className:"text-slate-400 text-xs font-medium",children:"Infraestrutura Firebase"})]})]}),m.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full text-white/50 hover:text-white transition-colors",title:"Fechar",children:m.jsx(Gs,{className:"w-6 h-6"})})]}),m.jsxs("div",{className:"p-8 space-y-5",children:[m.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 flex items-start gap-4 mb-2",children:[m.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm shrink-0",children:m.jsx(SC,{className:"w-5 h-5 text-blue-600"})}),m.jsxs("p",{className:"text-xs text-blue-800 leading-relaxed font-medium",children:["Insira as credenciais do seu projeto Firebase. Voc as encontra no Console ",">"," Configuraes ",">"," Seus aplicativos."]})]}),m.jsx("div",{className:"grid grid-cols-1 gap-3",children:m.jsx("div",{className:"space-y-3",children:["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].map(S=>m.jsx("div",{className:"relative group",children:m.jsx("input",{type:"text",name:S,placeholder:S,value:a[S],onChange:x,className:"w-full bg-gray-50 border border-gray-100 rounded-xl px-4 py-3 text-xs text-gray-700 placeholder:text-gray-400 focus:ring-4 focus:ring-purple-500/10 focus:border-purple-500 outline-none transition-all"})},S))})}),d&&m.jsxs("div",{className:`text-[10px] font-bold uppercase tracking-widest p-4 rounded-xl flex items-center gap-3 border shadow-sm ${c==="error"?"bg-red-50 border-red-100 text-red-600":c==="success"?"bg-green-50 border-green-100 text-green-600":"bg-gray-50 border-gray-100 text-gray-500"}`,children:[c==="testing"&&m.jsx(Io,{className:"w-4 h-4 animate-spin"}),c==="success"&&m.jsx(iu,{className:"w-4 h-4"}),d]})]}),s&&n&&r&&m.jsxs("div",{className:"px-8 py-6 border-t border-gray-50 bg-gray-50/50",children:[m.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4 ml-1",children:"Operaes de Dados"}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{onClick:n,className:"flex-1 py-3 bg-white hover:bg-blue-50 text-blue-600 text-xs font-bold rounded-xl border border-blue-100 shadow-sm transition-all flex items-center justify-center gap-2 active:scale-95",children:[m.jsx(Yx,{className:"w-4 h-4"}),"Backup"]}),m.jsxs("button",{onClick:r,className:"flex-1 py-3 bg-white hover:bg-red-50 text-red-600 text-xs font-bold rounded-xl border border-red-100 shadow-sm transition-all flex items-center justify-center gap-2 active:scale-95",children:[m.jsx(Dl,{className:"w-4 h-4"}),"Limpar"]})]})]}),m.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-100 flex justify-end gap-3",children:[c==="success"&&m.jsxs("button",{onClick:T,className:"px-4 py-2 text-red-500 text-[10px] font-bold uppercase tracking-widest hover:bg-red-50 rounded-xl transition-all mr-auto flex items-center gap-2 border border-red-100",children:[m.jsx(Dl,{className:"w-4 h-4"})," Desconectar"]}),m.jsx("button",{onClick:e,className:"px-6 py-3 text-gray-500 hover:text-gray-800 font-bold text-xs uppercase tracking-widest transition-colors",children:"Cancelar"}),m.jsx("button",{onClick:v,disabled:c==="testing",className:"px-8 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold text-xs uppercase tracking-widest rounded-xl shadow-lg shadow-purple-500/20 transition-all flex items-center gap-2 disabled:opacity-50 active:scale-95",children:c==="testing"?m.jsxs(m.Fragment,{children:[m.jsx(Io,{className:"w-4 h-4 animate-spin"})," Verificando..."]}):"Salvar e Conectar"})]})]})}):null},jse=({onAccept:t,onDecline:e})=>{const[n,r]=ue.useState(!1);ue.useEffect(()=>{if(!localStorage.getItem("vendas_ai_cookie_consent")){const c=setTimeout(()=>r(!0),1500);return()=>clearTimeout(c)}},[]);const s=()=>{localStorage.setItem("vendas_ai_cookie_consent","accepted"),r(!1),t()},a=()=>{localStorage.setItem("vendas_ai_cookie_consent","declined"),r(!1),e()};return n?m.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[100] p-4 animate-slide-up",children:m.jsxs("div",{className:"max-w-4xl mx-auto bg-white/95 backdrop-blur-md border border-blue-100 shadow-2xl rounded-3xl p-6 flex flex-col md:flex-row items-center justify-between gap-6 ring-1 ring-blue-500/10",children:[m.jsxs("div",{className:"flex items-start gap-5",children:[m.jsx("div",{className:"bg-blue-600/10 p-4 rounded-2xl text-blue-600 shrink-0 ring-1 ring-blue-500/20",children:m.jsx(bM,{className:"w-7 h-7"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1.5 tracking-tight",children:"Privacidade e Performance"}),m.jsx("p",{className:"text-sm text-gray-600 leading-relaxed font-medium",children:"Utilizamos armazenamento local para garantir que seu sistema carregue instantaneamente (cache offline). Isso permite agilidade mxima e operao em reas com sinal oscilante."})]})]}),m.jsxs("div",{className:"flex items-center gap-3 shrink-0 w-full md:w-auto",children:[m.jsx("button",{onClick:a,className:"flex-1 md:flex-none px-6 py-3 text-xs font-bold text-gray-400 uppercase tracking-widest hover:text-gray-700 transition-all rounded-xl",children:"Pular"}),m.jsxs("button",{onClick:s,className:"flex-1 md:flex-none px-8 py-3 text-xs font-bold text-white bg-blue-600 hover:bg-blue-700 rounded-xl shadow-lg shadow-blue-500/20 transition-all flex items-center justify-center gap-2 active:scale-95",children:[m.jsx(iu,{className:"w-4 h-4"}),"Ativar Cache Rpido"]})]})]})}):null},Hse=({users:t,uploadedFiles:e,onUploadClients:n,onUploadProducts:r,onUploadPurchases:s,onDeleteFile:a,onReassignSalesperson:o,procState:c={isActive:!1,status:"completed",errorMessage:"",current:0,total:0}})=>{const[u,d]=ue.useState("clients"),[h,x]=ue.useState(""),[v,T]=ue.useState([]),S=L=>{if(L.target.files&&L.target.files.length>0){const z=Array.from(L.target.files).map(O=>({file:O,targetUserId:h||""}));T(O=>[...O,...z]),L.target.value=""}},A=L=>{T(z=>z.filter((O,I)=>I!==L))},b=(L,z)=>{T(O=>{const I=[...O];return I[L].targetUserId=z,I})},R=async()=>{const L=v.filter(z=>z.targetUserId);if(L.length===0){alert("Por favor, atribua um vendedor para todos os arquivos antes de processar.");return}for(const z of L)await n(z.file,z.targetUserId,!0);T([])},B=L=>{const z=L.target.files?.[0];z&&(r(z),L.target.value="")},D=e.filter(L=>L.type===u);return m.jsxs("div",{className:"p-6 max-w-7xl mx-auto h-full overflow-y-auto bg-surface-container-low",children:[m.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:m.jsxs("div",{children:[m.jsxs("h1",{className:"text-2xl font-bold text-on-surface mb-1 flex items-center gap-2",children:[m.jsx(zf,{className:"w-8 h-8 text-primary"}),"Gerenciamento de Arquivos"]}),m.jsx("p",{className:"text-on-surface-variant text-sm",children:"Gerencie as planilhas importadas e carregue novos dados."})]})}),m.jsxs("div",{className:"flex border-b border-outline-variant mb-6",children:[m.jsxs("button",{onClick:()=>d("clients"),className:`pb-3 px-6 font-medium text-sm transition-colors relative flex items-center gap-2 ${u==="clients"?"text-primary":"text-on-surface-variant hover:text-on-surface"}`,children:[m.jsx(ev,{className:"w-4 h-4"}),"Carteiras de Clientes",u==="clients"&&m.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[3px] bg-primary rounded-t-full"})]}),m.jsxs("button",{onClick:()=>d("products"),className:`pb-3 px-6 font-medium text-sm transition-colors relative flex items-center gap-2 ${u==="products"?"text-primary":"text-on-surface-variant hover:text-on-surface"}`,children:[m.jsx(ko,{className:"w-4 h-4"}),"Catlogo de Produtos",u==="products"&&m.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[3px] bg-primary rounded-t-full"})]}),m.jsxs("button",{onClick:()=>d("purchases"),className:`pb-3 px-6 font-medium text-sm transition-colors relative flex items-center gap-2 ${u==="purchases"?"text-primary":"text-on-surface-variant hover:text-on-surface"}`,children:[m.jsx(O0,{className:"w-4 h-4"}),"Atualizar Compras (Razo Social)",u==="purchases"&&m.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[3px] bg-primary rounded-t-full"})]})]}),c?.isActive&&m.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-center gap-3 shadow-elevation-1 border ${c.status==="error"?"bg-error-container text-on-error-container border-error":"bg-primary-container text-on-primary-container border-primary"}`,children:[c.status==="processing"||c.status==="reading"?m.jsx(Io,{className:"w-5 h-5 animate-spin"}):c.status==="completed"?m.jsx(Cl,{className:"w-5 h-5"}):m.jsx(ts,{className:"w-5 h-5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-bold text-sm",children:c.status==="reading"?"Lendo arquivo...":c.status==="processing"?"Processando dados...":c.status==="completed"?"Importao Concluda!":"Erro na Importao"}),c.errorMessage&&m.jsx("p",{className:"text-xs mt-1 opacity-80",children:c.errorMessage})]})]}),m.jsxs("div",{className:"grid lg:grid-cols-12 gap-6",children:[m.jsx("div",{className:"lg:col-span-4",children:m.jsxs("div",{className:"bg-surface rounded-[20px] shadow-elevation-1 p-6 sticky top-6 border border-outline-variant/30",children:[m.jsxs("h3",{className:"font-bold text-lg text-on-surface mb-4 flex items-center gap-2",children:[m.jsx(Gse,{className:"w-5 h-5 text-primary"}),"Nova Importao"]}),u==="clients"?m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-on-surface-variant uppercase tracking-wider mb-2",children:"Vendedor Responsvel"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{className:"w-full bg-surface-container border border-outline rounded-lg p-3 pr-10 text-sm text-on-surface focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all appearance-none cursor-pointer",value:h,onChange:L=>x(L.target.value),children:[m.jsx("option",{value:"",disabled:!0,children:"Selecione um vendedor..."}),t.filter(L=>$c(L.role)).map(L=>m.jsx("option",{value:L.id,children:L.name},L.id))]}),m.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-on-surface-variant",children:m.jsx(dC,{className:"w-4 h-4"})})]})]}),v.length>0&&m.jsxs("div",{className:"bg-surface-container-high rounded-xl p-4 border border-primary/20 space-y-3",children:[m.jsxs("h4",{className:"text-sm font-bold text-primary flex items-center justify-between",children:[m.jsxs("span",{children:["Arquivos na Fila (",v.length,")"]}),m.jsx("button",{onClick:()=>T([]),className:"text-xs font-normal text-on-surface-variant hover:text-error",children:"Limpar tudo"})]}),m.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-1",children:v.map((L,z)=>m.jsxs("div",{className:"bg-surface p-2 rounded-lg border border-outline-variant text-xs flex items-center gap-2",children:[m.jsx(F0,{className:"w-4 h-4 text-primary shrink-0"}),m.jsx("span",{className:"truncate flex-1 font-medium",title:L.file.name,children:L.file.name}),m.jsxs("select",{value:L.targetUserId,onChange:O=>b(z,O.target.value),className:`bg-transparent border rounded px-1 py-0.5 outline-none w-24 ${L.targetUserId?"border-outline-variant text-on-surface":"border-error text-error"}`,children:[m.jsx("option",{value:"",disabled:!0,children:"Vendedor..."}),t.filter(O=>$c(O.role)).map(O=>m.jsx("option",{value:O.id,children:O.name},O.id))]}),m.jsx("button",{onClick:()=>A(z),className:"text-on-surface-variant hover:text-error p-1",children:m.jsx(Gs,{className:"w-3 h-3"})})]},z))}),m.jsx("button",{onClick:R,disabled:c?.isActive||v.some(L=>!L.targetUserId),className:"w-full py-2 bg-primary text-on-primary rounded-lg text-sm font-bold shadow-sm hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:c?.isActive?m.jsxs(m.Fragment,{children:[m.jsx(Io,{className:"w-3 h-3 animate-spin"}),"Processando..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Cl,{className:"w-3 h-3"}),"Processar ",v.length," Arquivos"]})})]}),m.jsxs("label",{className:`group flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-xl cursor-pointer transition-all duration-300 relative overflow-hidden ${h?"border-primary/50 bg-primary-container/20 hover:bg-primary-container/40 hover:border-primary":"border-outline-variant bg-surface-container/50 opacity-60 cursor-not-allowed"}`,children:[m.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 z-10",children:[m.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 transition-colors ${h?"bg-primary/10 text-primary group-hover:bg-primary group-hover:text-on-primary":"bg-surface-variant text-on-surface-variant"}`,children:m.jsx(zf,{className:"w-6 h-6"})}),m.jsx("p",{className:"text-sm font-medium text-on-surface text-center px-4",children:"Clique para selecionar arquivos (Multi-upload)"})]}),m.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",className:"hidden",multiple:!0,onChange:S,disabled:c?.isActive&&c.status==="processing"})]})]}):u==="purchases"?m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-xs text-blue-800 mb-2 flex gap-3 border border-blue-100 italic",children:[m.jsx(ts,{className:"w-5 h-5 shrink-0 text-blue-500"}),m.jsx("p",{children:"Este upload identifica o cliente pela **Razo Social** e substitui todo o histrico de compras dele pelos produtos deste arquivo."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-on-surface-variant uppercase tracking-wider mb-2",children:"Vendedor Destino"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{className:"w-full bg-surface-container border border-outline rounded-lg p-3 pr-10 text-sm text-on-surface focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all appearance-none cursor-pointer",value:h,onChange:L=>x(L.target.value),children:[m.jsx("option",{value:"",disabled:!0,children:"Selecione um vendedor..."}),t.filter(L=>$c(L.role)).map(L=>m.jsx("option",{value:L.id,children:L.name},L.id))]}),m.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-on-surface-variant",children:m.jsx(dC,{className:"w-4 h-4"})})]})]}),m.jsxs("label",{className:`group flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-xl cursor-pointer transition-all duration-300 relative overflow-hidden ${h?"border-blue-300 bg-blue-50/30 hover:bg-blue-50/50 hover:border-blue-500":"border-outline-variant bg-surface-container/50 opacity-60 cursor-not-allowed"}`,children:[m.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 z-10",children:[m.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 transition-colors ${h?"bg-blue-100 text-blue-600 group-hover:bg-blue-600 group-hover:text-white":"bg-surface-variant text-on-surface-variant"}`,children:m.jsx(zf,{className:"w-6 h-6"})}),m.jsx("p",{className:"text-sm font-medium text-on-surface text-center px-4",children:"Carregar Planilha de Compras"})]}),m.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:L=>{const z=L.target.files?.[0];z&&h&&(s(z,h),L.target.value="")},disabled:c?.isActive&&c.status==="processing"})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-on-surface-variant italic",children:[m.jsx(O0,{className:"w-3 h-3"}),m.jsx("span",{children:"Colunas Esperadas: Razo Social, SKU, Nome do Produto"})]})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-secondary-container p-4 rounded-xl text-xs text-on-secondary-container mb-4 flex gap-3",children:[m.jsx(ko,{className:"w-5 h-5 shrink-0"}),m.jsx("p",{children:"Importe o catlogo completo de produtos para atualizar preos e estoque."})]}),m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-tertiary/50 bg-tertiary-container/20 rounded-xl cursor-pointer hover:bg-tertiary-container/40 hover:border-tertiary transition-all",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-tertiary/10 text-tertiary flex items-center justify-center mb-3",children:m.jsx(ko,{className:"w-6 h-6"})}),m.jsx("p",{className:"text-sm font-medium text-on-surface",children:"Carregar Catlogo"})]}),m.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",className:"hidden",onChange:B,disabled:c?.isActive&&c.status==="processing"})]})]})]})}),m.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[m.jsx("div",{className:"flex items-center justify-between mb-2",children:m.jsxs("h3",{className:"font-bold text-on-surface flex items-center gap-2",children:[m.jsx(F0,{className:"w-5 h-5 text-primary"}),"Arquivos Carregados",m.jsx("span",{className:"bg-primary-container text-on-primary-container text-xs px-2 py-0.5 rounded-full font-bold ml-1",children:D.length})]})}),D.length===0?m.jsxs("div",{className:"bg-surface rounded-xl border-2 border-dashed border-outline-variant p-12 text-center flex flex-col items-center",children:[m.jsx("div",{className:"w-20 h-20 bg-surface-container-high rounded-full flex items-center justify-center mb-4",children:m.jsx(O0,{className:"w-10 h-10 text-outline"})}),m.jsx("h4",{className:"text-lg font-medium text-on-surface mb-1",children:"Nenhum arquivo encontrado"}),m.jsx("p",{className:"text-on-surface-variant text-sm max-w-md",children:"Utilize a rea ao lado para importar sua primeira planilha de dados."})]}):m.jsx("div",{className:"space-y-3",children:D.map(L=>m.jsxs("div",{className:"bg-surface rounded-xl p-4 shadow-elevation-1 border border-outline-variant/30 hover:shadow-elevation-2 transition-shadow duration-200 flex flex-col sm:flex-row sm:items-center gap-4 group",children:[m.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[m.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${L.status==="error"?"bg-error-container text-error":L.status==="processing"?"bg-surface-container-high text-primary animate-pulse":"bg-surface-container-high text-primary"}`,children:L.status==="processing"?m.jsx(Io,{className:"w-5 h-5 animate-spin"}):L.status==="error"?m.jsx(ts,{className:"w-5 h-5"}):m.jsx(F0,{className:"w-5 h-5"})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h4",{className:"font-semibold text-on-surface text-sm truncate pr-2",title:L.fileName,children:L.fileName}),m.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-1 text-xs text-on-surface-variant",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(vC,{className:"w-3 h-3"}),new Date(L.uploadDate).toLocaleDateString(),m.jsx("span",{className:"opacity-60 ml-1",children:new Date(L.uploadDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Cl,{className:"w-3 h-3"}),L.itemCount," registros"]})]}),L.status==="error"&&m.jsx("p",{className:"text-xs text-error mt-1 font-medium bg-error-container/30 px-2 py-0.5 rounded inline-block",children:L.errorMessage||"Erro desconhecido"})]})]}),u==="clients"&&m.jsxs("div",{className:"flex items-center gap-3 sm:border-l sm:border-r border-outline-variant/30 sm:px-4 sm:w-56 shrink-0",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-surface-container-high flex items-center justify-center text-xs font-bold text-primary shrink-0",children:t.find(O=>O.id===L.salespersonId)?.name?.charAt(0)||"?"}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsxs("select",{value:L.salespersonId,onChange:z=>o?.(L.id,z.target.value),className:"w-full text-xs font-medium bg-transparent border border-outline-variant/50 rounded-md px-2 py-1 text-on-surface hover:bg-surface-container-highest focus:ring-2 focus:ring-primary focus:border-primary outline-none cursor-pointer",disabled:L.status==="processing",children:[m.jsx("option",{value:"",className:"bg-surface text-on-surface",children:"None"}),t.filter(z=>$c(z.role)).map(z=>m.jsx("option",{value:z.id,className:"bg-surface text-on-surface",children:z.name},z.id))]}),m.jsx("p",{className:"text-[10px] text-on-surface-variant mt-0.5",children:"Responsvel"})]})]}),m.jsx("div",{className:"flex items-center justify-end gap-2 sm:w-auto w-full border-t sm:border-t-0 border-outline-variant/30 pt-3 sm:pt-0 mt-1 sm:mt-0",children:L.status==="processing"?m.jsx("span",{className:"text-xs font-medium text-primary bg-primary-container px-3 py-1 rounded-full",children:"Processando"}):m.jsxs("button",{onClick:()=>a(L.id),className:"flex items-center gap-2 text-on-surface-variant hover:text-error hover:bg-error-container/20 px-3 py-2 rounded-lg transition-colors text-xs font-medium w-full sm:w-auto justify-center",title:"Excluir arquivo e dados associados",children:[m.jsx(Dl,{className:"w-4 h-4"}),m.jsx("span",{className:"sm:hidden",children:"Excluir Arquivo"})]})})]},L.id))})]})]})]})};function dC(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}function Gse(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M17.5 19c0-3.037-2.463-5.5-5.5-5.5S6.5 15.963 6.5 19"}),m.jsx("circle",{cx:"12",cy:"10",r:"5"}),m.jsx("path",{d:"M12 15V3"}),m.jsx("path",{d:"m9 6 3-3 3 3"})]})}const $se=({isOpen:t,onClose:e,onConfirm:n,suggestedKey:r})=>{const[s,a]=bn.useState(!1),[o,c]=bn.useState(""),[u,d]=bn.useState(!1);if(!t)return null;const h=()=>{navigator.clipboard.writeText(r)},x=v=>v?v.length<=10?"":`${v.slice(0,6)}${v.slice(-4)}`:"";return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all animate-scale-in border border-white",children:[m.jsxs("div",{className:"bg-blue-600 p-8 text-center relative",children:[m.jsx("button",{onClick:e,className:"absolute right-6 top-6 text-white/50 hover:text-white transition-colors",title:"Fechar",children:m.jsx(Gs,{className:"w-6 h-6"})}),m.jsx("div",{className:"mx-auto w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mb-4 backdrop-blur-md ring-4 ring-blue-500/30 shadow-inner",children:m.jsx(Zc,{className:"w-8 h-8 text-white"})}),m.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"Ativar Mapa"}),m.jsx("p",{className:"text-blue-100 text-sm mt-2 font-medium",children:"Configure seu acesso ao Google Maps"})]}),m.jsxs("div",{className:"p-8 space-y-6",children:[m.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 flex items-start gap-4",children:[m.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm shrink-0",children:m.jsx(ts,{className:"w-5 h-5 text-blue-600"})}),m.jsx("p",{className:"text-sm text-blue-800 leading-relaxed font-medium",children:s?"Insira sua prpria Chave de API do Google Maps abaixo para ativar as funcionalidades.":"Detectamos que seu mapa est aguardando ativao. Use a chave padro do sistema."})]}),s?m.jsxs("div",{className:"animate-fade-in",children:[m.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Configurao Manual"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",value:o,onChange:v=>c(v.target.value),placeholder:"Comea com AIza...",className:"w-full bg-gray-50 border border-gray-200 rounded-xl pl-12 pr-4 py-4 text-sm focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",autoFocus:!0}),m.jsx(lP,{className:"absolute left-4 top-4.5 w-4 h-4 text-gray-400"})]})]}):m.jsxs("div",{className:"animate-fade-in",children:[m.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Chave Recomendada"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("div",{className:"flex-1 bg-gray-50 border border-gray-100 rounded-xl px-4 py-3.5 font-mono text-sm text-gray-700 flex items-center justify-between shadow-inner",children:[m.jsx("span",{className:"truncate",children:u?r:x(r)}),m.jsx("button",{onClick:()=>d(!u),className:"text-gray-400 hover:text-gray-600 p-1 transition-colors",title:u?"Esconder":"Mostrar",children:u?m.jsx(EC,{className:"w-4 h-4"}):m.jsx(TC,{className:"w-4 h-4"})})]}),m.jsx("button",{onClick:h,className:"bg-gray-50 hover:bg-gray-100 text-blue-600 p-3.5 rounded-xl transition-all border border-gray-100 shadow-sm active:scale-95",title:"Copiar chave",children:m.jsx(NM,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"pt-2 flex flex-col gap-3",children:[m.jsxs("button",{onClick:()=>n(s?o:r),disabled:s&&!o.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-200 disabled:text-gray-500 text-white font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20 active:scale-[0.98]",children:[m.jsx(iu,{className:"w-5 h-5"}),s?"Ativar Manualmente":"Carregar Mapa Agora"]}),m.jsx("button",{onClick:()=>{a(!s),c(""),d(!1)},className:"w-full py-2 text-xs text-gray-400 hover:text-blue-600 font-bold uppercase tracking-widest transition-all",children:s?"Voltar para recomendada":"Usar outra chave (Manual)"})]})]})]})})},qse=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,s]=bn.useState(""),[a,o]=bn.useState(!1);return bn.useEffect(()=>{if(t){const c=localStorage.getItem("cnpja_api_key")||"";s(c)}},[t]),t?m.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all animate-scale-in border border-white",children:[m.jsxs("div",{className:"bg-blue-600 p-8 text-center relative",children:[m.jsx("button",{onClick:e,className:"absolute right-6 top-6 text-white/50 hover:text-white transition-colors",title:"Fechar",children:m.jsx(Gs,{className:"w-6 h-6"})}),m.jsx("div",{className:"mx-auto w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mb-4 backdrop-blur-md ring-4 ring-blue-500/30 shadow-inner",children:m.jsx(Zc,{className:"w-8 h-8 text-white"})}),m.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"API Comercial CNPJa"}),m.jsx("p",{className:"text-blue-100 text-sm mt-2 font-medium",children:"Configure sua chave de consulta comercial"})]}),m.jsxs("div",{className:"p-8 space-y-6",children:[m.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 flex items-start gap-4",children:[m.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm shrink-0",children:m.jsx(ts,{className:"w-5 h-5 text-blue-600"})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-blue-800 leading-relaxed font-medium",children:"A chave atual expirou ou est invlida. Insira sua nova Chave de API Comercial para restaurar a busca e atualizao de dados."}),m.jsxs("a",{href:"https://cnpja.com/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 font-bold flex items-center gap-1 underline",children:["Obter nova chave no site da CNPJa ",m.jsx(Zx,{className:"w-3 h-3"})]})]})]}),m.jsxs("div",{className:"animate-fade-in",children:[m.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Chave de API"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:a?"text":"password",value:r,onChange:c=>s(c.target.value),placeholder:"Insira sua chave aqui...",className:"w-full bg-gray-50 border border-gray-200 rounded-xl pl-12 pr-12 py-4 text-sm focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",autoFocus:!0}),m.jsx(Zc,{className:"absolute left-4 top-4.5 w-4 h-4 text-gray-400"}),m.jsx("button",{onClick:()=>o(!a),className:"absolute right-4 top-4.5 text-gray-400 hover:text-gray-600 p-1 transition-colors",title:a?"Esconder":"Mostrar",children:a?m.jsx(EC,{className:"w-4 h-4"}):m.jsx(TC,{className:"w-4 h-4"})})]})]}),m.jsxs("div",{className:"pt-2 flex flex-col gap-3",children:[m.jsxs("button",{onClick:()=>n(r),disabled:!r.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-200 disabled:text-gray-500 text-white font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20 active:scale-[0.98]",children:[m.jsx(iu,{className:"w-5 h-5"}),"Salvar Configurao"]}),m.jsx("p",{className:"text-[10px] text-center text-gray-400",children:"A chave ser salva apenas neste navegador."})]})]})]})}):null},Kse=({progress:t,message:e})=>{const[n,r]=ue.useState(0);ue.useEffect(()=>{if(n<t){const a=setTimeout(()=>r(o=>Math.min(o+1,t)),20);return()=>clearTimeout(a)}},[t,n]);const s=()=>t<30?m.jsx(CC,{className:"w-8 h-8 text-blue-400 animate-pulse"}):t<60?m.jsx(Wx,{className:"w-8 h-8 text-purple-400 animate-bounce"}):t<90?m.jsx(ko,{className:"w-8 h-8 text-orange-400 animate-pulse"}):m.jsx(_C,{className:"w-8 h-8 text-green-400"});return m.jsxs("div",{className:"fixed inset-0 z-[999] bg-slate-900 flex flex-col items-center justify-center p-6 text-white font-sans",children:[m.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop')] opacity-10 bg-cover bg-center"}),m.jsxs("div",{className:"relative z-10 w-full max-w-sm text-center",children:[m.jsx("div",{className:"mb-8 flex justify-center",children:m.jsx("div",{className:"p-4 bg-white/5 rounded-3xl backdrop-blur-md border border-white/10 shadow-2xl",children:s()})}),m.jsx("h2",{className:"text-2xl font-bold mb-2 tracking-tight",children:"Preparando seu Ambiente"}),m.jsx("p",{className:"text-slate-400 text-sm mb-10 h-5",children:e}),m.jsxs("div",{className:"relative pt-1",children:[m.jsxs("div",{className:"flex mb-4 items-center justify-between",children:[m.jsx("div",{children:m.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-200 bg-blue-900/30 border border-blue-500/20",children:n===100?"Concludo":"Sincronizando"})}),m.jsx("div",{className:"text-right",children:m.jsxs("span",{className:"text-sm font-bold inline-block text-blue-400",children:[n,"%"]})})]}),m.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded-full bg-slate-800 border border-white/5 shadow-inner",children:m.jsx("div",{style:{width:`${n}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-blue-600 to-purple-600 transition-all duration-300 ease-out"})}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 uppercase font-bold tracking-widest px-1",children:[m.jsx("span",{children:"Incio"}),m.jsx("span",{children:"Autenticado"}),m.jsx("span",{children:"Pronto"})]})]})]}),m.jsx("div",{className:"absolute bottom-10 text-slate-600 text-[10px] uppercase tracking-[0.2em] font-medium",children:"Sincronizando com gen-lang-client-0586123917"})]})},Jse=[{id:"admin",name:"Admin DEV",username:"admin",email:"admin@vendas.ai",role:"admin_dev",password:"123",salesCategory:"N/A",color:"#6B7280"},{id:"1",name:"Joo Silva (Vendedor A)",username:"vendedor_a",email:"joao.silva@vendas.ai",role:"sales_external",password:"123",salesCategory:"Externo",color:"#EF4444"},{id:"2",name:"Maria Santos (Vendedor B)",username:"vendedor_b",email:"maria.santos@vendas.ai",role:"sales_internal",password:"123",salesCategory:"Interno",color:"#3B82F6"}],u3=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState(null);return{users:t,setUsers:e,currentUser:n,login:d=>{r(d)},logout:()=>{r(null)},addUser:d=>{e([...t,d])},updateUser:d=>{e(t.map(h=>h.id===d.id?d:h))},deleteUser:d=>{e(t.filter(h=>h.id!==d))}}},h1=Object.freeze(Object.defineProperty({__proto__:null,INITIAL_USERS:Jse,useAuth:u3},Symbol.toStringTag,{value:"Module"})),Jx=()=>{try{const t=localStorage.getItem("vendas_ai_clients");if(t)return JSON.parse(t).map(n=>({...n,category:Array.isArray(n.category)?n.category:typeof n.category=="string"?[n.category]:["Outros"],region:ld(n.state)}))}catch(t){console.error("Failed to load clients",t)}return[]},hC=()=>{try{const t=localStorage.getItem("vendas_ai_products");return t?JSON.parse(t):[]}catch{return[]}},pC=()=>{try{const t=localStorage.getItem("vendas_ai_categories");return t?JSON.parse(t):od.filter(e=>e!=="Todos")}catch{return od.filter(e=>e!=="Todos")}},mC=()=>{try{const t=localStorage.getItem("vendas_ai_files");return t?JSON.parse(t):[]}catch{return[]}},Yse=(t,e)=>{const[n,r]=ue.useState([]),[s,a]=ue.useState(hC),[o,c]=ue.useState(pC),[u,d]=ue.useState(mC),[h,x]=ue.useState(!1),[v,T]=ue.useState(!1),[S,A]=ue.useState(0),[b,R]=ue.useState("Iniciando sistema...");return ue.useEffect(()=>{(async()=>{R("Conectando ao Firebase..."),A(10);const D=await qy();if(x(D),A(25),D){R("Buscando dados na nuvem..."),A(40);try{const z=await pre();if(A(60),z&&(z.clients?.length>0||z.products?.length>0||z.users?.length>0)){console.log("Cloud data found (Populated). Using Cloud as Source of Truth."),z.clients&&r(z.clients),z.products&&a(z.products),z.categories&&c(z.categories),z.users&&e&&e(If(z.users)),z.uploadedFiles&&d(z.uploadedFiles),R("Finalizando sincronizao..."),A(100),setTimeout(()=>T(!0),500);return}else{console.log("Cloud is empty. Checking localStorage for migration...");const O=localStorage.getItem("vendas_ai_users");let I=O?JSON.parse(O):null;if(!I||I.length===0){const{INITIAL_USERS:C}=await o1(async()=>{const{INITIAL_USERS:N}=await Promise.resolve().then(()=>h1);return{INITIAL_USERS:N}},void 0);I=C}I=If(I),e&&e(I),r(Jx()),console.log("Saving initial data to cloud (background attempt)..."),n1(Jx(),hC(),pC(),I,mC()).catch(C=>console.warn("Initial cloud save failed (expected in some offline cases), will retry later",C)),R("Configurao concluda!"),A(100),setTimeout(()=>T(!0),500);return}}catch(z){console.error("Cloud load error, falling back to local:",z)}}console.log("Loading data from LocalStorage..."),r(Jx());const L=localStorage.getItem("vendas_ai_users");if(L&&e)e(If(JSON.parse(L)));else if(e){const{INITIAL_USERS:z}=await o1(async()=>{const{INITIAL_USERS:O}=await Promise.resolve().then(()=>h1);return{INITIAL_USERS:O}},void 0);e(If(z))}R("Carregado localmente"),A(100),setTimeout(()=>T(!0),500)})()},[]),ue.useEffect(()=>{if(h&&v&&(n.length>0||t.length>0||u.length>0)){const B=setTimeout(()=>{n1(n,s,o,t,u).catch(D=>console.error("Auto-save failed",D))},2e3);return()=>clearTimeout(B)}},[n,s,o,t,u,h,v]),ue.useEffect(()=>{localStorage.setItem("vendas_ai_clients",JSON.stringify(n))},[n]),ue.useEffect(()=>{localStorage.setItem("vendas_ai_categories",JSON.stringify(o))},[o]),ue.useEffect(()=>{localStorage.setItem("vendas_ai_products",JSON.stringify(s))},[s]),ue.useEffect(()=>{localStorage.setItem("vendas_ai_files",JSON.stringify(u))},[u]),ue.useEffect(()=>{localStorage.setItem("vendas_ai_users",JSON.stringify(t))},[t]),{masterClientList:n,setMasterClientList:r,products:s,setProducts:a,categories:o,setCategories:c,uploadedFiles:u,setUploadedFiles:d,isFirebaseConnected:h,isDataLoaded:v,loadingProgress:S,loadingMessage:b}},Wse=(t,e,n,r)=>{const[s,a]=ue.useState(""),[o,c]=ue.useState("Todas"),[u,d]=ue.useState("Todos"),[h,x]=ue.useState("Todas"),[v,T]=ue.useState("Todos"),[S,A]=ue.useState("Todos"),[b,R]=ue.useState("Todos"),[B,D]=ue.useState("Todos"),[L,z]=ue.useState(!1),[O,I]=ue.useState(""),[C,N]=ue.useState(""),[F,U]=ue.useState("Todos"),[M,j]=ue.useState("Todos"),[he,Se]=ue.useState(""),[ie,fe]=ue.useState(!1),ce=ue.useMemo(()=>{if(!n)return[];let W=[];return nv(n.role)?S!=="Todos"?W=t.filter(le=>le.salespersonId===S):W=t:W=t.filter(le=>le.salespersonId===n.id),W},[n,t,S]),K=ue.useMemo(()=>ce.filter(W=>{const le=o==="Todas"||W.region===o,ge=u==="Todos"||W.state===u,Ne=h==="Todas"||W.city===h,be=v==="Todos"||Array.isArray(W.category)&&W.category.includes(v);let ke=!0;if(n&&nv(n.role)&&b!=="Todos"){const Ve=e.find(st=>st.id===W.salespersonId);(!Ve||Ve.salesCategory!==b)&&(ke=!1)}const $e=(s||"").toLowerCase(),re=s===""||(W.companyName||"").toLowerCase().includes($e)||W.ownerName&&(W.ownerName||"").toLowerCase().includes($e);let ft=!0;const Je=(he||"").toLowerCase(),Qe=B==="Todos"||W.mainCnae&&W.mainCnae.includes(B)||W.secondaryCnaes&&W.secondaryCnaes.some(Ve=>Ve.includes(B));if(F!=="Todos"||M!=="Todos"||Je!=="")if(!W.purchasedProducts||W.purchasedProducts.length===0)ft=!1;else{const Ve=F==="Todos"||W.purchasedProducts.some(et=>(et.category||"")===F),st=M==="Todos"||W.purchasedProducts.some(et=>(et.sku||"")===M),it=Je===""||W.purchasedProducts.some(et=>(et.name||"").toLowerCase().includes(Je)||(et.sku||"").toLowerCase().includes(Je)||(et.brand||"").toLowerCase().includes(Je)||(et.category||"").toLowerCase().includes(Je)||(et.factoryCode||"").toLowerCase().includes(Je)||(et.price||0).toString().includes(Je)),dt=!O||!C||W.purchasedProducts.some(et=>{if(!et.purchaseDate)return!1;const _t=new Date(et.purchaseDate),kn=new Date(O),vt=new Date(C);return kn.setHours(0,0,0,0),vt.setHours(23,59,59,999),_t>=kn&&_t<=vt});ft=Ve&&st&&it&&dt}const Ge=!L||W.purchasedProducts&&W.purchasedProducts.length>0;return le&&ge&&Ne&&be&&re&&ft&&ke&&Ge&&Qe}),[ce,o,u,h,v,B,s,F,M,he,b,L,e,n,O,C]),Ie=ue.useMemo(()=>{let W=ce;o!=="Todas"&&(W=W.filter(ge=>ge.region===o));const le=new Set(W.map(ge=>ge.state).filter(Boolean));return Array.from(le).sort()},[ce,o]),Y=ue.useMemo(()=>{let W=ce;if(o!=="Todas"&&(W=W.filter(ge=>ge.region===o)),u!=="Todos")W=W.filter(ge=>ge.state===u);else return[];const le=new Set(W.map(ge=>ge.city).filter(Boolean));return Array.from(le).sort()},[ce,o,u]),H=ue.useMemo(()=>{const W=new Set(r.map(le=>le.category));return Array.from(W).sort()},[r]),Q=ue.useMemo(()=>{const W=new Set;return ce.forEach(le=>{le.mainCnae&&W.add(le.mainCnae),le.secondaryCnaes&&le.secondaryCnaes.forEach(ge=>W.add(ge))}),Array.from(W).sort()},[ce]);return{searchQuery:s,setSearchQuery:a,filterRegion:o,setFilterRegion:c,filterState:u,setFilterState:d,filterCity:h,setFilterCity:x,filterCategory:v,setFilterCategory:T,filterSalespersonId:S,setFilterSalespersonId:A,filterSalesCategory:b,setFilterSalesCategory:R,filterCnae:B,setFilterCnae:D,filterProductCategory:F,setFilterProductCategory:U,filterProductSku:M,setFilterProductSku:j,searchProductQuery:he,setSearchProductQuery:Se,showProductSuggestions:ie,setShowProductSuggestions:fe,filterOnlyWithPurchases:L,setFilterOnlyWithPurchases:z,startDate:O,setStartDate:I,endDate:C,setEndDate:N,filteredClients:K,visibleClients:ce,availableStates:Ie,availableCities:Y,availableCnaes:Q,productCategories:H,resetFilters:()=>{a(""),c("Todas"),d("Todos"),x("Todas"),A("Todos"),R("Todos"),D("Todos"),U("Todos"),j("Todos"),Se(""),z(!1),I(""),N("")}}},Zse=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,type:a="info",confirmLabel:o="Confirmar",cancelLabel:c="Cancelar",icon:u})=>{if(!t)return null;const d=()=>{if(u)return m.jsx(u,{className:"w-8 h-8"});switch(a){case"success":return m.jsx(_C,{className:"w-8 h-8 text-green-600"});case"error":return m.jsx(ts,{className:"w-8 h-8 text-red-600"});case"warning":return m.jsx(ts,{className:"w-8 h-8 text-amber-600"});case"confirm":return m.jsx(wM,{className:"w-8 h-8 text-blue-600"});default:return m.jsx(SC,{className:"w-8 h-8 text-blue-600"})}},x=(()=>{switch(a){case"success":return{bg:"bg-green-50",border:"border-green-100",text:"text-green-800"};case"error":return{bg:"bg-red-50",border:"border-red-100",text:"text-red-800"};case"warning":return{bg:"bg-amber-50",border:"border-amber-100",text:"text-amber-800"};case"confirm":return{bg:"bg-blue-50",border:"border-blue-100",text:"text-blue-800"};default:return{bg:"bg-blue-50",border:"border-blue-100",text:"text-blue-800"}}})(),v=()=>Array.isArray(s)?m.jsx("ul",{className:"space-y-2 text-sm text-gray-600",children:s.map((T,S)=>m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-blue-500 shrink-0"}),T]},S))}):m.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:s});return m.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all animate-scale-in border border-white",children:[m.jsx("div",{className:"bg-blue-600 h-2 w-full"}),m.jsxs("div",{className:"p-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:`w-16 h-16 ${x.bg} rounded-2xl flex items-center justify-center ring-4 ring-white shadow-sm`,children:d()})}),m.jsx("div",{className:"text-center mb-6",children:m.jsx("h2",{className:"text-xl font-bold text-gray-900 tracking-tight",children:r})}),m.jsx("div",{className:`${x.bg} ${x.border} border rounded-2xl p-5 mb-8`,children:v()}),m.jsxs("div",{className:"flex gap-3",children:[(n||a==="confirm")&&m.jsx("button",{onClick:e,className:"flex-1 py-3.5 px-4 rounded-xl text-sm font-bold text-gray-500 hover:text-gray-800 hover:bg-gray-100 transition-all active:scale-95",children:c}),m.jsx("button",{onClick:()=>{n&&n(),e()},className:`flex-1 py-3.5 px-4 rounded-xl text-sm font-bold text-white transition-all shadow-md active:scale-95 flex items-center justify-center gap-2
                                ${a==="error"?"bg-red-600 hover:bg-red-700":a==="success"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:o})]})]})]})})},Xse=()=>{const{users:t,setUsers:e,currentUser:n,login:r,logout:s,addUser:a,updateUser:o,deleteUser:c}=u3(),{masterClientList:u,setMasterClientList:d,products:h,setProducts:x,categories:v,setCategories:T,uploadedFiles:S,setUploadedFiles:A,isFirebaseConnected:b,isDataLoaded:R,loadingProgress:B,loadingMessage:D}=Yse(t,e),{searchQuery:L,setSearchQuery:z,filterRegion:O,setFilterRegion:I,filterState:C,setFilterState:N,filterCity:F,setFilterCity:U,filterCategory:M,setFilterCategory:j,filterSalespersonId:he,setFilterSalespersonId:Se,filterSalesCategory:ie,setFilterSalesCategory:fe,filterCnae:ce,setFilterCnae:K,filterProductCategory:Ie,setFilterProductCategory:Y,filterProductSku:H,setFilterProductSku:Q,searchProductQuery:te,setSearchProductQuery:W,showProductSuggestions:le,setShowProductSuggestions:ge,filteredClients:Ne,visibleClients:be,availableStates:ke,availableCities:$e,availableCnaes:re,productCategories:ft,filterOnlyWithPurchases:Je,setFilterOnlyWithPurchases:Qe,startDate:Ge,setStartDate:Ve,endDate:st,setEndDate:it,resetFilters:dt}=Wse(u,t,n,h),[et,_t]=ue.useState({isActive:!1,total:0,current:0,fileName:"",ownerName:"",status:"processing"}),[kn,vt]=ue.useState(()=>{const se="AIzaSyBXCBO0Kx9-2HvTzjcsHzoGmHZnIKXXvcw";return console.log("[APP] Gemini API Key Source:","FOUND","(first 10 chars):",se?.substring(0,10)+"..."),se}),[Lt,Kt]=ue.useState(()=>{const se="AIzaSyBXCBO0Kx9-2HvTzjcsHzoGmHZnIKXXvcw";return console.log("[APP] Maps API Key Source:","FOUND","(first 10 chars):",se?.substring(0,10)+"..."),se}),[yn,jt]=ue.useState(0),[Mt,gt]=ue.useState("map"),[Zt,fn]=ue.useState(!1),[Ot,hn]=ue.useState(!1),[kr,Rn]=ue.useState(!1),[Wo,Ua]=ue.useState(void 0),[li,Rr]=ue.useState(!1),[ga,Cn]=ue.useState(!1),Dr="AIzaSyBXCBO0Kx9-2HvTzjcsHzoGmHZnIKXXvcw",[rr,Mr]=ue.useState({isOpen:!1,title:"",message:"",type:"info"}),vs=(se,De,Ue="info")=>{Mr({isOpen:!0,title:se,message:De,type:Ue,confirmLabel:"Entendi"})},qs=(se,De,Ue,We)=>{Mr({isOpen:!0,title:se,message:De,type:"confirm",onConfirm:Ue,confirmLabel:We?.confirm||"Confirmar",cancelLabel:We?.cancel||"Cancelar"})},Yn=ue.useRef(!1),qr=se=>{et.isActive&&et.status==="processing"?qs("Parar Envio?",["Gostaria de parar de enviar o arquivo?","O progresso atual ser perdido."],()=>{Yn.current=!0,gt(se)},{confirm:"Parar Envio",cancel:"Continuar"}):gt(se)},[tc,xa]=ue.useState(""),[Ks,sr]=ue.useState(!1),va=()=>{qs("Remover Clientes Duplicados?",["Esta ao ir identificar clientes com mesmo nome e endereo.","Manteremos apenas 1 registro de cada e atualizaremos a contagem total."],()=>{const se=new Map,De=[];let Ue=0;if(u.forEach(We=>{const ct=`${We.companyName||""}-${We.cleanAddress||""}`.toLowerCase().trim();se.has(ct)?Ue++:(se.set(ct,We),De.push(We))}),Ue===0){vs("Sucesso","Nenhum cliente duplicado encontrado!","success");return}d(De),vs("Limpeza Concluda!",[`${Ue} clientes duplicados removidos.`,`Total anterior: ${u.length}`,`Total atual: ${De.length}`],"success")})},ys=async()=>{if(u.length===0){vs("Aviso","Nenhum cliente na base para atualizar.","warning");return}qs("Iniciar Atualizao em Massa?",["Este processo utilizar sua API CNPJa para:"," Buscar CNPJs faltantes via Razo Social"," Atualizar CNAEs (Atividade Econmica)"," Telefones, Endereos e Georreferenciamento",`Total de clientes: ${u.length}`],async()=>{_t({isActive:!0,current:0,total:u.length,status:"processing",fileName:"Enriquecimento de Base (CNPJa Comercial)",ownerName:n?.name||"Sistema"});const se=zk(3);let De=0,Ue=0;const We=u.map((ct,It)=>se(async()=>{try{let Xe=ct.cnpj?.replace(/\D/g,"");if(!Xe||Xe.length!==14){const ut=await OW({filtros:ct.companyName,uf:ct.state});ut&&ut.length>0&&(Xe=ut[0].taxId)}if(Xe&&Xe.length===14){const ut=await rm(Xe);if(ut){const Tt=ut.logradouro&&ut.numero;d(Ut=>Ut.map(wt=>wt.id===ct.id?{...wt,cnpj:ut.cnpj,companyName:ut.nome_fantasia||ut.razao_social||wt.companyName,contact:ut.ddd_telefone_1||wt.contact,cleanAddress:Tt?`${ut.logradouro}, ${ut.numero}, ${ut.municipio} - ${ut.uf}`:wt.cleanAddress,originalAddress:Tt?`${ut.logradouro}, ${ut.numero}${ut.complemento?` - ${ut.complemento}`:""}, ${ut.bairro}, ${ut.municipio} - ${ut.uf}`:wt.originalAddress,mainCnae:ut.cnae_fiscal||wt.mainCnae,secondaryCnaes:ut.cnaes_secundarios?.map(Vt=>`${Vt.codigo} - ${Vt.texto}`)||wt.secondaryCnaes||[],lat:ut.latitude||wt.lat,lng:ut.longitude||wt.lng,googleMapsUri:ut.latitude?`https://www.google.com/maps?q=${ut.latitude},${ut.longitude}`:wt.googleMapsUri}:wt)),De++}}}catch(Xe){console.error(`Erro ao atualizar cliente ${ct.companyName}:`,Xe),Ue++,Xe.message&&(Xe.message.includes("401")||Xe.message.toLowerCase().includes("chave de api cnpja invlida"))&&(Yn.current=!0,_t(ut=>({...ut,status:"error",errorMessage:"Autenticao CNPJa falhou. Chave invlida ou expirada."})),Cn(!0))}finally{_t(Xe=>({...Xe,current:It+1}))}}));await Promise.all(We),_t(ct=>({...ct,status:"completed"})),vs("Atualizao Concluda!",[`Sucesso: ${De} clientes`,`Erros/No localizados: ${Ue+(u.length-De-Ue)}`,"Sua base de dados agora est enriquecida!"],"success"),setTimeout(()=>{_t(ct=>({...ct,isActive:!1}))},3e3)})},G=se=>{v.includes(se)||T([...v,se])},ne=se=>{T(v.filter(De=>De!==se))},J=se=>{x(De=>{const Ue=[...De,...se];return _e(u,Ue),Ue})},X=se=>{x(se)},ee=()=>{x([]),d(se=>se.map(De=>({...De,purchasedProducts:[]})))},ae=()=>{qs("Limpar TODOS os Clientes?",[" ATENO: Esta ao remover TODOS os clientes do sistema."," Limpeza da listagem de arquivos e reset de contadores."," Vendedores, produtos e categorias NO sero afetados."],()=>{d([]),A(se=>se.filter(De=>De.type!=="clients")),vs("Sucesso","Base de clientes limpa com sucesso!","success")})},xe=async se=>{for(const De of se){const Ue=De?.trim();if(Ue)try{const We=await Vk(Ue,Lt||"");if(We)return We}catch(We){console.warn(`Geocoding failed for ${Ue}:`,We)}}return null},Re=async()=>{const se=u.filter(De=>!De.plusCode&&De.lat&&De.lng&&De.lat!==0);if(se.length===0){vs("Aviso","Todos os clientes com coordenadas j possuem Plus Code!","info");return}qs("Gerar Plus Codes?",[`Deseja gerar Plus Codes para ${se.length} clientes?`,"Isso utilizar a cota da API de Geocoding do Google."],async()=>{_t({isActive:!0,current:0,total:se.length,status:"processing",fileName:"Gerao de Plus Codes",ownerName:n?.name||"Sistema"});let De=0;const Ue=[...u];for(let We=0;We<se.length&&!Yn.current;We++){const ct=se[We];try{const It=await wf(ct.lat,ct.lng,Lt||"");if(It){const Xe=Ue.findIndex(ut=>ut.id===ct.id);Xe!==-1&&(Ue[Xe]={...Ue[Xe],plusCode:It},De++)}}catch(It){console.error(`Error generating Plus Code for ${ct.companyName}:`,It)}_t(It=>({...It,current:We+1}))}d(Ue),_t(We=>({...We,status:"completed",isActive:!0})),Yn.current=!1,vs("Sucesso",`Processo concludo! ${De} Plus Codes gerados.`,"success")})},ve=async se=>{const De=u.find(Tt=>Tt.id===se.id);let Ue={...se};const We=De&&De.cleanAddress!==se.cleanAddress,ct=De&&De.plusCode!==se.plusCode,It=De&&(De.lat!==se.lat||De.lng!==se.lng),Xe=se.lat===0||se.lng===0;if(!(It&&!Xe)&&(We||ct||Xe)){const Tt=[se.cleanAddress,se.district,se.city,se.state,se.zip,se.region,se.country||"Brasil"].filter(Boolean).join(", "),Ut=await xe([se.plusCode,Tt,se.cleanAddress,se.originalAddress]);if(Ut&&(Ue.lat=Ut.lat,Ue.lng=Ut.lng,Ut.formattedAddress&&(Ue.cleanAddress=Ut.formattedAddress),!Ue.plusCode)){const wt=await wf(Ue.lat,Ue.lng,Lt||"");wt&&(Ue.plusCode=wt)}}else if(!Ue.plusCode&&Ue.lat&&Ue.lng){const Tt=await wf(Ue.lat,Ue.lng,Lt||"");Tt&&(Ue.plusCode=Tt)}d(Tt=>Tt.map(Ut=>Ut.id===Ue.id?Ue:Ut))},Te=async se=>{let De={...se,id:se.id||crypto.randomUUID(),lat:se.lat||0,lng:se.lng||0};if(!De.lat||!De.lng||De.lat===0){const Ue=await xe([De.plusCode,De.cleanAddress,De.originalAddress]);if(Ue){if(De.lat=Ue.lat,De.lng=Ue.lng,Ue.formattedAddress&&(De.cleanAddress=Ue.formattedAddress),console.log(`[APP] Geocoding for manual client successful: ${De.lat}, ${De.lng}`),!De.plusCode){const We=await wf(De.lat,De.lng,Lt||"");We&&(De.plusCode=We)}}else console.warn(`[APP] Geocoding for manual client FAILED: ${De.companyName}`)}else if(!De.plusCode&&De.lat&&De.lng){const Ue=await wf(De.lat,De.lng,Lt||"");Ue&&(De.plusCode=Ue)}d(Ue=>[...Ue,De]),setTimeout(()=>{const Ue=document.querySelector(".overflow-y-auto");Ue&&(Ue.scrollTop=Ue.scrollHeight)},100)},_e=(se,De)=>{if(De.length===0)return;const Ue=se.map(We=>{if(We.purchasedProducts&&We.purchasedProducts.length>0)return We;let ct=De.filter(Tt=>(We.category||[]).some(Ut=>(Tt.category||"").toLowerCase().includes((Ut||"").toLowerCase())||(Ut||"").toLowerCase().includes((Tt.category||"").toLowerCase())));ct.length===0&&(ct=De);const It=Math.floor(Math.random()*5)+1,ut=[...ct].sort(()=>.5-Math.random()).slice(0,It);return{...We,purchasedProducts:ut}});d(Ue)},je=async()=>{Rr(!0)},He=se=>{se&&se.trim()&&(Kt(se.trim()),localStorage.setItem("google_maps_api_key",se.trim()),jt(De=>De+1),Rr(!1))},Ye=se=>{if(r(se),dt(),qr("map"),sr(!1),tv(se.role)){const De=t.find(Ue=>$c(Ue.role));De&&xa(De.id)}},Be=se=>{localStorage.setItem("cnpja_api_key",se),Cn(!1),vs("Sucesso","Chave CNPJa atualizada! Tente realizar a consulta novamente.","success")},qe=()=>{if(et.isActive&&et.status==="processing")if(window.confirm("Gostaria de Parar de Enviar o Arquivo?"))Yn.current=!0;else return;s(),dt()},nt=async(se,De,Ue=!1)=>{const We=t.find(Xe=>Xe.id===De),ct=We?We.name:"Desconhecido";if(u.length>0&&!Ue&&!window.confirm(`O sistema j possui dados de clientes carregados.

Deseja ADICIONAR os novos dados  lista existente?
Clique em OK para continuar ou Cancelar para abortar.

Dica: Para substituir tudo, cancele e use o boto 'Limpar Base de Clientes' na aba de Admin.`))return;const It=crypto.randomUUID();_t({isActive:!0,total:0,current:0,fileName:se.name,ownerName:ct,status:"reading"}),Yn.current=!1;try{let Xe=[];const ut=se.name.toLowerCase();if(console.log(`Processing file: ${se.name}, Lower: ${ut}`),ut.endsWith(".csv"))console.log("Selected Parser: CSV"),Xe=await xL(se);else if(ut.endsWith(".xlsx")||ut.endsWith(".xls"))console.log("Selected Parser: Excel"),Xe=await EH(se);else throw new Error("Formato no suportado. Use .csv, .xlsx ou .xls");if(console.log("Parsed Items Count:",Xe.length),Xe.length>0&&console.log("Sample Parsed Item:",Xe[0]),Xe.length===0)throw new Error("Arquivo vazio.");const Tt={id:It,fileName:se.name,uploadDate:new Date().toISOString(),salespersonId:De,salespersonName:ct,type:"clients",itemCount:Xe.length,status:"processing"};try{const Vt=new Date().getTime(),pr=`uploads/clients/${De}/${Vt}_${se.name}`,Jt=await Hx(se,pr);Jt&&(Tt.storageUrl=Jt,console.log(`[APP] CSV file uploaded to Storage: ${Jt}`))}catch(Vt){console.error("[APP] Failed to upload file to Storage:",Vt)}A(Vt=>[Tt,...Vt]),_t(Vt=>({...Vt,total:Xe.length,status:"processing"}));const wt=(await jW(Xe,De,kn,Lt,v,(Vt,pr)=>{if(Yn.current)throw new Error("CANCELLED_BY_USER");_t(Jt=>({...Jt,current:Vt,total:pr}))})).map(Vt=>({...Vt,sourceFileId:It}));d(Vt=>{const pr=[...Vt];return wt.forEach(Jt=>{const mr=Jt.cnpj?.replace(/\D/g,""),is=pr.findIndex(mn=>{const Nn=mn.cnpj?.replace(/\D/g,"");return mr&&Nn&&mr.length===14&&Nn.length===14?mr===Nn:mn.companyName.toLowerCase().trim()===Jt.companyName.toLowerCase().trim()&&mn.city.toLowerCase().trim()===Jt.city.toLowerCase().trim()});if(is!==-1){const mn=pr[is];pr[is]={...mn,...Jt,ownerName:Jt.ownerName||mn.ownerName,contact:Jt.contact||mn.contact,whatsapp:Jt.whatsapp||mn.whatsapp,cnpj:Jt.cnpj||mn.cnpj,mainCnae:Jt.mainCnae||mn.mainCnae,secondaryCnaes:Jt.secondaryCnaes&&Jt.secondaryCnaes.length>0?Jt.secondaryCnaes:mn.secondaryCnaes,lat:Jt.lat!==0?Jt.lat:mn.lat,lng:Jt.lng!==0?Jt.lng:mn.lng,googleMapsUri:Jt.googleMapsUri||mn.googleMapsUri,plusCode:Jt.plusCode||mn.plusCode}}else pr.push(Jt)}),pr}),_t(Vt=>({...Vt,status:"completed"})),A(Vt=>Vt.map(pr=>pr.id===It?{...pr,status:"completed"}:pr)),setTimeout(()=>{_t(Vt=>Vt.status==="completed"?{...Vt,isActive:!1}:Vt)},5e3)}catch(Xe){console.error(Xe);const ut=Xe.message==="CANCELLED_BY_USER",Tt=ut?"Cancelado pelo usurio.":Xe.message||"Erro desconhecido",Ut=ut;_t(wt=>({...wt,status:"error",errorMessage:Tt,isActive:!Ut})),A(wt=>wt.map(Vt=>Vt.id===It?{...Vt,status:"error",errorMessage:Tt}:Vt))}},on=se=>{const De=S.find(Ue=>Ue.id===se);De&&window.confirm(`Tem certeza que deseja excluir o arquivo "${De.fileName}"?

Isso remover todos os ${De.itemCount} registros associados.`)&&(De.type==="clients"?d(Ue=>Ue.filter(We=>We.sourceFileId!==se)):De.type==="products"&&x(Ue=>Ue.filter(We=>We.sourceFileId!==se)),A(Ue=>Ue.filter(We=>We.id!==se)))},ln=(se,De)=>{const We=t.find(ct=>ct.id===De)?.name||"None";A(ct=>ct.map(It=>It.id===se?{...It,salespersonId:De,salespersonName:We}:It)),d(ct=>ct.map(It=>It.sourceFileId===se?{...It,salespersonId:De}:It)),De?(qr("map"),Se(De),alert(`Arquivo e ${Ne.filter(ct=>ct.sourceFileId===se).length} clientes reatribudos para: ${We}

Mapa filtrado automaticamente.`)):(Se("Todos"),alert("Arquivo desmarcado. Clientes ficaram sem vendedor at que outro seja atribudo."))},pn=async(se,De)=>{const Ue=crypto.randomUUID();_t({isActive:!0,total:0,current:0,fileName:se.name,ownerName:"Sistema",status:"reading"});try{const We=await vL(se);if(We.length===0)throw new Error("Arquivo vazio ou sem registros vlidos.");const ct=We.reduce((Tt,Ut)=>{const wt=Ut.cnpj?Ut.cnpj:(Ut.companyName||"").toLowerCase().trim();return Tt[wt]||(Tt[wt]=[]),Tt[wt].push(Ut),Tt},{}),It=Object.keys(ct);_t(Tt=>({...Tt,total:It.length,status:"processing"}));let Xe=0;d(Tt=>{const Ut=[...Tt];return It.forEach((wt,Vt)=>{_t(is=>({...is,current:Vt+1}));const Jt=ct[wt][0];let mr=-1;if(Jt.cnpj&&(mr=Ut.findIndex(is=>(is.cnpj||"").replace(/[.\-\/]/g,"")===Jt.cnpj)),mr===-1){const is=(Jt.companyName||"").toLowerCase().trim();mr=Ut.findIndex(mn=>(mn.companyName||"").toLowerCase().trim()===is)}if(mr!==-1){Xe++;const mn=ct[wt].map(Nn=>{const Zo=h.find(ci=>Nn.sku&&ci.sku===Nn.sku||ci.name&&Nn.productName&&(ci.name||"").toLowerCase().trim()===(Nn.productName||"").toLowerCase().trim());return Zo?{...Zo,purchaseDate:Nn.purchaseDate}:{sku:Nn.sku||"N/A",name:Nn.productName||"Produto Desconhecido",brand:"Desconhecido",category:"Manual",price:0,factoryCode:"",purchaseDate:Nn.purchaseDate}});Ut[mr]={...Ut[mr],purchasedProducts:mn}}}),Ut});const ut={id:Ue,fileName:se.name,uploadDate:new Date().toISOString(),salespersonId:De,salespersonName:t.find(Tt=>Tt.id===De)?.name||"Vendedor",type:"purchases",itemCount:We.length,status:"completed"};try{const Ut=`uploads/purchases/${new Date().getTime()}_${se.name}`;await Hx(se,Ut).then(wt=>{wt&&(ut.storageUrl=wt)})}catch(Tt){console.error("[APP] Failed to upload purchase file to Storage:",Tt)}A(Tt=>[ut,...Tt]),_t({isActive:!1,total:0,current:0,fileName:"",ownerName:"",status:"completed"}),alert(` Atualizao de Compras concluda!

${Xe} clientes identificados e com histrico renovado.`)}catch(We){console.error(We),_t(ct=>({...ct,status:"error",errorMessage:We.message})),A(ct=>[...ct,{id:Ue,fileName:se.name,uploadDate:new Date().toISOString(),salespersonId:De,salespersonName:t.find(It=>It.id===De)?.name||"Vendedor",type:"purchases",itemCount:0,status:"error",errorMessage:We.message}])}},Tr=async se=>{const De=crypto.randomUUID();_t({isActive:!0,total:0,current:0,fileName:se.name,ownerName:"Sistema",status:"reading"});try{let Ue=[];const We=se.name.toLowerCase();if(We.endsWith(".csv"))Ue=await cN(se);else if(We.endsWith(".xlsx")||We.endsWith(".xls"))Ue=await $I(se);else throw new Error("Formato no suportado.");if(Ue.length===0)throw new Error("Arquivo vazio.");Ue=Ue.map(It=>({...It,sourceFileId:De}));const ct={id:De,fileName:se.name,uploadDate:new Date().toISOString(),salespersonId:"system",salespersonName:"Catlogo Geral",type:"products",itemCount:Ue.length,status:"completed"};try{const Xe=`uploads/products/${new Date().getTime()}_${se.name}`,ut=await Hx(se,Xe);ut&&(ct.storageUrl=ut)}catch(It){console.error("[APP] Failed to upload product file to Storage:",It)}A(It=>[ct,...It]),J(Ue),_t({isActive:!1,total:0,current:0,fileName:"",ownerName:"",status:"completed"}),alert(`${Ue.length} produtos importados com sucesso.`)}catch(Ue){console.error(Ue),_t(We=>({...We,status:"error",errorMessage:Ue.message})),A(We=>We.map(ct=>ct.id===De?{...ct,status:"error",errorMessage:Ue.message}:ct))}},as="6LcyKmUsAAAAAC-uUPRRD2ZMZRJu_dBPUH5Gp4gm";if(console.log("[APP] reCAPTCHA Key Source:","FALLBACK"),console.log("[APP] reCAPTCHA Key (first 10 chars):",as.substring(0,10)+"..."),console.log("[APP] Environment:","production"),!n)return m.jsx(lC,{reCaptchaKey:as,language:"pt-BR",scriptProps:{async:!0,defer:!0,appendTo:"body"},children:m.jsx(Fse,{users:t,onLogin:Ye})});const _n=tv(n.role),Pt=nv(n.role),Rs=Ie!=="Todos"||H!=="Todos"||te!=="";return R?m.jsxs(lC,{reCaptchaKey:as,language:"pt-BR",scriptProps:{async:!0,defer:!0,appendTo:"body"},children:[m.jsxs("div",{className:"flex h-screen bg-gray-50 font-sans text-gray-800 overflow-hidden relative",children:[Ks&&m.jsx("div",{className:"absolute inset-0 bg-black/50 z-20 md:hidden backdrop-blur-sm transition-opacity",onClick:()=>sr(!1),role:"button",tabIndex:0,"aria-label":"Fechar menu",onKeyDown:se=>se.key==="Escape"&&sr(!1)}),m.jsxs("aside",{className:`
          w-72 bg-surface-container-low text-on-surface shadow-elevation-2 z-30 
          fixed md:relative h-full transition-transform duration-300 ease-in-out
          ${Ks?"translate-x-0":"-translate-x-full md:translate-x-0"}
          flex flex-col border-r border-outline-variant/30
        `,children:[m.jsxs("div",{className:"p-6 border-b border-outline-variant/30 flex items-center justify-between",children:[m.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2 text-primary",children:[m.jsx(Cw,{className:"w-6 h-6"}),"Rota de Vendas"]}),m.jsx("button",{onClick:()=>sr(!1),className:"md:hidden text-on-surface-variant hover:text-primary",title:"Fechar menu lateral",children:m.jsx(Gs,{className:"w-6 h-6"})})]}),m.jsx("div",{className:"px-6 py-2",children:m.jsx("p",{className:"text-xs font-medium text-on-surface-variant/80 uppercase tracking-wider",children:_n?"Painel Administrativo":"Portal do Vendedor"})}),m.jsxs("div",{className:"p-4 flex-1 overflow-y-auto custom-scrollbar",children:[m.jsxs("div",{className:"bg-surface-container-highest rounded-2xl p-4 mb-6 border border-outline-variant/30 shadow-sm relative overflow-hidden group",children:[m.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-primary/10 to-transparent rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),m.jsx("p",{className:"text-xs text-on-surface-variant uppercase font-bold tracking-wider mb-2 relative z-10",children:"Logado como"}),m.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[m.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white shadow-md overflow-hidden ${_n?"bg-tertiary":"bg-secondary"}`,children:n.photoURL?m.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):m.jsx("span",{children:n.name.charAt(0)})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"font-bold text-sm text-on-surface truncate",children:n.name}),m.jsx("p",{className:"text-xs text-on-surface-variant truncate opacity-80",children:n.email})]})]})]}),m.jsxs("nav",{className:"space-y-1 mb-8",children:[m.jsx("p",{className:"px-3 text-xs font-bold text-on-surface-variant/60 uppercase mb-3 tracking-wider",children:"Visualizao"}),m.jsxs("button",{onClick:()=>{gt("map"),sr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-full transition-all duration-200 ${Mt==="map"?"bg-secondary-container text-on-secondary-container shadow-sm font-bold":"text-on-surface-variant hover:bg-surface-container-highest active:scale-95"}`,children:[m.jsx(XM,{className:`w-5 h-5 ${Mt==="map"?"fill-current":""}`}),"Mapa da Carteira"]}),m.jsxs("button",{onClick:()=>{gt("table"),sr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-full transition-all duration-200 ${Mt==="table"?"bg-secondary-container text-on-secondary-container shadow-sm font-bold":"text-on-surface-variant hover:bg-surface-container-highest active:scale-95"}`,children:[m.jsx(wP,{className:`w-5 h-5 ${Mt==="table"?"fill-current":""}`}),"Listagem de Dados"]})]}),_n&&m.jsxs("nav",{className:"space-y-1 mb-8",children:[m.jsx("p",{className:"px-3 text-xs font-bold text-on-surface-variant/60 uppercase mb-3 tracking-wider",children:"Administrao"}),m.jsxs("button",{onClick:()=>{qr("admin_users"),sr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-full transition-all duration-200 ${Mt==="admin_users"?"bg-secondary-container text-on-secondary-container shadow-sm font-bold":"text-on-surface-variant hover:bg-surface-container-highest active:scale-95"}`,children:[m.jsx(ev,{className:`w-5 h-5 ${Mt==="admin_users"?"fill-current":""}`}),"Gerenciar Usurios"]}),m.jsxs("button",{onClick:()=>{qr("admin_categories"),sr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-full transition-all duration-200 ${Mt==="admin_categories"?"bg-secondary-container text-on-secondary-container shadow-sm font-bold":"text-on-surface-variant hover:bg-surface-container-highest active:scale-95"}`,children:[m.jsx(AC,{className:`w-5 h-5 ${Mt==="admin_categories"?"fill-current":""}`}),"Categorias"]}),m.jsxs("button",{onClick:()=>{qr("admin_products"),sr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-full transition-all duration-200 ${Mt==="admin_products"?"bg-secondary-container text-on-secondary-container shadow-sm font-bold":"text-on-surface-variant hover:bg-surface-container-highest active:scale-95"}`,children:[m.jsx(ko,{className:`w-5 h-5 ${Mt==="admin_products"?"fill-current":""}`}),"Produtos"]}),m.jsxs("button",{onClick:()=>{qr("admin_files"),sr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-full transition-all duration-200 ${Mt==="admin_files"?"bg-secondary-container text-on-secondary-container shadow-sm font-bold":"text-on-surface-variant hover:bg-surface-container-highest active:scale-95"}`,children:[m.jsx(zf,{className:`w-5 h-5 ${Mt==="admin_files"?"fill-current":""}`}),"Arquivos"]}),m.jsxs("button",{onClick:()=>{Rn(!0),sr(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-full transition-all duration-200 text-on-surface-variant hover:bg-surface-container-highest active:scale-95",children:[m.jsx(Yx,{className:"w-5 h-5"}),"Backup & Cloud"]})]})]}),m.jsxs("div",{className:"p-4 border-t border-outline-variant/30 bg-surface-container-low",children:[m.jsxs("button",{onClick:qe,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-bold text-error bg-error-container hover:bg-error-container/80 rounded-full transition-colors shadow-sm",title:"Encerrar sesso e sair do sistema",children:[m.jsx(KM,{className:"w-4 h-4 box-content"})," Sair do Sistema"]}),m.jsx("div",{className:"text-center mt-4",children:m.jsx("p",{className:"text-[10px] text-on-surface-variant opacity-60",children:"Verso 3.5.0 (MD3)"})})]})]}),m.jsxs("header",{className:"md:hidden fixed top-0 left-0 right-0 h-16 bg-surface-container-low shadow-sm z-10 flex items-center justify-between px-4 border-b border-outline-variant/30",children:[m.jsx("button",{onClick:()=>sr(!0),className:"p-2 text-on-surface hover:bg-surface-container-highest rounded-full transition-colors",title:"Abrir menu",children:m.jsx(nP,{className:"w-6 h-6"})}),m.jsxs("span",{className:"font-bold text-lg text-primary flex items-center gap-2",children:[m.jsx(Cw,{className:"w-5 h-5"})," Rota de Vendas"]}),m.jsx("div",{className:"w-10"})," "]}),m.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden bg-surface transition-all duration-300 md:pt-0 pt-16",children:[!_n&&Mt==="table"&&m.jsx("button",{onClick:()=>fn(!0),className:"md:hidden fixed bottom-6 right-6 w-14 h-14 bg-primary text-on-primary rounded-2xl shadow-elevation-2 flex items-center justify-center z-50 animate-bounce-in",children:m.jsx(ev,{className:"w-6 h-6"})}),m.jsx(zse,{isOpen:kr,onClose:()=>Rn(!1),onSaveToCloud:()=>{n1(u,h,v,t),alert(" Dados salvos na nuvem com sucesso!")},onClearDatabase:ae,isFirebaseConnected:b}),m.jsx($se,{isOpen:li,onClose:()=>Rr(!1),onConfirm:He,suggestedKey:Dr}),m.jsx(qse,{isOpen:ga,onClose:()=>Cn(!1),onConfirm:Be}),m.jsx(jse,{onAccept:()=>{console.log("Cookie consent accepted. Storage enabled.")},onDecline:()=>{console.warn("Cookie consent declined. Storage should be minimized.")}}),m.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 px-6 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[m.jsx("span",{children:"Portal"}),m.jsx(yC,{className:"w-4 h-4"}),m.jsx("span",{className:"font-semibold text-blue-600",children:Mt==="map"?"Mapa da Carteira":Mt==="table"?"Listagem de Clientes":Mt==="admin_categories"?"Categorias de Clientes":Mt==="admin_products"?"Catlogo de Produtos":"Gesto de Usurios"})]}),m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs text-gray-400",children:_n?"Clientes Visualizados":"Meus Clientes"}),m.jsx("p",{className:"text-lg font-bold leading-none",children:be.length})]}),_n&&m.jsxs("div",{className:"text-right border-l pl-6 border-gray-200",children:[m.jsx("p",{className:"text-xs text-gray-400",children:"Total Sistema"}),m.jsx("p",{className:"text-lg font-bold leading-none text-purple-600",children:u.length})]})]})]}),Mt==="admin_users"&&_n?m.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:m.jsx(Use,{currentUser:n,users:t,onAddUser:a,onUpdateUser:o,onDeleteUser:c,onCleanupDuplicates:va,totalClients:u.length})}):Mt==="admin_categories"&&_n?m.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:m.jsx(Vse,{categories:v,onAddCategory:G,onDeleteCategory:ne})}):Mt==="admin_products"&&_n?m.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:m.jsx(Bse,{products:h,onUploadProducts:J,onClearProducts:ee,onSaveProducts:X,apiKey:kn})}):Mt==="admin_files"&&_n?m.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:m.jsx(Hse,{users:t,uploadedFiles:S,onUploadClients:(se,De)=>nt(se,De),onUploadProducts:Tr,onUploadPurchases:pn,onDeleteFile:on,onReassignSalesperson:ln,procState:et})}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-gray-100 px-3 py-2.5 border-b border-gray-200 flex flex-col gap-2",children:[m.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[m.jsxs("div",{className:"relative",children:[m.jsx(ki,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:L,onChange:se=>z(se.target.value),placeholder:"Buscar cliente ou empresa...",className:"pl-9 pr-3 py-1.5 text-sm border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 w-52 border outline-none"})]}),m.jsx("div",{className:"h-5 w-px bg-gray-300 mx-1 hidden sm:block"}),m.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600",children:[m.jsx(wC,{className:"w-4 h-4"}),m.jsx("span",{className:"text-xs font-bold hidden md:inline",children:"Filtros:"})]}),m.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg border transition-colors ${Pt?"bg-purple-50 border-purple-100":"bg-gray-50 border-gray-200"}`,children:[m.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 ${Pt?"text-purple-600":"text-gray-500"}`,title:_n?"Perfil Administrador":Pt?"Perfil Gestor":"Perfil Vendedor",children:[Pt?m.jsx(Qx,{className:"w-3 h-3"}):m.jsx(Is,{className:"w-3 h-3"}),_n?"Admin":Pt?"Gesto":"Vendedor"]}),m.jsxs("div",{className:"relative",children:[m.jsx(Is,{className:`absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 pointer-events-none ${Pt?"text-purple-400":"text-gray-400"}`}),m.jsxs("select",{value:Pt?he:n?.id||"",onChange:se=>Pt&&Se(se.target.value),disabled:!Pt,className:`text-xs rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 pl-7 pr-2 py-1 font-medium appearance-none ${Pt?"border-purple-300 bg-white text-purple-900 cursor-pointer":"border-gray-200 bg-gray-100 text-gray-600 cursor-not-allowed"}`,title:Pt?"Filtrar por vendedor":"Visualizao restrita aos seus clientes",children:[Pt&&m.jsx("option",{value:"Todos",children:"Todos Vendedores"}),Pt?t.filter(se=>se.role==="salesperson"||se.role==="sales_external"||se.role==="sales_internal").map(se=>m.jsx("option",{value:se.id,children:se.name},se.id)):m.jsx("option",{value:n?.id,children:n?.name})]})]}),Pt&&m.jsxs("div",{className:"relative animate-fade-in",children:[m.jsx(Xa,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-purple-400 pointer-events-none"}),m.jsxs("select",{value:ie,onChange:se=>fe(se.target.value),className:"text-xs border-purple-300 bg-white text-purple-900 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 pl-7 pr-2 py-1 font-medium",title:"Filtrar por equipe de vendas",children:[m.jsx("option",{value:"Todos",children:"Todas Equipes"}),m.jsx("option",{value:"Externo",children:"Externo"}),m.jsx("option",{value:"Interno",children:"Interno"}),m.jsx("option",{value:"Mercado Livre",children:"Mercado Livre"})]})]})]}),m.jsxs("select",{value:O,onChange:se=>{I(se.target.value),N("Todos"),U("Todas")},className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-2 py-1.5",title:"Filtrar por regio geogrfica",children:[m.jsx("option",{value:"Todas",children:"Todas Regies"}),id.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("select",{value:C,onChange:se=>{N(se.target.value),U("Todas")},className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-2 py-1.5",disabled:ke.length===0,title:"Filtrar por estado (UF)",children:[m.jsxs("option",{value:"Todos",children:["Todos Estados ",O!=="Todas"?`(${O})`:""]}),ke.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("select",{value:F,onChange:se=>U(se.target.value),className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-2 py-1.5 min-w-[100px]",disabled:C==="Todos"||$e.length===0,title:"Filtrar por cidade",children:[m.jsx("option",{value:"Todas",children:"Todas Cidades"}),$e.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("div",{className:"flex items-center gap-1 relative",children:[m.jsx(Ri,{className:"w-3.5 h-3.5 text-gray-400 absolute left-2 pointer-events-none"}),m.jsxs("select",{value:M,onChange:se=>j(se.target.value),className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 pl-7 pr-2 py-1.5",title:"Filtrar por categoria de cliente",children:[m.jsx("option",{value:"Todos",children:"Todas Cat. Clientes"}),v.map(se=>m.jsx("option",{value:se,children:se},se))]})]}),m.jsxs("div",{className:"flex items-center gap-1 relative",children:[m.jsx(Xa,{className:"w-3.5 h-3.5 text-gray-400 absolute left-2 pointer-events-none"}),m.jsxs("select",{value:ce,onChange:se=>K(se.target.value),className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 pl-7 pr-2 py-1.5 max-w-[200px]",title:"Filtrar por CNAE (Atividade Econmica)",children:[m.jsx("option",{value:"Todos",children:"Todos CNAEs"}),re.map(se=>m.jsx("option",{value:se,children:se.length>40?se.substring(0,40)+"...":se},se))]})]}),m.jsx(Ose,{startDate:Ge,endDate:st,onRangeChange:(se,De)=>{Ve(se),it(De)},label:"Perodo"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 items-center bg-white border border-gray-200 px-2 py-1.5 rounded-lg shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 px-2 text-sm font-semibold text-green-700",children:[m.jsx(ko,{className:"w-4 h-4"}),"Vendas:"]}),m.jsxs("select",{value:Ie,onChange:se=>Y(se.target.value),className:`text-xs rounded-lg px-2 py-1.5 border transition-colors ${Ie!=="Todos"?"bg-green-50 border-green-300 text-green-800 font-bold":"border-gray-300 text-gray-600"}`,title:"Filtrar por marca ou categoria de produto",children:[m.jsx("option",{value:"Todos",children:"Todas Marcas / Categorias"}),ft.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("div",{className:"relative animate-fade-in",children:[m.jsx(Ri,{className:`absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 pointer-events-none ${H!=="Todos"?"text-green-600":"text-gray-400"}`}),m.jsxs("select",{value:H,onChange:se=>Q(se.target.value),className:`text-xs rounded-lg pl-7 pr-2 py-1.5 border appearance-none transition-colors max-w-[180px] truncate ${H!=="Todos"?"bg-green-50 border-green-300 text-green-800 font-bold":"border-gray-300 text-gray-600"}`,title:"Filtrar por produto especfico",children:[m.jsx("option",{value:"Todos",children:"Todos Produtos"}),h.filter(se=>Ie==="Todos"||se.category===Ie).sort((se,De)=>se.name.localeCompare(De.name)).map(se=>m.jsxs("option",{value:se.sku,children:[se.name.substring(0,30),"... (",se.sku,")"]},se.sku))]})]}),m.jsxs("div",{className:"relative group/search",children:[m.jsx(ki,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400"}),m.jsx("input",{type:"text",value:te,onChange:se=>{W(se.target.value),ge(!0)},onFocus:()=>ge(!0),placeholder:"SKU, Marca, Cdigo ou Descrio...",className:`pl-7 pr-3 py-1.5 text-xs border rounded-lg focus:ring-green-500 focus:border-green-500 outline-none w-56 transition-colors ${te?"bg-green-50 border-green-300":"border-gray-300"}`,title:"Buscar produtos por SKU, Marca, Cdigo ou Descrio"}),le&&te.length>=2&&m.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-xl z-50 max-h-60 overflow-y-auto custom-scrollbar",children:(()=>{const se=h.filter(De=>{const Ue=te.toLowerCase();return(De.name||"").toLowerCase().includes(Ue)||(De.sku||"").toLowerCase().includes(Ue)||(De.brand||"").toLowerCase().includes(Ue)}).slice(0,8);return se.length===0?m.jsxs("div",{className:"p-3 text-xs text-gray-500 italic flex items-center gap-2",children:[m.jsx(ts,{className:"w-3 h-3 text-gray-400"}),"No Foi Encontrado"]}):se.map(De=>m.jsxs("button",{onClick:()=>{W(De.sku),ge(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-green-50 flex flex-col border-b border-gray-50 last:border-0",children:[m.jsx("span",{className:"font-bold text-gray-800",children:De.name}),m.jsxs("span",{className:"text-[10px] text-gray-500 uppercase",children:[De.sku,"  ",De.brand]})]},De.sku))})()}),!le&&te&&Ne.length===0&&m.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 flex items-center gap-1.5 text-[10px] font-bold text-rose-500 animate-fade-in bg-rose-50 px-2 py-1 rounded border border-rose-100 italic",children:[m.jsx(ts,{className:"w-3 h-3"}),"No Foi Encontrado"]})]}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{onClick:()=>Qe(!0),className:`text-[10px] uppercase tracking-wider font-bold px-3 py-1.5 rounded-lg border transition-all ${Je?"bg-green-600 border-green-600 text-white shadow-sm":"bg-white border-gray-300 text-gray-600 hover:border-green-400 hover:text-green-700"}`,children:"Somente com Compras"}),m.jsx("button",{onClick:()=>Qe(!1),className:`text-[10px] uppercase tracking-wider font-bold px-3 py-1.5 rounded-lg border transition-all ${Je?"bg-white border-gray-300 text-gray-600 hover:border-blue-400 hover:text-blue-700":"bg-blue-600 border-blue-600 text-white shadow-sm"}`,children:"Mostrar Todos"}),_n&&m.jsxs("button",{onClick:ys,className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:shadow-lg transition-all text-[10px] font-bold uppercase tracking-wider ml-2",title:"Enriquecer toda a base com dados da Receita Federal via CNPJa Comercial",children:[m.jsx(Wx,{className:"w-3 h-3"})," Atualizar Base (CNPJa)"]})]}),Rs&&m.jsxs("span",{className:"ml-auto text-xs font-medium text-green-600 animate-pulse flex items-center gap-1",children:[m.jsx(Cl,{className:"w-3 h-3"}),"Exibindo onde foi vendido"]}),!Rs&&m.jsx("span",{className:"ml-auto text-xs text-gray-400",children:h.length===0?"Nenhum produto cadastrado no admin.":`${h.length} produtos no catlogo.`})]}),m.jsx("div",{className:"flex justify-end",children:m.jsxs("span",{className:"text-xs font-medium bg-blue-100 text-blue-800 px-2 py-0.5 rounded-lg",children:[Ne.length," resultados encontrados"]})})]}),m.jsx("div",{className:"flex-1 overflow-hidden p-1.5 bg-gray-100",children:be.length===0&&!et.isActive?m.jsx("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-white rounded-xl border border-dashed border-gray-300",children:_n?m.jsxs(m.Fragment,{children:[m.jsx(zf,{className:"w-12 h-12 mb-2 opacity-20"}),m.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Nenhum dado cadastrado."}),m.jsx("p",{className:"text-sm mt-1",children:"Selecione um vendedor ao lado e carregue a planilha de clientes."})]}):m.jsxs(m.Fragment,{children:[m.jsx(Xx,{className:"w-12 h-12 mb-2 opacity-20"}),m.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Carteira Vazia"}),m.jsx("p",{className:"text-sm mt-1 max-w-md text-center",children:"Seus clientes ainda no foram carregados pelo administrador. Solicite o cadastro da sua rota."})]})}):m.jsx("div",{className:"h-full bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden relative",children:Mt==="map"?m.jsx(xse,{clients:Ne,apiKey:Lt,onInvalidKey:je,productFilterActive:Rs,highlightProductTerm:te,activeProductCategory:Ie,users:t,filterContent:m.jsxs("div",{className:"bg-gray-100/95 backdrop-blur-sm px-3 py-2 flex flex-col gap-1.5",children:[m.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[m.jsxs("div",{className:"relative",children:[m.jsx(ki,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:L,onChange:se=>z(se.target.value),placeholder:"Buscar cliente ou empresa...",className:"pl-9 pr-3 py-1.5 text-sm border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 w-48 border outline-none",title:"Buscar cliente ou empresa"})]}),m.jsx("div",{className:"h-5 w-px bg-gray-300 mx-0.5 hidden sm:block"}),m.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg border transition-colors ${Pt?"bg-purple-50 border-purple-100":"bg-gray-50 border-gray-200"}`,children:[m.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 ${Pt?"text-purple-600":"text-gray-500"}`,children:[Pt?m.jsx(Qx,{className:"w-3 h-3"}):m.jsx(Is,{className:"w-3 h-3"}),_n?"Admin":Pt?"Gesto":"Vendedor"]}),m.jsxs("div",{className:"relative",children:[m.jsx(Is,{className:`absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 pointer-events-none ${Pt?"text-purple-400":"text-gray-400"}`}),m.jsxs("select",{value:Pt?he:n?.id||"",onChange:se=>Pt&&Se(se.target.value),disabled:!Pt,className:`text-xs rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 pl-7 pr-2 py-1 font-medium appearance-none ${Pt?"border-purple-300 bg-white text-purple-900 cursor-pointer":"border-gray-200 bg-gray-100 text-gray-600 cursor-not-allowed"}`,title:Pt?"Filtrar por vendedor":"Visualizao restrita aos seus clientes",children:[Pt&&m.jsx("option",{value:"Todos",children:"Todos Vendedores"}),Pt?t.filter(se=>se.role==="salesperson"||se.role==="sales_external"||se.role==="sales_internal").map(se=>m.jsx("option",{value:se.id,children:se.name},se.id)):m.jsx("option",{value:n?.id,children:n?.name})]})]}),Pt&&m.jsxs("div",{className:"relative animate-fade-in",children:[m.jsx(Xa,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-purple-400 pointer-events-none"}),m.jsxs("select",{value:ie,onChange:se=>fe(se.target.value),className:"text-xs border-purple-300 bg-white text-purple-900 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 pl-7 pr-2 py-1 font-medium",title:"Filtrar por equipe de vendas",children:[m.jsx("option",{value:"Todos",children:"Todas Equipes"}),m.jsx("option",{value:"Externo",children:"Externo"}),m.jsx("option",{value:"Interno",children:"Interno"}),m.jsx("option",{value:"Mercado Livre",children:"Mercado Livre"})]})]})]}),m.jsxs("select",{value:O,onChange:se=>{I(se.target.value),N("Todos"),U("Todas")},className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-2 py-1.5",title:"Filtrar por regio",children:[m.jsx("option",{value:"Todas",children:"Todas Regies"}),id.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("select",{value:C,onChange:se=>{N(se.target.value),U("Todas")},className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-2 py-1.5",disabled:ke.length===0,title:"Filtrar por estado",children:[m.jsx("option",{value:"Todos",children:"Todos Estados"}),ke.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("select",{value:F,onChange:se=>U(se.target.value),className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-2 py-1.5",disabled:C==="Todos"||$e.length===0,children:[m.jsx("option",{value:"Todas",children:"Todas Cidades"}),$e.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("div",{className:"flex items-center gap-1 relative",children:[m.jsx(Ri,{className:"w-3.5 h-3.5 text-gray-400 absolute left-2 pointer-events-none"}),m.jsxs("select",{value:M,onChange:se=>j(se.target.value),className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 pl-7 pr-2 py-1.5",title:"Filtrar por categoria de cliente",children:[m.jsx("option",{value:"Todos",children:"Todas Cat. Clientes"}),v.map(se=>m.jsx("option",{value:se,children:se},se))]})]}),m.jsxs("div",{className:"flex items-center gap-1 relative",children:[m.jsx(Xa,{className:"w-3.5 h-3.5 text-gray-400 absolute left-2 pointer-events-none"}),m.jsxs("select",{value:ce,onChange:se=>K(se.target.value),className:"text-xs border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 pl-7 pr-2 py-1.5 max-w-[200px]",title:"Filtrar por CNAE (Atividade Econmica)",children:[m.jsx("option",{value:"Todos",children:"Todos CNAEs"}),re.map(se=>m.jsx("option",{value:se,children:se.length>40?se.substring(0,40)+"...":se},se))]})]}),_n&&m.jsxs("button",{onClick:ys,className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:shadow-lg transition-all text-[10px] font-bold uppercase tracking-wider ml-2",title:"Enriquecer toda a base com dados da Receita Federal via CNPJa Comercial",children:[m.jsx(Wx,{className:"w-3.5 h-3.5"})," Atualizar Base (CNPJa)"]}),m.jsxs("span",{className:"ml-auto text-xs font-medium bg-blue-100 text-blue-800 px-2 py-0.5 rounded-lg",children:[Ne.length," resultados"]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 items-center bg-white border border-gray-200 px-2 py-1.5 rounded-lg shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 px-2 text-sm font-semibold text-green-700",children:[m.jsx(ko,{className:"w-4 h-4"}),"Vendas:"]}),m.jsxs("select",{value:Ie,onChange:se=>Y(se.target.value),className:`text-xs rounded-lg px-2 py-1.5 border transition-colors ${Ie!=="Todos"?"bg-green-50 border-green-300 text-green-800 font-bold":"border-gray-300 text-gray-600"}`,children:[m.jsx("option",{value:"Todos",children:"Todos Deptos / Marcas"}),ft.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("div",{className:"relative animate-fade-in",children:[m.jsx(Ri,{className:`absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 pointer-events-none ${H!=="Todos"?"text-green-600":"text-gray-400"}`}),m.jsxs("select",{value:H,onChange:se=>Q(se.target.value),className:`text-xs rounded-lg pl-7 pr-2 py-1.5 border appearance-none transition-colors max-w-[180px] truncate ${H!=="Todos"?"bg-green-50 border-green-300 text-green-800 font-bold":"border-gray-300 text-gray-600"}`,children:[m.jsx("option",{value:"Todos",children:"Todos Produtos"}),h.filter(se=>Ie==="Todos"||se.category===Ie).sort((se,De)=>se.name.localeCompare(De.name)).map(se=>m.jsxs("option",{value:se.sku,children:[se.name.substring(0,30),"... (",se.sku,")"]},se.sku))]})]}),m.jsxs("div",{className:"relative",children:[m.jsx(ki,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400"}),m.jsx("input",{type:"text",value:te,onChange:se=>W(se.target.value),placeholder:"Depto, Marca, SKU ou Produto...",className:`pl-7 pr-3 py-1.5 text-xs border rounded-lg focus:ring-green-500 focus:border-green-500 outline-none w-52 transition-colors ${te?"bg-green-50 border-green-300":"border-gray-300"}`})]}),m.jsxs("div",{className:"flex gap-1 ml-1",children:[m.jsx("button",{onClick:()=>Qe(!0),className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1.5 rounded-lg border transition-all ${Je?"bg-green-600 border-green-600 text-white shadow-sm":"bg-white border-gray-200 text-gray-500 hover:border-green-400 hover:text-green-600"}`,children:"Com Compras"}),m.jsx("button",{onClick:()=>Qe(!1),className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1.5 rounded-lg border transition-all ${Je?"bg-white border-gray-200 text-gray-500 hover:border-blue-400 hover:text-blue-600":"bg-blue-600 border-blue-600 text-white shadow-sm"}`,children:"Todos"})]}),Rs&&m.jsxs("span",{className:"ml-auto text-xs font-medium text-green-600 animate-pulse flex items-center gap-1",children:[m.jsx(Cl,{className:"w-3 h-3"}),"Exibindo onde foi vendido"]})]})]})},`${kn}-${yn}`):m.jsx(Ese,{clients:Ne,onUpdateClient:ve,onAddClient:Te,currentUserRole:n?.role,currentUserId:n?.id,currentUserName:n?.name,products:h,productCategories:ft,users:t,uploadedFiles:S,onGeneratePlusCodes:Re,onCNPJAuthError:()=>Cn(!0)})})})]}),et.isActive&&m.jsxs("div",{className:"absolute bottom-6 right-6 z-50 w-80 bg-white rounded-lg shadow-2xl border border-gray-200 overflow-hidden animate-slide-up",children:[m.jsx("div",{className:`h-1.5 w-full ${et.status==="error"?"bg-red-200":"bg-blue-100"}`,children:m.jsx("div",{className:`h-full transition-all duration-300 ${et.status==="completed"?"bg-green-500 w-full":et.status==="error"?"bg-red-500 w-full":"bg-blue-600"}`,style:{width:et.total>0?`${et.current/et.total*100}%`:"0%"}})}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{children:[m.jsxs("h4",{className:"text-sm font-bold text-gray-800 flex items-center gap-2",children:[et.status==="completed"&&m.jsx(Cl,{className:"w-4 h-4 text-green-500"}),et.status==="processing"&&m.jsx(Io,{className:"w-4 h-4 text-blue-500 animate-spin"}),et.status==="error"&&m.jsx(ts,{className:"w-4 h-4 text-red-500"}),et.status==="reading"?"Lendo Arquivo...":et.status==="processing"?"Processando Planilha":et.status==="completed"?"Processamento Concludo":"Erro no Processamento"]}),m.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[et.fileName," ",m.jsx("span",{className:"mx-1",children:""})," ",et.ownerName]})]}),m.jsx("button",{onClick:()=>{et.isActive&&et.status==="processing"?window.confirm("Gostaria de Parar de Enviar o Arquivo?")&&(Yn.current=!0,_t(se=>({...se,isActive:!1,status:"error",errorMessage:"Cancelado pelo usurio."}))):_t(se=>({...se,isActive:!1}))},className:"text-gray-400 hover:text-gray-600",children:m.jsx(Gs,{className:"w-4 h-4"})})]}),et.status==="processing"&&m.jsxs("div",{className:"mt-3",children:[m.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[m.jsx("span",{children:"Progresso (IA + Maps)"}),m.jsxs("span",{className:"font-mono",children:[et.current," / ",et.total]})]}),m.jsx("p",{className:"text-[10px] text-gray-400",children:"Voc pode continuar usando o sistema."})]}),et.status==="error"&&m.jsx("p",{className:"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded border border-red-100",children:et.errorMessage})]})]})]})]}),m.jsx(Zse,{isOpen:rr.isOpen,onClose:()=>Mr(se=>({...se,isOpen:!1})),onConfirm:rr.onConfirm,title:rr.title,message:rr.message,type:rr.type,confirmLabel:rr.confirmLabel,cancelLabel:rr.cancelLabel})]}):m.jsx(Kse,{progress:B,message:D})};class Qse extends bn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-6 font-sans",children:m.jsxs("div",{className:"max-w-xl w-full bg-white rounded-xl shadow-lg p-8 border border-red-200",children:[m.jsxs("div",{className:"flex items-center gap-4 text-red-600 mb-6",children:[m.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:m.jsx(ts,{className:"w-8 h-8"})}),m.jsx("h1",{className:"text-2xl font-bold",children:"Ops! Algo deu errado."})]}),m.jsx("p",{className:"text-gray-600 mb-4",children:"Ocorreu um erro inesperado ao processar os dados."}),m.jsx("div",{className:"bg-gray-900 text-gray-200 p-4 rounded-lg overflow-x-auto text-sm font-mono mb-6",children:this.state.error?.toString()}),m.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition-colors",children:"Recarregar Pgina"})]})}):this.props.children}}const f3=document.getElementById("root");if(!f3)throw new Error("Could not find root element to mount to");const eae=ZD.createRoot(f3);eae.render(m.jsx(bn.StrictMode,{children:m.jsx(Qse,{children:m.jsx(Xse,{})})}));
