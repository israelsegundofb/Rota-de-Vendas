import{c,r as s,j as e,T as d,X as y,p as C,Y as L,Z as E,_ as T,E as A,U as S}from"./index-BwcOJfob.js";import{C as k}from"./clock-DKgBlpa_.js";import{E as I}from"./eye-ByaDg-uO.js";const R=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],x=c("mouse-pointer-2",R);const O=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],U=c("refresh-cw",O);const M=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],D=c("timer",M),H=({currentUser:F,onClose:u})=>{const[p,m]=s.useState([]),[r,h]=s.useState(""),[l,g]=s.useState("ALL"),[n,f]=s.useState("ALL");s.useEffect(()=>{const t=L(m);return()=>t()},[]);const i=p.filter(t=>{const a=t.userName.toLowerCase().includes(r.toLowerCase())||t.details.toLowerCase().includes(r.toLowerCase()),o=l==="ALL"||t.category===l,w=n==="ALL"||t.action===n;return a&&o&&w}),b=t=>{switch(t){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";case"ERROR":return"bg-orange-100 text-orange-700";case"VIEW":return"bg-purple-100 text-purple-700";case"CLICK":return"bg-indigo-100 text-indigo-700";default:return"bg-slate-100 text-slate-700"}},j=t=>{switch(t){case"CLIENTS":return e.jsx(S,{className:"w-3.5 h-3.5"});case"PRODUCTS":return e.jsx(A,{className:"w-3.5 h-3.5"});case"CHAT":return e.jsx(T,{className:"w-3.5 h-3.5"});case"AUTH":return e.jsx(E,{className:"w-3.5 h-3.5"});case"NAVIGATION":return e.jsx(I,{className:"w-3.5 h-3.5"});case"INTERACTION":return e.jsx(x,{className:"w-3.5 h-3.5"});default:return e.jsx(d,{className:"w-3.5 h-3.5"})}},N=t=>{try{return new Date(t).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return t}},v=t=>{if(!t)return null;if(t<60)return`${t.toFixed(1)}s`;const a=Math.floor(t/60),o=(t%60).toFixed(0);return`${a}m ${o}s`};return e.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-5xl h-[90vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-xl text-white",children:e.jsx(d,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Logs e Auditoria"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"HistÃ³rico de atualizaÃ§Ãµes, acessos e usabilidade"})]})]}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-200 rounded-full transition-colors text-slate-400",title:"Fechar painel de logs",children:e.jsx(y,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-4 border-b border-slate-50 flex flex-wrap gap-3 items-center bg-white/80 sticky top-0 z-10",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por usuÃ¡rio ou detalhe...",className:"w-full pl-10 pr-4 py-2 bg-slate-100 border-none rounded-xl text-sm focus:ring-2 focus:ring-blue-500 transition-all",value:r,onChange:t=>h(t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"bg-slate-100 border-none rounded-xl text-xs font-bold py-2 px-4 focus:ring-2 focus:ring-blue-500",value:l,onChange:t=>g(t.target.value),title:"Filtrar por categoria",children:[e.jsx("option",{value:"ALL",children:"Todas Categorias"}),e.jsx("option",{value:"CLIENTS",children:"Clientes"}),e.jsx("option",{value:"PRODUCTS",children:"Produtos"}),e.jsx("option",{value:"USERS",children:"UsuÃ¡rios"}),e.jsx("option",{value:"CHAT",children:"Chat"}),e.jsx("option",{value:"AUTH",children:"Login/SeguranÃ§a"}),e.jsx("option",{value:"NAVIGATION",children:"NavegaÃ§Ã£o"}),e.jsx("option",{value:"INTERACTION",children:"InteraÃ§Ãµes"}),e.jsx("option",{value:"SYSTEM",children:"Sistema"})]}),e.jsxs("select",{className:"bg-slate-100 border-none rounded-xl text-xs font-bold py-2 px-4 focus:ring-2 focus:ring-blue-500",value:n,onChange:t=>f(t.target.value),title:"Filtrar por aÃ§Ã£o",children:[e.jsx("option",{value:"ALL",children:"Todas AÃ§Ãµes"}),e.jsx("option",{value:"CREATE",children:"CriaÃ§Ã£o (+)"}),e.jsx("option",{value:"UPDATE",children:"EdiÃ§Ã£o (âœŽ)"}),e.jsx("option",{value:"DELETE",children:"ExclusÃ£o (Ã—)"}),e.jsx("option",{value:"LOGIN",children:"Acesso Login (â†’)"}),e.jsx("option",{value:"VIEW",children:"VisualizaÃ§Ã£o (ðŸ‘)"}),e.jsx("option",{value:"CLICK",children:"Clique (ðŸ‘†)"}),e.jsx("option",{value:"ERROR",children:"Erro (âš )"}),e.jsx("option",{value:"SYNC",children:"Sincronia (â‡…)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 bg-green-50 text-green-600 px-3 py-1.5 rounded-full font-black text-[10px] uppercase tracking-wider border border-green-100 shadow-sm animate-pulse",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"LIVE"]}),e.jsxs("div",{className:"text-[10px] bg-blue-50 text-blue-600 px-3 py-1.5 rounded-full font-black uppercase tracking-wider border border-blue-100",children:[i.length," Eventos encontrados"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-slate-50/30",children:i.length>0?i.map(t=>e.jsxs("div",{className:"bg-white border border-slate-100 p-4 rounded-2xl shadow-sm hover:shadow-md transition-all flex flex-col md:flex-row gap-4 items-start md:items-center group",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-[180px]",children:[e.jsx("div",{className:"p-2 bg-slate-50 rounded-lg text-slate-400 group-hover:text-blue-500 group-hover:bg-blue-50 transition-colors",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase leading-none mb-1",children:N(t.timestamp)}),e.jsx("p",{className:"font-bold text-xs text-slate-700 truncate",children:t.userName}),e.jsx("p",{className:"text-[9px] font-medium text-slate-400 uppercase truncate",children:t.userRole})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 min-w-[140px]",children:[e.jsx("span",{className:`px-2 py-1 rounded-md text-[9px] font-black uppercase flex items-center gap-1 ${b(t.action)}`,children:t.action}),e.jsxs("span",{className:"px-2 py-1 rounded-md text-[9px] font-black uppercase bg-slate-50 text-slate-500 flex items-center gap-1 border border-slate-100",children:[j(t.category),t.category]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-slate-600 font-medium leading-relaxed italic",children:['"',t.details,'"']}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[t.metadata?.duration&&e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-600 rounded-md text-[10px] font-bold border border-purple-100",children:[e.jsx(D,{className:"w-3 h-3"}),"Tempo: ",v(t.metadata.duration)]}),t.metadata?.elementId&&e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-600 rounded-md text-[10px] font-bold border border-indigo-100",children:[e.jsx(x,{className:"w-3 h-3"}),"Elemento: ",t.metadata.elementId]}),t.metadata&&!t.metadata.duration&&!t.metadata.elementId&&Object.keys(t.metadata).length>0&&e.jsx("div",{className:"text-[10px] bg-slate-50 p-1 px-2 rounded-lg font-mono text-slate-400 overflow-hidden text-ellipsis whitespace-nowrap border border-dashed border-slate-200 max-w-[200px]",children:JSON.stringify(t.metadata)})]})]})]},t.id)):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-40 py-20",children:[e.jsx(U,{className:"w-12 h-12 text-slate-300 mb-4 animate-spin-slow"}),e.jsx("p",{className:"font-bold text-slate-400",children:"Nenhum log corresponde aos filtros"})]})})]})})};export{H as default};
